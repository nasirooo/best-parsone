if (self.CavalryLogger) { CavalryLogger.start_js(["7KXTz"]); }

__d("FundsAvailability",[],(function(a,b,c,d,e,f){e.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_TWO_DAY:80,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("IrisProtocolMessageLifetime",[],(function(a,b,c,d,e,f){e.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:3e4,TTL_1MINUTE:6e4,TTL_3MINUTES:18e4,TTL_5MINUTES:3e5,TTL_10MINUTES:6e5,TTL_15MINUTES:9e5,TTL_30MINUTES:18e5,TTL_1HOUR:36e5,TTL_2HOURS:72e5,TTL_4HOURS:144e5,TTL_8HOURS:288e5,TTL_12HOURS:432e5,TTL_24HOURS:864e5}}),null);
__d("MercuryAPIArgsSource",[],(function(a,b,c,d,e,f){e.exports={CHAT:"chat",JEWEL:"jewel",MERCURY:"mercury",MERCURYSYNC:"mercury_sync",WEBMESSENGER:"web_messenger",MESSENGER:"messenger"}}),null);
__d("MercuryAudioType",[],(function(a,b,c,d,e,f){e.exports={FileAttachment:"file_attachment",AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"}}),null);
__d("MessageLiveLocationClientSyncProtocolStopReason",[],(function(a,b,c,d,e,f){e.exports={EXPIRED:1,CANCELED:2,ARRIVED:3}}),null);
__d("MessengerEmojiConfig",[],(function(a,b,c,d,e,f){e.exports={emoji_colors:[0,127995,127996,127997,127998,127999]}}),null);
__d("MessengerFormattingConfig",[],(function(a,b,c,d,e,f){e.exports={boldConfig:{pattern:"([\\s_~'\"(]|^)\\*(\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s_~'\"(]|^)\\*(?:\\S(?:.*?\\S)??)\\*(?=[\\s_~,.;:!?'\")]|$)"},italicConfig:{pattern:"([\\s*~'\"(]|^)_(\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*~'\"(]|^)_(?:\\S(?:.*?\\S)??)_(?=[\\s*~,.;:!?'\")]|$)"},strikethroughConfig:{pattern:"([\\s*_'\"(]|^)~(\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_'\"(]|^)~(?:\\S(?:.*?\\S)??)~(?=[\\s*_,.;:!?'\")]|$)"},codeConfig:{pattern:"([\\s*_~'\"(]|^)`([^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)",nonCapturingPattern:"(?:[\\s*_~'\"(]|^)`(?:[^`\\r\\n](?:.*?[^`\\r\\n])??)`(?=[\\s\\w*_~,.;:!?'\")]|$)"},codeBlockConfig:{pattern:"(```)([\\s\\S]+?)```",nonCapturingPattern:"(```)([\\s\\S]+?)```"},codeBlockV2Config:{pattern:"(`{3,})(?:(?:((.*?)(?:\\r\\n?|\\n))([\\s\\S]*?))|(.+?))\\1\\s*?(?:\\r\\n?|\\n|$)",nonCapturingPattern:"(`{3,})([\\s\\S]+?)\\1\\s*((\\r\\n)|\\r|\\n|$)"},blockQuoteConfig:{pattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*?((\\r\\n)|\\r|\\n|$)",nonCapturingPattern:"(^>>> ?)((.|(\\r\\n)|\\r|\\n)*?\\S(.|(\\r\\n)|\\r|\\n)*?)^<<<\\s*((\\r\\n)|\\r|\\n|$)"},multipleInlineBlockQuoteConfig:{pattern:"((^> )(.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*",nonCapturingPattern:"(^> (.*\\S.*)((\\r\\n)|\\r|\\n)?)(^> ?(.*)((\\r\\n)|\\r|\\n)?)*"},singleInlineBlockQuoteConfig:{pattern:"(^> ?)(.*?$)",nonCapturingPattern:"^> ?(.*?$)"}}}),null);
__d("MNCommercePageSetting",[],(function(a,b,c,d,e,f){e.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"}}),null);
__d("PageCommItemStatus",[],(function(a,b,c,d,e,f){e.exports={FOLLOW_UP:"FOLLOW_UP",DONE:"DONE",TODO:"TODO",SPAM:"SPAM",DELETED:"DELETED"}}),null);
__d("StickerConstants",[],(function(a,b,c,d,e,f){e.exports={MOBILE_LIKE_STICKER_PACK_ID:"227877430692340",GRAVEYARD_PACK_ID:"604597256247273",LIKE_STICKER_ID:"227878347358915",HOT_LIKE_SMALL_STICKER_ID:"369239263222822",HOT_LIKE_MEDIUM_STICKER_ID:"369239343222814",HOT_LIKE_LARGE_STICKER_ID:"369239383222810",MRU_STICKER_PACK:"599061016853145",SEARCH_PACK_ID:"680229632032514",FEED_PACK_ID:"2239834712900285",OZ_PACK_ID:"1456625217993235",AVATARS_PACK_ID:"2191329907595522",TRENDING_STICKER_PACK_ID:"924487421216423",SPRITE_PADDING:"24",PayloadSource:{VIEW_ACTION:"view-action"},DEFAULT_FRAME_RATE:83,TRAY_SIZE:64,THREAD_SIZE:120}}),null);
__d("URLMatcherConfig",[],(function(a,b,c,d,e,f){e.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9999\u683c\u91cc\u62c9|\u9910\u5385|\u98df\u54c1|\u98de\u5229\u6d66|\u96fb\u8a0a\u76c8\u79d1|\u96c6\u56e2|\u901a\u8ca9|\u8d2d\u7269|\u8c37\u6b4c|\u8bfa\u57fa\u4e9a|\u8054\u901a|\u7f51\u7edc|\u7f51\u7ad9|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u73e0\u5b9d|\u70b9\u770b|\u6fb3\u9580|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u66f8\u7c4d|\u65f6\u5c1a|\u65b0\u95fb|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u8868|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5fae\u535a|\u5e7f\u4e1c|\u5de5\u884c|\u5bb6\u96fb|\u5a31\u4e50|\u5929\u4e3b\u6559|\u5927\u62ff|\u5927\u4f17\u6c7d\u8f66|\u5728\u7ebf|\u5609\u91cc\u5927\u9152\u5e97|\u5609\u91cc|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30dd\u30a4\u30f3\u30c8|\u30d5\u30a1\u30c3\u30b7\u30e7\u30f3|\u30bb\u30fc\u30eb|\u30b9\u30c8\u30a2|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u30af\u30e9\u30a6\u30c9|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0d2d\u0d3e\u0d30\u0d24\u0d02|\u0cad\u0cbe\u0cb0\u0ca4|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0b2d\u0b3e\u0b30\u0b24|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09f0\u09a4|\u09ad\u09be\u09b0\u09a4|\u09ac\u09be\u0982\u09b2\u09be|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u094b\u0924|\u092d\u093e\u0930\u0924\u092e\u094d|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0680\u0627\u0631\u062a|\u067e\u0627\u06a9\u0633\u062a\u0627\u0646|\u0647\u0645\u0631\u0627\u0647|\u0645\u0648\u0642\u0639|\u0645\u0648\u0628\u0627\u064a\u0644\u064a|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0643\u0627\u062b\u0648\u0644\u064a\u0643|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0639\u0631\u0628|\u0639\u0631\u0627\u0642|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u064a\u062a\u0643|\u0628\u0627\u0632\u0627\u0631|\u0628\u0627\u0631\u062a|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0639\u0644\u064a\u0627\u0646|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u0627\u0631\u0627\u0645\u0643\u0648|\u0627\u062a\u0635\u0627\u0644\u0627\u062a|\u0627\u0628\u0648\u0638\u0628\u064a|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u043a\u0430\u0442\u043e\u043b\u0438\u043a|\u0435\u044e|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|\u0431\u0433|\u03b5\u03bb|zw|zuerich|zone|zm|zippo|zip|zero|zara|zappos|za|yun|yt|youtube|you|yokohama|yoga|yodobashi|ye|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--w4rs40l|xn--w4r85el8fhu5dnra|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tiq49xqyj|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rvc1e0am3e|xn--rovu88b|xn--rhqv96g|xn--qxam|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--pbt977c|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbrx|xn--ngbe9e0a|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mix891f|xn--mgbx4cd0ab|xn--mgbtx2b|xn--mgbt3dhd|xn--mgbpl2fh|xn--mgbi4ecexp|xn--mgbgu82a|xn--mgberp4a5d4ar|xn--mgbca7dzdo|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbbh1a|xn--mgbb9fbpob|xn--mgbayh7gpa|xn--mgbai9azgqp6j|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgbaakc7dvf|xn--mgba7c0bbn0a|xn--mgba3a4f16a|xn--mgba3a3ejt|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpu716f|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--jvr189m|xn--jlq61u9w7b|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c8c|xn--h2brj9c|xn--h2breg3eve|xn--gk3at1e|xn--gecrj9c|xn--gckr3f0f|xn--g2xx48c|xn--fzys8d69uvgm|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--fct429k|xn--estv75g|xn--efvy88h|xn--eckvdtc9d|xn--e1a4c|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--cck2b3b|xn--c2br7g|xn--c1avg|xn--bck1b9a5dre4c|xn--b4w605ferd|xn--9krt00a|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90ae|xn--90a3ac|xn--8y0a063a|xn--80aswg|xn--80asehdb|xn--80aqecdr1a|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--5tzm5g|xn--5su34j936bgsg|xn--55qx5d|xn--55qw42g|xn--54b7fta0cc|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--45br5cyl|xn--42c2d9a|xn--3pxu8k|xn--3oq18vl8pn36a|xn--3hcrj9c|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--2scrj9c|xn--1qqw23a|xn--1ck2e1b|xn--11b4c3d|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|ws|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|vu|voyage|voto|voting|vote|volvo|volkswagen|vodka|vn|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vi|vg|vet|versicherung|verm\xf6gensberatung|verm\xf6gensberater|verisign|ventures|vegas|ve|vc|vanguard|vana|vacations|va|uz|uy|us|ups|uol|uno|university|unicom|uk|ug|uconnect|ubs|ubank|ua|tz|tw|tvs|tv|tushu|tunes|tui|tube|tt|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|tr|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|to|tn|tmall|tm|tl|tkmaxx|tk|tjx|tjmaxx|tj|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|th|tg|tf|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|td|tci|tc|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|sz|systems|symantec|sydney|sy|sx|swiss|swiftcover|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|st|srt|srl|sr|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|so|sncf|sn|smile|smart|sm|sling|sl|skype|sky|skin|ski|sk|sj|site|singles|sina|silk|si|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sh|sg|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|se|sd|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sc|sbs|sbi|sb|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|sa|ryukyu|rwe|rw|run|ruhr|rugby|ru|rsvp|rs|room|rogers|rodeo|rocks|rocher|ro|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|re|raid|radio|racing|qvc|quest|quebec|qpon|qa|py|pwc|pw|pub|pt|ps|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|pr|post|porn|politie|poker|pohl|pnc|pn|pm|plus|plumbing|playstation|play|place|pl|pk|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|ph|pg|pfizer|pf|pet|pe|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|page|pa|ovh|ott|otsuka|osaka|origins|organic|org|orange|oracle|open|ooo|onyourside|online|onl|onion|ong|one|omega|om|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nz|nyc|nu|ntt|nrw|nra|nr|np|nowtv|nowruz|now|norton|northwesternmutual|nokia|no|nl|nissay|nissan|ninja|nikon|nike|nico|ni|nhk|ngo|ng|nfl|nf|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|ne|nc|nba|navy|natura|nationwide|name|nagoya|nadex|nab|na|mz|my|mx|mw|mv|mutual|museum|mu|mtr|mtn|mt|msd|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mo|mn|mma|mm|mls|mlb|ml|mk|mitsubishi|mit|mint|mini|mil|microsoft|miami|mh|mg|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|me|md|mckinsey|mc|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|ma|ly|lv|luxury|luxe|lupin|lundbeck|lu|ltda|ltd|lt|ls|lr|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|lk|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|li|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|la|kz|kyoto|ky|kw|kuokgroup|kred|krd|kr|kpn|kpmg|kp|kosher|komatsu|koeln|kn|km|kiwi|kitchen|kindle|kinder|kim|kia|ki|kh|kg|kfh|kerryproperties|kerrylogistics|kerryhotels|ke|kddi|kaufen|juniper|juegos|jprs|jpmorgan|jp|joy|jot|joburg|jobs|jo|jnj|jmp|jm|jll|jlc|jio|jewelry|jetzt|jeep|je|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|it|istanbul|ist|ismaili|iselect|is|irish|ir|iq|ipiranga|io|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|in|immobilien|immo|imdb|imamat|im|il|ikano|ifm|ieee|ie|id|icu|ice|icbc|ibm|hyundai|hyatt|hughes|hu|ht|hsbc|hr|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hn|hm|hkt|hk|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|gy|gw|guru|guitars|guide|guge|gucci|guardian|gu|gt|gs|group|grocery|gripe|green|gratis|graphics|grainger|gr|gq|gp|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gn|gmx|gmo|gmbh|gmail|gm|globo|global|gle|glass|glade|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|george|genting|gent|gea|ge|gdn|gd|gbiz|gb|garden|gap|games|game|gallup|gallo|gallery|gal|ga|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fr|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fo|fm|fly|flowers|florist|flir|flights|flickr|fk|fj|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|fi|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|etisalat|et|esurance|estate|esq|es|erni|ericsson|er|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|edeka|eco|ec|eat|earth|dz|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|domains|doha|dog|dodge|doctor|docs|do|dnp|dm|dk|dj|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|de|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cr|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|co|cn|cm|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cl|ck|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|ci|church|chrysler|chrome|christmas|chintai|cheap|chat|chase|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|buy|business|builders|build|bugatti|budapest|bt|bs|brussels|brother|broker|broadway|bridgestone|bradesco|br|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bo|bnpparibas|bnl|bn|bmw|bms|bm|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|be|bd|bcn|bcg|bbva|bbt|bbc|bb|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|ba|azure|az|axa|ax|aws|aw|avianca|autos|auto|author|auspost|audio|audible|audi|auction|au|attorney|athleta|at|associates|asia|asda|as|arte|art|arpa|army|archi|aramco|arab|ar|aquarelle|aq|apple|app|apartments|aol|ao|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|am|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|al|akdn|airtel|airforce|airbus|aigo|aig|ai|agency|agakhan|ag|africa|afl|afamilycompany|af|aetna|aero|aeg|ae|adult|ads|adac|ad|actor|active|aco|accountants|accountant|accenture|academy|ac|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa))"}}),null);
__d("WorkChatBulkUpdatePinnedThreadsMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"ThreadBatchUpdatePinStatusData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"thread_batch_update_pin_status",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"ThreadBatchUpdatePinStatusResponsePayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"client_subscription_id",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"WorkChatBulkUpdatePinnedThreadsMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"WorkChatBulkUpdatePinnedThreadsMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"WorkChatBulkUpdatePinnedThreadsMutation",id:"1320325544758295",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MessengerUserProfileLocationUtilsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"LinkedField",alias:null,name:"address",storageKey:null,args:null,concreteType:"StreetAddress",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"postal_code",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"region",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerUserProfileLocationUtilsQuery",type:"Query",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:"user",name:"account_user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a]}]}]},operation:{kind:"Operation",name:"MessengerUserProfileLocationUtilsQuery",argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"viewer",storageKey:null,args:null,concreteType:"Viewer",plural:!1,selections:[{kind:"LinkedField",alias:"user",name:"account_user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[a,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"query",name:"MessengerUserProfileLocationUtilsQuery",id:"2746984198655487",text:null,metadata:{}}}}();e.exports=a}),null);
__d("TypingDetectorController",["ActorURI","AsyncRequest","AvailableList","AvailableListConstants","ChatVisibility","FBLogger","Keys","MercuryServerRequestsConfig","MessageRequestUtils","TypingDetector","TypingStates","clearTimeout","emptyFunction","ifRequired","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="/ajax/messaging/typ.php";a=function(){__p&&__p();function a(a,c,d,e,f,g,h,i){__p&&__p();var j=this;this._notifyState=function(a,c){if(!j.userID&&!j.threadID||j.thread&&!j.pageID&&!b("MessageRequestUtils").shouldSendTypingIndicators(j.thread)||!b("ChatVisibility").isOnline()||a===j.remoteState||b("ifRequired")("ChannelConnection",function(a){return a.disconnected()},function(){return!0}))return;j._sendRequest(a,j.userID,c)};if(!d)return;this.thread=a;this.userID=c;this.input=d;this.source=e;this.threadID=g;this.pageID=i;!this.threadID&&!this.userID&&b("FBLogger")("messenger_web_product","typing constructor").mustfix("UserId: %s, ThreadId: %s",JSON.stringify(this.userID),JSON.stringify(this.threadID));this.remoteState=b("TypingStates").INACTIVE;this.notifyTimer=null;f=f||{};this.notifyDelay=f.notifyDelay||this.notifyDelay;this._typingDetector=new(b("TypingDetector"))(d,h);this._typingDetector.init(f);this._typingDetector.subscribe("change",this._stateChange.bind(this))}var c=a.prototype;c.setUserAndThread=function(a,b){(this.userID!==a||this.threadID!==b)&&(this.resetState(),this.userID=a,this.threadID=b)};c.setIgnoreEnter=function(a){a=a?[b("Keys").RETURN]:[];this._typingDetector.setIgnoreKeys(a)};c.resetState=function(){this._notifyState(b("TypingStates").INACTIVE),this.remoteState=b("TypingStates").INACTIVE,this._typingDetector.reset(),b("clearTimeout")(this.notifyTimer),this.notifyTimer=null};c.destroy=function(){this.resetState(),this._typingDetector.destroy()};c._stateChange=function(a,c){c!=b("TypingStates").QUITTING?(b("clearTimeout")(this.notifyTimer),this.notifyTimer=b("setTimeoutAcrossTransitions")(b("shield")(this._notifyState,this,c),this.notifyDelay)):this._notifyState(c,!0)};c._sendRequest=function(a,c,d){this.remoteState=a;!this.threadID&&!c&&b("FBLogger")("messenger_web_product","typing").mustfix("Empty threadID and userID in params",window.location.toString());a={typ:a,to:c,source:this.source,thread:this.threadID};var e=this.pageID?b("ActorURI").create(g,this.pageID):g,f=this.threadID;a=new(b("AsyncRequest"))().setHandler(this._onTypResponse.bind(this,c)).setErrorHandler(function(a){b("FBLogger")("messenger_web_product","typing").mustfix("UserId: %s, ThreadId: %s",JSON.stringify(c),JSON.stringify(f))}).setData(a).setURI(e).setAllowCrossPageTransition(!0).setOption("asynchronous_DEPRECATED",!d);b("MercuryServerRequestsConfig").msgrRegion&&a.setRequestHeader("X-MSGR-Region",b("MercuryServerRequestsConfig").msgrRegion);a.send()};c._onTypResponse=function(a,c){c=c.getPayload()||{};c.offline&&b("AvailableList").set(a,b("AvailableListConstants").OFFLINE,"typing_response")};return a}();Object.assign(a.prototype,{notifyDelay:1e3});e.exports=a}),null);
__d("HovercardLink",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g,h={getBaseURI:function(){return new(g||(g=b("URI")))("/ajax/hovercard/hovercard.php")},constructEndpoint:function(a,b){return h.constructEndpointWithGroupAndLocation(a,b,null)},constructEndpointWithLocation:function(a,b){return h.constructEndpointWithGroupAndLocation(a,null,b)},constructEndpointWithGroupAndLocation:function(a,b,c,d){return h.constructEndpointWithGroupLocationAndExtraParams(a,b,c,d)},constructEndpointWithGroupLocationAndExtraParams:function(a,c,d,e,f){__p&&__p();f===void 0&&(f=null);var i=new(g||(g=b("URI")))(h.getBaseURI()).setQueryData({id:a.id}),j={};if(f!==null)for(var k in f)j[k]=f[k];(a.weakreference||e)&&c&&(j.group_id=c);d&&(j.hc_location=d);c&&(j.directed_target_id=c);i.addQueryData({extragetparams:JSON.stringify(j)});return i}};e.exports=h}),null);
__d("EventReminderDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EventReminderActions",["EventReminderDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({DELETE_EVENT_REMINDER:null,UPDATE_EVENT_REMINDER:null,CLEAR_ALL_REMINDERS:null});var g={Types:a,updateEventReminder:function(a,c,d,e){b("EventReminderDispatcher").dispatch({type:g.Types.UPDATE_EVENT_REMINDER,threadID:a,event:c,participantsEventStatus:e,eventID:d})},deleteEventReminder:function(a,c){b("EventReminderDispatcher").dispatch({type:g.Types.DELETE_EVENT_REMINDER,threadID:a,eventID:c})},clearAllReminders:function(a){b("EventReminderDispatcher").dispatch({type:g.Types.CLEAR_ALL_REMINDERS,threadID:a})}};e.exports=g}),null);
__d("EventReminderConstants",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({INITIAL:"initial",GOING:"going",WATCHED:"watched",UNWATCHED:"unwatched"});b=Object.freeze({ASSOCIATED_EVENT:"ASSOCIATED_EVENT"});c=Object.freeze({GOING:"GOING",DECLINED:"DECLINED",INVITED:"INVITED"});d=Object.freeze({NO_ERROR:"NO_ERROR",PAST_TIME:"PAST_TIME",AFTER_ONE_YEAR:"AFTER_ONE_YEAR"});e.exports={EventGuestStates:a,EventPlanType:b,GuestStates:c,TimeErrorType:d}}),null);
__d("MessengerWebGraphQLTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebGraphQLLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setQueryParams=function(a){this.$1.query_params=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={error_message:!0,event:!0,query_params:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerObjectAssociationType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({REGULAR_CHAT:null,GENERAL_CHAT:null})}),null);
__d("EventReminderMembersMap",["CurrentUser","EventReminderConstants","MercuryIDs","MessengerParticipants.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("EventReminderConstants").EventGuestStates,h=b("EventReminderConstants").GuestStates;a=function(){__p&&__p();function a(a){this.$1=a,this.$2=new Map(),this.$3=new Map(),this.$4=new Map(),this.$5=new Map(),this.$6=new Map(),this.$7=new Map()}var c=a.prototype;c.setAllMembers=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,h.INVITED);var d=[],e=[],f=[],g=[];for(var i in a){d.push(b("MercuryIDs").getParticipantIDFromUserID(i));var j=a[i];i===b("CurrentUser").getID()&&this.$2.set(c,j);var k={fbid:i,guestState:j,imageSrc:""};j===h.GOING?e.push(k):j===h.DECLINED?f.push(k):g.push(k)}j=e.concat(f,g);this.$3.set(c,j);this.$4.set(c,e);this.$7.set(c,!1);this.$8(c,d,j)};c.setAllMembersOfAssociatedEvent=function(a,c){__p&&__p();if(!a)return;this.$2.set(c,g.INITIAL);var d=[],e=[],f=[],h=[];a.map(function(a){d.push(b("MercuryIDs").getParticipantIDFromUserID(a.participant_id));var i=a.participant_id.toString();a=a.event_status||g.INITIAL;i===b("CurrentUser").getID()&&this.$2.set(c,a);i={fbid:i,guestState:a,imageSrc:""};a===g.GOING?e.push(i):a===g.WATCHED?f.push(i):h.push(i)},this);a=e.concat(f,h);this.$3.set(c,a);this.$4.set(c,e);this.$5.set(c,f);this.$6.set(c,h);this.$7.set(c,!1);this.$8(c,d,a)};c.clearMembers=function(a){this.$2["delete"](a),this.$3["delete"](a),this.$4["delete"](a),this.$5["delete"](a),this.$6["delete"](a)};c.getAllMembers=function(a){return this.$3.get(a)};c.getGoingMembers=function(a){return this.$4.get(a)};c.getInterestedMembers=function(a){return this.$5.get(a)};c.getSelfGuestState=function(a){return!this.$2.has(a)?h.INVITED:this.$2.get(a)};c.getProfileImagesLoaded=function(a){return!!this.$7.get(a)};c.$8=function(a,c,d){var e=this;b("MessengerParticipants.bs").getBigImageMulti(c,function(c){for(var f=0;f<d.length;f++)d[f].fbid&&(d[f].imageSrc=c[b("MercuryIDs").getParticipantIDFromUserID(d[f].fbid)]);e.$7.set(a,!0);e.$1.__emitChange()})};return a}();e.exports=a}),null);
__d("EventReminderStateStore",["EventReminderActions","EventReminderConstants","EventReminderDispatcher","EventReminderMembersMap","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("EventReminderConstants").EventPlanType;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("EventReminderDispatcher"))||this;c.$EventReminderStateStore1={};c.$EventReminderStateStore2={};c.$EventReminderStateStore3=new Map();c.$EventReminderStateStore4=new Map();return c}var d=c.prototype;d.getEvent=function(a,b){b=b||a;return this.$EventReminderStateStore1[a]?this.$EventReminderStateStore1[a][b]:void 0};d.getSingleEventByThreadID=function(a){return this.$EventReminderStateStore2[a]};d.getEventsByThreadID=function(a){return this.$EventReminderStateStore1[a]};d.getEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getAllMembers(b)};d.getSelfGuestState=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return a&&a.getSelfGuestState(b)};d.getNumOfGoingMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getGoingMembers(b);return a?a.length:0};d.getNumOfInterestedMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a=a&&a.getInterestedMembers(b);return a?a.length:0};d.getProfileImagesLoaded=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);return!a?!1:a.getProfileImagesLoaded(b)};d.shouldShowCTA=function(a,b,c){return!1};d.clearEventMembers=function(a,b){b=b||a;a=this.$EventReminderStateStore3.get(a);a&&a.clearMembers(b)};d.getTransformedEvent=function(a){if(a.room_type==="EVENT"){var b=a.event_place&&a.event_place.name,c=a.event_place&&a.event_place.address&&a.event_place.address.single_line_full_address;return{allowRSVP:!0,eventDate:a.start_timestamp,eventName:a.name,eventLocationName:b,eventLocationAddress:c,eventID:a.id.toString(),eventType:g.ASSOCIATED_EVENT,exists:!0}}return{allowRSVP:!!a.track_rsvp,eventDate:a.event_time,eventName:a.title,eventLocationName:a.location_name,eventLocationAddress:a.location_address,eventID:a.oid.toString(),eventType:a.event_type,exists:!0}};d.__onDispatch=function(a){__p&&__p();var c=b("EventReminderActions").Types,d=a.threadID,e=a.eventID||a.threadID;this.$EventReminderStateStore3.get(d)||this.$EventReminderStateStore3.set(d,new(b("EventReminderMembersMap"))(this));var f=this.$EventReminderStateStore3.get(d);this.$EventReminderStateStore1[d]===void 0&&(this.$EventReminderStateStore1[d]={});switch(a.type){case c.UPDATE_EVENT_REMINDER:var g=a.event;this.$EventReminderStateStore1[d][e]=this.getTransformedEvent(g);this.$EventReminderStateStore1[d][e].eventType!=="M_REMINDER"&&(this.$EventReminderStateStore2[d]=this.$EventReminderStateStore1[d][e]);this.$EventReminderStateStore1[d][e].allowRSVP&&(g.room_type==="EVENT"?f&&f.setAllMembersOfAssociatedEvent(a.participantsEventStatus,e):f&&f.setAllMembers(g.event_members,e));break;case c.DELETE_EVENT_REMINDER:this.$EventReminderStateStore1[d][e]&&(this.$EventReminderStateStore1[d][e].exists=!1,this.clearEventMembers(d,e));this.$EventReminderStateStore2[d]&&this.$EventReminderStateStore2[d].eventID===e&&(this.$EventReminderStateStore2[d].exists=!1);break;case c.CLEAR_ALL_REMINDERS:delete this.$EventReminderStateStore1[d];delete this.$EventReminderStateStore2[d];break}this.__emitChange()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MercuryMessageRenderLocations",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CHAT:"chat",MESSENGER:"messenger",PAGES:"pages"});e.exports=a}),null);
__d("MessengerFormattingUtils",["cx","CurrentUser","JSResource","MessengerFormattingConfig","Newline.react","React","UnicodeUtils","lazyLoadComponent","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("lazyLoadComponent")(b("JSResource")("MessengerCodeBlock.react").__setRef("MessengerFormattingUtils"));function a(a){return{offset:a[1].length,length:(h||(h=b("UnicodeUtils"))).strlen(a[2])+2,innerOffset:1,innerText:a[2]}}function c(a){return{offset:a[1].length,length:(h||(h=b("UnicodeUtils"))).strlen(a[2])+2,innerOffset:1,innerText:a[2].replace(/\s\s+/g," ").trim()}}function d(a){return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(a[1]),innerText:a[2]}}g=b("MessengerFormattingConfig");var j={pattern:new RegExp(g.boldConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.boldConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("b",{children:a})},getRangeInMatch:a,recursivelyFormat:!0},k={pattern:new RegExp(g.italicConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.italicConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("i",{children:a})},getRangeInMatch:a,recursivelyFormat:!0};a={pattern:new RegExp(g.strikethroughConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.strikethroughConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("s",{children:a})},getRangeInMatch:a,recursivelyFormat:!0};c={pattern:new RegExp(g.codeConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.codeConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("code",{className:b("CurrentUser").isWorkUser()?"_7ilw":"",children:a})},getRangeInMatch:c,recursivelyFormat:!1};var l=function(a){var c,d=a.children;a=a.range;return(c=b("React")).jsxs(c.Fragment,{children:[c.jsx(c.Suspense,{fallback:c.jsx("div",{className:"_7mv7",children:d}),children:c.jsx(i,{range:a,children:d})}),c.jsx(b("Newline.react"),{})]})},m={pattern:new RegExp(g.codeBlockConfig.pattern,"g"),nonCapturingPattern:new RegExp(g.codeBlockConfig.nonCapturingPattern),formatter:function(a){a=a.children;return b("React").jsx("code",{children:a})},getRangeInMatch:d,recursivelyFormat:!1};l={pattern:new RegExp(g.codeBlockV2Config.pattern,"g"),nonCapturingPattern:new RegExp(g.codeBlockV2Config.nonCapturingPattern),formatter:l,getRangeInMatch:function(a){var c=a[3]||"",d=a[4]!==void 0?a[4]:a[5],e=a[1]||"",f=a[2]||"";return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(e)+h.strlen(f),innerText:d,codeBlockLanguage:c}},recursivelyFormat:!1};var n=function(a){a=a.children;return b("React").jsxs(b("React").Fragment,{children:[b("React").jsxs("blockquote",{className:"_pye"+(b("CurrentUser").isWorkUser()?" _7ilx":""),children:[b("React").jsx("div",{className:"_pyf"}),a]}),b("React").jsx(b("Newline.react"),{})]})};d={pattern:new RegExp(g.blockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.blockQuoteConfig.nonCapturingPattern,"m"),formatter:n,getRangeInMatch:d,recursivelyFormat:!0};n={pattern:new RegExp(g.multipleInlineBlockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.multipleInlineBlockQuoteConfig.nonCapturingPattern,"m"),formatter:n,getRangeInMatch:function(a){var c=a[0],d=(h||(h=b("UnicodeUtils"))).strlen(c);a=h.strlen(a[2]);return{offset:0,length:d,innerOffset:a,innerText:h.substring(c,a,d)}},recursivelyFormat:!0,getAdditionalInnerRanges:function(a){return q(a.innerText,[o]).map(function(b){return babelHelpers["extends"]({},b,{offset:b.offset+a.innerOffset,innerOffset:b.innerOffset+a.innerOffset})})}};var o={pattern:new RegExp(g.singleInlineBlockQuoteConfig.pattern,"gm"),nonCapturingPattern:new RegExp(g.singleInlineBlockQuoteConfig.nonCapturingPattern,"m"),formatter:function(a){a=a.children;return a},getRangeInMatch:function(a){return{offset:0,length:(h||(h=b("UnicodeUtils"))).strlen(a[0]),innerOffset:h.strlen(a[1]),innerText:a[2]}},recursivelyFormat:!0},p=[d,j,k,a,c,n];p.push(b("CurrentUser").isWorkUser()?l:m);function f(a,b){b===void 0&&(b=p);for(var c=0;c<b.length;c++){var d=b[c].nonCapturingPattern;if(d.test(a))return!0}return!1}function q(a,c){__p&&__p();c===void 0&&(c=p);var d=[];for(var e=0;e<c.length;e++){var f=c[e];f.pattern.lastIndex=0;var g=void 0;while((g=f.pattern.exec(a))!=null){g=b("nullthrows")(g);var i=f.getRangeInMatch(g),j=a.substr(0,g.index+i.offset);j=(h||(h=b("UnicodeUtils"))).strlen(j);j={offset:j,length:i.length,innerText:i.innerText,innerOffset:j+i.innerOffset,formatter:f.formatter,recursivelyFormat:f.recursivelyFormat,codeBlockLanguage:i.codeBlockLanguage};i=f.getAdditionalInnerRanges?f.getAdditionalInnerRanges(j):[];d.push(j);d=d.concat(i)}}return d}e.exports={defaultFormatConfigs:p,hasMatch:f,getRanges:q,formatConfigs:{bold:j,italic:k,strikethrough:a,blockcode:m,codeblockV2:l,code:c,blockquote:d,multipleInlineBlockquote:n,singleInlineBlockquote:o}}}),null);
__d("MessengerMathUtils",["UnicodeUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=2,i=/^(?:\$\$|\\\[)[\s\S]*?\S[\s\S]*?(?:\$\$|\\\])$/,j=/\\\([\s\S]*?\S[\s\S]*?\\\)/g;function a(a){return i.test(a)}function c(a){return a.substring(h,a.length-h)}function d(a){j.lastIndex=0;return j.test(a)}function f(a,c){__p&&__p();c===void 0;c=[];j.lastIndex=0;var d;while((d=j.exec(a))!==null){d=b("nullthrows")(d);var e=a.substring(0,d.index);e=(g||(g=b("UnicodeUtils"))).strlen(e);c.push({offset:e,length:g.strlen(d[0]),math:!0})}return c}function k(a){var b=a.length,c=0,d=0;for(var e=0;e<b;e++)a[e]==="\\"?a.slice(e,e+6)==="\\begin"?(c+=2,d=Math.max(d,c)):a.slice(e,e+4)==="\\end"?c-=2:e++:a[e]==="{"?(c++,d=Math.max(d,c)):a[e]==="}"&&c--;return d}e.exports={MATH_DELIMITER_LENGTH:h,isMathBlock:a,hasInlineMath:d,getInlineMathRanges:f,getMathBlockInner:c,getMaxBraceDepth:k}}),null);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),null);
__d("MessengerTextWithEntities.react",["BaseTextWithEntities.react","Link.react","MessengerTextWithEmoticons.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.replace(/<3\b|&hearts;/g,"\u2665")}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){if(d.props.renderEmoticons||d.props.renderEmoji)return b("React").jsx(b("MessengerTextWithEmoticons.react"),{text:a,customSize:d.props.customSize,renderEmoticons:d.props.renderEmoticons,renderEmoji:d.props.renderEmoji});else return g(a)},d.$2=function(a,c){if(d.props.interpolator)return d.props.interpolator(a,c);else return b("React").jsx(b("Link.react"),{href:c.entity,children:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("BaseTextWithEntities.react"),babelHelpers["extends"]({},this.props,{aggregatedRanges:this.props.aggregatedRanges,imageRanges:this.props.imageRanges,metaRanges:this.props.metaRanges,rangeRenderer:this.$2,ranges:this.props.ranges,text:this.props.text,textRenderer:this.$1}))};return c}(b("React").Component);e.exports=a}),null);
__d("MercuryMessageBody.react",["cx","fbt","BootloadedComponent.react","CurrentUser","DateConsts","EmojiRenderer","EmoticonEmojiList","EmoticonsList","EventRemindersGating","EventReminderStateStore","JSResource","Link.react","LinkRanges","MercuryIDs","MercuryMessageRenderLocations","MessengerFormattingUtils","MessengerMathUtils","MessengerSupportedEmojiUtils","MessengerTextWithEntities.react","P2PTriggersUtils","React","RedditLinkMatcher","RedditLinkRanges","TextWithEntities.react","TextWithEntitiesMetadataType","UnicodeUtils","URI","URLMatcher","emptyFunction","getURLRanges","gkx","ifRequired","prop-types","requireWeak","shouldAddMRefParam"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=b("LinkRanges").module,l=function(){l=b("emptyFunction"),b("ifRequired")("ChatAppActions",function(a){a.setInitialDisplayDone()})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.interpolator=function(a,c){__p&&__p();if(c.className)return b("React").jsx("span",{className:c.className,children:a});if(c.math)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{children:a}),body:d.$4(a),fallbackBody:a,inline:!0,stripDelimiters:!0,className:"_1e4d _1e4e"});if(c.id){var e={};!b("CurrentUser").isWorkUser()&&!d.props.isFromViewer&&d.props.threadCustomColor&&(e.color=d.props.threadCustomColor);var f=d.props.onContactSelect,g=d.props.threadID?b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)===c.id:!1,h=new(i||(i=b("URI")))("/ajax/hovercard/user.php").setQueryData({id:c.id}),j=b("gkx")("678279");h=b("React").jsx(b("Link.react"),{className:"_ih-"+(b("CurrentUser").isWorkUser()&&c.id===b("CurrentUser").getID()?" _1zle":""),href:g?"#":c.url,"data-hovercard":j?h:null,style:e,onClick:f&&!g?function(a){d.$3(f,c,a)}:b("emptyFunction"),children:a});!g&&f&&!j&&(typeof a==="string"&&(c.contactName=a&&a.replace("@","")),h=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerAvatarActions.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:h,avatar:h,contact:c,showSendMessageItem:!0,onAction:d.props.onContactSelect}));return h}if(c.formatter){e=c.formatter;g=c.recursivelyFormat?d.renderBody(c.innerText,!0,c.innerOffset):c.innerText;return b("React").jsx(e,{range:c,children:g})}if(c.entity&&c.entity.url){j=new(i||(i=b("URI")))(c.entity.url.replace(/#+$/,""));b("shouldAddMRefParam")(j)&&j.addQueryData({__mref:"mb"});h=j.toString();if((i||(i=b("URI"))).isValidURI(h))return b("React").jsx(b("Link.react"),{href:{url:h,shimhash:c.entity.shimhash},s:c.entity.s,target:"_blank",children:a});else return a}if(!c.entity&&c.id===void 0){e=typeof c.type==="number"?c.type:b("TextWithEntitiesMetadataType")[c.type];switch(e){case 0:return b("React").jsx("span",{className:"_2y9",title:JSON.stringify(c.data),children:a});case 1:return d.renderConceptMetadata(a,c.data);case 2:return d.renderIntentMetadata(a,c.data);default:return a}}return a};d.state=d.parseMessageBody(c);return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){(this.props.body!==a.body||this.props.metaRanges!==a.metaRanges||this.props.ranges!==a.ranges)&&this.setState(this.parseMessageBody(a))};d.parseMessageBody=function(a){__p&&__p();var c=(a.body||"").replace(/\s+$/,""),d=this.$1(a.metaRanges||[]);d={normalizedBody:c,isEncrypted:!1,isMathBlock:!1,isRichText:!1,ranges:[],filteredMetaRanges:d};if(c.length===0)return d;if(c.startsWith("?OTR")){d.isEncrypted=!0;return d}if(b("MessengerMathUtils").isMathBlock(c)){d.isMathBlock=!0;return d}var e=a.ranges,f=a.metaRanges;f=e&&e.length||f&&f.length||b("EmoticonsList").noncapturingRegexp.test(c)||b("EmojiRenderer").containsEmoji(c)||b("URLMatcher").match(c)||k&&k.hasMatch(c)||b("RedditLinkMatcher").isMatch(c)||this.$2(c,a)||b("MessengerSupportedEmojiUtils").containsEmoji(c)||b("EmoticonEmojiList").noncapturingRegexp.test(c)||b("MessengerFormattingUtils").hasMatch(c)||b("MessengerMathUtils").hasInlineMath(c);if(!f)return d;d.isRichText=!0;e&&e.length===1&&e[0].className==="__in"&&(e=b("getURLRanges")(c).concat(e));e=e||[];e.forEach(function(a){if(a.id){var d=c.substring(0,a.offset);a.offset=(j||(j=b("UnicodeUtils"))).strlen(d)}});e=e.concat(b("getURLRanges")(c));k&&(e=e.concat(k.get(c)));e=e.concat(b("RedditLinkRanges").get(c));e=e.concat(b("MessengerFormattingUtils").getRanges(c));e=e.concat(b("MessengerMathUtils").getInlineMathRanges(c));d.ranges=e.filter(function(a){return a!=void 0});return d};d.hasFormatting=function(){return this.state.isRichText||this.state.isMathBlock||this.state.isEncrypted};d.$3=function(a,b,c){c.preventDefault()};d.$4=function(a){if(this.props.isFromViewer)return"\\color{#fff}{"+b("MessengerMathUtils").getMathBlockInner(a)+"}";else return b("MessengerMathUtils").getMathBlockInner(a)};d.renderConceptMetadata=function(a,b){if(!b)return a;return b.intent_name||b.name?this.renderIntentMetadata(a,b):a};d.renderIntentMetadata=function(a,c){__p&&__p();if(!c)return a;var d=c.intent_name||c.name;switch(d){case"request_time":return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ServicesVerticalRequestTimeTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{children:a}),data:c,text:a,threadID:this.props.threadID});case"timestamp":if(this.$5(c.value)&&b("EventRemindersGating").shouldShowTriggerWords)if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{children:a}),data:c,text:a,threadID:this.props.threadID});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanTriggers.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{children:a}),data:c,text:a,threadID:this.props.threadID});return a;default:return a}};d.renderIntentCTA=function(a){__p&&__p();if(a){var c=a.intent_name||a.name;switch(c){case"create_event":b("requireWeak")("EventReminderActionsLogger",function(a){a.logTriggerOnTriggerCTA()});c=this.props.threadID;var d=c&&this.$5(a.timestamp)&&b("EventReminderStateStore").shouldShowCTA(c,a.confidence);if(!d)return null;if(this.props.renderLocation===b("MercuryMessageRenderLocations").CHAT)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{}),data:a,threadID:c});else if(this.props.renderLocation===b("MercuryMessageRenderLocations").MESSENGER)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerEventPlanCTA.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("span",{}),data:a,threadID:c})}}return null};d.renderCTAs=function(a){var c=null;if(a.length>0){a=a[0]||{};var d=typeof a.type==="number"?a.type:b("TextWithEntitiesMetadataType")[a.type];switch(d){case 1:case 2:c=this.renderIntentCTA(a.data);break}}return c};d.renderBody=function(a,c,d){__p&&__p();c===void 0&&(c=!1);d===void 0&&(d=0);var e=this.state,f=e.isRichText,g=e.ranges;e=e.filteredMetaRanges;var h=(j||(j=b("UnicodeUtils"))).strlen(a);if(!f)return b("React").jsx("span",{className:this.props.className,children:a});c&&(g=g.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}),e=e.filter(function(a){return a.offset>=d&&a.offset+a.length<=d+h}).map(function(a){return babelHelpers["extends"]({},a,{offset:a.offset-d})}));f={className:this.props.className,interpolator:this.interpolator,metaRanges:e,ranges:g,renderEmoji:!0,renderEmoticons:!0,text:a};if(this.$2(a)){e=b("React").jsx(b("TextWithEntities.react"),babelHelpers["extends"]({},f));return b("React").jsx(b("BootloadedComponent.react"),babelHelpers["extends"]({bootloadPlaceholder:e,bootloadLoader:b("JSResource")("TextWithEntitiesAndP2P.react").__setRef("MercuryMessageBody.react")},f,{getMessengerEmote:this.$6,isSupportedEmoji:this.$7,threadID:this.props.threadID}))}g=b("React").jsx(b("MessengerTextWithEntities.react"),babelHelpers["extends"]({},f));if(c)return g;a=this.renderCTAs(this.props.metaRanges||[]);return!a?g:b("React").jsxs("span",{children:[g,a]})};d.render=function(){__p&&__p();var a=this.state,c=a.normalizedBody,d=a.isEncrypted;a=a.isMathBlock;if(c.length===0)return null;l();if(this.props.plainText)return b("React").jsx("span",{children:c});else if(d)return b("React").jsx("span",{className:"_89h",children:h._("[encrypted message]")});else if(a)return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("MessengerMath.react").__setRef("MercuryMessageBody.react"),bootloadPlaceholder:b("React").jsx("div",{children:c}),body:this.$4(c),fallbackBody:c,stripDelimiters:!0,className:"_1e4d"});else return this.renderBody(c)};d.$7=function(a){return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)};d.$6=function(a){a=b("EmoticonEmojiList").emote2emojis[a];return b("MessengerSupportedEmojiUtils").isSupportedEmojiKey(a)?a:null};d.$5=function(a){a=new Date(a*b("DateConsts").MS_PER_SEC);var c=new Date(Date.now()+5*b("DateConsts").MS_PER_MIN),d=new Date(new Date().setFullYear(new Date().getFullYear()+1));return a>c&&a<d};d.$1=function(a){var b=a.filter(function(a){return a.data&&(a.data.intent_name==="create_event"||a.data.name==="create_event")});return b.length!==0?b:a};d.$2=function(a,c){c===void 0&&(c=this.props);return!!(c.threadID&&b("P2PTriggersUtils").canSeeTriggers(c.threadID)&&b("P2PTriggersUtils").getMatches(a))};return c}(b("React").PureComponent);a.propTypes={body:(c=b("prop-types")).string,customLike:c.object,isFromViewer:c.bool,metaRanges:c.array,ranges:c.array,threadCustomColor:c.string,threadID:c.string,onContactSelect:c.func,renderLocation:c.oneOf([b("MercuryMessageRenderLocations").CHAT,b("MercuryMessageRenderLocations").MESSENGER,b("MercuryMessageRenderLocations").PAGES])};e.exports=a}),null);
__d("MessengerWebDeltasTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebDeltasLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDeltaEvent=function(a){this.$1.delta_event=a;return this};c.setDeltaType=function(a){this.$1.delta_type=a;return this};c.setIgnoreReason=function(a){this.$1.ignore_reason=a;return this};c.setSyncSeqID=function(a){this.$1.sync_seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={delta_event:!0,delta_type:!0,ignore_reason:!0,sync_seq_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("Bootload.bs",["bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=function(c){return b("bs_curry")._1(a.doLoad,function(a){return b("bs_curry")._1(c,a.bootloadable)})};return{load:c}}f.Create=a}),null);
__d("MessengerDesktopNotificationPermissions",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:"default",DENIED:"denied",GRANTED:"granted"});e.exports=a}),null);
__d("MessengerDesktopNotifications",["MessengerDesktopNotificationPermissions","Run","UserAgent","WorkplaceChatHelper"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=5e3,h=new Map();function a(){h.forEach(function(a,b,c){a.close&&a.close()})}c={_closeTimer:null,isSupported:function(){return!!window.Notification},checkPermission:function(){if(window.Notification)return window.Notification.permission},hasDefaultSound:function(){return b("UserAgent").isBrowser("FireFox")&&b("UserAgent").isPlatform("Mac OS X")},isDenied:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").DENIED},isGranted:function(){return this.checkPermission()===b("MessengerDesktopNotificationPermissions").GRANTED},requestPermission:function(a){window.Notification&&window.Notification.requestPermission(a)},showNotification:function(a){__p&&__p();if(this.isGranted()){var c=window.Notification?new window.Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,silent:a.silent}):{};h.set(a.tag,c);a.onShow&&a.onShow();c.onclick=function(){b("WorkplaceChatHelper").isDesktopChatApp()&&b("WorkplaceChatHelper").showWindow(),a.onClick()};c.onclose=function(){h["delete"](a.tag)};this._closeTimer=setTimeout(function(){c.close()},a.closeTime||g);return c}else return null},removeNotification:function(a){a=h.get(a);a&&a.close()}};b("Run").onUnload(a);e.exports=c}),null);
__d("MessengerSharedMediaActionsLoader",["JSResource"],(function(a,b,c,d,e,f){"use strict";a={deletePhotos:function(a,c){b("JSResource").loadAll([b("JSResource")("MessengerSharedMediaActions").__setRef("MessengerSharedMediaActionsLoader")],function(b){b.deletePhotos(a,c)})}};e.exports=a}),null);
__d("MercurySyncHolesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MercurySyncHolesLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setDifference=function(a){this.$1.difference=a;return this};c.setSeqID=function(a){this.$1.seq_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTopicType=function(a){this.$1.topic_type=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={difference:!0,seq_id:!0,time:!0,topic_type:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryMessageError.react",["cx","CurrentUser","Link.react","MercuryErrorInfo","MercuryMessageActions","React","ServerHTML.react","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.messageResend=function(a){a.stopPropagation();a=d.props.message;a=a.error_data;b("MercuryErrorInfo").isTransient(a)&&b("MercuryMessageActions").getForFBID(d.props.authorFBID).resend(d.props.message)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.message,c=a.error_data;return b("React").jsxs(b("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",className:b("joinClasses")(this.props.className,this.$1(a)),tabIndex:b("MercuryErrorInfo").isTransient(c)?0:null,onClick:this.messageResend,children:[b("React").jsx("i",{className:"_2fs1"}),b("React").jsx(b("ServerHTML.react"),{className:"_61ag",blob:this.$2(a)})]}))};d.$1=function(a){if(b("MercuryErrorInfo").hasErrorStatus(a))return"_2fs2 _2fs3"+(b("MercuryErrorInfo").isTransient(a.error_data)?" _2fs4":"")+(b("MercuryErrorInfo").isPermanent(a.error_data)?" _2fs5":"");else return"_2fs6 _2fs2"};d.$2=function(a){var c="",d=a.error_data;if(b("MercuryErrorInfo").hasErrorStatus(a)){a=b("MercuryErrorInfo").getMessage(d);a&&(c=a)}return c};return c}(b("React").Component);a.propTypes={authorFBID:b("prop-types").string,message:b("prop-types").object.isRequired};a.defaultProps={authorFBID:b("CurrentUser").getID()};e.exports=a}),null);
__d("TooltipMixinClass.react",["DOM","React","ReactDOM","TooltipData"],(function(a,b,c,d,e,f){__p&&__p();function g(a){a=a.tooltip;return a!=null&&b("React").isValidElement(a)}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={tooltipContainer:g(d.props)?b("DOM").create("div"):null},c)||babelHelpers.assertThisInitialized(d)}c.getDerivedStateFromProps=function(a,c){a=g(a);c=c.tooltipContainer;if(c&&!a)return{tooltipContainer:null};else if(!c&&a)return{tooltipContainer:b("DOM").create("div")};return null};var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(a,b){b.tooltipContainer&&!this.state.tooltipContainer&&this.$2(b.tooltipContainer),this.$1()};d.$1=function(){var a=this.state.tooltipContainer,c=this.props.tooltip;if(c!=null&&b("React").isValidElement(c)&&a!=null){var d=function(){return c};b("ReactDOM").render(b("React").jsx(d,{}),a)}else a=this.props.tooltip;a!=null?b("TooltipData").set(b("ReactDOM").findDOMNode(this),a,this.props.position,this.props.alignH):b("TooltipData").remove(b("ReactDOM").findDOMNode(this))};d.componentWillUnmount=function(){this.state.tooltipContainer&&this.$2(this.state.tooltipContainer),b("TooltipData").remove(b("ReactDOM").findDOMNode(this))};d.$2=function(a){b("ReactDOM").unmountComponentAtNode(a)};return c}(b("React").Component);e.exports=a}),null);
__d("TooltipLink.react",["React","TooltipMixinClass.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("a",babelHelpers["extends"]({},this.props,{children:this.props.children}))};return c}(b("TooltipMixinClass.react"));e.exports=a}),null);
__d("AbstractBadge.react",["cx","invariant","React","formatNumber","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a){return parseInt(a,10)===a}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.count,d=a.maxcount,e=a.label;a=babelHelpers.objectWithoutPropertiesLoose(a,["count","maxcount","label"]);i(c)||h(0,186);i(d)||h(0,187);var f="_51lp"+(c>d?" _51lr":"")+(!this.props.allowZero&&c===0?" hidden_elem":"");e=e?b("React").jsxs("span",{className:"accessible_elem","aria-hidden":c?"false":"true",children:["\xa0",e]}):null;c=b("formatNumber").withMaxLimit(c,d);e!==null&&(c=b("React").jsx("span",{"aria-hidden":"true",children:c}));return b("React").jsxs("span",babelHelpers["extends"]({},a,{className:b("joinClasses")(this.props.className,f),children:[c,e]}))};return c}(b("React").PureComponent);a.propTypes={className:(c=b("prop-types")).string,count:c.number.isRequired,maxcount:c.number,label:c.string};a.defaultProps={maxcount:20};e.exports=a}),null);
__d("XUIBadge.react",["cx","AbstractBadge.react","React","joinClasses","prop-types"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.type;a="_5ugh"+(a==="regular"?" _5ugf":"")+(a==="special"?" _5ugg":"");return b("React").jsx(b("AbstractBadge.react"),babelHelpers["extends"]({},this.props,{className:b("joinClasses")(this.props.className,a),type:null}))};return c}(b("React").Component);a.propTypes={type:b("prop-types").oneOf(["regular","special"]),allowZero:b("prop-types").bool};a.defaultProps={type:"regular"};e.exports=a}),null);
__d("XUIContextualDialogBody.react",["React"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("div",{className:this.props.className,children:this.props.children})};return c}(b("React").Component);e.exports=a}),null);
__d("XUIContextualDialogFooter.react",["cx","React","XUIOverlayFooter.react","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("XUIOverlayFooter.react"),{className:b("joinClasses")(this.props.className,"_572u"),children:this.props.children})};return c}(b("React").Component);e.exports=a}),null);
__d("XUIContextualDialogTitle.react",["cx","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.use;a=b("joinClasses")("_47lu"+(a==="primary"?" _47lv":"")+(a==="secondary"?" _47mc":""),this.props.className);return b("React").jsx("h3",{className:a,id:this.props.id,children:this.props.children})};return c}(b("React").Component);a.defaultProps={use:"primary"};e.exports=a}),null);
__d("XUIContextualDialog.react",["cx","fbt","ContextualDialogXUITheme","React","ReactAbstractContextualDialog","ReactLayer","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIContextualDialogTitle.react","joinClasses","uniqueID"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({displayName:"ReactXUIContextualDialog",theme:b("ContextualDialogXUITheme")}));a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.updatePosition=function(){var a=c.refs.dialog;a&&a.layer.updatePosition()};c.$1=c.$1||b("uniqueID")();return c}var d=c.prototype;d.$2=function(){return this.$3(b("XUIContextualDialogBody.react"))};d.$4=function(){return this.$3(b("XUIContextualDialogTitle.react"))};d.$5=function(){return this.$3(b("XUIContextualDialogFooter.react"))};d.$3=function(a){var c=null;b("React").Children.forEach(this.props.children,function(b){!c&&b&&b.type===a&&(c=b)});return c};d.$6=function(){return h._("Dialog content")};d.render=function(){var a=this.props.children,c=this.$2(),d=this.$4(),e={};this.props.labelledBy?e.labelledBy=this.props.labelledBy:this.props.label?e.label=this.props.label:d?(d=b("React").cloneElement(d,{id:this.$1}),e.labelledBy=this.$1):e.label=this.$6();c&&(a=b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_53iv"),children:[d,c]}));return b("React").jsxs(i,babelHelpers["extends"]({},this.props,e,{ref:"dialog",children:[a,c?this.$5():null]}))};return c}(b("React").Component);a.WIDTH={NORMAL:312,WIDE:400};a.defaultProps={dialogRole:"dialog",hasActionableContext:!1,hideOnEscape:!0};e.exports=a}),null);
__d("Dock",["csx","ArbiterMixin","BlueBar","ChatQuietLinks","CSS","DataStore","DOM","Event","Parent","Scroll","Style","Toggler","Vector","emptyFunction","gkx","isKeyActivation","shield"],(function(a,b,c,d,e,f,g){__p&&__p();function c(){}Object.assign(c,b("ArbiterMixin"),{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(a){__p&&__p();this.init=b("emptyFunction");this.rootEl=a;this.calculateViewportDimensions();b("ChatQuietLinks").removeEmptyHrefs(this.rootEl);b("Event").listen(a,"click",this._onClick.bind(this));var c=a.querySelector(".fbNubButton");c&&b("Event").listen(c,"keypress",this._onKeyPress.bind(this));b("Event").listen(window,"resize",this._onWindowResize.bind(this));b("Toggler").subscribe(["show","hide"],function(c,d){d=d.getActive();if(!b("DOM").contains(a,d))return;if(b("CSS").hasClass(d,"fbNub"))this.notifyNub(d,c),c==="show"&&this._resizeNubFlyout(d);else{d=b("Parent").byClass(d,"fbNubFlyout");d&&b("CSS").conditionClass(d,"menuOpened",c==="show")}}.bind(this));this.inform("init",{},"persistent")},calculateViewportDimensions:function(){return this.viewportDimensions=b("Vector").getViewportDimensions()},getFlyoutHeightOffset:function(){if(this.flyoutHeightOffset)return this.flyoutHeightOffset;this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+b("Vector").getElementDimensions(this.rootEl).y;var a=b("BlueBar").getBar();if(a){var c=b("Style").isFixed(a)?"viewport":"document";this.flyoutHeightOffset+=b("Vector").getElementPosition(a,c).y+b("Vector").getElementDimensions(a).y}return this.flyoutHeightOffset},toggle:function(a){var c=this._findFlyout(a);if(!c)return;this.subscribe("init",function(){b("Toggler").toggle(a)})},show:function(a){this.subscribe("init",function(){b("Toggler").show(a)})},showNub:function(a){b("CSS").show(a)},hide:function(a){this.subscribe("init",function(){var c=b("Toggler").getInstance(a);b("DOM").contains(a,c.getActive())&&c.hide()})},hideNub:function(a){b("CSS").hide(a),this.hide(a)},setUseMaxHeight:function(a,c){b("CSS").conditionClass(a,"maxHeight",c!==!1),this._resizeNubFlyout(a)},_resizeNubFlyout:function(a){__p&&__p();var c=this._findFlyout(a);if(!c||b("CSS").hasClass(a,"placeholder")||!(b("CSS").hasClass(a,"openToggler")||b("CSS").hasClass(a,"opened")))return;var d=b("DOM").find(c,"div.fbNubFlyoutOuter"),e=b("DOM").find(d,"div.fbNubFlyoutInner"),f=b("DOM").find(e,"div.fbNubFlyoutBody"),g=b("CSS").hasClass(a,"canBeCompactTab"),h=b("Scroll").getTop(f),i=f.offsetHeight;b("Style").set(f,"height","auto");var j=b("Vector").getElementDimensions(c),k=b("Vector").getElementDimensions(f),l=this.getMaxFlyoutHeight(a);b("Style").set(c,"max-height",l+"px");b("Style").set(d,"max-height",l+"px");j=b("Vector").getElementDimensions(c);d=b("Vector").getElementDimensions(e);l=d.y-k.y;e=j.y-l;d=parseInt(f.style.height||f.clientHeight,10);d=e!==d;j.y>l&&d&&!g&&b("Style").set(f,"height",e+"px");b("CSS").removeClass(c,"swapDirection");var m=b("Vector").getElementPosition(c).x;b("CSS").conditionClass(c,"swapDirection",function(){if(m<0)return!0;return!j||!this.viewportDimensions?!1:m+j.x>this.viewportDimensions.x}.bind(this)());d&&h+i>=k.y?b("Scroll").setTop(f,f.scrollHeight):b("Scroll").setTop(f,h);this.notifyNub(a,"resize")},getMaxFlyoutHeight:function(a){a=this._findFlyout(a);var c=b("Vector").getElementPosition(a,"viewport");a=b("Vector").getElementDimensions(a);if(!this.viewportDimensions||!c)return 0;c=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.getFlyoutHeightOffset())-(this.viewportDimensions.y-c.y-a.y);return Math.max(c,0)},resizeAllFlyouts:function(){var a=this._getAllNubs(),b=a.length;while(b--)this._resizeNubFlyout(a[b])},_getAllNubs:function(){if(!this.rootEl)return[];var a=b("DOM").scry(this.rootEl,"div._50-v.openToggler:not(._s0f)");return a.concat(b("DOM").scry(this.rootEl,"div._50-v.opened:not(._s0f)"))},_onKeyPress:function(a){var c=a.getTarget();c=b("Parent").byClass(c,"fbNub");b("isKeyActivation")(a)&&c&&this.toggle(c)},_onClick:function(a){__p&&__p();a=a.getTarget();var c=b("Parent").byClass(a,"fbNub");if(c){if(b("Parent").byClass(a,"fbNubFlyoutTitlebar")){var d=b("Parent").byTag(a,"a");a=a.nodeName=="INPUT"&&a.getAttribute("type")=="submit";if(!d&&!a){this.hide(c);return!1}}this.notifyNub(c,"click")}},_onWindowResize:function(a){this.calculateViewportDimensions(),this.resizeAllFlyouts()},_findFlyout:function(a){return b("CSS").hasClass(a,"fbNubFlyout")?a:b("DOM").scry(a,"div.fbNubFlyout")[0]||null},registerNubController:function(a,c){b("DataStore").set(a,"dock:nub:controller",c),c.subscribe("nub/button/content-changed",b("shield")(this.inform,this,"resize",a)),c.subscribe("nub/flyout/content-changed",b("shield")(this._resizeNubFlyout,this,a))},unregisterNubController:function(a){b("DataStore").remove(a,"dock:nub:controller")},notifyNub:function(a,c,d){a=b("DataStore").get(a,"dock:nub:controller");a&&a.inform(c,d)}});e.exports=a.Dock||c}),null);
__d("DockTabsViewportFantaTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();f=9;var g=284,h=g+f;function a(){return h+1}function b(a){return Math.floor(a/h)}function c(a){if(!a)return null;a=a.fantaTabModelStateGetter;return a?a():null}function d(a){return a?a.size:0}e.exports={getTabCountToFitWidth:b,getMinRequiredWidthForFirstFantaTab:a,getFantaTabModelFromCallbacks:c,getNumFantaTabsFromModel:d}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=496+9+2,h=210+9+2,i=52;function j(){return g}function k(){return h}function a(){return i}function b(a){return a.getIsRaised()?j():k()}function c(){return j()+i}function d(a){a=a||{};a=a.pinnedConvoTabStateGetter;return a?a():null}function f(a){return a?a.getTotalTabCount():0}e.exports={getRaisedPinnedConvoTabWidth:j,getLoweredPinnedConvoTabWidth:k,getPinnedConvoSelectorWidth:a,getPinnedConvoTabWidth:b,getMinRequiredWidthForFirstConvoTab:c,getPinnedConvoTabsStateFromCallbacks:d,getNumPinnedConvoTabsFromModel:f}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=50;a=35;var i=a,j="dock-tab-viewport-inst",k=b("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,l=b("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,m=b("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,n=b("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,o=b("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,p=b("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function q(a){return a?b("Vector").getElementDimensions(a).x:0}var r=function(){__p&&__p();function a(a){this.$1=a,this.$3=0,this.$4=0,this.$5=null,this.$6=null,this.$7=!1,this.$8=!1,this.$9=!1,this.$2=new(b("SubscriptionsHandler"))(),this.$10(),this.$11()}var c=a.prototype;c.$10=function(){var a=this,c=this.$12.bind(this);this.$2.addSubscriptions(b("Event").listen(window,"resize",c),b("Dock").subscribe("resize",c),b("Arbiter").subscribeOnce("sidebar/initialized",c,"new"),b("FullScreen").subscribe("changed",function(){b("FullScreen").isFullScreen()?(a.$7=!0,a.$8=!1):(a.$7=!1,a.$8&&(b("setImmediate")(function(){c()}),a.$8=!1))}))};c.registerFantaTabCallbacks=function(a){this.$5=a};c.registerPinnedConvoTabCallbacks=function(a){this.$6=a};c.forceRecalculateFBDockWidth=function(){this.$11(),this.$13({forceRecalculateChatTabs:!1,pinnedConvoUpdateData:null})};c.forceRecalculateChatTabs=function(){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:null})};c.forceRecalculatePinnedConvoTabs=function(a){this.$13({forceRecalculateChatTabs:!0,pinnedConvoUpdateData:a})};c.$12=function(){if(b("FullScreen").isFullScreen()||this.$7){this.$8=!0;return}this.forceRecalculateFBDockWidth()};c.$13=function(a){var b=a.forceRecalculateChatTabs;a=a.pinnedConvoUpdateData;var c=this.$14(),d=c.chatTabAvailableWidth;c=c.pinnedConvoTabAvailableWidth;this.$15(d,!!b);this.$16(c,a)};c.$16=function(a,b){var c=this.$6||{};c=c.onAvailableWidthChanged;c&&c(a,b)};c.$15=function(a,b){b=this.$5||{};b=b.onAvailableWidthChanged;b&&b(a)};c.$17=function(){var a=l(this.$5);return m(a)};c.$18=function(){return k()};c.$14=function(){__p&&__p();var a=this.$3,b={chatTabAvailableWidth:a,pinnedConvoTabAvailableWidth:0},c={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:a},d=this.$17(),e=p(this.$6),f=o(e);if(!e||f===0)return b;else if(d===0)return c;e=this.$18();if(a<=e)return b;f=n();d=a-e;if(d<f)return b;else c=f;d=c;b=Math.max(e,a-c);return{chatTabAvailableWidth:b,pinnedConvoTabAvailableWidth:d}};c.$11=function(){this.$3=this.$19(),this.$20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};c.$21=function(){var a=this.$1;if(!a)return{buddyListNubWidth:0,employeeNubsWidth:0};var c=q(a),d=q(b("DOM").find(a,"._56ox")),e=q(b("DOM").scry(a,"._56oy")[0]);a=q(b("DOM").scry(a,"._ph1")[0]);c=Math.max(c-d-e-a,0);return{buddyListNubWidth:d,employeeNubsWidth:c}};c.$19=function(){__p&&__p();var a=b("getViewportDimensions").withoutScrollbars().width;a-=b("ViewportBounds").getLeft()+b("ViewportBounds").getRight();a-=h;var c=this.$21(),d=c.buddyListNubWidth;c=c.employeeNubsWidth;a-=d;this.$4=Math.max(this.$4,c);a-=this.$4;a-=i;return Math.max(a,0)};c.enableTestInforms_FOR_TEST_ONLY=function(){this.$9=!0};c.$20=function(a){this.$9&&b("Arbiter").inform(a)};c.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().chatTabAvailableWidth};c.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$14().pinnedConvoTabAvailableWidth};c.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$3};return a}();e.exports={getInstance:function(a){__p&&__p();var c=b("ge")("pagelet_dock");if(!c||!b("DOM").contains(c,a))return null;a=b("DataStore").get(c,j);if(a instanceof r)return a;var d=b("DOM").scry(c,".fbDockWrapperRight .fbDock")[0];a=new r(d);b("DataStore").set(c,j,a);return a}}}),null);
__d("DragDropFileUpload",[],(function(a,b,c,d,e,f){f.isSupported=function(){return typeof FileList!=="undefined"}}),null);
__d("DocumentDragDrop",["Arbiter","CSS","DOMQuery","DragDropFileUpload","Event","emptyFunction","getObjectValues","getOrCreateDOMID"],(function(a,b,c,d,e,f){__p&&__p();var g={},h=0;function i(){h=0,b("getObjectValues")(g).forEach(function(a){b("CSS").removeClass(a.element,a.className),b("Arbiter").inform("dragleave",{element:a.element})})}var j=null;function k(){j&&clearTimeout(j),j=setTimeout(function(){i()},500)}var l=function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return;b("Event").listen(document,"dragenter",function(a){h===0&&b("getObjectValues")(g).forEach(function(c){b("CSS").addClass(c.element,c.className),b("Arbiter").inform("dragenter",{element:c.element,event:a})}),h++,k()});b("Event").listen(document,"dragleave",function(a){h--,h===0&&i(),k()});b("Event").listen(document,"drop",function(a){i();var c=a.getTarget();if(b("DOMQuery").isNodeOfType(a.getTarget(),"input")&&c.type==="file")return;a.prevent()});b("Event").listen(document,"dragover",b("Event").prevent);document.addEventListener("dragover",k,!0);l=b("emptyFunction")};a={init:function(){l()},registerStatusElement:function(a,c){l(),g[b("getOrCreateDOMID")(a)]={element:a,className:c},h>0&&b("CSS").addClass(a,c)},removeStatusElement:function(a){a=b("getOrCreateDOMID")(a);var c=g[a];c&&(b("CSS").removeClass(c.element,c.className),delete g[a])}};e.exports=a}),null);
__d("DragDropTarget",["Arbiter","CSS","DataTransfer","DocumentDragDrop","DragDropFileUpload","Event","SubscriptionsHandler","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a){this._element=a,this._listeners=new(b("SubscriptionsHandler"))(),this._statusElem=a,this._dragEnterCount=0,this._enabled=!1,this._traverseFoldersRecursively=!1}Object.assign(a.prototype,{_onFilesDropCallback:c=b("emptyFunction"),_onFolderDropLogging:c,_onURLDropCallback:c,_onPlainTextDropCallback:c,_onDropCallback:c,_fileFilterFn:c.thatReturnsArgument,setOnDocumentDragEnterCallback:function(a){this._onDocumentDragEnterCallback=a;return this},setOnDocumentDragLeaveCallback:function(a){this._onDocumentDragLeaveCallback=a;return this},setOnDragEnterCallback:function(a){this._onDragEnterCallback=a;return this},setOnDragLeaveCallback:function(a){this._onDragLeaveCallback=a;return this},setOnFilesDropCallback:function(a){this._onFilesDropCallback=a;return this},setOnFolderDropLogging:function(a){this._onFolderDropLogging=a;return this},setOnURLDropCallback:function(a){this._onURLDropCallback=a;return this},setOnPlainTextDropCallback:function(a){this._onPlainTextDropCallback=a;return this},setOnDropCallback:function(a){this._onDropCallback=a;return this},setTraverseFoldersRecursively:function(a){this._traverseFoldersRecursively=a;return this},_uploadData:function(a,b,c){var d={},e=!1;c.length&&(this._onFilesDropCallback(c,b),d.files=c,e=!0);c=a.getLink();c&&(this._onURLDropCallback(c,b),d.url=c,e=!0);c=a.getText();c&&(this._onPlainTextDropCallback(c,b),d.plainText=c,e=!0);e&&this._onDropCallback(d,b)},enable:function(){__p&&__p();if(!b("DragDropFileUpload").isSupported())return this;this._listeners.engage();b("DocumentDragDrop").registerStatusElement(this._statusElem,"fbWantsDragDrop");this._listeners.addSubscriptions(b("Event").listen(this._element,"dragenter",this._onDragEnter.bind(this)),b("Event").listen(this._element,"dragleave",this._onDragLeave.bind(this)),b("Event").listen(this._element,"dragover",this._onDragOver.bind(this)),b("Event").listen(this._element,"drop",function(a){__p&&__p();var c=this,d;this._dragEnterCount=0;(d=b("CSS")).removeClass(this._statusElem,"fbDropReady");d.removeClass(this._statusElem,"fbDropReadyPhoto");d.removeClass(this._statusElem,"fbDropReadyPhotos");d.removeClass(this._statusElem,"fbDropReadyLink");var e=new(b("DataTransfer"))(a.dataTransfer);if(this._traverseFoldersRecursively){(d=e.getRecursiveFiles(this._onFolderDropLogging))==null?void 0:d.then(function(b){c._uploadData(e,a,c._fileFilterFn(b))})}else this._uploadData(e,a,this._fileFilterFn(a.dataTransfer.files));a.kill()}.bind(this)));this._listeners.addSubscriptions(b("Arbiter").subscribe("dragenter",this._onDocumentDragEnter.bind(this)),b("Arbiter").subscribe("dragleave",this._onDocumentDragLeave.bind(this)));this._enabled=!0;return this},disable:function(){__p&&__p();if(!this._enabled)return this;b("DocumentDragDrop").removeStatusElement(this._statusElem,"fbWantsDragDrop");b("CSS").removeClass(this._statusElem,"fbDropReady");b("CSS").removeClass(this._statusElem,"fbDropReadyPhoto");b("CSS").removeClass(this._statusElem,"fbDropReadyPhotos");b("CSS").removeClass(this._statusElem,"fbDropReadyLink");this._listeners.release();this._enabled=!1;return this},setFileFilter:function(a){this._fileFilterFn=a;return this},setStatusElement:function(a){this._statusElem=a;return this},_onDragEnter:function(a){if(this._dragEnterCount===0){var c=new(b("DataTransfer"))(a.dataTransfer);b("CSS").addClass(this._statusElem,"fbDropReady");c.isLink()||!c.isImage()?b("CSS").addClass(this._statusElem,"fbDropReadyLink"):c.getCount()>1?b("CSS").addClass(this._statusElem,"fbDropReadyPhotos"):b("CSS").addClass(this._statusElem,"fbDropReadyPhoto");this._onDragEnterCallback&&this._onDragEnterCallback()}this._dragEnterCount++;a.preventDefault()},_onDragLeave:function(a){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){(a=b("CSS")).removeClass(this._statusElem,"fbDropReady");a.removeClass(this._statusElem,"fbDropReadyPhoto");a.removeClass(this._statusElem,"fbDropReadyPhotos");a.removeClass(this._statusElem,"fbDropReadyLink");this._onDragLeaveCallback&&this._onDragLeaveCallback()}},_onDragOver:function(a){if(!a.dataTransfer){b("Event").kill(a);return}try{var c=a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect=c=="move"||c=="linkMove"?"move":"copy"}catch(a){}b("Event").kill(a)},_onDocumentDragEnter:function(a,b){this._onDocumentDragEnterCallback&&b.element==this._element&&this._onDocumentDragEnterCallback()},_onDocumentDragLeave:function(a,b){this._dragEnterCount=0,this._onDragLeave(a),this._onDocumentDragLeaveCallback&&b.element==this._element&&this._onDocumentDragLeaveCallback()}});e.exports=a}),null);
__d("EventReminderRequestHelper",["AsyncRequest","EventReminderActions","XEventReminderController"],(function(a,b,c,d,e,f){"use strict";a={fetchEventReminder:function(a,c,d){var e=b("XEventReminderController").getURIBuilder().setInt("event_reminder_id",c);new(b("AsyncRequest"))(e.getURI()).setHandler(function(e){e.payload&&(b("EventReminderActions").updateEventReminder(a,e.payload,c),d())}).send()}};e.exports=a}),null);
__d("WaterfallIDGenerator",["CurrentUser","md5"],(function(a,b,c,d,e,f){function g(){var a=2147483647;return Math.random()*a}function h(){return Math.floor(Date.now()/1e3)}a={generate:function(){return b("md5")([b("CurrentUser").getID(),h(),g()].join(":"))}};e.exports=a}),null);
__d("IgnoreMessagesTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IgnoreMessagesLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setPlatform=function(a){this.$1.platform=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,platform:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerMessageActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageActionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setContainermodule=function(a){this.$1.containermodule=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setErrorText=function(a){this.$1.error_text=a;return this};c.setGroupSize=function(a){this.$1.group_size=a;return this};c.setMessageType=function(a){this.$1.message_type=a;return this};c.setMid=function(a){this.$1.mid=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setOfflineThreadid=function(a){this.$1.offline_threadid=a;return this};c.setPreviousReaction=function(a){this.$1.previous_reaction=a;return this};c.setReaction=function(a){this.$1.reaction=a;return this};c.setRecipientID=function(a){this.$1.recipient_id=a;return this};c.setThreadType=function(a){this.$1.thread_type=a;return this};c.setThreadid=function(a){this.$1.threadid=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,error_text:!0,group_size:!0,message_type:!0,mid:!0,name:!0,offline_threadid:!0,previous_reaction:!0,reaction:!0,recipient_id:!0,thread_type:!0,threadid:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerMessageRequestsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMessageRequestsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAction=function(a){this.$1.action=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setContainermodule=function(a){this.$1.containermodule=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setFolderType=function(a){this.$1.folder_type=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setThreadKey=function(a){this.$1.thread_key=a;return this};c.setThreadKeyList=function(a){this.$1.thread_key_list=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action:!0,appid:!0,appversion:!0,clienttime:!0,containermodule:!0,country:!0,entry_point:!0,extra_client_data:!0,folder_type:!0,name:!0,surface:!0,thread_id:!0,thread_key:!0,thread_key_list:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerWebViewReactionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerWebViewReactionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEmojiGroup=function(a){this.$1.emoji_group=a;return this};c.setEmojiGroupCount=function(a){this.$1.emoji_group_count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setMid=function(a){this.$1.mid=a;return this};c.setSenderID=function(a){this.$1.sender_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={emoji_group:!0,emoji_group_count:!0,event:!0,mid:!0,sender_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("StickersTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:StickersLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setNumsearchresults=function(a){this.$1.numsearchresults=a;return this};c.setPackid=function(a){this.$1.packid=a;return this};c.setPackids=function(a){this.$1.packids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setSearchtoken=function(a){this.$1.searchtoken=a;return this};c.setStickerid=function(a){this.$1.stickerid=a;return this};c.setTagid=function(a){this.$1.tagid=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTriggeredword=function(a){this.$1.triggeredword=a;return this};c.setTriggerused=function(a){this.$1.triggerused=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,numsearchresults:!0,packid:!0,packids:!0,searchtoken:!0,stickerid:!0,tagid:!0,time:!0,triggeredword:!0,triggerused:!0,weight:!0};e.exports=a}),null);
__d("ChatInitialDataTransformer.bs",["bs_js_dict","bs_caml_format","bs_caml_option","MessengerServerPayloadTransformer.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.viewer,d=a.is_page,e=[],f=[],g={},h=[],i={},j=[];a.threads.forEach(function(a){__p&&__p();if(a==null)return 0;else{var k,l=(k=b("MessengerServerPayloadTransformer.bs")).getThreadFBID(a),m=k.getOtherUserID(a),n=k.transformThread(c,a,d);e.push(n);k=k.transformMessages(c,a,d);k!==void 0&&k.forEach(function(a){f.push(a);return 0});k=b("MessengerServerPayloadTransformer.bs").getMessagePageInfo(a);k!==void 0&&(b("bs_caml_option").valFromOption(k).has_previous_page||(l==null?m==null||j.push({type:"thread",fbid:m}):j.push({type:"thread",fbid:l})));k=b("MessengerServerPayloadTransformer.bs").transformReadReceipts(c,a);if(k!==void 0){k=b("bs_caml_option").valFromOption(k);l==null||(g[l]=k);m==null||(g[m]=k)}l=b("MessengerServerPayloadTransformer.bs").transformDeliveryReceipts(a);if(l.length!==0){m=l[0];if(n.is_canonical){k=n.other_user_fbid;k==null||h.push({other_user_fbid:k,thread_fbid:null,time:b("bs_caml_format").caml_float_of_string(m.timestamp_precise)})}else{l=n.thread_fbid;l==null||h.push({other_user_fbid:null,thread_fbid:l,time:b("bs_caml_format").caml_float_of_string(m.timestamp_precise)})}}k=b("MessengerServerPayloadTransformer.bs").transformParticipants(a);k.forEach(function(a){i[a.fbid]=a;return 0});return 0}});return{threads:e,actions:f,roger:g,delivery_receipts:h,participants:b("bs_js_dict").values(i),end_of_history:j}}f.transform=a}),null);
__d("ChatInitialDataTransformerServerCallableWrapper",["ChatInitialDataTransformer.bs"],(function(a,b,c,d,e,f){"use strict";b("ChatInitialDataTransformer.bs"),e.exports={}}),null);
__d("ChatActivity",["Arbiter","ArbiterMixin","Event","JSLogger","MercuryConfig","PresenceState","UserActivity","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("MercuryConfig").activity_limit||6e4,h=b("MercuryConfig").idle_limit||18e5,i=b("MercuryConfig").idle_poll_interval||3e5,j=b("JSLogger").create("chat_activity"),k=Date.now(),l=!0;function m(){var a=Date.now();return!!(l&&a-k<g)}a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.isActive=m,b)||babelHelpers.assertThisInitialized(c)}return b}(b("mixin")(b("ArbiterMixin")));var n=new a();function o(){var a=k;k=Date.now();k-a>h&&(j.debug("idle_to_active",a),b("PresenceState").doSync());n.inform("activity")}b("Event").listen(window,"focus",function(){l=!0,o()});b("Event").listen(window,"blur",function(){l=!1});b("UserActivity").subscribe(function(){o()});function p(a){a=a&&a.at&&b("PresenceState").verifyNumber(a.at);typeof a!=="number"&&(a=null);return a||0}setInterval(function(){var a=Date.now(),c=p(b("PresenceState").get()),d=Math.max(k,c);a-d>h&&(j.debug("idle",{cookie:c,local:k}),n.inform("idle",a-d))},i);b("PresenceState").registerStateStorer(function(a){var b=p(a);b<k&&(a.at=k);return a});b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.chat_activity={activity_limit:g,idle_limit:h,idle_poll_interval:i,last_active_time:k}});e.exports=n}),null);
__d("ChatAnimatedGifs",["URI"],(function(a,b,c,d,e,f){__p&&__p();var g,h={shouldHideBody:function(a){__p&&__p();if(!a.has_attachment)return!1;for(var b=0;b<a.attachments.length;b++){var c=a.attachments[b];if(c.preview_url){c=h.getRawUrlFromSafeUrl(c.preview_url);if(a.body==c)return!0}}return!1},getRawUrlFromSafeUrl:function(a){return new(g||(g=b("URI")))(a).getQueryData().url}};e.exports=h}),null);
__d("ChatAppActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";e.exports=b("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppActions",["ChatAppActionTypes","ChatDispatcher"],(function(a,b,c,d,e,f){"use strict";a={tti:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").TTI})},hide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").HIDE})},unhide:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").UNHIDE})},setInitialDisplayDone:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").INITIAL_DISPLAY_DONE})},load:function(){b("ChatDispatcher").dispatch({type:b("ChatAppActionTypes").LOAD})}};e.exports=a}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("ChatDispatcher"))||this;c.$ChatAppStore2={initialDisplayDone:!1,isHidden:!1,isInitialized:!1,isLoaded:!1};c.$ChatAppStore1=babelHelpers["extends"]({},c.$ChatAppStore2);return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();a=a.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(a){case b("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=!0;this.__emitChange();break;case b("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=!0;this.__emitChange();break;case b("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=!1;this.__emitChange();break;case b("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break;case b("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=!0;this.__emitChange();break}};d.getPreviousState=function(){return this.$ChatAppStore1};d.getState=function(){return this.$ChatAppStore2};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("ChatBubble.react",["cx","BootloadedComponent.react","DOMDimensions","EmojiOnlyMessage.react","ErrorBoundary.react","JSResource","MercuryConfig","MercuryMessageBody.react","MercuryMessageRenderLocations","MessageReplyPermissions","MessengerMathUtils","MessengerSupportedEmojiUtils","React","ReactDOM","createReactClass_DEPRECATED","gkx","joinClasses","messengerCustomColorUtils","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=2;c=b("createReactClass_DEPRECATED")({displayName:"ChatBubble",_boxWidth:0,_repliedToMessageRef:null,propTypes:{attachments:(a=b("prop-types")).node,body:a.string,className:a.string,customColor:a.string,customLike:a.object,isEmojiLike:a.bool,isFromViewer:a.bool,maxWidth:a.number.isRequired,message:a.object,metaRanges:a.array,onReplyToMessage:a.func,ranges:a.array,threadCustomColor:a.string,threadID:a.string,isForwarded:a.bool},getInitialState:function(){return{emojis:void 0,bubbleWidth:null}},componentDidMount:function(){if(this.props.attachments&&!this.props.isEmojiLike)return;if(!this.props.emojis){var a=this.props.body||"";a=b("MessengerSupportedEmojiUtils").getEmojiOnlyContents(a);a&&a.length&&this.setState({emojis:a})}this._restyleBubble(this.props)},componentDidUpdate:function(a){(a.maxWidth!==this.props.maxWidth||a.body!==this.props.body||!a.attachments&&this.props.attachments)&&this._restyleBubble(a)},render:function(){__p&&__p();var a=this.props,c=a.attachments,d=a.body;d=d===void 0?"":d;var e=a.isForwarded,f=a.className,g=a.maxWidth;a=babelHelpers.objectWithoutPropertiesLoose(a,["attachments","body","isForwarded","className","maxWidth"]);a=Object.assign({},a);delete a.customColor;delete a.customLike;delete a.isEmojiLike;delete a.isFromViewer;delete a.message;delete a.metaRanges;delete a.ranges;delete a.threadCustomColor;delete a.threadID;return b("React").jsx("div",babelHelpers["extends"]({},a,{className:b("joinClasses")("_5w1r"+(this.state.emojis?"":" _3_om")+(this.state.emojis?" _31xx":"")+(((a=this.props)==null?void 0:(a=a.message)==null?void 0:(a=a.replied_to_message)==null?void 0:(a=a.message)==null?void 0:a.body)&&!b("MercuryConfig").SM3BD?" _1vmy":""),f),ref:"bubble",style:{maxWidth:g,width:this.state.emojis||e?null:this.state.bubbleWidth,wordWrap:d.length>=15?"break-word":"inherit"},children:b("React").jsxs("div",{className:"_4gx_",ref:"inner",children:[this._renderContent(),c]})}))},_renderContent:function(){if(!this.props.body||this.props.isEmojiLike)return null;var a={},c=null,d=this.props.isForwarded&&b("gkx")("1090760");this.state.emojis?c=b("React").jsx(b("EmojiOnlyMessage.react"),{contents:this.state.emojis}):(c=b("React").jsx(b("MercuryMessageBody.react"),{body:this.props.body,ranges:this.props.ranges,metaRanges:this.props.metaRanges,threadID:this.props.threadID,customLike:this.props.customLike,threadCustomColor:this.props.threadCustomColor,isFromViewer:this.props.isFromViewer,renderLocation:b("MercuryMessageRenderLocations").CHAT}),this.props.customColor&&(a=b("messengerCustomColorUtils").customBubbleStyle(this.props.customColor,a)));var e=this.props.message&&this.props.message.replied_to_message&&b("MessageReplyPermissions").bubbleContainsRepliedToMessage(this.props.message.replied_to_message,!!this.state.emojis)?b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("RepliedToMessageContent.react").__setRef("ChatBubble.react"),bootloadPlaceholder:b("React").jsx("div",{}),isFromViewer:this.props.isFromViewer,isLinkified:!0,isMessengerUI:!1,repliedToMessageData:this.props.message&&this.props.message.replied_to_message,threadID:this.props.threadID,ref:this._setRepliedToMessageRef,replyInOneBubble:!0})}):null;return b("React").jsxs("div",{className:"_1aa6"+(this.state.emojis?" _31xy":"")+(this.props.message&&this.props.message.isSelected?" _1yok":"")+(e?" _6e7o":""),ref:"contentWrapper",style:a,children:[e,e?"\n":null,b("React").jsx("div",{className:(d&&!this.props.isFromViewer?"_87w7":"")+(d&&this.props.isFromViewer?" _87wa":""),children:b("React").jsx("span",{className:"_5yl5",ref:"content",children:c})})]})},_restyleBubble:function(a){__p&&__p();if(this.props.attachments||this.props.body!=null&&b("MessengerMathUtils").isMathBlock(this.props.body.trim())){this.setState({bubbleWidth:null});return}var c=b("ReactDOM").findDOMNode(this.refs.bubble);if(a.maxWidth!==this.props.maxWidth||b("DOMDimensions").getElementDimensions(c).width>this.props.maxWidth){a=this.props.maxWidth;this.setState({bubbleWidth:a},this._shrinkBubble);return}this._shrinkBubble()},_shrinkBubble:function(){__p&&__p();var a=b("ReactDOM").findDOMNode(this.refs.bubble);if(!a)return;a=b("DOMDimensions").getElementDimensions(a).width;var c=b("ReactDOM").findDOMNode(this.refs.content),d=b("DOMDimensions").getElementDimensions(c).width;if(this._repliedToMessageRef){var e=b("ReactDOM").findDOMNode(this._repliedToMessageRef);e=b("DOMDimensions").getElementDimensions(e).width;d=Math.max(e,d)}e=c?d+b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.contentWrapper)||{},"width",!0,!1,!1):0;c=e+h;d>0&&c<this.props.maxWidth&&a-c-this.getBoxWidth()>0&&this.setState({bubbleWidth:c})},contentWraps:function(){var a=b("ReactDOM").findDOMNode(this.refs.content);if(!a)return!1;var c=a.getClientRects();a=b("DOMDimensions").getElementDimensions(a).height;return c&&c.length>1&&c[0].height<a},_setRepliedToMessageRef:function(a){this._repliedToMessageRef=a},getBoxWidth:function(){this._boxWidth||(this._boxWidth=b("DOMDimensions").measureElementBox(b("ReactDOM").findDOMNode(this.refs.bubble)||{},"width",!0,!0,!1));return this._boxWidth}});e.exports=c}),null);
__d("ChatCodePasteUtils",["cx","BanzaiODS","ChatBubble.react","MessengerFormattingUtils","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=/`{3,}/,i=3,j=/^\s+/,k=/\s+$/;function a(a){return!!(a&&a.search(h)!==-1)}function l(a,b){__p&&__p();var c=0;if(b-2>=0){c+=a[b-2].trim().length;var d=a[b-2].match(k);d&&(c+=d[0].length)}b-1>=0&&(c+=a[b-1].length+2*i);d=a[b].match(j);d&&(c+=d[0].length);return c}function m(a,b,c){if(a)return a.map(function(a){return Object.assign(Object.assign({},a),{offset:a.offset-b})}).filter(function(a){return 0<=a.offset&&a.offset<c});else return a}function n(a){return a.length===1?{language:"",code:a[0]}:{language:a[0].replace(/[^a-zA-Z]+/g,""),code:a.slice(1).join("\n")}}function o(a){__p&&__p();var c=b("MessengerFormattingUtils").getRanges(a).filter(function(a){return a.formatter===b("MessengerFormattingUtils").formatConfigs.blockquote.formatter||a.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter}).sort(function(a,b){return a.offset!==b.offset?a.offset-b.offset:b.length-a.length}),d=[],e=0,f=0;for(var g=0;g<c.length;g++){var h=c[g];if(h.offset<f)continue;h.formatter===b("MessengerFormattingUtils").formatConfigs.blockcode.formatter&&(d.push(a.substring(e,h.offset)),d.push(h.innerText),e=h.offset+h.length);f=h.offset+h.length}d.push(a.substring(e));return d}function c(a,c,d,e,f){__p&&__p();a=o(a);var g=[],h=0;for(var i=0;i<a.length;i+=2){var j=a[i].trim();if(j&&j.length>0){h+=l(a,i);var k=d?m(d,h,j.length):d;g.push(b("React").jsx("div",{className:"_1e-x _n4o",children:b("React").jsx(b("ChatBubble.react"),{body:j,customColor:f||void 0,className:"clearfix _5wdf",maxWidth:c,ranges:k||void 0,threadID:e||void 0})},i))}if(i+1<a.length&&a[i+1]){j=a[i+1].split("\n");k=n(j);j=k.language;k=k.code;b("BanzaiODS").bumpEntityKey(3303,"chat_code_paste","render_bubble");g.push(b("React").jsx("div",{className:"_1e-x _n4o",children:b("React").jsx("div",{ref:"bubble",className:"_3_om _4yng _5wdf",children:b("React").jsx("div",{style:{maxWidth:c},ref:"syntaxTarget"+i,className:"language-"+j,children:k})})},i+1))}}return g}e.exports={containsCodeBlock:a,getCodeAndMessageBubbles:c}}),null);
__d("ChatGroupMembershipDialogBootloader",["Bootloader","CurrentUser","MercuryIDs","React","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={bootload:function(a,c,d,e){__p&&__p();if(!d||!c)return;b("Bootloader").loadModules(["MessengerDialogs.bs","MessengerState.bs","ChatGroupMembershipDialog.react"],function(f,g,h){f.showDialog(function(){var i;return b("React").jsx(g.jsComponent,{fbid:(i=e)!=null?i:b("CurrentUser").getID(),children:function(e){var i=g.thread(e,d);if(i==null||i.participants==null)return null;var j=c.filter(function(a){return i.participants.includes(a.id)});return b("React").jsx(h,{blockedIDs:g.blockedIds(e),dialogShown:!0,membershipParticipants:a,onHide:f.removeAllDialogs,participants:j,thread:i,threadID:b("MercuryIDs").getThreadIDFromThreadFBID(i.thread_fbid)})}})})},"ChatGroupMembershipDialogBootloader")}};e.exports=a}),null);
__d("ChatPrivacyActionController",["ChatVisibility","JSLogger","PresencePrivacy"],(function(a,b,c,d,e,f){__p&&__p();a=function a(c,d){__p&&__p();this._userID=c;this._logger=b("JSLogger").create("blackbird");this._getState=function(){return b("ChatVisibility").isOnline()?b("PresencePrivacy").allows(this._userID)?a.NORMAL:a.BLOCKED:a.OFFLINE};this._togglePrivacy=function(){__p&&__p();this._getState();switch(this._getState()){case a.OFFLINE:if(b("ChatVisibility").isOnline()){this._logger.error("tabs_already_online");break}this._logger.log("tabs_go_online",{tab_id:this._userID});b("ChatVisibility").goOnline(function(){b("PresencePrivacy").allows(this._userID)||(this._getState()!==a.BLOCKED&&this._logger.error("privacy_action_controller_blocked_inconsistency"),this._togglePrivacy())}.bind(this));break;case a.BLOCKED:b("PresencePrivacy").allow(this._userID);this._logger.log("tabs_unblock",{tab_id:this._userID});break;case a.NORMAL:b("PresencePrivacy").disallow(this._userID);this._logger.log("tabs_block",{tab_id:this._userID});break}};c=function(){d&&d(this._getState())}.bind(this);c();this._subscribeToken=b("PresencePrivacy").subscribe("privacy-changed",c)};a.OFFLINE="offline";a.BLOCKED="blocked";a.NORMAL="normal";Object.assign(a.prototype,{togglePrivacy:function(){this._logger.log("gear_menu_toggle_privacy",{tab_id:this._userID}),this._togglePrivacy()},destroy:function(){this._subscribeToken&&b("PresencePrivacy").unsubscribe(this._subscribeToken)}});e.exports=a}),null);
__d("ChatTitleBarBlinker",["ChatActivity","DocumentTitle","JSLogger","MercuryThreadInformer","MercuryNotificationRenderer","PresenceState","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();d=b("MercuryThreadInformer").get();var g=b("JSLogger").create("chat_title"),h=null,i=0,j=!1,k=0;function l(){if(h){h.stop();h=null;return!0}return!1}function m(a){a=a||k;i<=a&&(i=a,(l()||j)&&b("PresenceState").doSync())}f={blink:function(a,c){if(!h&&i<c){k=c;if(b("gkx")("1263879"))return;b("MercuryNotificationRenderer").renderDocumentTitle(a,function(a){h||(h=b("DocumentTitle").blink(a))})}},stopBlinking:function(){m()},blinkingElsewhere:function(){j=!0}};function n(a){a=b("PresenceState").verifyNumber(a.sb2);return!a||a<=i?null:a}function a(a){a=a&&n(a);a&&(i=a,g.debug("load",i),l(),j=!1)}function c(a){var b=n(a);b||(g.debug("store",i),a.sb2=i,j=!1);return a}b("PresenceState").registerStateStorer(c);b("PresenceState").registerStateLoader(a);d.subscribe("thread-read-changed",function(a,b){a=0;for(var c in b)b[c].mark_as_read&&b[c].timestamp>=k&&b[c].timestamp>a&&(a=b[c].timestamp);a&&m(a)});b("ChatActivity").subscribe("activity",function(){return m()});c=b("PresenceState").getInitial();c&&(i=n(c)||0);e.exports=f}),null);
__d("MessengerColors",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){b===void 0&&(b=!1);var c=100/(a.length-1);b=b?a.slice():a.slice().reverse();a=b.map(function(a,b){return a+" "+b*c+"%"}).join(",");return"radial-gradient(circle at center 75%, "+a+")"}function b(a,b,c){__p&&__p();var d={};if(a){b!=null&&b!==""?d.backgroundColor=b:d.backgroundColor=c;if(a.length&&a.length>0)if(a.length===1)d.backgroundColor=a[0];else if(a.length===2)d.backgroundImage="linear-gradient("+a[0]+", "+a[1]+")";else{var e=a.length,f=100/(e-1);e=a.map(function(a,b){return a+" "+b*f+"%"}).join(", ");d.backgroundImage="linear-gradient("+e+")"}}else b!=null&&b!==""?d.backgroundColor=b:d.backgroundColor=c;return d}e.exports={makeRadialGradient:a,makeLinearGradient:b}}),null);
__d("ChatCollapsedLogMessageGroup.react",["cx","fbt","Link.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={collapsed:!0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=h._("See Latest Activity"),d=h._("See Less Activity");return b("React").jsxs("div",{className:"_5w0o",children:[b("React").jsx(b("Link.react"),{className:"_4ea1",onClick:function(){return a.setState({collapsed:!a.state.collapsed})},children:this.state.collapsed?c:d}),this.state.collapsed?null:b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_2zsu"}),this.props.children,b("React").jsx("div",{className:"_2zsu"})]})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ChatComposerFlyoutButtonBootLoader.react",["AutoFocusableLink.react","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","React"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},a,{className:a.iconClassName})),loader:b("JSResource")("MessengerComposerFlyoutButton.react").__setRef("ChatComposerFlyoutButtonBootLoader.react"),placeholder:a.renderSVGIcon?b("React").jsx(b("AutoFocusableLink.react"),{label:"flyout button",className:a.iconClassName,children:a.renderSVGIcon(!1)}):b("React").jsx(b("AutoFocusableLink.react"),{label:"flyout button",className:a.iconClassName})});return a.excludeTag?c:b("React").jsxs("li",{className:a.interactionClassName,children:[" ",c," "]})};e.exports=a}),null);
__d("ChatDateBreak.react",["cx","FBLogger","React","formatDate","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.props.date.getTime()!==a.date.getTime()};d.render=function(){try{var a=b("formatDate")(this.props.date,{future:"g:ia",today:"g:ia",withinWeek:"D g:ia",thisYear:"M jS, g:ia",older:"m/d/Y g:ia"});return b("React").jsx("time",{className:b("joinClasses")(this.props.className,"_5w-5"),children:b("React").jsx("span",{className:"_5w-6",children:a})})}catch(a){b("FBLogger")("mercury").catching(a).mustfix("incorrect format in datebreak");return null}};return c}(b("React").Component);e.exports=a}),null);
__d("FantaMessageActions",["Bootloader","CurrentUser","FantaDispatcher","MercuryIDs","MercuryLocalIDs","MercuryViewer","MessengerState.bs","emptyFunction","ifRequired","keyMirror","requireWeak","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_GROUP_PARTICIPANTS:null,ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:null,ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:null,CANCEL_FILE_UPLOAD:null,CANCEL_REPLY_TO_MESSAGE:null,COMPOSER_TEXT_UPDATE:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,PREPARE_FILES_FOR_SEND:null,RECEIVED_NEW_MESSAGE:null,REMOVE_SHARE_PREVIEW:null,REPLY_TO_MESSAGE:null,SEND_GIF:null,SEND_HOT_LIKE:null,SEND_MESSAGE:null,SEND_PHOTO:null,SEND_STICKER:null,SET_NEW_GROUP_NAME_LOCALLY:null,UPDATE_GROUP_NAME:null,UPDATE_USER_INPUT_REQUESTED:null});function i(a){__p&&__p();var c=b("MercuryViewer").getID();if(!a.length)return null;a=a.filter(function(a){return a!==c});var d;if(a.length===0)return null;else a.length===1?d=b("MercuryIDs").getThreadIDFromParticipantID(a[0]):(d=b("MercuryLocalIDs").generateThreadID(),a.unshift(c),b("MessengerState.bs").createNewLocalThread(b("CurrentUser").getID(),d,a));return d}a={Types:h,prepareFilesForSend:function(a,c,d,e){var f={type:h.PREPARE_FILES_FOR_SEND,tabID:a,files:c,composer:d};this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch(f),e&&e()})},replyToMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.REPLY_TO_MESSAGE,threadID:c,message:a})},cancelReplyToMessage:function(a){b("FantaDispatcher").dispatch({type:h.CANCEL_REPLY_TO_MESSAGE,threadID:a})},cancelFileUpload:function(a,c){var d={type:h.CANCEL_FILE_UPLOAD,tabID:a,uploadID:c};this.dispatchOrBootloadUploader(function(){b("FantaDispatcher").dispatch(d)})},linkPreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LINK_PREVIEW,tabID:a,uri:c})})},loadedShareData:function(a,c,d){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADED_SHARE_DATA,tabID:a,attachmentData:c,composer:d})})},loadingShareData:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.LOADING_SHARE_DATA,composer:c,tabID:a})})},removeSharePreview:function(a,c){this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.REMOVE_SHARE_PREVIEW,tabID:a,composer:c})})},receivedNewMessage:function(a,c){b("FantaDispatcher").dispatch({type:h.RECEIVED_NEW_MESSAGE,tabID:a,message:c})},updateGroupName:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_GROUP_NAME,threadID:a,newName:c})})},setNewGroupNameLocally:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.SET_NEW_GROUP_NAME_LOCALLY,threadID:a,newName:c})})},addParticipants:function(a,c){__p&&__p();var d=this;b("ifRequired")("FantaAppStore",function(e){__p&&__p();e=e.getState().mercury.tabContents.get(a);if(!e)return;var f=e.thread;e=e.typeahead;if(!e||!f)return;var h=b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),a);if(f.is_canonical_user||h){h=e.getSelectedParticipantIDs();e=f.participants;e=i(e.concat(h));e?f.is_canonical_user?d.addGroupParticipantsAsOpenTab(e,a,c):d.addGroupParticipantsAsReplaceTab(e,a,c):d.addGroupParticipant(a,c)}else d.addGroupParticipant(a,c)})},addGroupParticipant:function(a,c){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS,threadID:a,onSendSuccess:c})})},addGroupParticipantsAsOpenTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB,fromTabID:c,onSendSuccess:d,tabID:a})})},addGroupParticipantsAsReplaceTab:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){b("FantaDispatcher").dispatch({type:h.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB,newTabID:a,onSendSuccess:d,tabID:c})})},sendMessage:function(a,c,d,e){this.dispatchOrBootloadSendMessages(function(){var f={type:h.SEND_MESSAGE,threadID:a,message:c,composer:d,onSendSuccess:e};b("FantaDispatcher").dispatch(f)})},sendPhoto:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_PHOTO,clearComposerOnSend:!0,onSendSuccess:d,photoData:c,threadID:a};b("FantaDispatcher").dispatch(e)})},sendGif:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_GIF,clearComposerOnSend:!1,onSendSuccess:d,photoData:c,threadID:a};b("FantaDispatcher").dispatch(e)})},sendHotLike:function(a,c,d,e,f){this.dispatchOrBootloadSendMessages(function(){var g={type:h.SEND_HOT_LIKE,emoji:c,onSendSuccess:f,size:d,source:e,threadID:a};b("FantaDispatcher").dispatch(g)})},sendSticker:function(a,c,d){this.dispatchOrBootloadSendMessages(function(){var e={type:h.SEND_STICKER,threadID:a,stickerID:c,onSendSuccess:d};b("FantaDispatcher").dispatch(e)})},composerTextUpdate:function(a,c,d){var e=this;c.length>0&&b("ifRequired")("FantaReducersSendMessages",b("emptyFunction"),function(){return e.dispatchOrBootloadSendMessages(b("emptyFunction"))});this.dispatchOrBootloadSharePreview(function(){b("FantaDispatcher").dispatch({type:h.COMPOSER_TEXT_UPDATE,composer:d,message:c,threadID:a})})},dispatchOrBootloadMessages:function(a){b("ifRequired")("FantaReducersMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadSendMessages:function(a){b("ifRequired")("FantaReducersSendMessages",function(){b("setImmediate")(a)},function(){b("Bootloader").loadModules(["FantaReducersSendMessages"],function(c){g&&(g.addReducers(c),b("setImmediate")(a))},"FantaMessageActions")})},dispatchOrBootloadUploader:function(a){b("ifRequired")("FantaReducersFileUploader",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersFileUploader"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},dispatchOrBootloadSharePreview:function(a){b("ifRequired")("FantaReducersSharePreview",function(){a()},function(){b("Bootloader").loadModules(["FantaReducersSharePreview"],function(b){g&&(g.addReducers(b),a())},"FantaMessageActions")})},updateUserInputRequested:function(a,c,d){this.dispatchOrBootloadMessages(function(){b("FantaDispatcher").dispatch({type:h.UPDATE_USER_INPUT_REQUESTED,isUserInputRequested:a,requestNumResults:c,requestType:d})})}};e.exports=a}),null);
__d("MessengerDecoratorUtil",["invariant","MercuryAttachment","MercuryAttachmentLayoutTypeHelper","MercuryConfig","QE2Logger","StoryAttachmentStyle","gkx","isMessengerMessageRemoved"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=function(a){return a===Object(a)};function i(a){a=a.attachments&&a.attachments.length===1&&a.attachments[0]&&a.attachments[0].attach_type!=="sticker"&&!p.isP2PAttachment(a);return!!a}function a(a){return i(a)&&b("MercuryAttachment").isLightweightActionAttachment(a.attachments[0])}function c(a){var b;if((a==null?void 0:(b=a.attachments)==null?void 0:b.length)>0&&((b=a.attachments[0].share)==null?void 0:b.style_list)!=null){return((b=a.attachments[0].share)==null?void 0:b.style_list[0])==="wec_message"}else return!1}function d(a){return b("gkx")("843916")&&!n(a)}function f(a){__p&&__p();if(k(a)||l(a)||b("isMessengerMessageRemoved")(a)||m(a))return!1;var c=j(a);a||g(0,1760);if(!c)return!1;if(p.isCarouselAttachment(c))return!1;if(b("MercuryAttachment").isPhotoGroupAttachment(c))return!0;if(p.isUrlCtaOnlyBusinessAttachment(c))return!0;if(p.isNewForwardEntrypoint(c))return!0;return b("MercuryAttachment").isFileAttachment(c)&&c.message_file_fbid?!0:!1}function j(a){var b=a.attachments&&a.attachments.length===1;return b?a.attachments[0]:null}function k(a){return((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)==="montage_direct"}function l(a){return b("gkx")("1019832")&&((a=a)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.style_list)!=null?a[0]:a:a:a:a:a)==="montage_share"}function m(a){return a&&a.attachments&&a.attachments.length>0&&b("MercuryAttachmentLayoutTypeHelper").isAdminType(a.attachments[0])}function n(a){var b;a=j(a);if(!a)return!1;if(((b=a.share)==null?void 0:b.style_list)!=null){return((b=a.share)==null?void 0:b.style_list[0])==="rtc_call_log"}else return!1}function o(a){var c=[],d=[];a.attachments.forEach(function(a){a.metadata&&a.metadata.fbid?(c.push(a.metadata.fbid.toString()),d.push(a.attach_type.toString())):a.share&&a.share.share_id&&(c.push(a.share.share_id),d.push(a.attach_type)),b("MercuryAttachment").isFileAttachment(a)&&a.message_file_fbid&&(c.push(a.message_file_fbid),d.push(a.attach_type))});return{ids:c,types:d}}var p={isEventAttachment:function(a){return this._isStoryBased(a)&&a.share.style_list.indexOf("event_reminder")>-1},isLocationAttachment:function(a){return this._isStoryBased(a)&&(a.share.style_list.indexOf("message_location")>-1||a.share.style_list.indexOf("message_live_location")>-1||a.share.style_list.indexOf("message_multiple_locations")>-1)},isCarouselAttachment:function(a){if(!b("gkx")("1242348"))return!1;a=a==null?void 0:(a=a.share)==null?void 0:a.subattachments;return a!=null&&a.length>1?!0:!1},isUrlCtaOnlyBusinessAttachment:function(a){__p&&__p();var c,d,e=this;if(!b("gkx")("1242348"))return!1;c=(c=a.share)==null?void 0:c.style_list;d=(d=a.share)==null?void 0:d.target;a=a.attach_type==="share"&&c instanceof Array&&c.indexOf("business_message_items")>-1;if(a&&d!=null){c=this.hasNonWebUrlCTABusinessAttachmentItem(d);if(c)return!1;if(d.items!=null&&d.items.length>0){a=d.items.find(function(a){return e.hasNonWebUrlCTABusinessAttachmentItem(a)});if(a!=void 0)return!1}return!0}return!1},hasNonWebUrlCTABusinessAttachmentItem:function(a){if(a.call_to_actions!=null&&a.call_to_actions.length>0){a=a.call_to_actions.find(function(a){return a.action_type!=2&&a.action_type!=1});if(a!=void 0)return!0}return!1},isBusinessMessageAttachment:function(a){var b;b=(b=a.share)==null?void 0:b.style_list;return a.attach_type==="share"&&b instanceof Array&&b.indexOf("business_message_items")>-1},isP2PAttachment:function(a){var c=this;a=b("MercuryAttachment").get(a).filter(function(a){return h(a)&&c.isP2P(a)});return!!a.length},isP2P:function(a){return!!(this._isStoryBased(a)&&(a.share.style_list.indexOf("orion")>-1||a.share.style_list.indexOf("orion_request")>-1))},isNewForwardEntrypoint:function(a){var c;c=((c=a)!=null?(c=c.share)!=null?(c=c.style_list)!=null?c[0]:c:c:c)==="montage_direct";c=b("MercuryAttachment").isShareAttachment(a)&&a.share!=null&&a.share.share_id&&!p.isP2P(a)&&!p.isEventAttachment(a)&&!p.isLocationAttachment(a)&&!p.isBusinessMessageAttachment(a)&&!c&&(!a.share.target||!a.share.target.lwa_type);if(!c)return!1;b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");return b("MercuryConfig").MNFWD},_isStoryBased:function(a){return!!(a.attach_type==="share"&&a.share&&a.share.style_list)},isAttachment:i,hasLWA:a,isWECMessage:c,allowForward:f,maybeGetMessageAttachment:j,isMontageDirect:k,isMontageShare:l,isAdminLayoutType:m,isRTCShareMessage:n,getAttachments:o,allowSave:d};e.exports=p}),null);
__d("MessengerReactionStaticEmoji.react",["requireCond","MessengerTextWithEmoticons.react","React","cr:1117307","gkx"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.reaction,d=a.isDefaultReaction;a=a.uri;return b("gkx")("895574")&&b("cr:1117307")!=null?b("React").jsx(b("cr:1117307"),{reaction:c}):a!=null?b("MessengerTextWithEmoticons.react").renderEmoji(!1,c,c,!0,a):b("React").jsx(b("MessengerTextWithEmoticons.react"),{customSize:!0,forceMessengerEmoji:d,renderEmoticons:!0,renderEmoji:!0,text:c})}e.exports=a}),null);
__d("MessengerReactionsContextualDialog.react",["cx","AccessibleLayer","ContextualLayerAutoFlipHorizontal","ContextualLayerHideOnScrollOut","ContextualLayerUpdateOnScroll","LayerHideOnEscape","ReactAbstractContextualDialog","ReactLayer"],(function(a,b,c,d,e,f,g){"use strict";a=b("ReactLayer").createClass(b("ReactAbstractContextualDialog").createSpec({addedBehaviors:[b("ContextualLayerAutoFlipHorizontal"),b("ContextualLayerHideOnScrollOut"),b("ContextualLayerUpdateOnScroll"),b("LayerHideOnEscape"),b("AccessibleLayer")],displayName:"MessengerReactionsContextualDialog",shouldSetARIAProperties:!1,theme:{wrapperClassName:"_4owc"}}));e.exports=a}),null);
__d("MessengerViewer",["CurrentUser","React"],(function(a,b,c,d,e,f){"use strict";e.exports=b("React").createContext(b("CurrentUser").getID())}),null);
__d("MessengerReactionsMenu.react",["cx","fbt","DOMContainer.react","EmojiFormat.re","Keys","MercuryIDs","MercuryThreadActions","MessageReactionMutationWebGraphQLMutation","MessengerMessageActionsTypedLogger","MessengerReactionsContextualDialog.react","MessengerReactionsFlyoutButtonBootloader.react","MessengerReactionStaticEmoji.react","MessengerReactionsUtil.re","MessengerState.re","MessengerSupportedEmojiUtils","MessengerViewer","React","XAsyncRequest","emptyFunction","getThreadTypeNameFromThreadType","gkx","objectValues","qex"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={animations:{},reactions:b("MessengerReactionsUtil.re").defaultReactions.slice().map(function(a){return{name:a}})},d.$3=function(a){a||d.props.onHide()},d.$7=function(a){d.$4(b("EmojiFormat.re").codeArrayToUnicode(a))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$2()};d.UNSAFE_componentWillReceiveProps=function(){this.$2()};d.componentWillUnmount=function(){b("objectValues")(this.state.animations).forEach(function(a){a.renderer&&typeof a.renderer.pause==="function"&&a.renderer.pause()}),this.$1&&this.$1.cancel()};d.$2=function(){__p&&__p();var a=b("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);a=a==null?void 0:a.reactions;if(a&&b("gkx")("1229783")){this.setState({reactions:a.map(function(a){return{name:a.reactionEmoji,uri:a.staticAssetUri}})});return}a=b("MessengerReactionsUtil.re").defaultReactions.slice();var c=this.props.message.reactions;c=c&&c[this.context];b("qex")._("705431")&&c!=null&&c!=""&&!a.includes(c)&&a.push(c);this.setState({reactions:a.map(function(a){return{name:a}})})};d.render=function(){var a=this,c=this.context,d=this.props.message.reactions&&this.props.message.reactions[c];c=b("MessengerState.re").getThreadMetaNow(this.context,this.props.message.thread_id);var e=b("gkx")("1229783")&&(c==null?void 0:c.theme_id)||"";return b("React").jsx(b("MessengerReactionsContextualDialog.react"),{alignment:"center",contextRef:this.props.refProp,"data-testid":void 0,shown:!0,onBlur:this.props.onHide,onToggle:this.$3,children:b("React").jsxs("div",{role:"listbox","aria-orientation":"horizontal",className:"_1z8q _fy2",children:[this.state.reactions.map(function(c){var f=c.name,g=e+f,h=b("MessengerReactionsUtil.re").defaultReactions.slice().includes(f);return b("React").jsx("span",{className:"_1z8r"+(f===d?" _5-2b":""),"aria-label":f,id:f,onClick:function(){return a.$4(f)},onKeyPress:function(c){c=c.charCode;c===b("Keys").RETURN&&a.$4(f)},role:"option","aria-selected":f===d,tabIndex:"0",children:a.state.animations[g]?b("React").jsx(b("DOMContainer.react"),{children:a.state.animations[g].element}):b("React").jsx(b("MessengerReactionStaticEmoji.react"),{reaction:f,isDefaultReaction:h,uri:c.uri})},f)}),this.$5()]})})};d.$6=function(a){return!b("MessengerReactionsUtil.re").defaultReactions.includes(a)?b("MessengerSupportedEmojiUtils").getSupportedEmojiKey(a):a};d.$5=function(){var a=this.props.message,c={onSelect:this.$7,getInput:b("emptyFunction")};a=a.thread_id;var d=this.state.reactions.length!==b("MessengerReactionsUtil.re").defaultReactions.length;return b("qex")._("705431")&&!d?b("React").jsx(b("MessengerReactionsFlyoutButtonBootloader.react"),{contextRef:this.props.refProp,dialogProps:{offsetX:140,offsetY:53},flyoutAlignment:"right",flyoutProps:c,iconClassName:"_70b-",interactionClassName:"_1z8r",threadID:a,title:h._("Choose an emoji")},"emojireact"):null};d.$8=function(){i.markRead(this.props.message.thread_id),i.markSeen(this.props.message.thread_id)};d.$4=function(a){__p&&__p();var c=this,d=this.props,e=d.message,f=d.entryPoint,g=this.context,h=e.reactions&&e.reactions[g],i=b("MessengerState.re").getServerMessageID(g,e.message_id);d=b("MessageReactionMutationWebGraphQLMutation").getURI({action:a===h?"REMOVE_REACTION":"ADD_REACTION",message_id:i,actor_id:g,reaction:a});var j=function(d){var j=e.other_user_fbid||e.thread_fbid,k=b("MessengerState.re").getThreadMetaNow(g,e.thread_id),l=k&&k.participants?k.participants.length:0;k=b("getThreadTypeNameFromThreadType")(k&&k.thread_type);var m=e.attachments[0];l=new(b("MessengerMessageActionsTypedLogger"))().setAction("reaction").setOfflineThreadid(e.offline_threading_id).setMid(i).setRecipientID(b("MercuryIDs").getUserIDFromParticipantID(e.author)).setEntryPoint(f).setReaction(c.$6(a)).setPreviousReaction(c.$6(h)).setGroupSize(l).setThreadType(k).setThreadid(j);d.errorSummary!=null&&(l=l.setErrorText(d.errorSummary.toString()));m!=null&&(l=l.setMessageType(m.attach_type));l.log();c.$8()};new(b("XAsyncRequest"))(d).setMethod("POST").setHandler(j).send();this.props.onHide()};return c}(b("React").Component);a.contextType=b("MessengerViewer");e.exports=a}),null);
__d("MessengerReactionsPrompt.react",["cssVar","cx","fbt","ix","CurrentUser","Image.react","MessengerDotComAndInboxM4Check.re","MessengerReactIconSVGM4React.re","MessengerReactionsMenu.react","React","WorkChatRedesignedMessageListCheck.re","asset","tooltipPropsFor"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hover:!1,open:!1},c.$2=function(a){a.stopPropagation(),c.setState({open:!0},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!0)},c.$3=function(){c.setState({open:!1},function(){return c.props.onShowMenu&&c.props.onShowMenu(c.state.open)}),c.props.setReactionsPromptShown&&c.props.setReactionsPromptShown(!1)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){__p&&__p();var a=this;if(this.props.isActive!==!0&&!this.state.open)return null;var c=null;if(this.props.isEdit===!0&&b("WorkChatRedesignedMessageListCheck.re").enabled){var d=this.state.hover||this.state.open?j("559624"):j("559623");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("WorkChatRedesignedMessageListCheck.re").enabled){d=this.state.hover||this.state.open?j("895450"):j("895449");c=b("React").jsx(b("Image.react"),{src:d})}else if(this.props.isQuickAdd){d=j("278123");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("CurrentUser").isWorkUser()){d=this.state.open?j("559649"):j("559648");c=b("React").jsx(b("Image.react"),{src:d})}else if(b("MessengerDotComAndInboxM4Check.re").yes)c=b("MessengerReactIconSVGM4React.re").make(this.state.hover?"black":"rgba(0, 0, 0, 0.34)");else{d=this.state.open?j("559646"):j("559647");c=b("React").jsx(b("Image.react"),{src:d})}d=i._("React");var e=b("tooltipPropsFor")(d,"above",b("WorkChatRedesignedMessageListCheck.re").enabled?"right":"center");return b("React").jsxs("button",babelHelpers["extends"]({},e,{className:"_8sop"+(this.props.isQuickAdd?"":" _5zvq")+(b("MessengerDotComAndInboxM4Check.re").yes&&!this.props.isQuickAdd?" _7i2o":"")+(this.props.isQuickAdd?" _yav":""),onClick:this.state.open?this.$1:this.$2,onMouseEnter:function(b){return a.setState({hover:!0})},onMouseLeave:function(b){return a.setState({hover:!1})},tabIndex:-1,"aria-label":d,"data-testid":void 0,ref:"button",children:[c,this.renderMenu()]}))};d.renderMenu=function(){var a=this;return!this.state.open?null:b("React").jsx(b("MessengerReactionsMenu.react"),{entryPoint:"awareness_plus",message:this.props.message,onHide:this.$3,refProp:function(){return a.refs.button}})};d.$1=function(a){a.stopPropagation()};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerReactions.react",["cx","fbt","Bootloader","CurrentUser","MercuryConfig","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerReactionsPrompt.react","MessengerReactionStaticEmoji.react","MessengerReactionsUtil.bs","MessengerState.re","MessengerWebViewReactionsTypedLogger","React","ShimButton.react","TooltipData","WorkChatRedesignedMessageListCheck.re","gkx","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="ALL",j=b("CurrentUser").getID(),k=3,l=9;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={reactionsPromptShown:!1},d.$1=function(a){d.setState({reactionsPromptShown:a})},d.$3=function(){var a=b("MessengerEnvironment").messengerui,c=d.props,e=c.isFromViewer,f=c.message,g=c.participants;c=f.reactions;new(b("MessengerWebViewReactionsTypedLogger"))().setEvent("open_details").setMid(f.message_id).setSenderID(f.author).setEmojiGroup(i).setEmojiGroupCount(Object.values(c).length).log();a?b("Bootloader").loadModules(["MessengerDialogs.bs","MessengerReactionsDialogReact.bs"],function(a,c){var d=c.jsComponent;a.showDialog(function(){return b("React").jsx(d,{isFromViewer:e,participants:g,message:f})})},"MessengerReactions.react"):b("Bootloader").loadModules(["ChatReactionsDialog"],function(a){a.show(f,g,e)},"MessengerReactions.react")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){__p&&__p();var a=this.props,c=a.message,d=a.participants,e=a.hovered;a=a.renderQuickAdd;var f=c.reactions,g=c.attachments,i=g&&g.length===1&&b("MercuryConfig").MNFWD&&f&&Object.keys(f).length===0;if(i&&g[0].attach_type==="sticker")return null;if(!this.state.reactionsPromptShown&&!e&&i&&g[0].attach_type==="share")return null;if(g[0]&&g[0].attach_type==="share"&&!g[0].share)return null;if(((e=g[0])!=null?(e=e.share)!=null?(e=e.style_list)!=null?e[0]:e:e:e)==="montage_direct")return null;if((!f||!d)&&!a)return null;var l={},m=0;i=!1;Object.entries(f||{}).forEach(function(a){var b=a[0];a=a[1];typeof a==="string"&&(b===j&&(i=!0),l[a]||(l[a]=0),l[a]++,m++)});if(b("WorkChatRedesignedMessageListCheck.re").enabled&&m===0)return null;var n=(g=b("MessengerState.re").getThreadMetaNow(j,this.props.message.thread_id))==null?void 0:g.reactions;e=Object.keys(l).sort(b("MessengerReactionsUtil.bs").sortFunction).slice(0,k).map(function(c,d,a){var e,f=b("MessengerReactionsUtil.bs").defaultReactions.includes(c);e=b("gkx")("1229783")?n==null?void 0:(e=n.find(function(a){return a.reactionEmoji===c}))==null?void 0:e.staticAssetUri:null;return b("React").jsx("span",{className:"_4kf5","data-testid":void 0,style:{zIndex:a.length-d,marginLeft:d===0?0:"-4px"},children:b("React").jsx(b("MessengerReactionStaticEmoji.react"),{reaction:c,isDefaultReaction:f,uri:e})},c)});d=m>0?b("React").jsx("span",{className:"_4kf5 _4kf6"+(i?" _fy2":""),children:m}):null;f=a&&!i||b("WorkChatRedesignedMessageListCheck.re").enabled?b("React").jsx("div",{className:"_aou _aov"+(b("WorkChatRedesignedMessageListCheck.re").enabled&&i?" _7w5w":""),children:b("React").jsx("span",{className:"_aow",children:b("React").jsx(b("MessengerReactionsPrompt.react"),{message:c,isActive:!0,isEdit:i,isQuickAdd:!0,setReactionsPromptShown:this.$1})})}):null;g=b("TooltipData").propsFor(this.$2());return b("React").jsx("div",{className:"_8rnv preview",children:b("React").jsxs("div",babelHelpers["extends"]({},b("WorkChatRedesignedMessageListCheck.re").enabled?{}:g,{className:"_7ef9",children:[b("React").jsxs(b("ShimButton.react"),babelHelpers["extends"]({"aria-label":h._("View message reactions")},b("WorkChatRedesignedMessageListCheck.re").enabled?g:{},{className:"_aou",onClick:this.$3,children:[e,d]})),f]}))})};d.$2=function(){__p&&__p();var a=this.props.message.reactions,c=this.props.participants;if(!a||!c)return"";a=Object.keys(a);var d=a.reduce(function(a,d){if(a.length>=l+1)return a;d=b("MercuryIDs").getParticipantIDFromUserID(d);d=c.get(d)||b("MessengerParticipants.bs").getNow(d);d=d&&d.name;d&&a.push(d);return a},[]),e=d.length,f=d.join("\n");if(a.length>e){d.pop();e=h._("and {count} others",[h._param("count",a.length-d.length)]);f=d.join("\n")+"\n"+e.toString()}return f};return c}(b("React").Component);a.propTypes={isFromViewer:(c=b("prop-types")).bool.isRequired,message:c.object.isRequired,participants:c.object,renderQuickAdd:c.bool,hovered:c.bool};e.exports=a}),null);
__d("MessengerDecorator",["cx","BootloadedComponent.react","BootloaderResource","FantaMessageActions","JSResource","MercuryConfig","MessageReplyPermissions","MessagingTag","MessengerDecoratorUtil","MessengerEnvironment","MessengerReactions.react","QE2Logger","React","WorkChatRedesignedMessageListCheck.re","gkx","isMessengerMessageRemoved","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(a=b("MessengerDecoratorUtil")).allowForward,i=a.allowSave,j=a.getAttachments,k=a.hasLWA,l=a.isAdminLayoutType,m=a.isAttachment,n=a.isMontageDirect,o=a.isMontageShare,p=a.isWECMessage,q=(c=b("lazyLoadComponent"))((d=b("JSResource"))("MessengerMessageActionItemList").__setRef("MessengerDecorator")),r=c(d("MessengerRemovedTombstoneActionItemList").__setRef("MessengerDecorator")),s=c(d("MessengerSavedMessageActionItemList").__setRef("MessengerDecorator")),t=c(d("WorkChatMessageSavedDecorator.react").__setRef("MessengerDecorator")),u=c(d("WorkChatMessageSaveAction.react").__setRef("MessengerDecorator")),v=[{name:"Saved",check:function(a,c){return b("gkx")("843916")&&a.tags!=null&&a.tags.includes("message:save")},render:function(a,c,d,e){return(c=b("React")).jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(t,{})},"saved:"+a.message_id)},getAdditionalClassNames:function(){return"_5z-5"}},{name:"Reactions",check:function(a,c){if(n(a)||o(a)||l(a))return!1;var d=!!(a.reactions&&Object.keys(a.reactions).length>0);b("QE2Logger").logExposureForUser("messenger_growth_www_share_flow");c=!!(!c&&(b("WorkChatRedesignedMessageListCheck.re").enabled||h(a)||m(a)&&b("MercuryConfig").MNFWD));return(d||c)&&!k(a)&&!p(a)},render:function(a,c,d,e){var f=h(a)||m(a)&&b("MercuryConfig").MNFWD;return b("React").jsx(b("MessengerReactions.react"),{isFromViewer:c,message:a,renderQuickAdd:f&&!c,hovered:e,participants:d&&d.participants},a.message_id+"-reactions")},getAdditionalClassNames:function(){return"_5z-5"}}],w=[{name:"MontageReply",check:function(a){if(!b("MercuryConfig").MontageThreadViewer||l(a))return!1;a=a.montage_reply_data&&a.montage_reply_data.message_id;return!!a},render:function(a,c,d){d=a.montage_reply_data&&a.montage_reply_data.message_id;var e=a.montage_reply_data&&a.montage_reply_data.reply_action,f=a.montage_reply_data&&a.montage_reply_data.snippet;return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("gkx")("1031642")?b("JSResource")("MercuryMontageReplyStoryQueryContainer.react").__setRef("MessengerDecorator"):b("JSResource")("MontageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,messageID:d,replyAction:e,replyAuthorID:a.author,replySnippet:f,threadID:a.thread_id},"montagereply:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageReply",check:function(a){return!a.replied_to_message||l(a)?!1:b("gkx")("678600")||b("MercuryConfig").M3CRE},render:function(a,c,d){return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessageReplyDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,repliedToMessage:a.replied_to_message,threadID:a.thread_id,scrollToRepliedMessage:d&&d.scrollToRepliedMessage,customColor:d&&d.customColor,gradientColors:d&&d.gradientColors,solidColor:d&&d.solidColor,nicknames:d&&d.nicknames,messageBody:a.body},"messagereply:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageForward",check:function(a){return!b("MessengerEnvironment").messengerui||!a.is_forwarded||l(a)?!1:b("gkx")("974812")},render:function(a,c,d){var e=a.attachments.length>0?a.attachments[0].attach_type:"unknown";return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerForwardDecoratorContainer.react").__setRef("MessengerDecorator"),isFromViewer:c,authorID:a.author,threadID:a.thread_id,customColor:d&&d.customColor,messageBody:a.body,attachmentType:e},"messageforward:"+a.message_id)},getAdditionalClassNames:function(){return null}}],x=[{name:"ForwardImages",isAlwaysVisible:!0,check:function(a){return h(a)},render:function(a,c){var d=j(a),e=d.ids;d=d.types;return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("MessengerEnvironment").messengerui?b("JSResource")("MessengerPhotoForwardButton.react").__setRef("MessengerDecorator"):b("JSResource")("ChatPhotoForwardButton.react").__setRef("MessengerDecorator"),attachmentIDs:e,attachmentTypes:d,isFromViewer:c},"forwardimages:"+a.message_id)},getAdditionalClassNames:function(){return"_ylc"}},{name:"ReactionPrompt",check:function(a){return n(a)||o(a)||b("isMessengerMessageRemoved")(a)||l(a)?!1:!h(a)&&!k(a)},render:function(a,c,d){c=b("MercuryConfig").MNFWD&&m(a);return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerReactionsPrompt.react").__setRef("MessengerDecorator"),message:a,isActive:!c&&(!a.folder||a.folder===b("MessagingTag").INBOX),onShowMenu:d&&d.onShowMenu},"reactionprompt:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessengerSaveAction",check:function(a){return i(a)},render:function(a){var c;return(c=b("React")).jsx(c.Suspense,{fallback:c.jsx("div",{}),children:c.jsx(u,{isActive:!b("isMessengerMessageRemoved")(a),message:a})},"messagesaveicon:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessengerUIReplyAction",check:function(a){if(o(a))return!1;return b("MessageReplyPermissions").canReplyToMessage(a)?b("MessengerEnvironment").messengerui:!1},render:function(a,c,d){return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerMessageReplyAction.react").__setRef("MessengerDecorator"),message:a,onReplyToMessage:d&&d.onReplyToMessage},"messagereplyaction:"+a.message_id)},getAdditionalClassNames:function(){return null}},{name:"MessageActions",check:function(a){return n(a)||o(a)||l(a)?!1:!0},render:function(a,c,d){__p&&__p();var e=n(a)||o(a)?!1:(h(a)||m(a)&&b("MercuryConfig").MNFWD)&&!k(a),f=b("MessengerEnvironment").messengerui||(d==null?void 0:d.onReplyToMessage)!=null?d==null?void 0:d.onReplyToMessage:function(){return b("FantaMessageActions").replyToMessage(a,a.thread_id)};b("BootloaderResource").preload(b("JSResource")("MessengerMessageActionItemList").__setRef("MessengerDecorator"));b("BootloaderResource").preload(b("JSResource")("MessengerRemovedTombstoneActionItemList").__setRef("MessengerDecorator"));b("BootloaderResource").preload(b("JSResource")("MessengerSavedMessageActionItemList").__setRef("MessengerDecorator"));return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerMessageActions.react").__setRef("MessengerDecorator"),message:a,isActive:!0,onShowMenu:d&&d.onShowMenu,isFromViewer:c,includeReactions:e,isShowingOriginal:d&&d.isShowingOriginal,hasFormatting:d&&d.hasFormatting,onToggleOriginal:d&&d.handleToggleOriginal,onReplyToMessage:f,isSavedView:d&&d.isSavedView,renderActionItems:function(g){__p&&__p();var h=g.closeActionList;g=g.openReactionsPopover;if(d==null?void 0:d.isSavedView){var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(s,{closeActionList:h})},"MessengerSavedMessageActionItemList")}else if(b("isMessengerMessageRemoved")(a)){var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(r,{closeActionList:h,isFromViewer:c,message:a})},"MessengerRemovedTombstoneActionItemList")}else{var i;return(i=b("React")).jsx(i.Suspense,{fallback:i.jsx("div",{}),children:i.jsx(q,{closeActionList:h,hasFormatting:d&&d.hasFormatting,includeReactions:e,isFromViewer:c,isShowingOriginal:d&&d.isShowingOriginal,message:a,onReplyToMessage:f,onToggleOriginal:d&&d.handleToggleOriginal,openReactionsPopover:g})},"MessengerMessageActionItemList")}}},"messageactions:"+a.message_id)},getAdditionalClassNames:function(){return null}}];f={getBeforeDecorators:function(){return w},getAfterDecorators:function(){return v},getInnerDecorators:function(){return x}};e.exports=f}),null);
__d("MessengerDecoratorHideable.react",["cx","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.isActive;a=a.children;var d=b("gkx")("1221668");return b("React").jsx("span",{className:(!Boolean(c)&&!d?"_8sow":"")+(!Boolean(c)&&d?" _8tab":""),children:a})}e.exports=a}),null);
__d("MessengerInnerDecorators.react",["cx","Locale","MessengerDecorator","MessengerDecoratorHideable.react","MessengerDotComAndInboxM4Check.bs","React","WorkChatRedesignedMessageListCheck.re","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={shown:!1},c.$1=function(a){c.setState({shown:a})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this,c=this.props.decorators||b("MessengerDecorator").getInnerDecorators();if(this.props.isSavedView===!0)return null;c=c.map(function(c){return c.check(a.props.message)?b("React").jsx(b("MessengerDecoratorHideable.react"),{isActive:a.state.shown||c.isAlwaysVisible||a.props.hovered,children:c.render(a.props.message,a.props.isFromViewer,babelHelpers["extends"]({},a.props.messageProps,{messageIsSelected:a.props.hovered||a.state.shown,onShowMenu:a.$1,isSavedView:!1}))},c.name):null}).filter(Boolean);return b("React").jsx("span",{className:(b("WorkChatRedesignedMessageListCheck.re").enabled?"":"_40fu")+(b("Locale").isRTL()||this.props.forGameChat?" _64wc":""),"data-hover":"none",children:b("React").jsx("span",{className:b("joinClasses")(this.props.className,"_2u_d"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7i2j":"")),children:c})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerFluxReduceDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("ExplicitRegistrationReactDispatcher"));e.exports=new a({strict:!1})}),null);
__d("MessengerVideoAutoplayActions",["MessengerFluxReduceDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g="messenger_video",h=b("keyMirror")({DESTROY:null,DSTROY_ALL:null,SCROLL:null,UPDATE:null});a={Types:h,Namespace:g,onScroll:function(a,c,d,e){b("MessengerFluxReduceDispatcher").dispatch({type:h.SCROLL,namespace:g,threadID:a,messageIDs:c,messageRectMap:d,viewportRect:e})},updateStore:function(a,c){b("MessengerFluxReduceDispatcher").dispatch({type:h.UPDATE,namespace:g,threadID:a,messageIDs:c})},deleteThread:function(a){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY,namespace:g,threadID:a})},deleteAllThreads:function(){b("MessengerFluxReduceDispatcher").dispatch({type:h.DESTROY_ALL,namespace:g})}};e.exports=a}),null);
__d("MessengerVideoAutoplayStore",["FluxReduceStore","MessengerVideoAutoplayActions","immutable","MessengerFluxReduceDispatcher"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerVideoAutoplayActions").Types,h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({currentVideoMessageID:null,lastVideoMessageID:null,messageIDs:null,videoVisibilityMap:null}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map()};d.reduce=function(a,c){if(c.namespace!==b("MessengerVideoAutoplayActions").Namespace)return a;switch(c.type){case g.SCROLL:c.messageIDs&&(a=this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs));return this.$MessengerVideoAutoplayStore2(a,c.threadID,c.messageRectMap,c.viewportRect);case g.UPDATE:return this.$MessengerVideoAutoplayStore1(a,c.threadID,c.messageIDs);case g.DESTROY:return this.$MessengerVideoAutoplayStore3(a,c.threadID);case g.DESTROY_ALL:return a.clear()}return a};d.$MessengerVideoAutoplayStore1=function(a,b,c){return!c?a["delete"](b):a.set(b,new h({currentVideoMessageID:null,lastVideoMessageID:c.first(),messageIDs:c,videoVisibilityMap:null}))};d.$MessengerVideoAutoplayStore3=function(a,b){return a["delete"](b)};d.$MessengerVideoAutoplayStore4=function(a,b,c,d,e){var f=this,g=null;c=c.map(function(a){if(g)return[a,!1];else{var b=f.$MessengerVideoAutoplayStore5(a,d,e);b&&(g=a);return[a,b]}}).fromEntrySeq().toOrderedMap();return a.mergeIn([b],{currentVideoMessageID:g,videoVisibilityMap:c})};d.$MessengerVideoAutoplayStore2=function(a,b,c,d){__p&&__p();var e=a.getIn([b,"messageIDs"]);if(!e||!c||!d)return a;if(!a.getIn([b,"currentVideoMessageID"]))return this.$MessengerVideoAutoplayStore4(a,b,e,c,d);else{var f=a.getIn([b,"videoVisibilityMap"]),g=a.getIn([b,"lastVideoMessageID"]),h=a.getIn([b,"currentVideoMessageID"]);if(this.$MessengerVideoAutoplayStore5(g,c,d)){if(f&&f.first())return a}else if(this.$MessengerVideoAutoplayStore5(h,c,d))return a;a=a.setIn([b,"currentVideoMessageID"],null);return this.$MessengerVideoAutoplayStore4(a,b,e,c,d)}};d.$MessengerVideoAutoplayStore6=function(a,b){return!a?!1:a.top>b.top&&a.bottom<b.bottom};d.$MessengerVideoAutoplayStore5=function(a,b,c){b=b.get(a);return this.$MessengerVideoAutoplayStore6(b,c)};d.getVideoVisibilityMap=function(a){return this.getState().getIn([a,"videoVisibilityMap"])};d.getMessageIDs=function(a){return this.getState().getIn([a,"messageIDs"])};d.isVisible=function(a,b){return!!this.getState().getIn([a,"videoVisibilityMap",b])};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MessengerFluxReduceDispatcher"))}),null);
__d("ChatMessage.react",["csx","cx","fbt","requireCond","BootloadedComponent.react","ChatAnimatedGifs","ChatBubble.react","ChatCodePasteUtils","ChatConfig","cr:1290594","CSS","CurrentUser","EmojiLikeUtils","ImmutableObject","JSResource","Locale","MercuryAttachment","MercuryDisplayTimeFilterMessageRenderer","MercuryErrorInfo","MercuryIDs","MercuryMessageError.react","MercuryTimestamp","MessengerDecorator","MessengerInnerDecorators.react","MessengerMessage.bs","MessengerVideoAutoplayStore","React","ReactDOM","TooltipData","XUISpinner.react","convertMIGColorToFIGColor","gkx","immutable","isRTL","joinClasses","prop-types","setImmediate"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isVisible:!1,isHighlighted:!1,hovered:!1},c.$3=function(){return c.setState({hovered:!0})},c.$4=function(){return c.setState({hovered:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("CSS").conditionClass(b("ReactDOM").findDOMNode(this),"_2cnu",this.isOneLine());this.setState({isVisible:b("MessengerVideoAutoplayStore").isVisible(this.props.message.thread_id,this.props.message.message_id)});this.$1=b("MessengerVideoAutoplayStore").addListener(function(c){c=b("MessengerVideoAutoplayStore").isVisible(a.props.message.thread_id,a.props.message.message_id);c!==a.state.isVisible&&a.setState({isVisible:c})})};d.componentWillUnmount=function(){this.$1&&this.$1.remove()};d.isOneLine=function(){var a=this.props.message;return b("MessengerMessage.bs").isInbound(a)&&!this.refs.attachmentsInside&&this.refs.bubble&&!this.refs.bubble.contentWraps()};d.shouldComponentUpdate=function(a,b){var c=a.message!==this.props.message,d=!1,e=!1,f=this.props.thread;if(f)d=f.custom_like_icon!==a.thread.custom_like_icon,e=f.solid_color!==a.thread.solid_color;else if(a.thread)return!0;return c||d||e||b.isVisible!==this.state.isVisible||b.isHighlighted!==this.state.isHighlighted||b.hovered!==this.state.hovered};d.render=function(){__p&&__p();var a=this.props.message,c=b("MercuryAttachment").get(a).length>0,d=b("MessengerMessage.bs").isInbound(a),e=b("MercuryIDs").isGroupChat(a.thread_id),f=b("MercuryErrorInfo").hasErrorStatus(a),g=b("ChatConfig").getBool("chat_tab_has_gradients");c="_5wd4"+(d?" _1nc7":"")+(d?"":" _1nc6")+(c?" _2_-t":"")+(d&&e?" _5ysy":"")+(f?" _1zcs":"")+(this.state.isHighlighted&&!g?" _6iuj":"");var h=this.props.isFromViewer,i=[],j=a,k=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"",l=(d=this.props.thread)==null?void 0:d.custom_nickname;j&&b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(j)&&i.push(a.render(j,h,{customColor:k,nicknames:l}))});e=b("MercuryAttachment").get(a).filter(function(a){return!b("MercuryAttachment").isBubblePreferred(a)});f=this.$2("outside",e);return b("React").jsxs("div",{className:b("joinClasses")(this.props.className,c),onMouseEnter:this.$3,onMouseLeave:this.$4,children:[b("React").jsxs("div",{className:b("joinClasses")("._1dlq","_h8t"),children:[i,this.$5(f)]}),e.some(function(a){return b("MercuryAttachment").isShareAttachment(a)})?b("React").jsx(b("MessengerInnerDecorators.react"),{message:a,isFromViewer:h||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):b("React").jsx("div",{className:"_40qi"+(this.state.isHighlighted&&g?" _6iuj":"")}),this.$6()]})};d.$5=function(a){var c=this.props.message,d={},e=b("MessengerMessage.bs").isOutbound(c);if(e||this.props.needsTimestampTooltip){var f=i._("{time}",[i._param("time",b("MercuryTimestamp").getPreciseTimestamp(c.timestamp))]);Object.assign(d,b("TooltipData").propsFor(f,e?"right":"left"))}if(c.is_filtered_content)return b("React").jsx("div",babelHelpers["extends"]({className:"_5wd9 _5wdc uiBoxYellow clearfix",ref:"inner"},d,{children:b("MercuryDisplayTimeFilterMessageRenderer").renderFilteredContent(c)}));f=c.body&&c.body!==""?b("isRTL")(c.body):b("Locale").isRTL();return b("React").jsxs("div",babelHelpers["extends"]({className:"_5wd9"+(f?" direction_rtl":"")+(f?"":" direction_ltr")+" clearfix",ref:"inner"},d,{children:[this.$7(!a),a]}))};d.$6=function(){var a=this.props.message;return a.is_filtered_content||!b("MessengerMessage.bs").hasError(a)?null:b("React").jsxs("div",{className:"_3ry4",ref:"undertext",children:[b("React").jsx(b("MercuryMessageError.react"),{className:"_5wda clearfix",message:a,ref:"status"}),this.$8()]})};d.$8=function(){return this.props.message.is_spoof_warning?b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("span",{}),bootloadLoader:b("JSResource")("MercurySpoofWarning.react").__setRef("ChatMessage.react"),authorID:this.props.message.author,className:"_5wdb"}):null};d.$9=function(){return b("React").jsx("div",{style:{padding:"20px",text_align:"center",background:"white"},children:b("React").jsx(b("XUISpinner.react"),{})})};d.$10=function(a){a=a.find(function(a){return a.attach_type==="share"});return this.$11(a)};d.$11=function(a){return!a||!b("gkx")("1068408")?null:b("React").jsx(b("cr:1290594"),{messageShareID:a.share.share_id},"article-context-trigger")};d.$2=function(a,c){__p&&__p();var d=this;if(this.props.message.commerce_message_type==="ride_intent")return null;var e=this.props.message,f=this.props.thread?this.props.thread.custom_like_icon:null,g=a=="inside"?"attachmentsInside":"attachmentsOutside",h=this.props.thread?b("convertMIGColorToFIGColor")(this.props.thread.solid_color):"",i=[],j=[];a==="outside"&&e&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(e,d.props.isFromViewer)&&(i.push(a.render(e,d.props.isFromViewer,d.props,d.state.hovered)),j.push(a.getAdditionalClassNames()))});if(c.length>0){var k=b("React").jsx(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:e,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}),l=this.$10(c);return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:this.$9(),bootloadLoader:b("JSResource")("MercuryAttachments.react").__setRef("ChatMessage.react"),className:b("joinClasses")((a==="outside"?"_3e7u":"")+(e.body?" _16ys":"")+(h?" _3al":"")+" _n4o"+(i?" _1a6y":""),j),attachments:c,customLike:f,customColor:h,forGameChat:this.props.forGameChat,isChat:!0,afterDecorators:i,innerDecorators:k,isVisible:this.state.isVisible,maxWidth:this.props.maxBubbleWidth,message:e,onUnwrap:this.$12,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,ref:g,articleContextTrigger:l})}return null};d.$7=function(a){__p&&__p();var c=this,d=this.props,e=d.isFromViewer,f=d.message;d=d.thread;var g=f.body,h=b("MercuryAttachment").get(f).filter(function(a){return b("MercuryAttachment").isBubblePreferred(a)});h=this.$2("inside",h);var i=[],j=[],k=f;k&&(a&&b("MessengerDecorator").getAfterDecorators().forEach(function(a){a.check(k,e)&&(i.push(a.render(k,e,c.props)),j.push(a.getAdditionalClassNames()))}),b("MessengerDecorator").getBeforeDecorators().forEach(function(a){a.check(k,e)&&j.push(a.getAdditionalClassNames())}));var l=j.join(" ");b("ChatAnimatedGifs").shouldHideBody(f)&&(g="");var m=f.ranges;f.profile_ranges&&f.profile_ranges.length&&(m=(m||[]).concat(f.profile_ranges.map(function(a){return babelHelpers["extends"]({},a,{url:"/"+a.id})})));var n=b("CurrentUser").isWorkUser()?!1:b("ChatCodePasteUtils").containsCodeBlock(g);return(g||h)&&!b("EmojiLikeUtils").isEmojiLike(f)?b("React").jsxs("div",{className:b("joinClasses")(l,"_1e-x _n4o"),children:[n?b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{style:{height:22}}),bootloadLoader:b("JSResource")("ChatCodeBubble.react").__setRef("ChatMessage.react"),body:g,maxWidth:this.props.maxBubbleWidth,ranges:m,threadID:f.thread_id,customColor:d&&e?b("convertMIGColorToFIGColor")(d.solid_color):""}):b("React").jsxs("div",{className:"_3_bl",children:[b("React").jsx("div",{className:"_3_bp"}),b("React").jsx(b("ChatBubble.react"),{attachments:h,body:g,className:"_5wdf",isEmojiLike:!1,isFromViewer:this.props.isFromViewer,onReplyToMessage:this.props.onReplyToMessage,metaRanges:f.meta_ranges,message:f,maxWidth:this.props.maxBubbleWidth,ranges:m,ref:"bubble",threadID:f.thread_id,customLike:f.customLike,customColor:d&&e?b("convertMIGColorToFIGColor")(d.solid_color):"",threadCustomColor:d&&b("convertMIGColorToFIGColor")(d.solid_color),isForwarded:f.is_forwarded})]}),a?b("React").jsx(b("MessengerInnerDecorators.react"),{className:"_1z_2",message:f,isFromViewer:this.props.isFromViewer||!1,hovered:this.state.hovered,messageProps:this.props,forGameChat:this.props.forGameChat}):null,i]}):null};d.highlightMessage=function(){var a=this;this.setState({isHighlighted:!1});b("setImmediate")(function(){return a.setState({isHighlighted:!0})})};return c}(b("React").Component);a.propTypes={forGameChat:(c=b("prop-types")).bool.isRequired,message:c.object.isRequired,maxBubbleWidth:c.number.isRequired,onAttachmentLoad:c.func,onStickerClick:c.func,participants:c.instanceOf(b("immutable").Map).isRequired,readReceipts:c.instanceOf(b("immutable").OrderedMap).isRequired,thread:c.instanceOf(b("ImmutableObject")),needsTimestampTooltip:c.bool};e.exports=a}),null);
__d("ChatMessageGroup.react",["cx","fbt","ChatDateBreak.react","ChatMessage.react","ChatRemovedMessageTombstone.react","CurrentUser","FantaProfilePresence.bs","ImmutableObject","MercuryAttachmentLayoutTypeHelper","MercuryIDs","MercuryTimestamp","MessengerParticipants.bs","MessengerTextWithEmoticons.react","QE2Logger","React","ReactDOM","ShortProfiles","immutable","isMessengerMessageRemoved","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaProfilePresence.bs").jsComponent;a=b("immutable").OrderedMap;var j=new(b("ImmutableObject"))({name:"",href:"#"});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={participants:{}},d.$3=function(){return d.props.messages==null?!1:d.props.messages.some(function(a){if(a.attachments!=null&&a.attachments.length>0){a=a.attachments[0];return b("MercuryAttachmentLayoutTypeHelper").isAdminType(a)}return!1})},d.$5=function(){__p&&__p();var a;if(d.props.isFromViewer||d.$3())return null;var c=d.state.participants[d.props.author]||j,e=c.name,f=c.image_src;d.props.persona&&(e=d.props.persona.name,f=d.props.persona.profile_picture_url);e=h._("{name} - {time}",[h._param("name",e),h._param("time",b("MercuryTimestamp").getPreciseTimestamp(d.props.messages.last().timestamp))]);var g=b("MercuryIDs").getUserIDFromThreadID(d.props.threadID);g=g?b("ShortProfiles").getNow(g):null;g=g&&g.is_messenger_only;g=d.props.isOnline&&!g;a=b("CurrentUser").isWorkUser()&&((a=c)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)==="FOREIGN";c=d.props.persona?null:c.href;var k=d.props.thread;return b("React").jsx("div",{className:"_31o4",children:b("React").jsx(i,{border:!0,imageSize:"28",images:[f],isActive:g,isCanonical:k.is_canonical,showMultiCompany:a,threadFBID:k.thread_fbid,threadHref:c,tooltip:e})})},d.$6=function(){__p&&__p();if(d.props.isCanonical&&!d.props.persona||d.props.isFromViewer)return null;var a=d.state.participants[d.props.messages.first().author];if(!a)return null;if(d.props.messages.first().replied_to_message)return null;var c=a.short_name;if(d.props.thread&&d.props.thread.custom_nickname){a=b("MercuryIDs").getUserIDFromParticipantID(a.id);d.props.thread.custom_nickname[a]&&(c=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:d.props.thread.custom_nickname[a]}))}if(d.props.persona){a=d.state.participants[d.props.messages.first().author];c=a?h._("{persona name} from {page name}",[h._param("persona name",d.props.persona.name),h._param("page name",a.short_name)]):d.props.persona.name}return b("React").jsx("div",{className:"_4tdx",children:c})},d.$7=function(){__p&&__p();var a=d.props.messages.size,c=[];d.props.messages.forEach(function(e,f,g){var h=e.message_id===d.props.activeMessageID;h&&!(f===0&&d.props.hasDateBreak)&&c.push(b("React").jsx(b("ChatDateBreak.react"),{date:new Date(e.timestamp)},"db:"+e.message_id));if(b("isMessengerMessageRemoved")(e)){c.push(b("React").jsx(b("ChatRemovedMessageTombstone.react"),{maxBubbleWidth:d.props.maxBubbleWidth,message:e,needsTimestampTooltip:!1,participants:b("immutable").Map(d.state.participants),ref:e.message_id},e.message_id));return}c.push(b("React").jsx(b("ChatMessage.react"),{forGameChat:!!d.props.forGameChat,isFromViewer:d.props.isFromViewer,maxBubbleWidth:d.props.maxBubbleWidth,message:e,participants:b("immutable").Map(d.state.participants),readReceipts:d.props.readReceipts,ref:e.message_id,nextTimestamp:d.$8(g,a,f),onAttachmentLoad:d.props.onAttachmentLoad,onStickerClick:d.props.onStickerClick,thread:d.props.thread,needsTimestampTooltip:!1},e.message_id))});return c},d.$4=function(){var a=d.props,b=a.messages,c=a.nextTimestamp;a=a.readReceipts;var e=b.last().timestamp,f=0;a.forEach(function(a){return a>=e&&a<c&&++f===2?!1:null});return f===2},d.$8=function(a,b,c){return c<b-1?a.get(c+1).timestamp:d.props.nextTimestamp},d.getMessageElement=function(a){return b("ReactDOM").findDOMNode(d.refs[a])},d.getMessage=function(a){return d.refs[a]},d.$2=function(){__p&&__p();var a=k(d.props),c={},e=[];a.forEach(function(a){var d=b("MessengerParticipants.bs").getNow(a);c[a]=d;d||e.push(a)});d.setState({participants:c});return e.length>0?b("MessengerParticipants.bs").getMulti(e,function(b){var a=d.state.participants;e.forEach(function(c){a[c]=b[c]});d.$1=null;d.setState({participants:a})}):null},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone"),this.$1=this.$2()};d.shouldComponentUpdate=function(a,c){return this.props.isOnline!==a.isOnline||this.props.activeMessageID!==a.activeMessageID||this.props.isFromViewer!==a.isFromViewer||!b("immutable").is(this.props.messages,a.messages)||this.state.participants!==c.participants||!b("immutable").is(this.props.thread,a.thread)};d.componentDidUpdate=function(a){var b=this;a=k(this.props);!this.$1&&!a.every(function(a){return b.state.participants[a]})&&(this.$1=this.$2())};d.componentWillUnmount=function(){this.$1&&b("MessengerParticipants.bs").removeCallback(this.$1)};d.render=function(){return b("React").jsxs("div",{className:"_4tdt"+(this.props.isFromViewer?" _ua0":"")+(this.props.isFromViewer?"":" _ua1")+(this.$3()?" _73iv":"")+(this.$4()?" _3lil":""),children:[this.$5(),b("React").jsxs("div",{className:"_ua2",children:[this.$6(),b("React").jsx("div",{className:"_4tdv",children:this.$7()})]})]})};return c}(b("React").Component);c.propTypes={activeMessageID:(d=b("prop-types")).string,author:d.string,forGameChat:d.bool,hasDateBreak:d.bool,isCanonical:d.bool,isFromViewer:d.bool,isPageMessage:d.bool,isOnline:d.bool,maxBubbleWidth:d.number,messages:d.instanceOf(b("immutable").List).isRequired,readReceipts:d.instanceOf(a).isRequired,onAttachmentLoad:d.func,onStickerClick:d.func,persona:d.object,thread:d.instanceOf(b("ImmutableObject")),threadID:d.string};function k(a){var b=[a.author];a.readReceipts.forEach(function(a,c){b.push(c)});return b}e.exports=c}),null);
__d("MessengerAdminGroupUtils",["fbt","CurrentUser","MercuryConfig","MercuryIDs","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingSourceEnum","QE2Logger","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="messenger_use_new_group_participant_suggestion_ranking",i="show_nullstate_chat_tab_group_chat",j={isJoinableAndOpenThread:function(a){return this.isJoinableThread(a)&&this.isApprovalOpenThread(a)},isJoinableAndApprovalRequiredThread:function(a){return!!(this.isJoinableThread(a)&&a&&a.approval_mode===1)},isWorkSyncedGroupChat:function(a){return!!(a==null?void 0:a.work_associated_group)},isWorkFroup:function(a){return!!(b("gkx")("678597")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},isWorkSyncedChatThreadCreationMessage:function(a){return!!(a.log_message_data&&a.log_message_data.name!=null&&a.tags&&(a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_CREATION)!==-1||a.tags.indexOf(b("MessagingSourceEnum").WORK_DEFAULT_GROUP_SYNCED_CHAT_CREATION)!==-1))},isWorkSyncedChatThreadMemberSyncMessage:function(a){return!!(a.tags&&a.tags.indexOf(b("MessagingSourceEnum").WORK_GROUP_SYNCED_CHAT_MEMBER_SYNC)!==-1)},shouldAddToApprovalQueue:function(a,b){return!!(this.isJoinableAndApprovalRequiredThread(a)&&a&&!j.isAdmin(a.admins,b))},isJoinableThread:function(a){return!!(b("gkx")("678598")&&a&&a.is_thread_queue_enabled===!0&&a.joinable_mode&&a.joinable_mode.mode===1)},isGroupChat:function(a){return!!(a&&b("MessageThreadAssociatedObjectUtils").isLinkedToGroupChat(a.associated_object))},shouldInvite:function(a){return!!(b("gkx")("678598")&&a&&a.participant_add_mode==="INVITE")},isApprovalOpenThread:function(a){return!!((b("CurrentUser").isWorkUser()||b("gkx")("678598"))&&a&&a.approval_mode===0)},isAdminRequired:function(a){return!!(a&&a.admin_model_status==="required")},isOwner:function(a,b){return a&&(this.isJoinableThread(b)||this.isAdminRequired(b))},canSeeJoinableGroupOptions:function(a,c){var d=b("CurrentUser").isWorkUser(),e=j.showJoinableApprovalToggle(a,c);c=j.showApprovalQueue(a,c);return!d&&this.isJoinableThread(a)&&(c||e)},canSeeGroupOptionsSection:function(a,c){c=this.isAdmin(a.admins,c);var d=b("MessageRequestUtils").isMessageRequest(a);return c&&this.isAdminRequired(a)&&!d},canSeeBotsInGroupTypeahead:function(){return b("CurrentUser").isWorkUser()},canMakeOthersAdmins:function(a,b,c){return this.isOwner(a,c)&&!b},canMakeSelfAdmin:function(a,b){return(this.isJoinableThread(b)||this.isAdminRequired(b))&&Object.keys(b.admins).length===0&&a},canRemoveAdmin:function(a,b,c,d){if(this.isAdminRequired(d)&&Object.keys(d.admins).length===1)return!1;switch(c){case 2:return!1;default:return this.isOwner(a,d)&&b}},canRemoveFromGroup:function(a,b,c){switch(b){case 2:return!1;default:return this.isAdminRequired(c)||this.isWorkFroup(c)?a:this.isOwner(a,c)||!this.isJoinableThread(c)}},showGroupOptionsSection:function(a){return a.group_thread_subtype!==14},showJoinableApprovalToggle:function(a,b){if(a.associated_object&&!a.associated_object.approval_mode_toggleable)return!1;b=j.isAdmin(a.admins,b);return j.isOwner(b,a)},showApprovalQueue:function(a,b){b=j.isAdmin(a.admins,b);b=j.isOwner(b,a);var c=this.getPendingRequestNumber(a);if(a&&this.isAdminRequired(a))return this.isAdminRequired(a)&&b&&c>0;else{a=j.isJoinableAndApprovalRequiredThread(a);return a&&b&&c>0}},showParticipantsModal:function(a,b,c){return this.isJoinableThread(c)&&!a&&!b},useNewGroupMemberSuggestionRanking:function(){b("QE2Logger").logExposureForUser(h);return b("MercuryConfig").MNGPS},showDefaultListForNewPersonAddChatTab:function(){b("QE2Logger").logExposureForUser(i);return b("MercuryConfig").ChatGroupChat},showDefaultListForNewChatTab:function(){return b("MercuryConfig").ChatComposer},canUpdateThreadCustomization:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},canUpdateThreadDescription:function(a,c){var d=j.isJoinableThread(a);c=j.isAdmin(a.admins,c);var e=j.isWorkSyncedGroupChat(a);if(e)return c;e=b("MessageRequestUtils").isMessageRequest(a);return a.is_subscribed&&!e&&(!d||c)},isAdmin:function(a,c){if(!a)return!1;if(b("MercuryIDs").isValid(c)){var d=b("MercuryIDs").getUserIDFromParticipantID(c);return d!=null&&a[d]!==void 0}return a[c]!==void 0},getLeaveGroupBodyText:function(a,b){a=this.isOwner(a,b);var c=j.isWorkSyncedGroupChat(b);return!c?a?g._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):g._("You will stop receiving messages from this conversation and people will see that you left."):a?b.participants.length===1?g._("Are you sure you want to leave this group? As you're the last member, leaving now will also delete this group."):g._("Leaving this group will remove you as an owner and allow other members to manage the chat thread. You will no longer be able to send or receive new messages. You will also be removed from the group."):g._("You will stop receiving messages from this conversation and people will see that you left. You will also be removed from the group.")},getLeaveGroupTitleText:function(a,b){return j.isWorkSyncedGroupChat(b)?b.participants.length===1?g._("Delete Group and Chat?"):g._("Leave Group and Chat?"):this.isOwner(a,b)?g._("Leave this conversation?"):g._("Leave Conversation?")},getLeaveGroupButtonText:function(a,b){return this.isOwner(a,b)?b.participants.length===1?g._("Leave and delete"):g._("Leave conversation"):g._("Leave")},getMakeOwnerBodyText:function(a,b,c){if(a)return b?g._("As a group admin, you will be able to manage who can join and customize this conversation."):g._("As a group admin, \"{owner's name}\" will be able to manage who can join and customize this conversation.",[g._param("owner's name",c)]);else return b?g._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):g._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[g._param("owner's name",c)])},getMakeOwnerTitleText:function(a,b){if(a)return b?g._("Become group admin?"):g._("Add group admin?");else return b?g._("Become group owner?"):g._("Add group owner?")},getMakeOwnerButtonText:function(a,b){if(a)return b?g._("Become admin"):g._("Make admin");else return b?g._("Become owner"):g._("Make owner")},getRemoveOwnerBodyText:function(a,b,c,d){if(b&&c)return a?null:g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");else if(b&&!c)return a?g._("You will no longer be able to manage who can join and customize this conversation."):g._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");else return a?g._("\"{owner's name}\" will no longer be able to manage who can join and customize this conversation.",[g._param("owner's name",d)]):g._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[g._param("owner's name",d)])},getRemoveOwnerTitleText:function(a){return a?g._("Remove as group admin?"):g._("Remove as group owner?")},getRemoveOwnerButtonText:function(a){return a?g._("Remove"):g._("Remove owner")},getPendingRequestNumber:function(a){if(a&&a.approval_queue_ids&&a.approval_queue_ids.length)return a.approval_queue_ids.length;else if(a&&this.isAdminRequired(a)&&a.group_approval_queue&&a.group_approval_queue.length)return a.group_approval_queue.length;return 0}};e.exports=j}),null);
__d("ChatConversation.react",["ChatCollapsedLogMessageGroup.react","ChatDateBreak.react","ChatMessageGroup.react","ChatMessageList.react","MercuryIDs","MercuryLogMessageContainer.react","MercuryShareAttachmentRenderLocations","MessengerReadReceipt.bs","React","cancelAnimationFrame","clearTimeout","immutable","prop-types","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").OrderedMap;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("requestAnimationFrame")(function(){a.$2=b("setTimeout")(function(){a.props.onMount&&a.props.onMount(),delete a.$2},0),delete a.$1})};d.componentWillUnmount=function(){this.$1&&b("cancelAnimationFrame")(this.$1),b("clearTimeout")(this.$2)};d.render=function(){return b("React").jsxs("div",{children:[this.props.contextBanner,b("React").jsx(b("ChatMessageList.react"),{DateBreak:b("ChatDateBreak.react"),forGameChat:this.props.forGameChat,LogMessage:b("MercuryLogMessageContainer.react"),MessageGroup:b("ChatMessageGroup.react"),deliveryTimestamp:0,isCanonical:this.props.isCanonical,location:b("MercuryShareAttachmentRenderLocations").CHAT,loadMoreMessages:this.props.loadMoreMessages,maxBubbleWidth:this.props.maxBubbleWidth,CollapsedLogMessageGroup:b("ChatCollapsedLogMessageGroup.react"),messages:this.props.messages,onAttachmentLoad:this.props.onAttachmentLoad,onStickerClick:this.props.onStickerClick,readReceipts:this.$3(this.props),ref:"messageList",viewer:this.props.viewer,thread:this.props.thread,threadID:this.props.threadID})]})};d.$3=function(a){__p&&__p();var c=b("MercuryIDs").getParticipantIDFromUserID(a.viewer),d=b("MessengerReadReceipt.bs").getSeenTimestamps(a.readReceipts,a.threadID),e=new Set(a.thread?a.thread.participants:d.keys());e["delete"](c);return d.withMutations(function(c){b("immutable").Seq(a.messages).reverse().forEach(function(a){if(e.size===0)return!1;if(!e.has(a.author))return null;c.update(a.author,function(b){return!b||b.watermark<=a.timestamp?{watermark:a.timestamp,action:a.timestamp}:b});e["delete"](a.author);return null})})};d.getMessageList=function(){return this.refs.messageList};return c}(b("React").Component);a.propTypes={contextBanner:(c=b("prop-types")).object,forGameChat:c.bool.isRequired,isCanonical:c.bool.isRequired,loadMoreMessages:c.func,maxBubbleWidth:c.number.isRequired,onAttachmentLoad:c.func,onMount:c.func,onStickerClick:c.func,thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaGetMessageActions",["FantaDispatcher","FantaTabActions","MercuryCanonicalGroupThreadManager","MercuryIDs","keyMirror","requireWeak"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("requireWeak")("FantaAppStore",function(a){return g=a});var h=b("keyMirror")({ADD_PARTICIPANTS:null,CLEAR_PARTICIPANTS:null,CLEAR_PREVIEW:null,ON_BOOTLOAD_TYPEAHEAD:null,ON_GET_PARTICIPANT_RESPONSE:null,ON_GET_THREAD_PREVIEW_RESPONSE:null,ON_GET_THREAD_RESPONSE:null,ON_PAGE_NULL_RESPONSE:null,ON_PRIVACY_STATE_CHANGE:null,ON_SHOW_CONTEXT_BANNER_TIMER:null,ON_GET_THREAD_HREF_RESPONSE:null,REFRESH_THREAD:null,THREADS_UPDATED:null});a={Types:h,addParticipants:function(a,c){__p&&__p();var d=c.length===1&&c[0].getInfo().render_type==="thread",e;if(d){d=c[0].getInfo().mercury_thread;d=b("MercuryIDs").getThreadIDFromThreadFBID(d.thread_fbid);b("FantaTabActions").replaceTab(a,d);return}if(c.length===1){d=c[0].info&&c[0].info.uid;d&&(e=b("MercuryIDs").getThreadIDFromUserID(d))}else if(c.length===0){b("FantaDispatcher").dispatch({type:h.CLEAR_PARTICIPANTS,tabID:a});return}else{var f=b("MercuryCanonicalGroupThreadManager").get();d=c.map(function(a){return a.info.uid});b("FantaDispatcher").dispatch({type:h.CLEAR_PREVIEW,tabID:a,tokens:c});var i=f.getCanonicalGroupThreadIDForParticipants(Array.from(d),function(d){f.unsubscribe(i);if(g){var e=g.getState();if(!e.tabGroup.tabs.get(a))return}d&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:d,tabID:a,tokens:c})})}e&&b("FantaDispatcher").dispatch({type:h.ADD_PARTICIPANTS,previewTabID:e,tabID:a,tokens:c})},onBootloadTypeahead:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_BOOTLOAD_TYPEAHEAD,tabID:a,thread:c})},refreshThread:function(a){b("FantaDispatcher").dispatch({type:h.REFRESH_THREAD,threadID:a})},onGetThreadResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_RESPONSE,thread:a})},onGetThreadPreviewResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_PREVIEW_RESPONSE,tabID:a,thread:c})},onParticipantResponse:function(a){b("FantaDispatcher").dispatch({type:h.ON_GET_PARTICIPANT_RESPONSE,tabID:a})},onShowContextBannerTimer:function(a){b("FantaDispatcher").dispatch({type:h.ON_SHOW_CONTEXT_BANNER_TIMER,threadID:a})},threadsUpdated:function(a){b("FantaDispatcher").dispatch({type:h.THREADS_UPDATED,threads:a})},onPrivacyStateChange:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PRIVACY_STATE_CHANGE,threadID:a,privacyState:c})},onPageNullResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_PAGE_NULL_RESPONSE,threadID:a,nullStateCTA:c})},onGetThreadHrefResponse:function(a,c){b("FantaDispatcher").dispatch({type:h.ON_GET_THREAD_HREF_RESPONSE,tabID:a,href:c})}};e.exports=a}),null);
__d("FantaTabSheetActions",["FantaDispatcher","LogHistory","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({CLOSE_ADD_FRIENDS_SHEET:null,CLOSE_ADD_MORE_FRIENDS_SHEET:null,CLOSE_EMPLOYEE_PERSONAL_USER_SHEET:null,CLOSE_EMPLOYEE_WORK_USER_SHEET:null,CLOSE_NAME_CONVERSATION_TAB_SHEET:null,CLOSE_READ_ONLY_PERMANENT_SHEET:null,CLOSE_READ_ONLY_SHEET:null,CLOSE_USER_FOCUS_AND_BYPASS_SHEET:null,ON_BOOTLOAD_EVENT_REMINDER:null,ON_WORK_DO_NOT_DISTURB_RESPONSE:null,ON_MENTORSHIP_PROGRAM_RESPONSE:null,ON_IS_PAGE_TAB:null,OPEN_ADD_MORE_FRIENDS_SHEET:null,OPEN_BYPASS_FOCUS_SHEET:null,OPEN_EMPLOYEE_AWAY_SHEET:null,OPEN_EMPLOYEE_PERSONAL_USER_SHEET:null,OPEN_EMPLOYEE_WORK_USER_SHEET:null,OPEN_NAME_CONVERSATION_TAB_SHEET:null,OPEN_READ_ONLY_PERMANENT_SHEET:null,OPEN_READ_ONLY_SHEET:null,OPEN_USER_FOCUS_SHEET:null,OPEN_MENTORSHIP_PROGRAM_SHEET:null}),h=b("LogHistory").getInstance("fanta_sheets");function i(a){b("FantaDispatcher").dispatch(a),h.log(a.type,a.tabID)}a={Types:g,openUserFocusSheet:function(a){i({type:g.OPEN_USER_FOCUS_SHEET,tabID:a})},openBypassFocusSheet:function(a){i({type:g.OPEN_BYPASS_FOCUS_SHEET,tabID:a})},closeUserFocusAndBypassSheet:function(a){i({type:g.CLOSE_USER_FOCUS_AND_BYPASS_SHEET,tabID:a})},openAddMoreFriendsSheet:function(a){i({type:g.OPEN_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddMoreFriendsSheet:function(a){i({type:g.CLOSE_ADD_MORE_FRIENDS_SHEET,tabID:a})},closeAddFriendsSheet:function(a){i({type:g.CLOSE_ADD_FRIENDS_SHEET,tabID:a})},openNameConversationSheet:function(a){i({type:g.OPEN_NAME_CONVERSATION_TAB_SHEET,tabID:a})},closeNameConversationSheet:function(a){i({type:g.CLOSE_NAME_CONVERSATION_TAB_SHEET,tabID:a})},openReadOnlySheet:function(a){i({type:g.OPEN_READ_ONLY_SHEET,tabID:a})},closeReadOnlySheet:function(a){i({type:g.CLOSE_READ_ONLY_SHEET,tabID:a})},openReadOnlyPermanentSheet:function(a){i({type:g.OPEN_READ_ONLY_PERMANENT_SHEET,tabID:a})},closeReadOnlyPermanentSheet:function(a){i({type:g.CLOSE_READ_ONLY_PERMANENT_SHEET,tabID:a})},openEmployeeAwaySheet:function(a){i({type:g.OPEN_EMPLOYEE_AWAY_SHEET,tabID:a})},openEmployeePersonalUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},closeEmployeePersonalUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_PERSONAL_USER_SHEET,tabID:a})},openEmployeeWorkUserSheet:function(a){i({type:g.OPEN_EMPLOYEE_WORK_USER_SHEET,tabID:a})},closeEmployeeWorkUserSheet:function(a){i({type:g.CLOSE_EMPLOYEE_WORK_USER_SHEET,tabID:a})},openMentorshipProgramSheet:function(a){i({type:g.OPEN_MENTORSHIP_PROGRAM_SHEET,tabID:a})},onIsPageTab:function(a,b){i({type:g.ON_IS_PAGE_TAB,pageIndicator:b,tabID:a})},onBootloadEventReminder:function(a){i({type:g.ON_BOOTLOAD_EVENT_REMINDER,tabID:a})},onWorkDoNotDisturbResponse:function(a,b,c){i({type:g.ON_WORK_DO_NOT_DISTURB_RESPONSE,tabID:a,status:b,description:c})},onMentorshipProgramResponse:function(a,b,c){i({type:g.ON_MENTORSHIP_PROGRAM_RESPONSE,tabID:a,groupID:c,programName:b})}};e.exports=a}),null);
__d("MercurySheetPolicy",["keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={ChatThreadIsMutedTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatUserFocusSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserFocusBypassSheet:{isPermanent:!0,isSheetWithInput:!0},ChatUserBlockedTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatUploadWarningTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatThreadIsMessageBlockedSheet:{isPermanent:!0,isSheetWithInput:!1},ChatReadOnlyTabSheet:{isPermanent:!1,isSheetWithInput:!1},ChatReadOnlyPermanentTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatOfflineTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNoRecipientsTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatNewMessagesTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatNameConversationTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatEmployeeAwaySheet:{isPermanent:!0,isSheetWithInput:!1},ChatEventReminderTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatMontageSheet:{isPermanent:!1,isSheetWithInput:!1},ChatJoinCallSheet:{isPermanent:!0,isSheetWithInput:!1},FantaAddFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},FantaAddMoreFriendsSheet:{isPermanent:!0,isSheetWithInput:!0},ChatRoomAssociatedObjectSheet:{isPermanent:!1,isSheetWithInput:!1},ChatMentorshipProgramSheet:{isPermanent:!1,isSheetWithInput:!1},ChatGroupsSyncTabSheet:{isPermanent:!0,isSheetWithInput:!1},ChatGroupNameComposerTabSheet:{isPermanent:!0,isSheetWithInput:!0},ChatIntegrityLandingScreenSheet:{isPermanent:!0,isSheetWithInput:!1}};a={canReplaceOpenSheet:function(a,b){var c=this.getType(b),d=this.isPermanent(b);b=this.isSheetWithInput(b);var e=this.getType(a),f=this.isPermanent(a);a=this.isSheetWithInput(a);if(a)return!!(c!==e&&b);if(f&&!d)return!1;return e===this.sheets.ChatThreadIsMessageBlockedSheet?!1:!0},getType:function(a){var b=a.getType||a.type&&a.type.getType||function(){return a};b=b.call(a);return b},isPermanent:function(a){if(typeof a==="string"&&g[a])return g[a].isPermanent;var b=a.isPermanent||a.type&&a.type.isPermanent||function(){return!1};b=b.call(a);return b},isSheetWithInput:function(a){if(typeof a==="string"&&g[a])return g[a].isSheetWithInput;var b=a.isSheetWithInput||a.type&&a.type.isSheetWithInput||function(){return!1};b=b.call(a);return b},sheets:b("keyMirror")(g)};e.exports=a}),null);
__d("FantaComposeViewReducers",["Bootloader","FantaGetMessageActions","FantaTabSheetActions","MercuryDataSourceWrapper","MercurySheetPolicy","MessengerAdminGroupUtils","ifRequired","qex","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaGetMessageActions").Types,h=b("FantaTabSheetActions").Types;function a(a,b){switch(b.type){case g.ON_GET_THREAD_RESPONSE:case g.ON_GET_THREAD_PREVIEW_RESPONSE:var c=b.thread;b=b.tabID||c.thread_id;a=i(a,c,b)}return a}function i(a,c,d){c.participants.length===0&&(a=j(a,d,c),a=l(a,d,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet));return a}function c(a,b){switch(b.type){case g.ON_BOOTLOAD_TYPEAHEAD:b=b.thread;var c=b.thread_id;a=j(a,c,b)}return a}function j(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c);if(!e||e.typeahead)return a;b("ifRequired")("ChatTabTypeaheadRenderer",function(f){__p&&__p();b("ifRequired")("ContextualTypeaheadView",function(g){__p&&__p();b("ifRequired")("ChatTabAddMemberTypeaheadView",function(h){__p&&__p();b("ifRequired")("MercuryTypeahead",function(i){__p&&__p();if(!a.mercury.tabContents.get(c))return;var j=!!(d&&d.participants&&d.participants.length===0),k=!!(d&&d.associated_object&&d.associated_object.privacy_mode===0),l=j?b("MercuryDataSourceWrapper").chat_typeahead_source:k?b("MercuryDataSourceWrapper").chat_add_people_froup_source:d.work_associated_group!=null&&b("gkx")("995147")?b("MercuryDataSourceWrapper").chat_add_people_restrict_extenal_members:b("qex")._("922586")?b("MercuryDataSourceWrapper").chat_add_people_source_new:b("MercuryDataSourceWrapper").chat_add_people_source;l.setShowThreads(j);j?l.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewChatTab()):k||l.setShowDefaultList(b("MessengerAdminGroupUtils").showDefaultListForNewPersonAddChatTab());(k||!j&&b("qex")._("922586"))&&l.setQueryData({thread_id:d.thread_fbid});j=!j&&!k&&b("qex")._("922586")?h:g;k=new i(l,j);k.setViewOption("renderer",f);k.setExcludedParticipantsFromThreadMeta(d);e=e.merge({typeahead:k});a=a.setIn(["mercury","tabContents",c],e)},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)})},function(){return k(c,d)});return a}function d(a,c){switch(c.type){case h.OPEN_ADD_MORE_FRIENDS_SHEET:var d=c.tabID,e=a.mercury.tabContents.get(d).thread;if(e){a=j(a,d,e);return l(a,c.tabID,b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet)}}return a}function k(a,c){b("Bootloader").loadModules(["ChatTabTypeaheadRenderer","ContextualTypeaheadView","ChatTabAddMemberTypeaheadView","MercuryTypeahead"],function(d,e,f,g){b("FantaGetMessageActions").onBootloadTypeahead(a,c)},"FantaComposeViewReducers")}function l(a,c,d){__p&&__p();var e=a.mercury.tabContents.get(c),f=a.tabGroup.tabs.get(c);if(!f||!e)return a;f=e;f=f.openSheet;if(f&&!b("MercurySheetPolicy").canReplaceOpenSheet(f,d))return a;e=e.merge({openSheet:d});a=a.setIn(["mercury","tabContents",c],e);return a}function f(a,c){switch(c.type){case g.ADD_PARTICIPANTS:var d=c.tokens;c=c.tabID;d=d.length===1&&d[0].getInfo().render_type==="thread";if(!d)return l(a,c,b("MercurySheetPolicy").sheets.FantaAddFriendsSheet)}return a}e.exports={addParticipants:f,onBootloadTypeahead:c,onGetThreadResponse:a,openAddMoreFriends:d}}),null);
__d("FantaReducersCookie",["FantaMessageActions","FantaTabActions","PresenceState","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("throttle").acrossTransitions(b("PresenceState").doSync,500);function a(a,b){switch(b.type){case g.RECEIVED_NEW_MESSAGE:case h.CLOSE_ALL_TABS:case h.CLOSE_AND_TAB_NEXT:case h.CLOSE_TAB:case h.DELETE_TAB:case h.MINIMIZE_ALL_TABS:case h.MINIMIZE_TAB:case h.OPEN_TAB:case h.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:case g.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:case h.UNMINIMIZE_TAB:case h.OPT_IN_OPEN_TAB_WITH_BLOCKEES:i();return j(a)}return a}function c(a,b){switch(b.type){case h.LOAD_FROM_DATA:var c=a.tabGroup;b=b.tabData;c=c.updatedTime;c=c>=b.updatedTime||b.updatedTime===void 0?c:b.updatedTime;return a.mergeIn(["tabGroup"],{updatedTime:c})}return a}function j(a){return a.mergeIn(["tabGroup"],{updatedTime:Date.now()})}e.exports={updateCookie:a,loadFromData:c}}),null);
__d("FantaReducersDockCalculator",["Arbiter","FantaMessageActions","FantaTabActions","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=null;function j(a){i=a,b("setImmediate")(function(){b("Arbiter").inform("FantaReducersDockCalculator/shouldRecalculate")})}function k(a){if(!i||a.size!==i.size)j(a);else{var b=!1;a.forEach(function(a){var c=i&&i.get(a.id);(!c||a.isMinimized!==c.isMinimized)&&(b=!0)});b&&j(a)}}function a(a,b){var c=a.tabGroup.tabs;switch(b.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.MINIMIZE_ALL_TABS:case g.MINIMIZE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case g.UNMINIMIZE_TAB:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:j(c);break;case g.LOAD_FROM_DATA:case h.RECEIVED_NEW_MESSAGE:k(c);break}return a}e.exports={recalculateDock:a}}),null);
__d("FantaReducersLogging",["Bootloader","FantaMessageActions","FantaTabActions","FantaTabSheetActions","gkx","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaMessageActions").Types,i=b("FantaTabSheetActions").Types;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case i.OPEN_ADD_MORE_FRIENDS_SHEET:case g.OPEN_TAB:if(c.type===g.OPEN_TAB&&c.entryPoint!=="compose_link"&&c.entryPoint!=="jewel_new_message")return a;var d=a.mercury.tabContents.get(c.tabID);d&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger","MessengerSecondarySearchFunnelConstants"],function(a,b){var e;switch(c.entryPoint){case"compose_link":e=b.ENTRY_SURFACES.SIDEBAR;break;case"jewel_new_message":e=b.ENTRY_SURFACES.JEWEL;break;default:e=b.ENTRY_SURFACES.EXISTING_TAB}a.startFunnel(b.CLIENTS.WWW,b.SEARCH_SURFACES.OMNIPICKER,e,c.type===i.OPEN_ADD_MORE_FRIENDS_SHEET?d.id:null,d.loggingID)},"FantaReducersLogging");break}return a}function c(a,c){switch(c.type){case g.CLOSE_ALL_TABS:case g.CLOSE_AND_TAB_NEXT:case g.CLOSE_TAB:case g.DELETE_TAB:case g.OPEN_TAB:case g.OPEN_TAB_WITH_INTERSTITIAL_DATA:case h.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:b("requestIdleCallback")(function(){var c=a.tabGroup.allowedRaisedTabs,d=a.tabGroup.getRaisedandUnraisedTabs(),e=d.raisedTabs;d=d.unraisedTabs;var f=e.count(),g=f+d.count();b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(c).setOpenTabs(g).setVisibleTabs(f).log()},"FantaReducersLogging")})}return a}e.exports={updateVisibleTabs:c,logSearchEventsAfterAction:a}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports={isAvailable:function(a,c){var d;a=this.getStatus(a,c);c=b("MercuryIDs").getUserIDFromThreadID(c);c&&(d=b("ShortProfiles").getNow(c));return a===b("AvailableListConstants").ACTIVE&&(d===void 0||d===null||!d.is_messenger_only)},getStatus:function(a,c){__p&&__p();var d=b("AvailableListConstants").OFFLINE;c=b("MercuryIDs").getUserIDFromThreadID(c);if(c)d=b("PresenceStatus").get(c);else if(a&&a.participants){c=a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)});d=b("PresenceStatus").getGroup(c)}b("ChatVisibility").isOnline()||(d=b("AvailableListConstants").OFFLINE);return d}}}),null);
__d("FantaTypeJoinableThread",["immutable"],(function(a,b,c,d,e,f){"use strict";a={admins:[],approvalMode:0,associatedObject:null,description:null,friendsInParticipants:[],imageURL:null,isViewerSubscribed:!1,isWorkpaceChat:!1,joinableMode:{mode:0,link:""},linkHash:"",participants:[],threadID:null,threadFBID:null,threadName:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeSharePreview",["immutable"],(function(a,b,c,d,e,f){"use strict";a={isLoading:!1,params:null,type:null,uri:null};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeFileUploader",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=Object.freeze({ANIMATED_IMAGE:"animated_image",AUDIO:"audio",FILE:"file",GENERIC_ATTACHMENT:"generic_attachment",IMAGE:"image",VIDEO:"video"});c={uploadedFiles:b("immutable").Map(),uploadingFiles:b("immutable").Map()};d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getTypeIDs=function(a){return this.uploadedFiles.reduce(function(b,c){c.type===a&&c.uploadedID&&(b=b.concat(c.uploadedID));return b},[])};return b}(b("immutable").Record(c));d.fileTypes=a;e.exports=d}),null);
__d("FantaTypeComposer",["FantaTypeFileUploader","FantaTypeSharePreview","immutable"],(function(a,b,c,d,e,f){"use strict";var g=0;a={fileUploader:new(b("FantaTypeFileUploader"))(),sharePreview:new(b("FantaTypeSharePreview"))(),text:"",replyingToMessage:null,version:g};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,{version:++g})||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeTabContents",["ChatPrivacyActionController","FantaGetMessageActions","FantaTypeComposer","MercuryIDs","emptyFunction","immutable","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={composer:new(b("FantaTypeComposer"))(),highlightNewMessage:!1,id:"",isMontageOpen:!1,isMultiCompany:null,isNewMessageTab:!1,isScrolledToBottom:!0,joinableInterstitialData:null,jumpToMessage:null,loggingID:null,membershipParticipants:null,nullStateCTA:null,openSheet:null,pageIndicator:null,pageIndicatorDescription:null,participants:null,privacyController:null,showContextBanner:!1,showUnseenMessages:b("emptyFunction"),signatureID:null,thread:null,threadHref:null,threadPreviewID:null,threadPreviewRecipients:null,timezoneInfo:null,typeahead:null,uri:null,workAvailabilityHumanReadable:null,workAvailabilityStatus:null,newGroupChatName:null};c=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d,e=b("MercuryIDs").getUserIDFromThreadID(c.id);e&&(d=new(b("ChatPrivacyActionController"))(e,function(a){b("setImmediate")(function(){b("FantaGetMessageActions").onPrivacyStateChange(c.id,a)})}));return a.call(this,babelHelpers["extends"]({privacyController:d},c))||this}return c}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaReducersMercury",["Arbiter","AsyncSignal","AvailableList","AvailableListConstants","Bootloader","FantaAvailableStatus","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTabSheetActions","FantaTypeJoinableThread","FantaTypeSharePreview","FantaTypeTabContents","JSLogger","MercuryIDs","MercuryThreadIDMap","TimeSlice","WebMessengerThreadPermalinks","getPageIDFromThreadID","ifRequired","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get(),h=b("JSLogger").create("FantaReducersMercury"),i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l=1;function m(){return Math.floor(Math.random()*2147483648).toString(16)}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:var d=c.tabID,e=c.defaultText,f=c.defaultPreview;b("ifRequired")("FantaTabsReactApp",function(c){!b("MercuryIDs").isValidThreadID(d)?(a=a.deleteIn(["tabGroup","tabs",d]),t(d)):A(a,d)},function(){return a=n(a,c.tabID)});a=o(a,d);var g=m(),h=a.mercury.tabContents.get(d);h=h.merge({isNewMessageTab:!!c.isNewMessageTab,loggingID:l++,signatureID:g});a=a.setIn(["mercury","tabContents",d],h);new(b("AsyncSignal"))("/ajax/chat/opentab_tracking.php",{threadID:d,userID:b("MercuryIDs").getUserIDFromThreadID(d),signatureID:g}).send();if(c.interstitialData){g=new(b("FantaTypeJoinableThread"))(c.interstitialData);h=h.merge({joinableInterstitialData:g});a=a.setIn(["mercury","tabContents",d],h)}e&&(a=a.setIn(["mercury","tabContents",d,"composer","text"],e));f&&(a=a.setIn(["mercury","tabContents",d,"composer","sharePreview"],new(b("FantaTypeSharePreview"))({params:null,type:null,uri:f})));b("Arbiter").inform("jewel/hide");return a}return a}function n(a,c){b("ifRequired")("FantaTabsSlimApp",function(d){!b("MercuryIDs").isValidThreadID(c)?(a=a.deleteIn(["tabGroup","tabs",c]),t(c)):A(a,c)},function(){A(a,c)});return a}function c(a,b){switch(b.type){case i.RECEIVED_NEW_MESSAGE:a=o(a,b.tabID)}return a}function o(a,c){__p&&__p();var d=a.mercury.tabContents.get(c);if(!d){var e=b("getPageIDFromThreadID")(c);e&&b("Bootloader").loadModules(["PagesMercuryChatTabIndicatorHandler"],function(a){var d=b("AvailableListConstants").OFFLINE,f=new a(e,d,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPageIndicatorDescription(c,a)})},function(){b("setImmediate")(function(){return b("FantaTabActions").clearPageIndicatorDescription(c)})});b("setImmediate")(function(){b("FantaTabSheetActions").onIsPageTab(c,f)});f.checkResponsiveness()},"FantaReducersMercury");return a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c}))}return a}function d(a,b){switch(b.type){case j.SET_PAGE_INDICATOR_DESCRIPTION:var c=b.tabID;b=b.description;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({pageIndicatorDescription:b||""});a=a.setIn(["mercury","tabContents",c],d)}return a}function f(a,b){switch(b.type){case j.CLEAR_PAGE_INDICATOR_DESCRIPTION:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({pageIndicatorDescription:""});a=a.setIn(["mercury","tabContents",b],c)}return a}function p(a,b){switch(b.type){case j.REPLACE_TAB:case i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:a=s(a,b.newTabID);a=o(a,b.newTabID);return a}return a}function q(a,b){__p&&__p();switch(b.type){case k.ADD_PARTICIPANTS:var c=b.tabID;b=b.previewTabID;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({threadPreviewID:b});a=a.setIn(["mercury","tabContents",c],d);return a}return a}function r(a,c){switch(c.type){case k.CLEAR_PARTICIPANTS:c=c.tabID;var d=a.mercury.tabContents.get(c),e=d?d.loggingID:null;d=d?d.isNewMessageTab:!1;a=a.setIn(["mercury","tabContents",c],new(b("FantaTypeTabContents"))({id:c,isNewMessageTab:d,loggingID:e}))}return a}function s(a,c){b("ifRequired")("FantaTabsReactApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))},function(){b("ifRequired")("FantaTabsSlimApp",function(d){b("MercuryIDs").isValidThreadID(c)||(a=a.deleteIn(["tabGroup","tabs",c]),t(c))})});return a}function t(a){g.getClientIDFromServerID(a,function(c){return b("setImmediate")(function(){b("MercuryIDs").isValidThreadID(c)?b("FantaTabActions").openTab(c):h.error("invalid id",a)})})}function u(a,b){switch(b.type){case j.FOCUS_TAB:A(a,b.tabID)}return a}function v(a,b){switch(b.type){case j.CLOSE_TAB:b=b.tabID;a=x(a,b)}return a}function w(a,b){switch(b.type){case j.DELETE_TAB:b=b.tabID;a=x(a,b);a=a.deleteIn(["mercury","tabContents",b])}return a}function x(a,c){b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteThread(c)});return a}function y(a,c){switch(c.type){case j.CLOSE_ALL_TABS:b("ifRequired")("MessengerVideoAutoplayActions",function(a){a.deleteAllThreads()});return a}return a}function z(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:case j.FOCUS_PREVIOUS_TAB:case j.CLOSE_AND_TAB_NEXT:b=a.tabGroup.focusedTabID;b&&A(a,b)}return a}function A(a,c){__p&&__p();var d=b("MercuryIDs").getUserIDFromThreadID(c);if(d){var e=function(){b("AvailableList").updateForID(d)};b("TimeSlice").guard(e,"superfluous request to first open DD",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()}e=a.mercury.tabContents.get(c);if(e){a=e.thread;e=e.pageIndicator;e&&e.notifyPageOnlineStatusChanged(b("FantaAvailableStatus").getStatus(a,c))}}function B(a,b){switch(b.type){case j.UNMINIMIZE_TAB:A(a,b.tabID)}return a}function C(a,b){__p&&__p();switch(b.type){case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=o(a,e)}}return a}function D(a,c){a=a.mercury.tabContents.get(c);(!a||!a.uri)&&b("WebMessengerThreadPermalinks").getThreadURI(c,function(a){b("setImmediate")(function(){return b("FantaTabActions").setPermanentUri(c,a)})})}function E(a,b){__p&&__p();switch(b.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.RECEIVED_NEW_MESSAGE:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:D(a,b.tabID);break;case j.LOAD_FROM_DATA:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;D(o(a,e),e)}}return a}function F(a,b){switch(b.type){case j.SET_PERMANENT_URI:var c=b.tabID;b=b.uri;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({uri:b});a=a.setIn(["mercury","tabContents",c],d)}return a}e.exports={addParticipants:q,clearPageIndicatorDescription:f,clearParticipants:r,closeAllTabs:y,closeTab:v,deleteTab:w,focusTab:u,focusTabEvents:z,loadFromData:C,loadUri:E,openTab:a,receivedNewMessage:c,replaceTab:p,setPageIndicatorDescription:d,setUri:F,unminimizeTab:B}}),null);
__d("FantaReducersMessages",["CurrentUser","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeComposer","ImmutableObject","MercuryBrowserAlerts","MessengerParticipants.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaMessageActions").Types,h=b("FantaTabActions").Types,i=b("FantaGetMessageActions").Types;function a(a,c){switch(c.type){case g.RECEIVED_NEW_MESSAGE:c=c.message;b("MercuryBrowserAlerts").messageReceived(c);return a}return a}function c(a,b){switch(b.type){case g.COMPOSER_TEXT_UPDATE:var c=b.composer,d=b.message;b=b.threadID;var e=a.mercury.tabContents.get(b);return!e||e&&e.composer.version!==c.version?a:a.mergeIn(["mercury","tabContents",b,"composer"],{text:d})}return a}function d(a,c){switch(c.type){case g.REPLY_TO_MESSAGE:var d=c.message;c=c.threadID;var e=a.mercury.tabContents.get(c);return!e?a:a.mergeIn(["mercury","tabContents",c,"composer"],{replyingToMessage:new(b("ImmutableObject"))(babelHelpers["extends"]({},d))})}return a}function f(a,b){switch(b.type){case g.CANCEL_REPLY_TO_MESSAGE:b=b.threadID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=null;return a.mergeIn(["mercury","tabContents",b,"composer"],{replyingToMessage:c})}return a}function j(a,c){switch(c.type){case h.CLOSE_TAB:case h.CLOSE_AND_TAB_NEXT:return!a.mercury.tabContents.get(c.tabID)?a:a.setIn(["mercury","tabContents",c.tabID,"composer"],new(b("FantaTypeComposer"))())}return a}function k(a,c){switch(c.type){case h.CLOSE_ALL_TABS:c=a.mercury.tabContents;c.forEach(function(c){c=c.id;a=a.setIn(["mercury","tabContents",c,"composer"],new(b("FantaTypeComposer"))())});return a}return a}function l(a,b){switch(b.type){case h.SCROLL_BOTTOM_CHANGED:var c=b.tabID,d=b.isScrolledToBottom;b=b.showUnseenMessages;var e=a.mercury.tabContents.get(c);if(!e)return a;e=e.merge({isScrolledToBottom:d,showUnseenMessages:b});a=a.setIn(["mercury","tabContents",c],e)}return a}function m(a,b){switch(b.type){case h.JUMP_TO_MESSAGE:var c=b.tabID;b=b.mid;var d=a.mercury.tabContents.get(c);if(!d)return a;d=d.merge({jumpToMessage:b});a=a.setIn(["mercury","tabContents",c],d)}return a}function n(a,b){switch(b.type){case h.WIPE_JUMP_TO_MESSAGE:b=b.tabID;var c=a.mercury.tabContents.get(b);if(!c)return a;c=c.merge({jumpToMessage:null});a=a.setIn(["mercury","tabContents",b],c)}return a}function o(a,b){switch(b.type){case h.SHOW_UNSEEN_MESSAGES:b=b.tabID;b=a.mercury.tabContents.get(b);b&&b.showUnseenMessages()}return a}function p(a,c){__p&&__p();switch(c.type){case i.ON_GET_THREAD_RESPONSE:c=c.thread;var d=c.thread_id,e=a.mercury.tabContents.get(d);if(!e)return a;var f=null;b("CurrentUser").isWorkUser()&&c.participants&&(f=c.participants.map(b("MessengerParticipants.bs").getNow,b("MessengerParticipants.bs")).find(function(a){return((a=a)!=null?(a=a.work_foreign_entity_info)!=null?a.type:a:a)==="FOREIGN"})!==void 0);e=e.merge({thread:c,isMultiCompany:f});a=a.setIn(["mercury","tabContents",d],e);break}return a}function q(a,b){switch(b.type){case h.HIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!0)}return a}function r(a,b){switch(b.type){case h.UNHIGHLIGHT_NEW_MESSAGE:return!a.mercury.tabContents.get(b.tabId)?a:a.setIn(["mercury","tabContents",b.tabId,"highlightNewMessage"],!1)}return a}function s(a,b){switch(b.type){case g.UPDATE_USER_INPUT_REQUESTED:return a.setIn(["mercury","userInputRequest"],{isUserInputRequested:b.isUserInputRequested,requestNumResults:b.requestNumResults,requestType:b.requestType})}return a}e.exports={cancelReplyToMessage:f,closeAllTabs:k,closeTab:j,composerTextUpdate:c,highlightNewMessage:q,jumpToMessage:m,onGetThreadResponse:p,receivedNewMessage:a,replyToMessage:d,scrollBottomChanged:l,showUnseenMessages:o,unhighlightNewMessage:r,updateUserInputRequested:s,wipeJumpToMessage:n}}),null);
__d("FantaReducersPreLogging",["Bootloader","CurrentUser","FantaMessageActions","FantaTabActions","FantaTabSheetActions","MessengerSecondarySearchFunnelConstants","MessengerState.bs","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("FantaTabActions").Types,h=b("FantaTabSheetActions").Types,i=b("FantaMessageActions").Types;c=b("MessengerSecondarySearchFunnelConstants").END_ACTIONS;var j=c.ABANDON,k=c.SEND,l=b("MessengerSecondarySearchFunnelConstants").END_REASONS.ACTION;function a(a,c){__p&&__p();if(!b("gkx")("678592"))return a;switch(c.type){case g.CLOSE_TAB:case g.CLOSE_AND_TAB_NEXT:case h.CLOSE_ADD_FRIENDS_SHEET:case h.CLOSE_ADD_MORE_FRIENDS_SHEET:a=m(a,c.tabID,l,j);break;case g.CLOSE_ALL_TABS:a.mercury.tabContents.forEach(function(b){a=m(a,b.id,l,j)});break;case i.ADD_GROUP_PARTICIPANTS:a=m(a,c.threadID,l,k,!0);break;case i.SEND_HOT_LIKE:case i.SEND_MESSAGE:case i.SEND_PHOTO:case i.SEND_STICKER:a=m(a,c.threadID,l,k);break}return a}function m(a,c,d,e,f){__p&&__p();if(!b("gkx")("678592"))return a;var g=a.mercury.tabContents.get(c),h=g?g.loggingID:null,i=g?g.threadPreviewID:null;h&&b("Bootloader").loadModules(["MessengerSecondarySearchFunnelLogger"],function(j){a=a.setIn(["mercury","tabContents",c],g.merge({loggingID:null}));if(e===k&&(f===null||f===void 0)){var l=b("MessengerState.bs").getCurrentlyLoadedMessages(b("CurrentUser").getID(),g.id);l=g&&l.length===0}else l=f;j.endFunnel(d,e,h,i?i.split(":")[1]:c,l)},"FantaReducersPreLogging");return a}e.exports={logSearchEvents:a}}),null);
__d("FantaTypeTab",["immutable"],(function(a,b,c,d,e,f){"use strict";a={focusCounter:0,id:"",isHovered:!1,isMinimized:!1,showWarningForThreadWithBlockees:!1,openCounter:0,entryPoint:"unknown"};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeTabGroup",["FantaConst","immutable","qex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("immutable").OrderedMap({});a=b("qex")._("830597")||!1;c={allowedRaisedTabs:a?1:b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS,focusedTabID:null,tabs:b("immutable").Map({}),updatedTime:0};var h=function(a){return a.openCounter*-1},i=function(a){return a.focusCounter*-1};d=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getRaisedandUnraisedTabs=function(){if(this.tabs.size===0||this.allowedRaisedTabs===0)return{raisedTabs:g,unraisedTabs:g};if(this.tabs.size===1&&this.allowedRaisedTabs>=1)return{raisedTabs:this.tabs.toOrderedMap(),unraisedTabs:g};var a=this.tabs.sortBy(i),b=a.slice(this.allowedRaisedTabs);a=a.take(this.allowedRaisedTabs).sortBy(h);return{raisedTabs:a,unraisedTabs:b}};return b}(b("immutable").Record(c));e.exports=d}),null);
__d("FantaReducersTabs",["Bootloader","CurrentUser","EventProfiler","FantaConst","FantaGetMessageActions","FantaMessageActions","FantaTabActions","FantaTypeTab","FantaTypeTabGroup","FBLogger","LogHistory","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MessengerState.bs","PinnedConversationNubsConfig","TimeSlice","URI","MessengerWebStgTypedLoggerLite","isWebMessengerURI","performanceAbsoluteNow"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("FantaMessageActions").Types,j=b("FantaTabActions").Types,k=b("FantaGetMessageActions").Types,l="tab_",m=b("LogHistory").getInstance("fanta_tabs"),n=1,o=1,p=1;function q(a,c){Array.isArray(a)&&a.length>0&&(a=a[0]);try{b("MercuryIDs").isLocalThread(c)?b("MessengerWebStgTypedLoggerLite")&&b("MessengerWebStgTypedLoggerLite").log({event_name:"open_chat_tab",blue_entry_point:a||"unknown"}):b("MessengerWebStgTypedLoggerLite")&&b("MessengerWebStgTypedLoggerLite").log({event_name:"open_chat_tab",blue_entry_point:a||"unknown",other_user_fbid:b("MercuryIDs").getUserIDFromThreadID(c),thread_fbid:b("MercuryIDs").isGroupChat(c)?b("MercuryIDs").getThreadFBIDFromThreadID(c):null})}catch(d){b("FBLogger")("messenger_web").warn("fail to log openTab event on blue for %s %s ",a,c)}}function a(a,c){__p&&__p();switch(c.type){case j.OPEN_TAB:case j.OPEN_TAB_WITH_INTERSTITIAL_DATA:case i.ADD_GROUP_PARTICIPANTS_AS_OPEN_TAB:m.debug(c.type,JSON.stringify({id:c.tabID}));if(o===1){b("EventProfiler").tagCurrentActiveInteractionsAs("FirstChatTabOpen");var d=(g||(g=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(a,b){a.markerStart(b.FIRSTCHATTABOPEN_WWW,0,d)},"FantaReducersTabs")}var e=c.tabID||l+p++,f=c.entryPoint;Array.isArray(f)&&f.length>0&&(f=f[0]);q(f,e);return u(a,e,!0,c.entryPoint)}return a}function c(a,b){__p&&__p();switch(b.type){case j.REPLACE_TAB:case i.ADD_GROUP_PARTICIPANTS_AS_REPLACE_TAB:var c=b.tabID,d=b.newTabID,e=a.tabGroup;e=e.tabs;e=e.get(c);m.debug(b.type,JSON.stringify({id:c,isExisting:!!e,newID:d}));if(e){q("replace_tab",e.id);b=e.id===a.tabGroup.focusedTabID;a=a.setIn(["tabGroup","tabs",d],e.merge({id:d})).deleteIn(["tabGroup","tabs",c]);return u(a,d,b,"replace_tab")}q("replace_tab",d);return u(a,d,!1,"replace_tab")}return a}function d(a,b){switch(b.type){case j.MINIMIZE_TAB:return v(a,b.tabID,!0)}return a}function f(a,b){switch(b.type){case j.UNMINIMIZE_TAB:a=v(a,b.tabID,!1),a=y(a,b.tabID,(b=a.mercury.tabContents.get(b.tabID))==null?void 0:b.thread)}return a}function r(a,b){switch(b.type){case j.FOCUS_TAB:b=b.tabID;return G(a,b)}return a}function s(a,b){switch(b.type){case j.BLUR_TAB:return H(a,b.tabID)}return a}function t(a,c){__p&&__p();switch(c.type){case i.RECEIVED_NEW_MESSAGE:var d=c.tabID,e=a.tabGroup.tabs.get(d);m.debug(c.type,JSON.stringify({id:d,isOpen:!!e}));if(!e){q("message_received",d);c=a.tabGroup.focusedTabID;a=u(a,d,!1,"message_received");var f=a.tabGroup.allowedRaisedTabs;e=a.tabGroup.getRaisedandUnraisedTabs();var g=e.raisedTabs;e=e.unraisedTabs;var j=g.count(),k=j+e.count();b("TimeSlice").guard(function(){b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger","ChatOpenTabEventLogger"],function(a,b){new a().setAllowedRaisedTabs(f).setOpenTabs(k).setVisibleTabs(j).log(),b.logAutoOpen("auto_open_on_received_messages",d)},"FantaReducersTabs")},"name",{propagationType:b("TimeSlice").PropagationType.ORPHAN})();g=(h||(h=b("URI"))).getNextURI();if(b("isWebMessengerURI")(g))return a=v(a,d,!0);else if(c)return G(a,c)}}return a}function u(a,c,d,e){__p&&__p();e===void 0&&(e="unknown");var f=a.tabGroup;f=f.tabs;f=f.get(c);!f?(f=new(b("FantaTypeTab"))({id:c,focusCounter:n,openCounter:o++,entryPoint:e}),a=a.setIn(["tabGroup","tabs",c],f)):f.isMinimized&&d&&(a=v(a,c,!1));d&&(a=G(a,c));if(x(a,c,(e=a.mercury.tabContents.get(c))==null?void 0:e.thread))if(d){a=y(a,c,(f=a.mercury.tabContents.get(c))==null?void 0:f.thread)}else a=v(a,c,!0);return a}function v(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isMinimized:c}));return a}function w(a,b){var c,d;switch(b.type){case k.ON_GET_THREAD_RESPONSE:case k.ON_GET_THREAD_PREVIEW_RESPONSE:c=b.tabID||((c=b.thread)==null?void 0:c.thread_id);((d=a.mercury.tabContents.get(c))==null?void 0:d.thread)==null&&((d=a.tabGroup.tabs.get(c))==null?void 0:d.isMinimized)===!1&&(a=y(a,c,b.thread))}return a}function x(a,c,d){if(d==null||d.is_canonical||a.blockedWarning.optedInThreadsWithBlockees.get(c)==!0)return!1;var e=b("CurrentUser").getID();a=!1;b("MessengerState.bs").compute(e,function(c){c=c.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(e,c,d)});return a}function y(a,b,c){x(a,b,c)&&a.tabGroup.tabs.get(b)!=null&&(a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!0}),a=v(a,b,!0));return a}function z(a,b){switch(b.type){case j.CLOSE_GROUP_ENTRANCE_WARNING_DIALOG:a.tabGroup.tabs.get(b.tabID)!=null&&(a=a.mergeIn(["tabGroup","tabs",b.tabID],{showWarningForThreadWithBlockees:!1}))}return a}function A(a,b){switch(b.type){case j.OPT_IN_OPEN_TAB_WITH_BLOCKEES:b=b.tabID;a=a.mergeIn(["tabGroup","tabs",b],{showWarningForThreadWithBlockees:!1});a=a.setIn(["blockedWarning","optedInThreadsWithBlockees",b],!0);a=v(a,b,!1);a=G(a,b)}return a}function B(a,b){__p&&__p();switch(b.type){case j.MINIMIZE_ALL_TABS:for(var b=a.tabGroup.tabs.keys(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a=v(a,e,!0)}return a}return a}function C(a,b){switch(b.type){case j.CLOSE_TAB:case j.DELETE_TAB:var c=b.tabID;m.debug(b.type,JSON.stringify({id:c}));return D(a,c)}return a}function D(a,b){a=H(a,b);return a.deleteIn(["tabGroup","tabs",b]).deleteIn(["mercury","tabContents",b])}function E(a,b){switch(b.type){case j.CLOSE_ALL_TABS:m.debug(b.type);a=H(a,a.tabGroup.focusedTabID);return a.setIn(["tabGroup","tabs"],a.tabGroup.tabs.clear()).setIn(["mercury","tabContents"],a.mercury.tabContents.clear())}return a}function F(a,b){switch(b.type){case j.CLOSE_AND_TAB_NEXT:m.debug(b.type,JSON.stringify({id:b.tabID}));a=D(a,b.tabID);return P(a)}return a}function G(a,b,c){c===void 0&&(c=!1);var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{focusCounter:n++}));d=c?null:b;a=a.mergeIn(["tabGroup"],{focusedTabID:d});return a}function H(a,b){return a.tabGroup.focusedTabID===b?a.mergeIn(["tabGroup"],{focusedTabID:null}):a}function I(a,b){switch(b.type){case j.HOVERED_TAB:b=b.tabID;return K(a,b,!0)}return a}function J(a,b){switch(b.type){case j.UNHOVERED_TAB:b=b.tabID;return K(a,b,!1)}return a}function K(a,b,c){var d=a.tabGroup;d=d.tabs.get(b);d&&(a=a.mergeIn(["tabGroup","tabs",b],{isHovered:c}));return a}function L(a,c){__p&&__p();switch(c.type){case j.SET_ALLOWED_RAISED_TABS:var d=c.allowedRaisedTabs,e=a.tabGroup.allowedRaisedTabs;if(d!==e){m.debug(c.type,JSON.stringify({count:d}));b("PinnedConversationNubsConfig").chatTabTypingPriority||(d=Math.max(1,d));var f=a.tabGroup.tabs.count(),g=f>d?d:f;c=d>e&&f>e;e=d<e&&f>d;(c||e)&&b("Bootloader").loadModules(["FantaTabsVisibleTypedLogger"],function(a){new a().setAllowedRaisedTabs(d).setOpenTabs(f).setVisibleTabs(g).log()},"FantaReducersTabs")}return M(a,d)}return a}function M(a,c){c===void 0&&(c=b("FantaConst").DEFAULT_ALLOWED_RAISED_TABS);if(c===a.tabGroup.allowedRaisedTabs)return a;b("PinnedConversationNubsConfig").chatTabTypingPriority||(c=Math.max(1,c));return a.mergeIn(["tabGroup"],{allowedRaisedTabs:c})}function N(a,c){__p&&__p();switch(c.type){case j.LOAD_FROM_DATA:var d=a.tabGroup,e=c.tabData,f=d.updatedTime;if(f>=e.updatedTime||e.updatedTime===void 0)return a;var g=Date.now();if(e.updatedTime>g){m.debug(c.type+"_future_date",JSON.stringify({currentTime:g,updatedTime:f,newerTime:e.updatedTime}));return a}a=M(a.set("tabGroup",new(b("FantaTypeTabGroup"))()),d.allowedRaisedTabs);var h=[];e.tabs.sort(function(a,b){return a.openCounter-b.openCounter}).forEach(function(b){h.push(b.id),q("fb_header_dock:loaded_from_browser_cookie",b.id),a=u(a,b.id,!1,["fb_header_dock:loaded_from_browser_cookie"]),b.isMinimized&&(a=v(a,b.id,b.isMinimized))});Array.isArray(e.tabs)&&e.tabs.length>0&&(b("MessengerWebStgTypedLoggerLite")&&b("MessengerWebStgTypedLoggerLite").log({event_name:"load_tab_from_cookie",extra_data:{tabNumber:e.tabs.length}}));e.tabs.sort(function(a,b){return a.focusCounter-b.focusCounter}).forEach(function(b){a=G(a,b.id,!0)});m.debug(c.type,JSON.stringify({updatedTime:f,newerTime:e.updatedTime,opened:h}));a=e.focusedTabID?G(a,e.focusedTabID,!0):H(a)}return a}function O(a,b){switch(b.type){case j.FOCUS_NEXT_TAB:return P(a)}return a}function P(a){__p&&__p();var b=a.tabGroup.focusedTabID,c=a.tabGroup.getRaisedandUnraisedTabs();c=c.raisedTabs;c=c.filter(function(a){return!a.isMinimized});if(c.count()<2)return a;var d=c.skipUntil(function(a){return a.id===b}).rest();if(d.count()===0)return G(a,c.first().id);else return G(a,d.first().id)}function Q(a,b){__p&&__p();switch(b.type){case j.FOCUS_PREVIOUS_TAB:var c=a.tabGroup.focusedTabID;b=a.tabGroup.getRaisedandUnraisedTabs();b=b.raisedTabs;b=b.filter(function(a){return!a.isMinimized});if(b.count()<2)return a;var d=b.reverse().skipUntil(function(a){return a.id===c}).rest();if(d.count()===0)return G(a,b.last().id);else return G(a,d.first().id)}return a}e.exports={blurTab:s,closeAllTabs:E,closeAndTabNext:F,closeTab:C,focusNextTab:O,focusPreviousTab:Q,focusTab:r,hoveredTab:I,loadFromData:N,minimizAllTabs:B,minimizeTab:d,openTab:a,receivedNewMessage:t,replaceTab:c,setAllowedRaisedTabs:L,unhoveredTab:J,unminimizeTab:f,onThreadPayloadReceived:w,closeGroupEntranceWarningDialog:z,optInOpenTabWithBlockees:A}}),null);
__d("FantaTypeBlockedWarningState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={optedInThreadsWithBlockees:b("immutable").Map({})};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeMercuryState",["immutable"],(function(a,b,c,d,e,f){"use strict";a={tabContents:b("immutable").Map({}),userInputRequest:{}};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaTypeAppState",["FantaTypeBlockedWarningState","FantaTypeMercuryState","FantaTypeTabGroup","immutable"],(function(a,b,c,d,e,f){"use strict";a={tabGroup:new(b("FantaTypeTabGroup"))(),mercury:new(b("FantaTypeMercuryState"))(),blockedWarning:new(b("FantaTypeBlockedWarningState"))()};c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record(a));e.exports=c}),null);
__d("FantaAppStore",["FantaComposeViewReducers","FantaDispatcher","FantaReducersCookie","FantaReducersDockCalculator","FantaReducersLogging","FantaReducersMercury","FantaReducersMessages","FantaReducersPreLogging","FantaReducersTabs","FantaTypeAppState","FluxReduceStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[].concat(Object.values(b("FantaReducersPreLogging")),Object.values(b("FantaReducersTabs")),Object.values(b("FantaReducersMercury")),Object.values(b("FantaReducersMessages")),Object.values(b("FantaReducersDockCalculator")),Object.values(b("FantaReducersCookie")),Object.values(b("FantaComposeViewReducers")),Object.values(b("FantaReducersLogging")));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new(b("FantaTypeAppState"))()};d.ignoreReducer=function(a){var b=Object.values(a);g=g.filter(function(a){return!b.find(function(b){return b===a})})};d.addReducers=function(a){this.ignoreReducer(a),g=g.concat(Object.values(a))};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;c=new a(b("FantaDispatcher"));e.exports=c}),null);
__d("ChatInput.react",["AbstractMentionsTextEditor.react","AutocompleteSearchSource","AutocompleteStrategy","BootloadedComponent.react","Bootloader","CompositeDraftDecorator","ContentState","DocumentCompositeMentionsSource","DocumentMentionsSource","DraftModifier","EditorState","EmojiFormat.bs","FantaAppStore","FantaDispatcher","JSResource","MercuryIDs","MercuryThreadIDMap","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerParticipants.bs","MessengerUploadFilesUtil.bs","MessengerUserInputUtils","prop-types","React","ReactDOM","TypingDetectorController","cancelAnimationFrame","clearImmediate","createCancelableFunction","createMessengerMentionDraftEntity","debounce","emptyFunction","getDefaultKeyBinding","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","ifRequired","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","requestAnimationFrame","replaceMentionedTextInEditorState","setImmediate","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadIDMap").get();a=b("emptyFunction").thatReturnsNull;var h=1,i="handled",j=8,k="not-handled";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$6=b("createCancelableFunction")(function(a,c){var e=a.viewer,f=a.thread;if(!f)return;if(!f.participants)return;d.$3=b("MessengerParticipants.bs").getMulti(f.participants,function(a){d.setState({mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:c(e,f.participants.map(function(b){return a[b]}).filter(Boolean),f,b("gkx")("678578"),b("gkx")("678579"))})})});d.$8=function(){var a=d.$11(d.state.editorState.getCurrentContent());d.$2=b("setImmediate")(function(){d.$2=null;var c=b("EditorState").set(d.state.editorState,{decorator:a});d.setState({editorState:c})})};d.onChange=function(a){__p&&__p();if(a!==d.state.editorState){d.setState({editorState:a});if(d.getValueFromEditorState(a)!==d.getValueFromEditorState(d.state.editorState)){d.$9(a,d.props.composer);a=b("gkx")("964442");var c=b("FantaAppStore").getState().mercury.userInputRequest;if(a&&c.isUserInputRequested){a=new(b("AutocompleteSearchSource"))(d.getValueFromEditorState(d.state.editorState),c.requestNumResults,c.requestType);c=new(b("DocumentMentionsSource"))(b("AutocompleteStrategy"),a);a=new(b("DocumentCompositeMentionsSource"))([c]);d.setState({isUserInputAutocomplete:!0,mentionCreationForContentStateFn:b("MessengerUserInputUtils"),mentionsSource:a})}}}};d.onReturn=function(a,c){__p&&__p();if(b("isSoftNewlineEvent")(a)){var e=b("handleSoftNewlineForMessengerEmoticon");d.setState({editorState:e(c)});return i}a.persist();d.setState({},function(){b("MessengerUploadFilesUtil.bs").sendAttchments(d.props.fileUploader,d.props.uploadPhotoFn),d.$12()&&(d.props.inputKeyDown&&d.props.inputKeyDown(a,d.getValue())),b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(a,b){new a().setEvent(b.KEYBOARD_SEND).setVC(d.props.viewer).log()},"ChatInput.react")});return i};d.getValue=function(){return d.getValueFromEditorState(d.state.editorState)};d.$13=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput();var c=d.$14(a,b);a=d.$15(a,b);return c||a?i:k};d.$17=function(a){return d.$16(a)};d.$18=function(a,b){return d.$16(b)};d.state={editorState:d.$10(d.props.defaultText)};d.$20=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$22=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===h?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$21=function(a){d.refs.input.isShowingMentionables()||d.props.onEscape&&d.props.onEscape(a)};d.state.mentionCreationForContentStateFn=b("createMessengerMentionDraftEntity");return d}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this,c=b("gkx")("964442");c&&b("FantaDispatcher").explicitlyRegisterStore(b("FantaAppStore"));this.$4=b("ReactDOM").findDOMNode(this).getBoundingClientRect().height;this.props.resizeFn(this.$4);this.setState({triggeredWord:this.props.triggeredWord});this.$5();b("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],function(b){a.$6(a.props,b)},"ChatInput.react");b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"ChatInput.react");c=this.props;var d=c.thread,e=c.threadID,f=b("ReactDOM").findDOMNode(this.refs.input);f&&g.getServerIDFromClientID(e,function(c){a.$1=new(b("TypingDetectorController"))(d,b("MercuryIDs").getUserIDFromThreadID(e),f,"mercury-chat",null,c,a.getValue)})};d.componentWillUnmount=function(){this.$2&&b("clearImmediate")(this.$2),this.$7&&b("cancelAnimationFrame")(this.$7),this.$6.cancel(),this.$7=null,this.$1&&this.$1.destroy(),this.$3&&b("MessengerParticipants.bs").removeCallback(this.$3)};d.UNSAFE_componentWillReceiveProps=function(a){var c=this;this.state.triggeredWord!==a.triggeredWord&&this.setState({triggeredWord:a.triggeredWord},this.$8);(!this.props.thread||!a.thread||l(a,this.props))&&b("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],function(b){c.$6(a,b)},"ChatInput.react");a.composer.version!==this.props.composer.version&&this.resetState()};d.componentDidUpdate=function(){__p&&__p();var a=this;this.$5();this.$7=b("requestAnimationFrame")(function(){if(!a.$7)return;a.$7=null;var c=b("ReactDOM").findDOMNode(a).getBoundingClientRect();c=c.height;a.$4!==c&&a.props.resizeFn(c);a.$4=c});this.state.isUserInputAutocomplete&&!b("FantaAppStore").getState().mercury.userInputRequest.isUserInputRequested&&(this.setState({isUserInputAutocomplete:!1}),b("Bootloader").loadModules(["createMentionsSearchSourceFromParticipants"],function(b){a.$6(a.props,b)},"ChatInput.react"))};d.$5=function(){var a=this,c=this.props.composer,d=this.props.onTextChange;this.$9=d?b("debounce")(function(b){d(a.getValueFromEditorState(b),c,200)},200):b("emptyFunction")};d.$10=function(a){a=b("ContentState").createFromText(a);return b("EditorState").createWithContent(a,this.$11(a))};d.resetState=function(){this.state.typeaheadReporter&&(this.state.typeaheadReporter.sessionEnd(),this.state.typeaheadReporter.sessionStart()),this.setState({editorState:b("EditorState").moveFocusToEnd(this.$10("")),triggeredWord:null,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null})};d.onSend=function(a){var c=this.getMentions();if(a&&(c&&c.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource)){var d=this.state,e=d.addedMentionsCount,f=d.mentionsTriggeredCount,g=d.mentionsTriggerSource,h=this.props.thread;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(d,i){new d().setEvent(i.MENTION).setGroupSize(h&&h.participants&&h.participants.length).setNumDelivered(c?c.length:0).setNumSelects(e).setNumTriggers(f).setThreadid(h&&h.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(h&&h.thread_type)).setOfflineThreadid(a.offline_threading_id).updateExtraData({source:g}).log()},"ChatInput.react")}};d.$11=function(a){var c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:b("MessengerEmoticonSpan.react")}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$12=function(){var a=this.getValue(),b=this.props.composer.sharePreview;return a&&a.trim().length>0||!!(b&&b.params&&b.type)};d.handleSend=function(){var a=this;this.setState({},function(){b("MessengerUploadFilesUtil.bs").sendAttchments(a.props.fileUploader,a.props.uploadPhotoFn),a.$12()&&(a.props.handleSend&&a.props.handleSend(a.getValue())),b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(b,c){new b().setEvent(c.CLICK_SEND).setVC(a.props.viewer).log()},"ChatInput.react")})};d.getValueFromEditorState=function(a){a=a.getCurrentContent();return b("getVisibleValueForContentStateWithMessengerEmoji")(a)};d.getMentions=function(){var a=this.props.thread;return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a?a.thread_fbid:null)};d.focus=function(){this.refs.input&&this.refs.input.focus&&this.refs.input.focus()};d.$14=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};d.$15=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});return!0};d.$16=function(a){__p&&__p();var c=this,d=/^image\//,e=a.filter(function(a){return d.test(a.type)});if(e.length){var f=this.props.composer;b("ifRequired")("FantaMessageActions",function(a){a.prepareFilesForSend(c.props.threadID,e,f)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(a){a.prepareFilesForSend(c.props.threadID,e,f)},"ChatInput.react")});return!0}return!1};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.setState({editorState:a})};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.setState({editorState:b("EditorState").forceSelection(c,a.getSelectionAfter())})};d.appendText=function(a){var c=this.state.editorState,d=c.getSelection(),e=c.getCurrentContent();e=b("DraftModifier").insertText(e,d,a);c=b("EditorState").push(c,e,"insert-characters");this.setState({editorState:c})};d.render=function(){var a=babelHelpers["extends"]({},this.props,this.$19());return b("React").jsx(b("AbstractMentionsTextEditor.react"),babelHelpers["extends"]({ref:"input"},a,{editorState:this.state.editorState,onChange:this.onChange,handleBeforeInput:this.$13,handlePastedFiles:this.$17,handleDroppedFiles:this.$18,handleReturn:this.onReturn,spellCheck:!0,stripPastedStyles:!0,textAlignment:"left"}))};d.$19=function(){return{autoHighlight:!0,handleContentReturn:this.onReturn,maxResults:j,mentionResultsProps:{typeaheadView:b("BootloadedComponent.react").create(b("JSResource")("ChatMentionsInputTypeaheadView.react").__setRef("ChatInput.react")),typeaheadViewProps:{},position:"above",autoflip:!0},mentionResultsComponent:b("BootloadedComponent.react").create(b("JSResource")("MentionsLayer.react").__setRef("ChatInput.react")),mentionCreationForContentStateFn:this.state.mentionCreationForContentStateFn,mentionsSource:this.state.mentionsSource,onAddMention:this.$20,onEscape:this.$21,onShowMentions:this.$22}};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.onChange(a);this.$20()};return c}(b("React").Component);c.propTypes={composer:(d=b("prop-types")).object.isRequired,defaultText:d.string,blockStyleFn:d.func,fileUploader:d.object,inputKeyDown:d.func,handleSend:d.func,keyBindingFn:d.func,onBeforeInput:d.func,onBlur:d.func,onEscape:d.func,onFocus:d.func,onTab:d.func,resizeFn:d.func,thread:d.object,threadID:d.string,viewer:d.string};c.defaultProps={blockStyleFn:a,keyBindingFn:b("getDefaultKeyBinding")};function l(a,b){a=a.thread.participants;b=b.thread.participants;if(!a||!b)return!0;a=a.filter(Boolean);b=b.filter(Boolean);return a.length!==b.length}e.exports=c}),null);
__d("ChatPhotoUploaderIcon.react",["ix","fbt","ChatConfig","CurrentUser","Image","M4IconPhoto.re","MessengerCustomColorUtils.re","MessengerDotComAndInboxM4Check.re","MessengerEnvironment","MessengerPaperclipIconSVGM4React.re","MessengerPhotoIconSVGM4React.re","MessengerSurfaceQuickChat.re","React","asset","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("M4IconPhoto.re").make,j=b("MessengerSurfaceQuickChat.re").useIsQuickChatSurface;function a(a){__p&&__p();var c=j(),d=a.fill!=null?a.fill:b("MessengerCustomColorUtils.re").defaultColor();if(b("gkx")("1192386"))return b("React").jsx(b("Image"),{source:g("1180209")});else if(b("MessengerDotComAndInboxM4Check.re").yes)return b("MessengerPhotoIconSVGM4React.re").make({fill:d});else if(!b("MessengerEnvironment").messengerui&&b("ChatConfig").get("single_line_composer"))return b("React").jsx(i,{filled:!1,color:a.color==null?void 0:a.color});else if(b("MessengerEnvironment").messengerui&&b("CurrentUser").isWorkUser()&&b("gkx")("1072568")&&!c)return a.imagesOnly?b("MessengerPhotoIconSVGM4React.re").make({fill:d}):b("MessengerPaperclipIconSVGM4React.re").make({fill:d});return b("React").jsx("i",{className:a.imageClassName,alt:h._("Camera")})}e.exports=a}),null);
__d("ChatPhotoUploader.react",["cssVar","cx","fbt","Promise","Bootloader","ChatConfig","ChatPhotoUploaderIcon.react","InlineBlock.react","MercuryConfig","MessengerEnvironment","React","ReactDOM","SubscriptionsHandler","TooltipData","emptyFunction","ifRequired","joinClasses","promiseDone"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$2=!1;d.$6=!1;d.$14=function(a,b){d.props.onSubmit&&d.props.onSubmit(a,b),d.$15("show_file_placeholder")};d.$16=function(a,b){d.props.onAllUploadsComplete&&d.props.onAllUploadsComplete(a,b),d.$15("upload_files_complete"),d.$6||d.$11()};d.$17=function(a,b){d.props.onLastUploadFail&&d.props.onLastUploadFail(a,b),d.$6||d.$11()};d.$18=function(a,b){d.props.onLastUploadCancel&&d.props.onLastUploadCancel(a,b),d.$6||d.$11()};d.$19=function(a,b){d.props.onUploadError&&d.props.onUploadError(b),d.$15("upload_file_failed"),d.$6||d.$11()};d.$20=function(){__p&&__p();d.$3||(d.$2=!0,d.$3=new(b("Promise"))(function(a){__p&&__p();d.$5.addSubscriptions(b("Bootloader").loadModules(["ChatAutoSendPhotoUploader"],function(c){__p&&__p();b("promiseDone")(d.$4,function(e){__p&&__p();d.$2=!1;if(!d.$7){a(null);return}e=new c(b("ReactDOM").findDOMNode(d.$7),b("ReactDOM").findDOMNode(d.$9),b("ReactDOM").findDOMNode(d.$10),b("MercuryConfig").msgr_region);e.setAllowCrossPage(d.props.allowCrossPage);d.$5.addSubscriptions(e.subscribe("submit",d.$14),e.subscribe("all-uploads-completed",d.$16),e.subscribe("last-upload-failed",d.$17),e.subscribe("last-upload-canceled",d.$18),e.subscribe("file-upload-error",d.$19));d.$1=e;a(d.$1)})},"ChatPhotoUploader.react"))}));return d.$3};d.$4=new(b("Promise"))(function(a,b){d.$8=a});d.$5=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.shouldComponentUpdate=function(a){return a.actionURI!=this.props.actionURI||a.disabled!==this.props.disabled||a.threadID!==this.props.threadID||a.color!==this.props.color||a.fill!==this.props.fill};d.componentDidMount=function(){this.$6=!0,typeof this.props.onMount==="function"&&this.props.onMount(this),this.$5.addSubscriptions(b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"ChatPhotoUploader.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"ChatPhotoUploader.react"))};d.componentDidUpdate=function(){this.$1&&this.$1.setAllowCrossPage(this.props.allowCrossPage)};d.componentWillUnmount=function(){(!this.isUploading()||!this.props.allowCrossPage)&&this.$11(),this.$6=!1};d.render=function(){var a=this,c=b("ChatConfig").get("single_line_composer")&&!b("MessengerEnvironment").messengerui?i._("Add photos, videos and files"):"",d=this.props.imagesOnly?i._("Add photos"):i._("Add files"),e=b("joinClasses")("_4q61"+(this.props.customUI?"":" _5f0v")+(this.props.customUI?"":" _509v"),this.props.linkClassName),f=this.props.threadID;return b("React").jsxs("form",babelHelpers["extends"]({action:this.props.actionURI,className:"_vzk _4uld",title:d},b("TooltipData").propsFor(c),{method:"post",onClick:function(b){b.stopPropagation(),a.props.disabled&&b.preventDefault(),a.$12()},ref:function(b){return b&&a.$8(a.$7=b)},children:[b("React").jsx("input",{type:"hidden",name:"attach_id",ref:function(b){return a.$10=b}}),b("React").jsx("input",{type:"hidden",name:"images_only",value:this.props.imagesOnly}),b("React").jsx(b("InlineBlock.react"),{className:b("joinClasses")(this.props.className,"_m _4q60 _3rzn"),"data-testid":void 0,children:b("React").jsxs("span",{className:e,children:[b("React").jsx(b("ChatPhotoUploaderIcon.react"),{color:this.props.color,fill:this.props.fill,imagesOnly:this.props.imagesOnly===!0,imageClassName:this.props.imageClassName}),b("React").jsx("input",{disabled:this.props.disabled,type:"file",className:b("joinClasses")(this.props.inputClassname,"_n _2__f _4e5e"),"data-testid":void 0,name:"attachment[]",multiple:!0,accept:this.props.imagesOnly?"image/*":"*",ref:function(b){return a.$9=b},title:d,onChange:function(b){a.$13(b,f)}})]})})]}))};d.$12=function(){var a=this.props.imagesOnly;b("Bootloader").loadModules(["M4ComposerTypedLogger","M4ComposerLoggerEvents"],function(b,c){new b().setEvent(a?c.CLICK_PHOTO_UPLOADER:c.CLICK_FILE_UPLOADER).log()},"ChatPhotoUploader.react")};d.$13=function(a,c){__p&&__p();var d=this,e=a.target.files,f=function(){d.$9&&(d.$9.value="")};b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(a){a.prepareFilesForSend(c,e,"ComposerIcons"),f()},function(){d.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerActions"],function(a){a.prepareFilesForSend(c,e,"ComposerIcons"),f()},"ChatPhotoUploader.react"))}):b("ifRequired")("FantaMessageActions",function(a){d.props.composer&&a.prepareFilesForSend(c,e,d.props.composer,f)},function(){d.$5.addSubscriptions(b("Bootloader").loadModules(["FantaMessageActions"],function(a){d.props.composer&&a.prepareFilesForSend(c,e,d.props.composer,f)},"ChatPhotoUploader.react"))});this.props.focusInput&&this.props.focusInput()};d.$15=function(a){var c=this.props.threadID;if(!c)return;this.$5.addSubscriptions(b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger","MessengerShareFilePreviewFunnelLoggerConstants"],function(d,e){d.appendAction(!b("MessengerEnvironment").messengerui,a,c),a===e.UPLOAD_FILES_COMPLETE&&d.endFunnel(c)},"ChatPhotoUploader.react"))};d.isUploading=function(){return this.$1&&this.$1.isUploading()||!!this.$2};d.uploadFiles=function(a){b("promiseDone")(this.$20(),function(b){b==null?void 0:b.uploadFiles(a)})};d.uploadURL=function(a){b("promiseDone")(this.$20(),function(b){b==null?void 0:b.uploadURL(a)})};d.$11=function(){this.$5.release(),this.$1&&this.$1.destroy()};return c}(b("React").Component);a.defaultProps={actionURI:b("MercuryConfig").upload_url,allowCrossPage:!0,customUI:!1,disabled:!1,imageClassName:"_509w",imagesOnly:!0,linkClassName:"",onSubmit:c=b("emptyFunction"),onAllUploadsComplete:c,onLastUploadFail:c,onLastUploadCancel:c,color:"#0084ff"};e.exports=a}),null);
__d("MessengerHotLikeOutlineSVG.react",["cssVar","fbt","CurrentUser","MercuryShareAttachmentRenderLocations","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="transparent",j=h._("Thumbs Up Sign");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={titleId:b("uniqueID")()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a,c;a=(a=this.props.color)!=null?a:b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff";c={height:(c=this.props.height)!=null?c:"85%",width:this.props.width};if(this.props.location!==b("MercuryShareAttachmentRenderLocations").CHAT&&this.props.location!==b("MercuryShareAttachmentRenderLocations").PAGES_INBOX){var d;c.width=(d=this.props.width)!=null?d:"66%"}return b("React").jsxs("svg",{"aria-labelledby":this.state.titleId,version:"1.1",viewBox:"0 0 40.16 42.24",preserveAspectRatio:"xMinYMax meet",style:c,children:[b("React").jsx("title",{id:this.state.titleId,children:j}),b("React").jsx("path",{d:"M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z",transform:"translate(-898.5 -1563.26)",fill:i,fillRule:"evenodd",stroke:a,strokeLinecap:"round",strokeWidth:"5%"})]})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerHotLikeButtonInnerIcon.react",["cssVar","CurrentUser","EmojiLikeConstants","Image.react","MessengerCustomColorUtils.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerHotLikeIconSVGM4React.bs").make;function a(a){__p&&__p();var c=a.CustomRenderer,d=a.customLike,e=a.customColor,f=a.location,g=a.disabled,i=a.renderSize;i=i===void 0?16:i;a=a.thread;var j=null,k={};if(d&&d.emoji){d=d.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);k.background="none";j=b("React").jsx(b("Image.react"),{src:d&&d.url,style:{padding:i==16?0:3,display:"block",height:i,width:i}})}else if(c)j=b("React").jsx(c,{color:e,location:f,renderSize:i});else if(e)if(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")){k=a&&a.gradient_colors&&a.gradient_colors.length?a.gradient_colors[a.gradient_colors.length-1]:e;j=b("React").jsx(h,{color:k})}else j=b("React").jsx(b("MessengerHotLikeOutlineSVG.react"),{color:e,location:f});else if(!b("CurrentUser").isWorkUser()){d=g?"rgba(0, 0, 0, 0.12)":b("MessengerCustomColorUtils.bs").defaultColor();j=b("React").jsx(h,{color:d})}return j}e.exports=a}),null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],(function(a,b,c,d,e,f){"use strict";a={START:"start",STOP:"stop",STOP_EMOJI:"stop_emoji",POP:"pop",REMOVE:"remove",FINISH_ANIMATION:"finish_animation",FINISH_EMOJI_ANIMATION:"finish_emoji_animation"};b("mixInEventEmitter")(a,{start:!0,stop:!0,stop_emoji:!0,pop:!0,remove:"remove",finish_animation:"finish_animation",finish_emoji_animation:"finish_emoji_animation"});e.exports=a}),null);
__d("MessengerHotLikeUtils",["EmojiLikeConstants","StickerConstants","XStickerAssetController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={SizeTimes:{small:1e3,medium:2e3,large:3e3},getStickerIDForTime:function(a){var c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;switch(!0){case a<this.SizeTimes.small:c=b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID;break;case a<this.SizeTimes.medium:c=b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID;break;case a<this.SizeTimes.large:c=b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID;break}return c},getEmojiSizeForTime:function(a){var c=b("EmojiLikeConstants").size.SMALL;a<this.SizeTimes.small?c=b("EmojiLikeConstants").size.SMALL:a<this.SizeTimes.medium?c=b("EmojiLikeConstants").size.MEDIUM:a<this.SizeTimes.large&&(c=b("EmojiLikeConstants").size.LARGE);return c},getMetadataForHotLike:function(a){__p&&__p();var c;switch(a){case b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID:c=120;break;case b("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID:c=84;break;case b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID:c=35;break;case b("EmojiLikeConstants").size.LARGE:c=64;break;case b("EmojiLikeConstants").size.MEDIUM:c=64;break;case b("EmojiLikeConstants").size.SMALL:c=32;break}return c?{height:c,width:c}:void 0},getPreviewURI:function(){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",b("StickerConstants").HOT_LIKE_LARGE_STICKER_ID).setEnum("image_type","BestEffortImage").getURI().toString()},getURIWithID:function(a){return b("XStickerAssetController").getURIBuilder().setInt("sticker_id",a).setEnum("image_type","BestEffortImage").getURI().toString()},getCustomEmojiFromThread:function(a){return a&&a.custom_like_icon}};e.exports=a}),null);
__d("WorkQuickchatHotLikeInnerButton.react",["cssVar","cx","EmojiLikeConstants","Image.react","MessengerCustomColorUtils.bs","MessengerDotComAndInboxM4Check.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerHotLikeIconSVGM4React.bs").make;function a(a){__p&&__p();var c=a.CustomRenderer,d=a.customLike,e=a.customColor,f=a.location,g=a.disabled,h=a.renderSize;a=a.thread;var j=null;if(d&&d.emoji){d=d.emoji;d=b("MessengerSupportedEmojiUtils").getNewEmojiData(d,b("EmojiLikeConstants").size.SMALL);j=b("React").jsx(b("Image.react"),{className:"_7rpg",src:d&&d.url})}else if(c){d=this.props.CustomRenderer;j=b("React").jsx(d,{color:e,location:f,renderSize:h})}else if(e)if(b("MessengerDotComAndInboxM4Check.bs").yes){c=a&&a.gradient_colors&&a.gradient_colors.length?a.gradient_colors[a.gradient_colors.length-1]:e;j=b("React").jsx(i,{color:c})}else j=b("React").jsx(b("MessengerHotLikeOutlineSVG.react"),{height:"100%",width:"100%",color:e,location:f});else b("MessengerDotComAndInboxM4Check.bs").yes&&(j=i.make(g?"rgba(0, 0, 0, 0.12)":b("MessengerCustomColorUtils.bs").defaultColor()));return j}e.exports=a}),null);
__d("withMessengerSource",["MessengerSourceContext.re","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext;function a(a,c){var d;c===!0?c=b("React").forwardRef(function(c,d){var e=g(b("MessengerSourceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{ref:d,source:e}))}):c=function(c){var d=g(b("MessengerSourceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{source:d}))};c.displayName=((d=(d=a.displayName)!=null?d:a.name)!=null?d:"Component")+"WithMessengerSource";return c}e.exports=a}),null);
__d("MessengerHotLikeButton.react",["cx","fbt","Bootloader","EmojiLikeConstants","ImmutableObject","Keys","KeyStatus","Link.react","MercuryMessageObject","MessengerEnvironment","MessengerHotLikeButtonInnerIcon.react","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","MessengerSurfaceType.re","MessengerSurfaceContext.re","prop-types","React","StickerConstants","WorkQuickchatHotLikeInnerButton.react","clearInterval","clearTimeout","ifRequired","joinClasses","setIntervalAcrossTransitions","setTimeoutAcrossTransitions","withMessengerSource"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryMessageObject").get(),j=b("MessengerSurfaceContext.re").context,k=b("React").useContext,l=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=null,d.$2=null,d.$3=null,d.$4=null,d.$6=function(a){(d.props.disabled||d.$3)&&(a.preventDefault(),a.stopPropagation());if(d.props.disabled||a.button!==0)return;d.props.onMouseDown&&d.props.onMouseDown();d.$3=Date.now();d.$9();d.$10()},d.$8=function(){if(!(d.props.threadID&&d.$3))return;d.$3=0;d.$11();d.$12()},d.$14=function(){if(!d.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").POP,d.props.threadID)},d.$7=function(){d.$3&&(d.$3=0,d.$11(),d.$14())},d.$5=function(a){a.stopPropagation();if(d.props.disabled)return;if(b("KeyStatus").getKeyDownCode()===b("Keys").RETURN||!d.props.threadID){a=d.props.sendCustomLike;d.props.customLike&&a?a(d.props.customLike,b("MessengerHotLikeUtils").getEmojiSizeForTime(1)):d.props.sendSticker(b("MessengerHotLikeUtils").getStickerIDForTime(1))}},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.componentDidMount=function(){var a=this;this.$4=b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(c,d,e){c===a.props.threadID&&(a.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendHotLike(a.getDefaultFunnelName())},"MessengerHotLikeButton.react"),e&&a.props.customLike&&a.props.sendCustomLike?a.props.sendCustomLike(a.props.customLike,e,b("EmojiLikeConstants").source.HOT_LIKE):a.props.forGameChat||a.props.sendSticker(d))})};d.componentWillUnmount=function(){this.$4&&this.$4.remove()};d.render=function(){var a=h._("Send a Like"),c={};this.props.customLike&&this.props.customLike.emoji&&(c.background="none");var d=this.props.surface===b("MessengerSurfaceType.re").workQuickchat?b("WorkQuickchatHotLikeInnerButton.react"):b("MessengerHotLikeButtonInnerIcon.react");return b("React").jsx(b("Link.react"),{"aria-label":a,className:b("joinClasses")(this.props.customColor||this.props.CustomRenderer?"_5j_u":"",this.props.className),"data-testid":void 0,disabled:this.props.disabled,href:"#",onClick:this.$5,onDragStart:function(a){return a.preventDefault()},onMouseDown:this.$6,onMouseLeave:this.$7,onMouseUp:this.$8,role:"button",style:c,title:a,children:b("React").jsx(d,{CustomRenderer:this.props.CustomRenderer,customLike:this.props.customLike,customColor:this.props.customColor,location:this.props.location,disabled:this.props.disabled,renderSize:this.props.renderSize,thread:this.props.thread})})};d.$9=function(){if(!this.props.threadID)return;b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").START,this.$13(),this.props.threadID)};d.$12=function(){__p&&__p();var a=this;if(!this.props.threadID)return;!b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerHotLikePreview.react",function(){b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,a.props.threadID)},function(){if(a.$1!==null)return;a.$1=b("setIntervalAcrossTransitions")(function(){b("ifRequired")("MessengerHotLikePreview.react",function(){a.$1!==null&&(b("clearInterval")(a.$1),a.$1=null),b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,a.props.threadID)})},100)}):b("MessengerHotLikePreviewEvents").emit(b("MessengerHotLikePreviewEvents").STOP,this.props.threadID)};d.$13=function(){__p&&__p();var a=this.props.threadID;if(!a)return null;a=i.constructStickerMessageObject(b("StickerConstants").HOT_LIKE_SMALL_STICKER_ID,this.props.source,a);i.normalizeNewMessage(a);a.is_like_preview=!0;a.like_preview_since=this.$3;a.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;a.body="";return new(b("ImmutableObject"))(a)};d.$10=function(){this.$11(),this.$2=b("setTimeoutAcrossTransitions")(this.$14,b("MessengerHotLikeUtils").SizeTimes.large)};d.$11=function(){b("clearTimeout")(this.$2)};return a}(b("React").PureComponent);l.propTypes={CustomRenderer:(c=b("prop-types")).func,onMouseDown:c.func,customLike:c.object,customColor:c.string,forGameChat:c.bool,location:c.string,sendSticker:c.func.isRequired,sendCustomLike:c.func,threadID:c.string,disabled:c.bool,renderSize:c.number,thread:c.object,surface:c.string.isRequired};function a(a){var c=k(j);return b("React").jsx(l,babelHelpers["extends"]({},a,{surface:c}))}e.exports=b("withMessengerSource")(a)}),null);
__d("MessengerHotLikeChatSVGIcon.react",["cssVar","fbt","CurrentUser","React","uniqueID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Thumbs Up Sign");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={titleId:b("uniqueID")()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a;a=(a=this.props.color)!=null?a:b("CurrentUser").isWorkUser()?"#373e4c":"#0084ff";var c=this.props.renderSize;c=c!=null?{height:c.toString(),width:c.toString()}:void 0;return b("React").jsxs("svg",babelHelpers["extends"]({"aria-labelledby":this.state.titleId,preserveAspectRatio:"xMinYMax meet",version:"1.1",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},c,{children:[b("React").jsx("title",{id:this.state.titleId,children:i}),b("React").jsxs("g",{style:{fill:a},children:[b("React").jsx("path",{d:"M16,9.1c0-0.8-0.3-1.1-0.6-1.3c0.2-0.3,0.3-0.7,0.3-1.2c0-1-0.8-1.7-2.1-1.7h-3.1c0.1-0.5,0.2-1.3,0.2-1.8 c0-1.1-0.3-2.4-1.2-3C9.3,0.1,9,0,8.7,0C8.1,0,7.7,0.2,7.6,0.4C7.5,0.5,7.5,0.6,7.5,0.7L7.6,3c0,0.2,0,0.4-0.1,0.5L5.7,6.6 c0,0-0.1,0.1-0.1,0.1l0,0l0,0L5.3,6.8C5.1,7,5,7.2,5,7.4v6.1c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,1,1,2,1h5.2c0.9,0,1.4-0.3,1.8-0.9 c0.3-0.5,0.2-1,0.1-1.4c0.5-0.2,0.9-0.5,1.1-1.2c0.1-0.4,0-0.8-0.2-1C15.6,10.3,16,9.9,16,9.1z"}),b("React").jsx("path",{d:"M3.3,6H0.7C0.3,6,0,6.3,0,6.7v8.5C0,15.7,0.3,16,0.7,16h2.5C3.7,16,4,15.7,4,15.3V6.7C4,6.3,3.7,6,3.3,6z"})]})]}))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerQuickCamOrigins",[],(function(a,b,c,d,e,f){"use strict";var g={CHAT_TAB:"chat tab",MESSENGER:"messenger",getValues:function(){return[g.CHAT_TAB,g.MESSENGER]}};e.exports=g}),null);
__d("ChatTabComposer.react",["cssVar","csx","cx","fbt","Bootloader","BootloadOnRender.react","ChatComposerFlyoutButtonBootLoader.react","ChatConfig","ChatInput.react","ChatPhotoUploader.react","CSS","CurrentUser","CustomColorHighlighting.react","ErrorBoundary.react","FantaMessageActions","FantaTabActions","JSResource","Keys","LazyComponent.react","Link.react","M4IconSend.bs","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryShareAttachmentRenderLocations","MessageRequestUtils","MessengerCustomColorUtils.bs","MessengerHotLikeButton.react","MessengerHotLikeChatSVGIcon.react","MessengerHotLikeUtils","MessengerParticipants.bs","MessengerQuickCamOrigins","P2PPaymentConfig","P2PSendMoneyContainerBootloader.react","React","ReasonBootloadOnRender.react","ReasonResource","ReplyingToMessageFallbackReact.bs","StickersActions","TooltipData","URI","WorkChatExtensionAvailabilityFetcher","WorkFileUploadsGating","XUISpinner.react","clearImmediate","convertMIGColorToFIGColor","emptyFunction","getPageIDFromThreadID","gkx","isWebGLEnabled","joinClasses","lazyLoadComponent","promiseDone","qex","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("M4IconSend.bs").jsComponent,m=b("ReplyingToMessageFallbackReact.bs").jsComponent,n=b("lazyLoadComponent")(b("JSResource")("M4FantaUnconnectedThreadInfoTextReact").__setRef("ChatTabComposer.react")),o=77,p=9,q=350,r="#BEC3C9",s=b("ChatConfig").get("chat_basic_input_module")||b("ChatInput.react");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={inputHeight:0,p2pPaymentConfig:b("P2PPaymentConfig").config,stickerFlyoutShown:!1,hasWorkChatExtension:!1},d.$2=null,d.$3=null,d.$4=null,d.$14=function(){b("setImmediate")(function(){return b("FantaMessageActions").cancelReplyToMessage(d.props.threadID||"")})},d.$12=function(a,c){a.keyCode===b("Keys").RETURN&&(d.refs.emojiButton&&d.refs.emojiButton.hideFlyout()),d.props.inputKeyDown&&d.props.inputKeyDown(a,c)},d.$6=function(a){a=a.target;a instanceof Element&&(b("CSS").matchesSelector(a,"._1d4_")||b("CSS").matchesSelector(a,"._552h")||b("CSS").matchesSelector(a,"._552n"))&&(d.$4&&d.$4.focus())},d.$13=function(a){d.state.stickerFlyoutShown&&b("StickersActions").hideStickerFlyout(),d.props.onEscape&&d.props.onEscape(a)},d.$36=function(a,c){a.platformFBID.toString()!==b("MercuryConfig").MessengerAppID?d.uploadURL({attribution_app_id:a.platformFBID,errorDialogParams:{body:j._("There was a problem sending this GIF. Choose another one and try again."),title:j._("Couldn't Send GIF")},external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source}):d.props.stickerButtonProps&&d.props.stickerButtonProps.onStickerSelect&&d.props.stickerButtonProps.onStickerSelect(a.resultID.toString)},d.$34=function(a){var c=d.$28();if(!c)return;b("Bootloader").loadModules(["BrowserExtensionsDialog"],function(d){d.show(new(k||(k=b("URI")))(a.getURI()),a.getUniqueID(),c,b("CurrentUser").getID())},"ChatTabComposer.react")},d.$37=function(a){d.$4&&d.$4.insertEmoji&&d.$4.insertEmoji(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidUpdate=function(a){a.composer.replyingToMessage!==this.props.composer.replyingToMessage&&(this.$4&&this.$4.focus())};d.render=function(){var a=b("gkx")("678580");a=this.props.disableInput?null:b("React").jsx("ul",{className:"_552n"+(a?" _22v_":"")+(a?" _6jv5":"")+(this.props.isFocused?" _6wm5":"")+" _6jv6",children:this.$5()});var c=this.props.composer.get("replyingToMessage");return b("React").jsxs("div",{className:"_1d4_",onClick:this.$6,role:"presentation",children:[this.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(this.props.thread)?this.$7():null,this.$8(c),this.$9(),a]})};d.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1)};d.componentDidMount=function(){var a=this,c=b("gkx")("678581");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.onSend=function(a){this.$4&&this.$4.onSend&&this.$4.onSend(a)};d.uploadURL=function(a){var b=this.$2||this.$3;if(!b)return;b.uploadURL(a)};d.isUploading=function(){return!!(this.$2&&this.$2.isUploading()||this.$3&&this.$3.isUploading())};d.getInput=function(){return this.$4};d.$9=function(){__p&&__p();var a=this,c={};this.state.inputHeight&&(c.minHeight=this.state.inputHeight);var d=null;if(this.props.showStructuredMenu){var e;d=(e=b("React")).jsx("div",{className:"_5c6-",children:e.jsx(b("MercuryBootloadOnInteraction.react"),{component:e.jsx(b("LazyComponent.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_5c6_"}),loader:b("JSResource")("MessengerBotMenuButton.react").__setRef("ChatTabComposer.react"),placeholder:e.jsx("span",{className:"_5c6_"})})})}e="";this.props.disableInput?e=j._("Composer is disabled for this thread."):this.props.thread&&!this.props.thread.is_canonical?e=j._("Type a message, \u0040name..."):e=j._("Type a message...");return b("React").jsxs("div",{className:"_552h",style:c,children:[d,b("React").jsx("div",{className:this.props.showStructuredMenu?"_4yzj":"",children:b("React").jsxs(b("CustomColorHighlighting.react"),{customColor:this.$10(),children:[this.$11(this.props.threadID),b("React").jsx(s,{composer:this.props.composer,defaultText:this.props.defaultText,fileUploader:this.props.fileUploader,inputKeyDown:this.$12,handleSend:this.props.handleSend,onBeforeInput:function(){return a.refs.emojiButton&&a.refs.emojiButton.hideFlyout()},onBlur:b("emptyFunction"),onEscape:this.$13,onFocus:this.props.onFocus,onTab:this.props.onTab,readOnly:this.props.disableInput,ref:function(b){return a.$4=b},resizeFn:function(b){b=Math.min(b,o),a.setState({inputHeight:b})},thread:this.props.thread,threadID:this.props.threadID,onTextChange:this.props.onTextChange,uploadPhotoFn:function(b){a.$3&&a.$3.uploadFiles([].concat(b))},placeholder:e,viewer:this.props.viewer})]})})]})};d.$7=function(){var a=this.props.thread;if(!a)return null;var c=a.folder,d=a.thread_id;a=a.other_user_fbid;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(n,{folder:c,name:a?a.short_name:j._("Facebook User").toString(),onDelete:function(){return b("FantaTabActions").closeTab(d)},threadID:d})})};d.$8=function(a){if(!a)return null;a=a;var c=b("React").jsx(m,{onCancelReplyingToMessage:this.$14,isChatTab:!0});return b("React").jsx(b("ErrorBoundary.react"),{fallbackComponent:function(){return c},children:b("React").jsx(b("ReasonBootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{name:this.$15(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.$14,isChatTab:!0}),loader:b("ReasonResource")(b("JSResource")("ReplyingToMessageReact.bs").__setRef("ChatTabComposer.react")),placeholder:c})})};d.$15=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$11=function(a){if(!a)return null;var c=this.props.fileUploader;if(!c)return null;c=c.get("uploadedFiles");return c.size==0?null:b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{files:c,small:!0,threadID:a,threadCustomColor:this.$10(),onClick:this.$16}),loader:b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("ChatTabComposer.react"),placeholder:b("React").jsx(b("XUISpinner.react"),{className:"_2qf"})})};d.$10=function(){var a=this.props.thread;return!this.props.isFocused?r:a&&a.footer_color?b("convertMIGColorToFIGColor")(a.footer_color):b("MessengerCustomColorUtils.bs").defaultColor()};d.$16=function(a,c){b("FantaMessageActions").cancelFileUpload(a,c)};d.$5=function(){var a=this.$17(),c=this.$18(),d=this.$19(),e=this.$20(),f=this.$21(),g=this.$22(),h=this.$23(),i=this.$24(),j=this.$25(),k=this.$26(),l=this.$27(),m;b("qex")._("710587")==="frequency"?m=[e,h,a,d,c,j,f,g,k,i].filter(Boolean).slice(0,p-1):m=[a,c,d,e,f,g,h,i,j,k].filter(Boolean).slice(0,p-1);m.push(l);return m};d.$17=function(){var a=this,c=this.props.photoUploaderProps||{};return b("React").jsx("li",{className:"_13f-","data-testid":void 0,children:b("React").jsx(b("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(b){return a.$3=b},imagesOnly:!0},c))},"photos")};d.$26=function(){if(b("gkx")("994335"))return null;var a=this.$28();return a&&this.props.thread&&!this.props.thread.is_canonical?this.$29(a):null};d.$29=function(a){return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{interactionClassName:"_6gd _13f_",flyoutProps:{customColor:this.$10(),threadFBID:a},flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _4tjk _6jv7",flyoutLoader:b("JSResource")("MessengerGroupPollingCreatePollFlyoutReactComponent").__setRef("ChatTabComposer.react"),title:j._("Create a poll"),buttonName:"group_poll"},"grouppolling")};d.$22=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();if(b("MercuryIDs").isLocalThread(this.props.threadID))return null;var c=this.$30();return a&&c&&!this.$31()&&!this.props.forGameChat?this.$32(c):null};d.$32=function(a){return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _4cf0 _6jtp",flyoutProps:{threadID:a,customWidth:q},flyoutLoader:b("JSResource")("MessengerGamesFlyout.react").__setRef("ChatTabComposer.react"),title:j._("Play a game"),buttonName:"game"},"games")};d.$24=function(){return this.$28()&&!this.$31()&&this.state.hasWorkChatExtension?this.$33():null};d.$33=function(){return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{interactionClassName:"_6gd _13ga",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _67ew",flyoutProps:{onSelect:this.$34},flyoutLoader:b("JSResource")("MessengerWorkplaceChatExtensionsPickerWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Find an extension"),buttonName:"chat_extension"},"chatextension")};d.$23=function(){var a=this;if(!b("WorkFileUploadsGating").canUploadFiles)return null;var c=this.props.fileUploaderProps||{};return b("React").jsx("li",{className:"_13gd",children:b("React").jsx(b("ChatPhotoUploader.react"),babelHelpers["extends"]({composer:this.props.composer,onMount:function(b){return a.$2=b}},c))},"files")};d.$18=function(){var a=this.props.stickerButtonProps;return!a?null:this.$35()};d.$35=function(){var a=this.props.stickerButtonProps;if(!a)return null;var c={className:"_5e-r",position:"above"};return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{flyoutProps:a,dialogProps:c,flyoutAlignment:"right",interactionClassName:"_6gd _13ge",iconClassName:"_6gb _6wm4 _6gf _6jtm",flyoutLoader:b("JSResource")("StickersFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Choose a sticker"),buttonName:"sticker"},"sticker")};d.$19=function(){var a=this,c={getQuery:function(){return a.$4&&a.$4.getValue()},onSelect:this.$36};return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,interactionClassName:"_6gd _13gf",flyoutProps:c,flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _6gs _6jtq",threadFBID:this.$28(),flyoutLoader:b("JSResource")("ChatContentSearchFlyoutWrapper.react").__setRef("ChatTabComposer.react"),title:j._("Choose a gif"),buttonName:"gif"},"contentSearch")};d.$20=function(){var a=this,c={onSelect:this.$37,getInput:function(){return a.$4}};return b("React").jsx(b("ChatComposerFlyoutButtonBootLoader.react"),{threadID:this.props.threadID,interactionClassName:"_6gd _13gg",flyoutAlignment:"left",iconClassName:"_6gb _6wm4 _3oxr _6jtr",threadFBID:this.$28(),flyoutLoader:b("JSResource")("ChatEmojiFlyout.react").__setRef("ChatTabComposer.react"),dialogProps:{offsetY:10},flyoutProps:c,title:j._("Choose an emoji"),buttonName:"emoji"},"emoji")};d.$27=function(){return this.$38()?this.$39():this.$40()};d.$38=function(){var a=this.props.composer,b=a.fileUploader.uploadedFiles||{size:0},c=a.sharePreview;a=a.text&&a.text.trim().length>0;return a||b.size>0||!!(c&&c.params&&c.type)};d.$39=function(){var a=j._("Press Enter to send");return b("React").jsx("li",{className:"_6gd _21u1",children:b("React").jsx(b("Link.react"),babelHelpers["extends"]({label:"send",className:"_6gb _6wm4 _6987"},b("TooltipData").propsFor(a),{onClick:this.props.handleSendClick,children:b("React").jsx(l,{filled:!0,color:this.$10()})}))},"send")};d.$40=function(){var a=this.props.thread,c=b("ChatConfig").get("new_dlc")&&!this.props.isFocused?r:this.$10(),d=b("MessengerHotLikeChatSVGIcon.react"),e="_6gb _6wm4";return b("React").jsx("li",{className:"_6gd _5ep3 _13gi",children:b("React").jsx(b("MessengerHotLikeButton.react"),{className:e,customColor:c,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(a)||void 0,CustomRenderer:d,forGameChat:this.props.forGameChat,location:b("MercuryShareAttachmentRenderLocations").CHAT,renderSize:16,sendSticker:this.props.stickerButtonProps&&this.props.stickerButtonProps.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID})},"like")};d.$21=function(){if(!this.props.p2pProps||!this.props.showP2PButton||this.$31()||b("MercuryIDs").isLocalThread(this.props.threadID))return null;var a=this.props.p2pProps,c=b("joinClasses")(a.className,"");return b("React").jsx("li",{className:"_6gd _13gj",children:b("React").jsx(b("P2PSendMoneyContainerBootloader.react"),babelHelpers["extends"]({},a,{className:c,participantIDs:this.props.participantIDs,p2pPaymentConfig:this.state.p2pPaymentConfig,thread:this.props.thread,threadID:this.props.threadID}))},"p2p")};d.$25=function(){var a=this.props.threadID;if(b("MercuryIDs").isLocalThread(this.props.threadID)||!a)return null;a={className:"_6gb _6wm4 _5yhk _6jtu",threadID:a,location:b("MessengerQuickCamOrigins").CHAT_TAB,viewer:this.props.viewer};var c=b("gkx")("678582");if(!c)return null;c=b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},a)),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("ChatTabComposer.react"),placeholder:b("React").jsx("span",{className:a.className})});return b("React").jsx("li",{className:"_6gd _13gk",children:c},"quickcam")};d.$31=function(){return!!this.$41()};d.$41=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$28=function(){if(this.props.threadID&&!b("MercuryIDs").isLocalThread(this.props.threadID))return b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID);return this.props.thread&&this.props.thread.thread_fbid?this.props.thread.thread_fbid:null};d.$30=function(){var a=this.props,c=a.threadID;a=a.thread;return c&&b("MercuryIDs").isLocalThread(c)&&a&&a.thread_fbid?b("MercuryIDs").getThreadIDFromThreadFBID(a.thread_fbid):c};d.replyToMention=function(a){this.$4&&this.$4.addMention&&this.$4.addMention(a)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ChatTabComposerContainer.react",["cx","fbt","Bootloader","ChatTabBlockerComposer.react","ChatTabComposer.react","ChatTabSRXUtil","FantaFRXUtil","FantaMessageActions","FantaTabActions","FBLogger","FDSSpinner.react","JSResource","Keys","LogHistory","MercuryConstants","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageActions","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadInfo","MessengerBotMenuDataFetcher","MessengerState.bs","MNCommercePageSetting","P2PGKValues","PhotosUploadWaterfall","React","ReactDOM","SimpleXUIDialog","WaterfallIDGenerator","emptyFunction","getPageIDFromThreadID","getThreadTypeNameFromThreadType","gkx","lazyLoadComponent","performanceAbsoluteNow","setImmediate","shallowCompare"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("lazyLoadComponent")(b("JSResource")("ChatTabLeftGroupComposer.react").__setRef("ChatTabComposerContainer.react")),k="right",l=/^\s*$/,m=b("LogHistory").getInstance("chat_tab_view"),n=!1,o=!1,p=140,q=90;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showP2PButton:d.$6(),pageID:b("getPageIDFromThreadID")(d.props.threadID),showStructuredMenu:d.$7(),longInput:!1},d.$9=function(a){d.$2=a},d.$10=function(a){d.$3&&d.$3.uploadFiles([].concat(a))},d.$11=function(a){d.$5=a},d.$12=function(a){d.$3=a},d.onSend=function(a){d.props.forGameChat&&b("Bootloader").loadModules(["GamesQuicksilverFunnelLogger"],function(a){a.logGameChatSendMessage(a.getDefaultFunnelName())},"ChatTabComposerContainer.react");if(a&&a.profile_ranges&&a.profile_ranges.length){var c=a,e=d.props.thread;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(a,d){new a().setEvent(d.MENTION).setGroupSize(e&&e.participants&&e.participants.length).setNumDelivered((c.profile_ranges||[]).length).setThreadid(e&&e.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(e&&e.thread_type)).setOfflineThreadid(c.offline_threading_id).log()},"ChatTabComposerContainer.react")}o?d.$2&&d.$2.onSend&&d.$2.onSend(a):d.refs.composer&&d.refs.composer.onSend(a)},d.focusInput=function(){var a=d.getInput();a&&a.focus&&a.focus()},d.$14=function(a){a=d.getInput();a&&typeof a.handleSend==="function"&&(a&&a.handleSend())},d.$36=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).confirmAttachmentPlaceholder(c.upload_id,c),d.$30(c)},d.$38=function(a){__p&&__p();var c,e;switch(a.error){case"size-exceeded":c=h._("The file you have selected is too large");e=h._("The file you have selected is too large. The maximum size is 25MB.");b("FBLogger")("messenger_upload_file").warn("Uploading file is too large");break;case"attachment-limit":c=h._("The number of files you have selected is too large.");e=h._("You can send maximum {max number of files} files.",[h._param("max number of files",b("MercuryConstants").AttachmentMaxLimit)]);b("FBLogger")("messenger_upload_file").warn("Attachment limit reached");break;default:c=h._("File Upload Failed"),e=h._("There was a problem uploading the file.")}d.$41(c,e);d.$25(a)},d.$35=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c),d.$29(c)},d.$40=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("File Upload Failed");var e=h._("There was a problem uploading the file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,e=c.errorDialogParams.body||e);d.$41(a,e);d.$25(c)},d.$37=function(a,c){b("MercuryMessageActions").getForFBID(d.props.viewer).cancelAttachmentPlaceholder(c.upload_id,c);a=h._("Upload Failed");var e=h._("Please try again. Make sure you are uploading a valid file.");c.errorDialogParams&&(a=c.errorDialogParams.title||a,e=c.errorDialogParams.body||e);d.$41(a,e);d.$27&&d.$27(c)},d.$39=function(a,b){d.$31&&d.$31(b)},d.$17=function(a,b){d.$23(a,b)},d.$16=function(a){d.props.onEscape&&d.props.onEscape(a)},d.$18=function(a,c){var e=d.props.threadID;e&&(d.$4=b("setImmediate")(function(){d.$4=null,b("FantaMessageActions").composerTextUpdate(e,a,c)}));d.$8()},d.$23=function(a,c){var e=d.props.threadID;a.keyCode===b("Keys").RETURN&&!a.shiftKey&&(a.preventDefault(),d.$13(c));if(a.keyCode===b("Keys").DOWN&&a.shiftKey&&d.hasEmptyInput()){b("FantaTabActions").minimizeTab(e);return}},d.$13=function(a){var b=d.$43();b==null||b.length===0?d.$44(a,[]):d.$44(a,b)},d.$15=function(a){var b=d.getInput();b&&b.insertEmoji(a)},d.$24=function(a,b,c){d.props.onSendHotLike(a.emoji,b,c,d.focusInput)},d.$26=function(){d.props.onSendMessage("",d.props.composer,d.onSend)},d.$28=function(a){d.props.onSelectSticker(a,b("emptyFunction"))},d.$31=function(a){d.$45(b("PhotosUploadWaterfall").UPLOAD_START,a),d.props.onSendPhoto(a,d.onSend),d.$46("submit",a),d.focusInput()},d.$25=function(a){d.$45(b("PhotosUploadWaterfall").CLIENT_ERROR,a),d.$46("failed",a)},d.$27=function(a){d.$45(b("PhotosUploadWaterfall").CLIENT_ERROR,a),d.$46("failed",a)},d.$29=function(a){d.$45(b("PhotosUploadWaterfall").CANCEL_DURING_UPLOAD,a),d.$46("canceled",a)},d.$30=function(a){d.$45(b("PhotosUploadWaterfall").ALL_UPLOADS_DONE,a);d.$46("completed",a);a=a.image_ids.length||a.attachments.length;d.$47(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};d.componentDidMount=function(){var a=this,c=(i||(i=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_composer_container",JSON.stringify(a.state),0,c)},"ChatTabComposerContainer.react");this.props.isFocused&&!this.props.isNewEmptyLocalThread&&this.focusInput();this.state.pageID&&b("MessengerBotMenuDataFetcher").getHasPageSetting(this.state.pageID,function(b){a.setState({showStructuredMenu:b})},function(){a.setState({showStructuredMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};d.componentDidUpdate=function(a){var b=this.props.thread;b=b?b.thread_id:null;b===this.props.threadID&&(this.props.fileUploader!==a.fileUploader&&this.$8())};d.$6=function(){return b("P2PGKValues").P2PVisible&&this.props.viewer!==b("MercuryIDs").getUserIDFromThreadID(this.props.threadID)};d.$7=function(){var a=b("getPageIDFromThreadID")(this.props.threadID);return a===null||a===void 0?!1:b("MessengerBotMenuDataFetcher").getHasPageSetting(a,function(){},function(){},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED)};d.render=function(){var a=this.props.composer,c=this.props,d=c.thread;c=c.threadID;var e=c?b("MessengerState.bs").isEmptyLocalThread(this.props.viewer,c):!1;return o?b("React").jsx(b("ChatTabComposer.react"),{composer:a,enableDisappearingIcons:n,fileUploader:this.props.fileUploader,handleSend:this.$13,handleSendClick:this.$14,inputRef:this.$9,isEmptyLocalThread:e,isFocused:this.props.isFocused,defaultText:a.text,onEmojiSelect:this.$15,onEscape:this.$16,onInputKeyDown:this.$17,onTab:this.props.onTab,onTextChange:this.$18,onUploaderMount:this.$12,pageID:this.state.pageID,participantIDs:void 0,disableInput:this.props.disableInput,showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,thread:d,threadID:c,uploadPhotoFn:this.$10,viewer:this.props.viewer,focusInput:this.focusInput,longInput:this.state.longInput,ref:this.$11,forGameChat:this.props.forGameChat}):this.$19()?this.$21()?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("FDSSpinner.react"),{center:!0}),children:b("React").jsx(j,{})}):b("React").jsx(b("ChatTabComposer.react"),{defaultText:a.text,fileUploaderProps:this.$22(),handleSendClick:this.$14,isEmptyLocalThread:e,ref:"composer",composer:this.props.composer,fileUploader:this.props.fileUploader,handleSend:this.$13,inputKeyDown:this.$23,isFocused:this.props.isFocused,onCustomLikeSelect:this.$24,onEmojiSelect:this.$15,onEscape:this.props.onEscape,onFileUploadFail:this.$25,onP2PTrigger:this.$26,onPhotoUploadFail:this.$27,onStickerSelect:this.$28,onTab:this.props.onTab,onUploadCancel:this.$29,onUploadComplete:this.$30,onUploadSubmit:this.$31,thread:d,threadID:c,viewer:this.props.viewer,disableInput:this.props.disableInput,onTextChange:this.$18,p2pProps:this.$32(),pageID:this.state.pageID,participantIDs:void 0,photoUploaderProps:this.$33(),showP2PButton:this.state.showP2PButton,showStructuredMenu:this.state.showStructuredMenu,stickerButtonProps:this.$34(),forGameChat:this.props.forGameChat}):this.$20(c)};d.getInput=function(){return o?this.$2:this.refs.composer&&this.refs.composer.getInput&&this.refs.composer.getInput()};d.isUploading=function(){return this.refs.composer.isUploading()};d.$32=function(){return!this.state.showP2PButton?{}:{button:b("React").jsx("i",{className:"hidden_elem"}),className:"_6ga _6gb _6wm4 _6jtl",flyoutAlignment:k,referrer:b("MercuryShareAttachmentRenderLocations").CHAT,threadID:this.props.threadID,onTrigger:this.$26}};d.$34=function(){var a={className:"_6gb _6wm4 _6gf _6jtm",flyoutAlignment:k,threadID:this.props.threadID,onStickerSelect:this.$28};return a};d.$33=function(){var a={className:"_6gd",customUI:!0,imageClassName:"hidden_elem",linkClassName:"_6gb _6wm4 _6ge _6jtn",threadID:this.props.threadID,onLastUploadCancel:this.$35,onAllUploadsComplete:this.$36,onLastUploadFail:this.$37,onUploadError:this.$38,onSubmit:this.$39};return a};d.$22=function(){var a=this.$33();a.linkClassName="_6gb _6wm4 _6gg _6jto";a.imagesOnly=!1;a.onLastUploadFail=this.$40;return a};d.$41=function(a,c){b("SimpleXUIDialog").show(c,a)};d.$8=function(){if(!this.$5)return;var a=b("ReactDOM").findDOMNode(this.$5);if(!a)return;a=a.clientHeight;!this.state.longInput&&a>p?this.setState({longInput:!0}):this.state.longInput&&a<q&&this.setState({longInput:!1})};d.hasEmptyInput=function(){return l.test(this.$42())};d.$42=function(){var a=this.getInput();return a&&a.getValue()||""};d.$44=function(a,b){this.props.onSendMessage({message:a,mentions:b},this.props.composer,this.onSend);return};d.$43=function(){var a=this.getInput();return a&&a.getMentions?a.getMentions():null};d.$19=function(){return!b("gkx")("1241489")?!(b("ChatTabSRXUtil").isSRXEligible(this.props.thread,this.props.threadID)&&this.props.blockedIDs&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIDs,this.props.thread)):b("MercuryThreadInfo").canReply(this.props.thread)};d.$20=function(a){var c;if(!b("gkx")("1241489"))return b("React").jsx(b("ChatTabBlockerComposer.react"),{onSomethingWrong:this.props.threadID?b("FantaFRXUtil").FRXClicked:null,threadID:a,viewer:this.props.viewer});c=((c=this.props)==null?void 0:(c=c.thread)==null?void 0:c.cannot_reply_reason)==="blocked";if(c){c=this.props.blockedIDs&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIDs,this.props.thread);return c?b("React").jsx(b("ChatTabBlockerComposer.react"),{onSomethingWrong:this.props.threadID?b("FantaFRXUtil").FRXClicked:null,threadID:a,viewer:this.props.viewer}):b("React").jsx("div",{className:"_8vnr",children:h._("You cannot reply to this conversation.")})}return b("React").jsx("div",{className:"_8vnr",children:b("MercuryReadOnlyReason").getReason((c=this.props)==null?void 0:(a=c.thread)==null?void 0:a.has_email_participant)})};d.$21=function(){var a=this.props.thread;return a&&!a.is_subscribed&&b("gkx")("976852")};d.$45=function(a,c){this.$1==null&&(this.$1=b("WaterfallIDGenerator").generate()),b("PhotosUploadWaterfall").sendSignal(babelHelpers["extends"]({qn:this.$1,step:a,uploader:b("PhotosUploadWaterfall").APP_CHAT},c||{}))};d.$47=function(a){if(a===0)return;this.$45(b("PhotosUploadWaterfall").POST_PUBLISHED,{count:a});this.$1=b("WaterfallIDGenerator").generate()};d.$46=function(a,b){m.debug("photo_uploader:"+a,"{}")};return c}(b("React").Component);e.exports=a}),null);
__d("ChatTabMenuBootloader.react",["cx","fbt","AutoFocusableLink.react","BootloadOnInteraction.react","ChatTabMenuIcon.bs","ErrorBoundary.react","JSResource","LazyComponent.react","MercuryConfig","MercuryThreadInfo","MessageRequestUtils","React","getPageIDFromThreadID","immutable","isEmpty","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("ChatTabMenuIcon.bs").jsComponent,k=b("lazyLoadComponent")(b("JSResource")("MessengerReportNUX.react").__setRef("ChatTabMenuBootloader.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a=this.props.thread;return!!a&&b("MercuryThreadInfo").showSettingsMenu(a)&&!(i||(i=b("isEmpty")))(a.participants)&&!b("MessageRequestUtils").isMessageRequest(a)&&!b("MercuryConfig").ViewerIsReadOnly&&!(b("MercuryConfig").ColdOpenBlock&&(b("MercuryThreadInfo").isColdOpen(a)||b("MercuryThreadInfo").isEmptyLocalThread(a)))&&!(this.props.isPageChat&&a.message_count===0)};d.render=function(){if(!this.$1())return null;var a=h._("Options");return b("React").jsxs("div",{className:"_461_",ref:"menu",children:[b("React").jsx(b("BootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("ChatTabMenu.react").__setRef("ChatTabMenuBootloader.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{"aria-label":a,role:"button",children:b("React").jsx(j,{iconStyle:this.props.iconStyle})})}),this.$2()]})};d.$2=function(){var a=this;if(!this.props.showMessengerReportNux||this.props.threadID===null)return null;var c=b("getPageIDFromThreadID")(this.props.threadID);return c===null?null:b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(k,{contextRef:function(){return a.refs.menu},pageID:c,pageUnsubscribeStatus:this.props.pageUnsubscribeStatus})})})};return c}(b("React").Component);e.exports=a}),null);
__d("ChatTypingIndicator.react",["cx","fbt","Image.react","MercuryIDs","MercuryTypingAnimation_DEPRECATED.react","MessengerParticipants.bs","MessengerPersonas.bs","QE2Logger","React","ReactComponentWithPureRenderMixin","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();c=b("createReactClass_DEPRECATED")({displayName:"ChatTypingIndicator",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{setBubbleRef:(a=b("prop-types")).func,isOnline:a.bool,userID:a.string,showName:a.bool},componentDidMount:function(){b("QE2Logger").logExposureForUser("messenger_growth_tombstone")},render:function(){var a,c=this.getPersona();this.props.userID&&(a=b("MessengerParticipants.bs").getNow(this.props.userID));return!a&&!c?null:b("React").jsxs("div",{className:"_4tdt",children:[i(a,c),this._renderBubble()]})},getPersona:function(){var a=this.props.userID;return!a?null:b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(a))},_renderBubble:function(){var a=this.props,c=a.setBubbleRef;a=a.showName;return b("React").jsx("div",{className:"_4tdv",children:b("React").jsx("div",{className:"_5wd4 _1nc7 _2cnu"+(a?" _5ysy":""),children:b("React").jsx("div",{className:"_5wd9 _n4o",children:b("React").jsx("div",{className:"_5w1r _5wdf _3_om",children:b("React").jsx(b("MercuryTypingAnimation_DEPRECATED.react"),{className:"_5x7x",ref:c})})})})})}});function i(a,c){var d=c?c.name:a?a.name:null;c=c?c.profile_picture_url:a?a.image_src:null;a=a?a.href:null;d=h._("{name}",[h._param("name",d)]);return b("React").jsx("div",{className:"_31o4 _3njy",children:b("React").jsx("a",{"aria-label":d,className:"_4tdw","data-hover":"tooltip","data-tooltip-content":d,"data-tooltip-position":"left",href:a||"#",ref:"link",children:b("React").jsx(b("Image.react"),{src:c,ref:"image"})})})}e.exports=c}),null);
__d("ChatTypingIndicators.react",["cx","fbt","ChatConfig","ChatTypingIndicator.react","CurrentUser","DOM","MercuryIDs","MessengerEnvironment","MessengerParticipants.bs","MessengerPersonas.bs","MessengerState.bs","MessengerTypingUtils.bs","React","ReactDOM","TooltipData","emptyFunction"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.bubbleRefs={},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.shouldComponentUpdate=function(a){return a.threadID!==this.props.threadID||a.viewer!==this.props.viewer||a.rootClassName!==this.props.rootClassName||a.typingUserIDs!==this.props.typingUserIDs};d.componentDidUpdate=function(){__p&&__p();var a=this,c=b("MessengerTypingUtils.bs").getTypingUserIDs(this.props.typingUserIDs);c.length>0?this.props.indicatorsDidShow():this.props.indicatorsDidHide();b("MessengerParticipants.bs").getMulti(c,function(d){a.$1&&c.forEach(function(c){var e=d[c],f=a.bubbleRefs[c];if(f&&e){c=b("MessengerPersonas.bs").getNow(b("MercuryIDs").getUserIDFromParticipantID(c));c=c?c.name:e.short_name;b("TooltipData").set(b("ReactDOM").findDOMNode(f),a.renderTooltip(c),"above","left")}})})};d.$2=function(){var a=this,c=b("MercuryIDs").isGroupChat(this.props.threadID);return b("React").jsx("div",{className:this.props.rootClassName,children:b("MessengerTypingUtils.bs").getTypingUserIDs(this.props.typingUserIDs).sort().map(function(b){return a.$3(b,!!c)})})};d.render=function(){__p&&__p();if(!b("MercuryIDs").isValid(this.props.threadID))return null;var a=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),this.props.threadID);if(a&&!a.is_subscribed)return null;if(b("CurrentUser").isWorkUser()&&a!=null&&a.participants.length===1)return null;a=b("CurrentUser").isWorkUser()&&b("MessengerEnvironment").messengerui;if(!a&&b("ChatConfig").getBool("chat_tab_has_gradients"))return b("React").jsx("div",{className:"_4gd0",children:this.$2()});else return this.$2()};d.$3=function(a,c){var d=this,e=this.props.indicatorClass;return b("React").jsx(e,{setBubbleRef:function(b){d.bubbleRefs[a]=b},showName:c,userID:a},a)};d.renderTooltip=function(a){var c=b("DOM").create("span");b("ReactDOM").render(b("React").jsx("span",{children:h._("{name} is typing...",[h._param("name",a)])}),c);return c};return c}(b("React").Component);a.defaultProps={indicatorClass:b("ChatTypingIndicator.react"),indicatorsDidShow:b("emptyFunction"),indicatorsDidHide:b("emptyFunction")};e.exports=a}),null);
__d("ChatVideoCallButtonBootloader.react",["cx","AutoFocusableLink.react","BootloadOnInteraction.react","ChatVideoCallIcon.bs","JSResource","LazyComponent.react","React","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("ChatVideoCallIcon.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={RTCComponent:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=!0;b("requireWeak")("ChatVideoCallButton.react",function(b){a.$1&&a.setState({RTCComponent:b})})};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){if(this.props.isPageChat||this.props.isBlocked||this.props.threadID==="user:"+this.props.viewer)return null;var a=this.props,c=a.isAudio;a=a.iconStyle;var d=this.state.RTCComponent;return b("React").jsx("div",{className:"_3a61"+(c?" _461a":"")+(c?"":" _461b"),"data-testID":c?"chatTabVoiceButton":"chatTabVideoButton",children:d?b("React").jsx(d,babelHelpers["extends"]({},this.props)):b("React").jsx(b("BootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("ChatVideoCallButton.react").__setRef("ChatVideoCallButtonBootloader.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{role:"button",children:b("React").jsx(h,{isAudio:c,iconStyle:a})})})},"rtc"+(c?"audio":"video"))};return c}(b("React").Component);e.exports=a}),null);
__d("ChatDetailStack.bs",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var c=a.topDetail;a=a.bottomDetail;a=a!==null?b("React").jsx("div",{children:a,className:"_4jeh"}):null;return b("React").jsxs("div",{children:[b("React").jsx("div",{children:c,className:"_4jeg"}),a],className:"_2rt2"})}c=a;f.make=c}),null);
__d("ChatTabMenu.bs",["MercuryIDs","bs_caml_option","ReasonReact.bs","MessengerState.bs","bs_js_null_undefined","getPageIDFromThreadID","ChatTabMenuBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=a!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(a).thread_id):void 0;if(p!==void 0){var q=b("bs_caml_option").valFromOption(p);q=[b("MercuryIDs").isGroupChat(q),b("MessengerState.bs").isNewEmptyLocalThread(c,q),b("bs_caml_option").nullable_to_opt(b("getPageIDFromThreadID")(q))!==void 0]}else q=[!1,!0,!1];var r=a!==void 0?b("bs_caml_option").valFromOption(a).message_count===0:!0;return b("ReasonReact.bs").wrapJsForReason(b("ChatTabMenuBootloader.react"),{autoFocus:!1,hasBlockedMessages:h,highlightNewMessage:k,isEmptyChat:q[1],isEmptyConversation:r,isFocused:j,isGroupChat:q[0],isMultiCompany:i,isPageChat:q[2],membershipParticipants:b("bs_js_null_undefined").fromOption(d),pageUnsubscribeStatus:e,participantsMap:b("bs_js_null_undefined").fromOption(f),showMessengerReportNux:g,isNewMessageTab:l,thread:b("bs_js_null_undefined").fromOption(a),threadID:b("bs_js_null_undefined").fromOption(p),uri:m,viewer:c,iconStyle:n},o)}f.make=a}),null);
__d("ChatThreadName.bs",["cx","React","Link.react","MercuryIDs","bs_caml_option","ReasonReact.bs","MessengerHoverCardLink","MercuryThreadTitleReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.thread,d=a.threadHref,e=a.tooltip,f=a.viewer,g=a.className,h=a.isNewMessageTab;a=a.onHeaderClick;if(c!==void 0){c=b("bs_caml_option").valFromOption(c);var i=c.thread_id;e=b("React").jsx(b("Link.react"),{"aria-label":e,"data-hover":"tooltip","data-tooltip-content":e,className:g,href:d,onClick:a,children:b("ReasonReact.bs").element(void 0,void 0,b("MercuryThreadTitleReact.bs").make("_1ogo",void 0,c,f,h,void 0,!c.is_canonical,!0,[]))});if(c.is_canonical){g=b("MessengerHoverCardLink").constructEndpoint({id:b("MercuryIDs").getThreadFBIDFromThreadID(i)});return b("React").cloneElement(e,{"data-hovercard":g,"data-hover":""})}else return e}else return null}c=a;f.make=c}),null);
__d("ChatVideoCallButton.bs",["MercuryIDs","bs_caml_option","ReasonReact.bs","bs_js_null_undefined","ChatVideoCallButtonBootloader.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,g,h,i,j,k){__p&&__p();a=a!==void 0?a:!0;e=e!==void 0?e:function(a){return 0};f=f!==void 0?f:!1;j=j!==void 0?j:!0;if(h!==void 0){var l=b("bs_caml_option").valFromOption(h);l=[b("bs_caml_option").some(l.thread_id),b("bs_caml_option").nullable_to_opt(l.rtc_call_data)]}else l=[void 0,void 0];var m=l[1];m=m!==void 0?b("bs_caml_option").valFromOption(m):{call_state:"NO_ONGOING_CALL",server_info_data:null,initiator_fbid:null};l=b("bs_js_null_undefined").fromOption(l[0]);var n=b("MercuryIDs").isGroupChat(l);return b("ReasonReact.bs").wrapJsForReason(b("ChatVideoCallButtonBootloader.react"),{isAudio:a,isPageChat:c,isBlocked:d,isGroupChat:n,iconStyle:g,onRTCNuxCloseButtonClick:e,rtcNuxShown:f,threadID:l,thread:b("bs_js_null_undefined").fromOption(h),viewer:i,shown:j,rtcCallData:m},k)}f.make=a}),null);
__d("ChatMuteIconReact.bs",["cx","fbt","React","bs_js_dict","TooltipData","bs_js_null_undefined"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){a=a.isMuted;if(a){a=b("TooltipData").propsFor(h._("This conversation is muted. Chat tabs will not pop up for it and push notifications are off."),"above");return b("React").cloneElement(b("React").jsx("div",{children:b("React").jsx("i",{className:"_7hfn"}),className:"_3a61"}),{"data-tooltip-content":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-tooltip-content")),"data-hover":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-hover")),"data-tooltip-position":b("bs_js_null_undefined").fromOption(b("bs_js_dict").get(a,"data-tooltip-position"))})}else return null}c=a;f.make=c}),null);
__d("FantaChatHeaderContainer.react",["cx","AsyncRequest","Bootloader","FantaM4Header.bs","FantaTabActions","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","React","ShortProfiles","XGroupCallNuxController","immutable","performanceAbsoluteNow","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("FantaM4Header.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.state={rtcNuxShown:!1},d.$4=function(a){d.props.onClose&&d.props.onClose(),a.preventDefault()},d.$5=function(a){var c=a.target,e=c&&c.classList&&c.classList.contains("button");c=c&&(c.tagName==="svg"||c.ownerSVGElement!=null);if(e||c)return;a.stopPropagation();b("FantaTabActions").minimizeTab(d.props.threadID)},d.$6=function(a){a.stopPropagation(),b("FantaTabActions").minimizeTab(d.props.threadID)},d.$3=function(){if(d.state.rtcNuxShown&&d.$1){d.setState({rtcNuxShown:!1});var a=b("XGroupCallNuxController").getURIBuilder().setString("action","dismiss").getURI();new(b("AsyncRequest"))(a).send()}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.threadHref!==a.threadHref||c.highlightNewMessage!==a.highlightNewMessage||c.isFocused!==a.isFocused||c.viewer!==a.viewer||c.threadID!==a.threadID||c.isLastGroupTab!==a.isLastGroupTab||c.thread!==a.thread||d.rtcNuxShown!==b.rtcNuxShown||c.customColor!==a.customColor||c.blockedIDs!==a.blockedIDs||!c.membershipParticipants&&!!a.membershipParticipants||!!c.membershipParticipants&&!!a.membershipParticipants&&!c.membershipParticipants.equals(a.membershipParticipants)||!c.participants&&!!a.participants||!!c.participants&&!!a.participants&&!c.participants.equals(a.participants)};d.componentDidMount=function(){var a=this,c=(h||(h=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_header",JSON.stringify({isNewMessageTab:a.props.isNewMessageTab,hasThread:!!a.props.thread}),0,c)},"FantaChatHeaderContainer.react");this.$1=!0;this.$2()};d.componentWillUnmount=function(){this.$3(),this.$1=!1};d.render=function(){var a=this.props,c=a.blockedIDs,d=a.highlightNewMessage,e=a.isFocused,f=a.isNewMessageTab,g=a.membershipParticipants,h=a.pageIndicatorDescription,j=a.participants,k=a.thread,l=a.threadHref,m=a.threadID,n=a.uri;a=a.viewer;var o=this.state.rtcNuxShown;c=!!k&&b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a,c,k);var p=!!k&&k.page_unsubscribe_status,q;m=b("MercuryIDs").getUserIDFromThreadID(m);m&&(q=b("ShortProfiles").getNow(m));m=q&&q.is_messenger_only;return b("React").jsx("div",{className:"clearfix titlebar",children:b("React").jsx(i,{hasBlockedMessages:c,highlightNewMessage:d,isMessengerOnlyUser:m,isFocused:e,isMultiCompany:this.props.isMultiCompany,isDoNotDisturb:this.props.isDoNotDisturb,isNewMessageTab:!!f,membershipParticipants:g,onClose:this.$4,onHeaderToggle:this.$5,onMinimizeButtonClick:this.$6,onRTCNuxCloseButtonClick:this.$3,pageUnsubscribeStatus:p,pageIndicatorDescription:h,participants:j,rtcNuxShown:o,showMessengerReportNux:!0,thread:k,focusOnClick:this.props.focusOnClick,threadHref:l,uri:n,viewer:a})})};d.$2=function(){var a=this;if(this.props.isLastGroupTab){var c=b("XGroupCallNuxController").getURIBuilder().setString("action","should_show").getURI();new(b("AsyncRequest"))(c).setHandler(function(b){b=b.payload.shouldShow;a.$1&&a.setState({rtcNuxShown:b})}).send()}};return c}(b("React").Component);a.propTypes={blockedIDs:(c=b("prop-types")).any,customColor:c.string,highlightNewMessage:c.bool,isFocused:c.bool.isRequired,isLastGroupTab:c.bool.isRequired,onClose:c.func.isRequired,focusOnClick:c.func.isRequired,thread:c.object,threadID:c.string.isRequired,uri:c.string,viewer:c.string.isRequired};e.exports=a}),null);
__d("FantaConversation.react",["Bootloader","ChatConversation.react","CurrentUser","EventProfiler","MercuryIDs","MessengerHotLikePreviewEvents","React","StickersTypedLogger","SubscriptionsHandler","emptyFunction","prop-types","shallowArrayEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$4=function(a){d.props.threadID===a&&d.setState({likePreview:null})};d.$5=function(a,c){if(!a)return;new(b("StickersTypedLogger"))().setEvent("click_sticker").setPackid(a).setStickerid(c).log();b("Bootloader").loadModules(["StickersPackInTrayQuery","StickersActions","StickersStoreController"],function(b,c,e){b.onIsPackInTray(a,"messages",function(b){b.in_sticker_tray?(c.selectTrayPack(a),c.showStickerFlyout(d.props.threadID)):e.showStore(a)})},"FantaConversation.react")};d.state={likePreview:null};d.$1=new(b("SubscriptionsHandler"))();return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return!b("shallowArrayEqual")(d.messages,a.messages)||d.threadID!==a.threadID||d.thread!==a.thread||e.likePreview!==c.likePreview};d.componentDidMount=function(){this.$2(),this.$3()};d.componentDidUpdate=function(){this.$3()};d.componentWillUnmount=function(){this.$1.release()};d.$3=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};d.$2=function(){var a=this,c;this.$1.addSubscriptions((c=b("MessengerHotLikePreviewEvents")).addListener(c.START,function(b,c){a.props.threadID===c&&a.setState({likePreview:b})}),c.addListener(c.STOP,this.$4),c.addListener(c.STOP_EMOJI,this.$4),c.addListener(c.REMOVE,this.$4))};d.render=function(){var a=this,c=this.props.messages,d=this.props,e=d.forGameChat,f=d.onLoadMoreMessages,g=d.thread;d=d.threadID;var h=this.state.likePreview,i=b("CurrentUser").getID();h&&(c=[].concat(c,[h]));return g?b("React").jsx(b("ChatConversation.react"),{forGameChat:e,isCanonical:b("MercuryIDs").isCanonical(d),loadMoreMessages:f,maxBubbleWidth:181-this.props.scrollbarPadding,messages:c,onAttachmentLoad:function(){return a.props.onAttachmentLoad()},onMount:b("emptyFunction"),onStickerClick:this.$5,readReceipts:this.props.readReceipts,ref:"conversation",thread:g,threadID:d,viewer:i}):b("React").jsx("div",{})};d.getMessageList=function(){return this.refs.conversation&&this.refs.conversation.getMessageList()};return c}(b("React").Component);a.propTypes={forGameChat:(c=b("prop-types")).bool.isRequired,onLoadMoreMessages:c.func.isRequired,scrollbarPadding:c.number,thread:c.object,threadID:c.string.isRequired};e.exports=a}),null);
__d("ChatTypingIndicatorsWrapper.bs",["React","ReasonReact.bs","bs_belt_MapString","MessengerState.bs","ChatTypingIndicators.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();c=b("ReasonReact.bs").statelessComponent("ChatTypingIndicatorsWrapper");function a(a){var c=a.indicatorClass,d=a.indicatorsDidHide,e=a.indicatorsDidShow,f=a.viewer,g=a.rootClassName,h=a.threadID;return b("React").jsx(b("MessengerState.bs").Provider.make,{fbid:f,children:function(a){return b("React").jsx(b("ChatTypingIndicators.react"),{indicatorClass:c,indicatorsDidShow:e,indicatorsDidHide:d,rootClassName:g,threadID:h,viewer:f,typingUserIDs:b("bs_belt_MapString").get(a[6],h)},h)}})}d=a;e=a;f.component=c;f.make=d;f.jsComponent=e}),null);
__d("FantaPageGreetingLoader.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","React","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){var c=a.thread;a=a.threadID;if(c!=null){c=((c=c)!=null?c.is_canonical_neo_user:c)||!1;if(c)return null}else return null;return b("getPageIDFromThreadID")(a)?b("React").jsx("div",{className:"_7bl4",children:b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MercuryPagesGreetingContainer.react").__setRef("FantaPageGreetingLoader.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{threadID:a})})}):null};e.exports=a}),null);
__d("FantaThread.react",["cx","M4ThreadFillDetect.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("M4ThreadFillDetect.bs").forJS;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.setRef=function(a){c.$1=a,typeof c.props.scrollRef==="function"&&c.props.scrollRef(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props,c=a.children;a=a.spacerContent;return b("React").jsx("div",{className:"_1i6a",onClick:this.props.onClick,children:b("React").jsx("div",{className:"_4po3"+(h==="FLEX"?" _4poa":"")+(h==="TABLE"?" _4po4":""),ref:this.setRef,children:b("React").jsxs("div",{className:"_4po5",children:[b("React").jsx("div",{className:"_4po6",children:b("React").jsx("div",{className:"_4po7",children:a})}),b("React").jsx("div",{className:"_4po8",children:b("React").jsx("div",{className:"_4po9",children:c})})]})})})};return c}(b("React").Component);e.exports=a}),null);
__d("WorkBotLandingPageHelper",["immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("immutable").List;function a(a){__p&&__p();var b;if(a.length===0)return!0;if(a.length>1)return!1;a=a[a.length-1];b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;if(b==="work_bot_installed"){a=(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.show_landing_page:b:b:b;return a===!0}return!1}function c(a){__p&&__p();var b;if(a.size===0)return!0;if(a.size>1)return!1;a=a.last();b=(b=a)!=null?(b=b.log_message_data)!=null?b.message_type:b:b;if(b==="work_bot_installed"){a=(b=a)!=null?(b=b.log_message_data)!=null?(b=b.untypedData)!=null?b.show_landing_page:b:b:b;return a===!0}return!1}e.exports={shouldShowBotLandingPage:c,shouldShowBotLandingPageArray:a}}),null);
__d("FantaConversationScroller.react",["ix","csx","cx","fbt","Animation","Arbiter","BootloadedComponent.react","Bootloader","ChatTypingIndicatorsWrapper.bs","CurrentUser","Event","FantaAppStore","FantaConversation.react","FantaMessageActions","FantaPageGreetingLoader.react","FantaTabActions","FantaThread.react","Image.react","JSResource","Link.react","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLastMessageIndicator.react","MercuryQuickReply.react","MercuryShareAttachmentRenderLocations","MessengerHotLikePreviewEvents","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerTabsThreadSearchLoader","MessengerVideoAutoplayActions","MessengerVideoAutoplayStore","Parent","QE2Logger","React","ReactDOM","Scroll","ScrollBoundaryContain","Style","SubscriptionsHandler","TimeSlice","WebMessengerConstants","WorkBotLandingPageHelper","XUIButton.react","XUISpinner.react","asset","clearImmediate","emptyFunction","getElementPosition","getPageIDFromThreadID","gkx","immutable","isEventSupported","joinClasses","performanceAbsoluteNow","promiseDone","prop-types","setImmediate","shallowArrayEqual","shallowEqual","throttle"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l=b("ChatTypingIndicatorsWrapper.bs").jsComponent,m=b("WorkBotLandingPageHelper").shouldShowBotLandingPageArray,n=0,o=15,p=null,q=20,r=1e3;function s(a){__p&&__p();if(p===null){var c=a.firstElementChild;if(c){b("Style").set(a,"overflow","scroll");var d=c.clientWidth;b("Style").set(a,"overflow","hidden");c=c.clientWidth;p=Math.max(c-d,0);b("Style").set(a,"overflow","")}else p=0}return p}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$8=[];d.state={loadingMessages:!d.props.isEmptyLocalThread,scrollbarPadding:p===null?o:p,hideLastMessageIndicator:!1,searchResults:null};d.$19=function(a){a=b("ReactDOM").findDOMNode(d.refs.scrollContainer);a&&(d.$20(),d.$21()&&!d.$22()&&!d.$2&&!d.props.hasFetchedAll&&!(d.state.searchResults&&d.state.searchResults.mid)&&(d.setState({loadingMessages:!0}),d.props.onLoadMoreMessages()),d.$23(),d.$9())};d.$15=function(){__p&&__p();if(!d.refs||d.state.loadingMessages||!d.props.thread){d.$8=[];return}var a=b("ReactDOM").findDOMNode(d.refs.scrollContainer),c=b("getPageIDFromThreadID")(d.props.threadID);if(!a||!c){d.$8=[];return}var e=10,f,g;try{f=a.getBoundingClientRect(),g=d.refs.conversation?d.refs.conversation.getMessageList():null}catch(a){return}if(!g||!f)return;var h=[];d.$7.forEach(function(a){if(!g)return;var i=a.message_id,j=g.getMessageElement(i);if(j){j=j.getBoundingClientRect();j.top>f.top-e&&j.bottom<f.bottom+e&&(h.push(i),d.$8.includes(i)||b("Bootloader").loadModules(["MessengerAdsWebLogger","MNAdsLoggerEventEnum"],function(b,d){b.log(a.ad_client_token,a.ad_id,d.MESSAGE_SEEN_THREAD,!0,i,c)},"FantaConversationScroller.react"))}},babelHelpers.assertThisInitialized(d));d.$8=h};d.$25=function(){d.$1=null,b("FantaTabActions").scrollBottomChanged(d.props.threadID,d.$5,d.$26)};d.$26=function(){d.$27(!1),d.$17()};d.$29=function(){var a=(k||(k=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,c){return b.markerEnd(c.FIRSTCHATTABOPEN_WWW,"SUCCESS",0,a)},"FantaConversationScroller.react")};d.$32=function(a){a=b("Parent").byClass(a.target,"._1dlq");a||d.props.onFocus&&d.props.onFocus()};d.$5=!0;return d}var d=c.prototype;d.shouldComponentUpdate=function(a,c){var d=this.props,e=this.state;return d.hasFetchedAll!==a.hasFetchedAll||d.isFocused!==a.isFocused||!b("shallowArrayEqual")(d.messages,a.messages)||d.showContextBanner!==a.showContextBanner||d.readReceipts!==a.readReceipts||d.thread!==a.thread||d.threadID!==a.threadID||e.loadingMessages!==c.loadingMessages||e.hideLastMessageIndicator!==c.hideLastMessageIndicator||!b("shallowEqual")(e.searchResults,c.searchResults)||d.jumpToMessage!==a.jumpToMessage};d.componentDidMount=function(){__p&&__p();var a=this,c=(k||(k=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_conversation_scroller",JSON.stringify({messageSize:a.props.messages.length,hasThread:!!a.props.thread}),0,c)},"FantaConversationScroller.react");this.$6=new(b("SubscriptionsHandler"))();this.$10();this.$11();this.$12();b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$13());this.setState({scrollbarPadding:s(this.refs.scrollContainer),searchResults:this.$14()});this.$9=b("throttle")(this.$15,r);this.$7=this.props.messages.filter(function(a){return a.is_sponsored});this.$9();this.$16()};d.componentDidUpdate=function(a){__p&&__p();this.$12();if(this.$2){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(c){var d=this.$2||0;c=c.scrollHeight-d;this.scrollToPosition(c,!1)}this.$2=null}if(!b("shallowArrayEqual")(a.messages,this.props.messages)){b("MessengerVideoAutoplayActions").updateStore(this.props.threadID,this.$13());d=a.messages[a.messages.length-1];c=this.props.messages[this.props.messages.length-1];if(d!==c&&c&&c.author){a=b("MercuryIDs").getUserIDFromParticipantID(c.author);a===b("CurrentUser").getID()&&(this.scrollToBottom(!1),this.$17())}}this.$18();this.$9()};d.componentWillUnmount=function(){this.$1&&b("clearImmediate")(this.$1),this.$6.release(),b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,null)};d.UNSAFE_componentWillReceiveProps=function(a){__p&&__p();var c=this.state.loadingMessages&&a.messages.length>0&&!b("shallowArrayEqual")(a.messages,this.props.messages);if(c||a.hasFetchedAll||a.showContextBanner){this.setState({loadingMessages:!1});c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(c){var d=c.scrollHeight;c=b("Scroll").getTop(c);this.$2=d-c}}this.$7=a.messages.filter(function(a){return a.is_sponsored})};d.$14=function(){return b("MessengerTabsThreadSearchLoader").isLoaded()?b("MessengerTabsThreadSearchLoader").getStoreEnforce().getThreadState(this.props.threadID):null};d.$16=function(){var a=this;b("MercuryConfig").M3CRE&&b("promiseDone")(b("MessengerTabsThreadSearchLoader").load(),function(b){var c=b.store;b.actions;a.$6.addSubscriptions(c.get().addListener("change",function(){return a.setState({searchResults:a.$14(),loadingMessages:!1})}))})};d.$12=function(a){var c=this;a===void 0&&(a=!1);this.$5&&b("TimeSlice").guard(function(){c.scrollToBottom(a)},"post load chat animations",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.renderGroupWave=function(){var a=this.props.thread;return b("MercuryIDs").isLocalThread(this.props.threadID)&&a&&!a.associated_object&&!a.is_canonical&&!a.thread_fbid?b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"}),bootloadLoader:b("JSResource")("ChatWaveImage.react").__setRef("FantaConversationScroller.react"),thread:a}):null};d.maybeRenderNullStateWave=function(){__p&&__p();var a=this.props,c=a.thread;a=a.threadID;if(!c||!c.is_canonical||c.timestamp)return null;b("QE2Logger").logExposureForUser("wave_in_www_null_state");if(!b("MercuryConfig").MNWNS)return null;c=b("MercuryIDs").getParticipantIDFromFromThreadID(a);c=c?b("MessengerParticipants.bs").getNow(c):null;c=c?c.short_name:null;return b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerNewWavePrompt.react").__setRef("FantaConversationScroller.react"),threadID:a,recipientName:c,entrypoint:"canonical_null_state"})};d.$23=function(){__p&&__p();var a=this.props.threadID,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d;try{c=c.getBoundingClientRect(),d=this.refs.conversation?this.refs.conversation.getMessageList():null}catch(a){return}if(!d||!c)return;var e=[],f=b("MessengerVideoAutoplayStore").getMessageIDs(a),g=f||this.$13()||b("immutable").List();g.map(function(a){var c=b("MercuryAttachment").getVideoElem(a,d);c&&e.push([a,c.getBoundingClientRect()])});e.length&&b("MessengerVideoAutoplayActions").onScroll(a,f?null:g,b("immutable").Map(e),c)};d.$13=function(){var a=this.props.messages.filter(function(a){return b("MercuryAttachment").isSingleVideoAttachment(a)||b("MercuryAttachment").isSharedVideoAttachmentMessage(a)}).reverse().map(function(a){return a.message_id});return b("immutable").List(a)};d.$24=function(a,c){__p&&__p();var d=this.refs.conversation?this.refs.conversation.getMessageList():null;if(!d)return;var e=b("ReactDOM").findDOMNode(this.refs.scrollContainer),f=b("ReactDOM").findDOMNode(this.refs.conversation);d=d.getMessageComponent(a);a=b("ReactDOM").findDOMNode(d);if(!a||!f||!e)return;f=f.getBoundingClientRect().top;a=a.getBoundingClientRect().top;a=Math.abs(a-f)-e.getBoundingClientRect().height/2;this.$5=!1;this.scrollToPosition(Math.max(a,0),!1);b("CurrentUser").isWorkUser()&&d.highlightMessage();var g=c;g&&b("setImmediate")(function(){return g()})};d.scrollToBottom=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.scrollToPosition(c.scrollHeight,a)};d.scrollToPosition=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!d)return;this.$4&&this.$4.stop();c?this.$4=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};d.$22=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return!1;a=a===0?0:a||q;return b("Scroll").getTop(c)+c.clientHeight>=c.scrollHeight-a};d.$21=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);return!a?!1:b("Scroll").getTop(a)<a.clientHeight};d.$17=function(){var a=this.$5;this.$22()?this.$5=!0:this.$5=!1;a!==this.$5&&(this.$1=b("setImmediate")(this.$25))};d.$10=function(){__p&&__p();var a=this,c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!c)return;var d=b("isEventSupported")("mousewheel")?"mousewheel":b("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",e=function(){a.$17()},f=function(){c.addEventListener(d,e,{passive:!0})},g=function(){c.removeEventListener(d,e,{passive:!0})};this.$6.addSubscriptions(b("Arbiter").subscribe("overflow-applied-to-body",function(){return a.$12()}),b("Event").listen(c,"mousedown",e),b("Event").listen(c,"mouseup",e),b("Event").listen(c,"mouseenter",f),b("Event").listen(c,"mouseleave",g),{cancel:g},b("Event").listen(c,"scroll",b("throttle")(this.$19,50)));f=b("ScrollBoundaryContain").applyToElem(c);f&&this.$6.addSubscriptions(f)};d.$11=function(){var a=this,c;this.$6.addSubscriptions((c=b("MessengerHotLikePreviewEvents")).addListener(c.START,function(b,c){a.props.threadID===c&&(a.$27(!1),window.clearInterval(a.$3),a.$3=window.setInterval(function(){a.$27(!1)},50))}),c.addListener(c.FINISH_ANIMATION,function(b){window.clearInterval(a.$3)}),c.addListener(c.FINISH_EMOJI_ANIMATION,function(b){window.clearInterval(a.$3)}),c.addListener(c.REMOVE,function(b){a.props.threadID===b&&window.clearInterval(a.$3)}))};d.$28=function(a){a=a&&a.platform_xmd&&JSON.parse(a.platform_xmd);return a&&a.user_input};d.$30=function(a){var c=b("gkx")("964442");if(c){c=this.$28(a);a=b("FantaAppStore").getState().mercury.userInputRequest.isUserInputRequested;c&&!a?b("FantaMessageActions").updateUserInputRequested(!0,c.data.num_results,c.type):!c&&!!a&&b("FantaMessageActions").updateUserInputRequested(!1,n,null)}return};d.$31=function(){return b("CurrentUser").isWorkUser()?m(this.props.messages):this.props.messages.length===0};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.forGameChat,e=c.hasFetchedAll,f=c.isEmptyLocalThread,g=c.messages,h=c.showContextBanner,i=c.thread;c=c.threadID;var k=b("CurrentUser").getID();f=f||e||h;e=this.state.loadingMessages||!i?b("React").jsx("div",{className:"_1xdl",children:b("React").jsx(b("XUISpinner.react"),{background:"light",className:"loading",size:"small"})}):null;e||(this.$29(),this.$29=b("emptyFunction"));h=function(){return a.$12()};var m=this.$31()?b("React").jsx(b("FantaPageGreetingLoader.react"),{thread:i,threadID:c}):null;f=f?b("React").jsx(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").jsx("div",{}),bootloadLoader:b("JSResource")("MessengerContextBannerContainer.react").__setRef("FantaConversationScroller.react"),isContinuation:!1,location:b("MercuryShareAttachmentRenderLocations").CHAT,viewer:k,thread:i,threadID:c}):null;var n=b("React").jsx("div",{className:b("joinClasses")("accessible_elem","_2kwv"),children:j._("Chat Conversation Start")}),o=b("React").jsx("div",{className:b("joinClasses")("accessible_elem","_2kwv"),children:j._("Chat Conversation End")});this.$30(g[g.length-1]);var p=null,q=this.state.searchResults;if(q&&q.messages){var r=j._("Load more...");p=b("React").jsxs(b("React").Fragment,{children:[q.upExhausted?null:b("React").jsx("div",{className:"_7fim",children:b("React").jsx(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP,a.props.threadID)},type:"primary",use:"default"})}),b("React").jsx(b("FantaConversation.react"),{forGameChat:d,onAttachmentLoad:h,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation",messages:q.messages,onLoadMoreMessages:b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext,hasFetchedAll:this.props.hasFetchedAll,isFocused:this.props.isFocused,onFocus:this.props.onFocus,readReceipts:this.props.readReceipts,showContextBanner:this.props.showContextBanner,thread:this.props.thread,threadID:this.props.threadID}),q.downExhausted?null:b("React").jsx("div",{className:"_7fim",children:b("React").jsx(b("XUIButton.react"),{className:"_41jf",label:r,onClick:function(){return b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().getMoreSearchContext(b("WebMessengerConstants").MORE_SEARCH_CONTEXT_DOWN,a.props.threadID)},type:"primary",use:"default"})}),b("React").jsx(l,{threadID:c,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return a.setState({hideLastMessageIndicator:!0},function(){a.$12(!0)})},indicatorsDidHide:function(){return a.setState({hideLastMessageIndicator:!1})},rootClassName:void 0,viewer:k})]})}else{p=(q=b("React")).jsxs(q.Fragment,{children:[q.jsx(b("FantaConversation.react"),babelHelpers["extends"]({forGameChat:d,onAttachmentLoad:h,scrollbarPadding:this.state.scrollbarPadding,ref:"conversation"},this.props)),q.jsx(b("MercuryQuickReply.react"),{lastMessage:g.length>0?g[g.length-1]:void 0,threadID:c,quickReplyDidShow:function(){return a.$12(!0)},viewer:k,quickCamOriginLocation:b("MessengerQuickCamOrigins").CHAT_TAB}),b("React").jsx(l,{threadID:c,indicatorClass:void 0,indicatorsWillShow:b("emptyFunction"),indicatorsDidShow:function(){return a.setState({hideLastMessageIndicator:!0},function(){a.$12(!0)})},indicatorsDidHide:function(){return a.setState({hideLastMessageIndicator:!1})},rootClassName:void 0,viewer:k}),this.renderGroupWave(),this.maybeRenderNullStateWave(),b("React").jsx(b("MercuryLastMessageIndicator.react"),{isTyping:this.state.hideLastMessageIndicator,indicatorDidShow:function(){a.$12(!0)},indicatorWillShow:b("emptyFunction"),lastMessage:g.length>0?g[g.length-1]:null,readReceipts:this.props.readReceipts,thread:i,threadID:c})]})}return b("React").jsxs(b("FantaThread.react"),{onClick:this.$32,spacerContent:b("React").jsxs(b("React").Fragment,{children:[n,f,m,e]}),scrollRef:function(b){a.refs.scrollContainer=b},children:[p,o,this.$33()]})};d.$33=function(){var a=this;return this.state.searchResults&&this.state.searchResults.messages?b("React").jsx(b("Link.react"),{className:"_2llh",onClick:function(){b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(a.props.threadID,null),a.$5=!0},children:b("React").jsx(b("Image.react"),{className:"_2llt",src:g("415098")})}):null};d.$18=function(){var a=this,c=this.props.jumpToMessage;if(!c)return;this.props.messages.some(function(a){return a.message_id===c})||this.state.searchResults&&this.state.searchResults.messages&&this.state.searchResults.messages.some(function(a){return a.message_id===c})?this.$24(c,function(){return b("FantaTabActions").wipeJumpToMessage(a.props.threadID)}):b("MessengerTabsThreadSearchLoader").isLoaded()&&b("MessengerTabsThreadSearchLoader").getActionsEnforce().updateThreadState(this.props.threadID,c)};d.$20=function(){var a=b("ReactDOM").findDOMNode(this.refs.scrollContainer);if(!a)return;var c=b("getElementPosition")(a);b("Arbiter").inform("chatScrolled/"+this.props.threadID,{scrollTop:b("Scroll").getTop(a),top:c.y,viewHeight:c.height})};d.$27=function(a){var c=b("ReactDOM").findDOMNode(this.refs.scrollContainer);c&&this.$34(c.scrollHeight,a)};d.$34=function(a,c){var d=b("ReactDOM").findDOMNode(this.refs.scrollContainer);this.$4&&this.$4.stop();if(!d)return;c===!0?this.$4=new(b("Animation"))(d).to("scrollTop",a).ease(b("Animation").ease.end).duration(400).go():b("Scroll").setTop(d,a)};return c}(b("React").Component);a.propTypes={forGameChat:(c=b("prop-types")).bool.isRequired,hasFetchedAll:c.bool.isRequired,isEmptyLocalThread:c.bool.isRequired,isFocused:c.bool.isRequired,onFocus:c.func,onLoadMoreMessages:c.func.isRequired,showContextBanner:c.bool,thread:c.object,threadID:c.string.isRequired,jumpToMessage:c.string};e.exports=a}),null);
__d("FantaCookieUtil",["CurrentUser","FantaConst","MercuryIDs","MessengerState.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={convertCookieData:function(a,c,d){__p&&__p();var e={tabs:[],focusedTabID:null,updatedTime:0,interstitialData:d};d=[];var f=this._getCookieKeys();a=a||{};a[f.tabs]&&(d=a[f.tabs]);d.forEach(function(a){var d=!b("CurrentUser").isWorkUser()&&!c?!0:!a.r;e.tabs.push({id:a.i,isMinimized:d,openCounter:a.o,focusCounter:a.f})});if(c)for(var d=c.tabs.values(),g=Array.isArray(d),h=0,d=g?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=d.length)break;i=d[h++]}else{h=d.next();if(h.done)break;i=h.value}i=i;b("MessengerState.bs").isEmptyLocalThread(b("CurrentUser").getID(),i.id)&&e.tabs.push({id:i.id,isMinimized:i.isMinimized,openCounter:i.openCounter,focusCounter:i.focusCounter})}e.focusedTabID=a[f.focusedTabID];e.updatedTime=a[f.updatedTime];return e},createCookieData:function(a,c){__p&&__p();var d=[],e=this._getCookieKeys();if(c[e.updatedTime]>a.updatedTime)return c;for(var f=a.tabs.values(),g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;!b("MercuryIDs").isLocalThread(i.id)&&!this._shouldDisableForCookie(i.id,i.entryPoint)&&d.push({i:i.id,r:i.isMinimized?void 0:1,o:i.openCounter,f:i.focusCounter})}c[e.tabs]=d;c[e.focusedTabID]=a.focusedTabID;c[e.updatedTime]=a.updatedTime;return c},_shouldDisableForCookie:function(a,c){if(!c.includes("fb_page:user_message_prompt"))return!1;c=b("MessengerState.bs").getThreadMessagesRangeNow(b("CurrentUser").getID(),a,0,1)[0];return c===void 0},_getCookieKeys:function(){var a=b("CurrentUser").isWorkUser();return{tabs:a?b("FantaConst").cookieIDs.WORK_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,focusedTabID:a?b("FantaConst").cookieIDs.WORK_FOCUS_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_FOCUS_COOKIE_ID,updatedTime:a?b("FantaConst").cookieIDs.WORK_TIME_COOKIE_ID:b("FantaConst").cookieIDs.PERSONAL_TIME_COOKIE_ID}}};e.exports=a}),null);
__d("FantaDragAndDrop.react",["Bootloader","JSResource","MercuryShareAttachmentRenderLocations","MessengerEnvironment","React","prop-types","emptyFunction","ifRequired","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=144,h=b("lazyLoadComponent")(b("JSResource")("MercurySharePreview.react").__setRef("FantaDragAndDrop.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(a){var b=c.props.composer;c.$4(function(c){c.removeSharePreview(a,b)})},c.$2=function(a,b){var d=c.props.composer;c.$4(function(c){c.loadedShareData(a,b,d)})},c.$3=function(a){var b=c.props.composer;c.$4(function(c){c.loadingShareData(a,b)})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("MessengerEnvironment").messengerui?b("Bootloader").loadModules(["MessengerActions"],b("emptyFunction"),"FantaDragAndDrop.react"):b("Bootloader").loadModules(["FantaMessageActions"],b("emptyFunction"),"FantaDragAndDrop.react")};d.shouldComponentUpdate=function(a){var b=this.props,c=b.composer,d=a.composer;c=c.sharePreview;d=d.sharePreview;return b.threadID!==a.threadID||!!(!c&&d)||!!(c&&d&&!c.equals(d))};d.render=function(){var a=this.props,c=a.composer;a=a.threadID;c=c.sharePreview;var d=c.share;c=c.uri;return b("React").jsx("div",{className:"fbNubFlyoutAttachments",children:b("React").jsx("div",{className:"chatAttachmentShelf",children:d||c?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(h,{onClose:this.$1,onLoaded:this.$2,onLoading:this.$3,threadID:a,imageSize:{width:g,height:g},location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW,share:d,uri:c})}):null})})};d.$4=function(a){b("MessengerEnvironment").messengerui?b("ifRequired")("MessengerActions",function(b){a(b)},function(){b("Bootloader").loadModules(["MessengerActions"],function(b){a(b)},"FantaDragAndDrop.react")}):b("ifRequired")("FantaMessageActions",function(b){a(b)},function(){b("Bootloader").loadModules(["FantaMessageActions"],function(b){a(b)},"FantaDragAndDrop.react")})};return c}(b("React").Component);a.propTypes={composer:b("prop-types").object.isRequired,threadID:b("prop-types").string.isRequired};e.exports=a}),null);
__d("FantaMercuryTabOverflowBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("JSResource")("FantaM4TabOverflow.react").__setRef("FantaMercuryTabOverflowBootloader.react");return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{items:this.props.items,tabContents:this.props.tabContents}),loader:a,placeholder:b("React").jsx("div",{})})};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTab.react",["cx","CurrentUser","EventProfiler","FantaTabActions","JSResource","LoadingDialog.react","MercuryIgnoredBlockedParticipants.bs","MessengerState.bs","React","lazyLoadComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("ChatGroupBlockedEntranceWarning.react").__setRef("FantaTab.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){b("EventProfiler").informManualInteractionTimestamp(["MessageJewelListItem","ChatSideBarLink"],!0,"click")};d.render=function(){__p&&__p();var a=this.props,c=a.isFocused,d=a.isLastTab,e=a.isLastTabOfType,f=a.MainComponent,g=a.messengerState,i=a.MinimizedComponent,j=a.nonMinimizedRaisedTabCount,k=a.tab,l=a.tabContent,m=a.messages,n=a.forGameChat;a=a.hasFetchedAll;i=k.isMinimized?i:f;f=k.id+(k.isMinimized?"-minimized":"-maximized");var o=this.$1&&!k.isMinimized;this.$1=k.isMinimized;var p=l==null?void 0:l.participants;return b("React").jsxs("div",{className:"_5qi9 _5qib"+(this.props.isFocused?" _5qic":"")+(k.isMinimized?" _3001":""),children:[b("React").jsx(i,{isFocused:c,isHovered:k.isHovered||o,isLastTab:d,isLastTabOfType:e,messengerState:g,nonMinimizedRaisedTabCount:j,tab:k,tabContent:l,messages:m,forGameChat:n,hasFetchedAll:a},f),k.showWarningForThreadWithBlockees&&l!=null&&p!=null?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("LoadingDialog.react"),{}),children:b("React").jsx(h,{allParticipants:Array.from(p.values()),isShown:!0,blockees:b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(b("CurrentUser").getID(),b("MessengerState.bs").blockedIds(g),l.thread).map(function(a){return p.get(a)}).filter(function(a){return a!=null}),onHide:function(){return b("FantaTabActions").closeGroupEntranceWarningDialog(k.id)},threadID:k.id})}):null]})};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTabGroup.react",["cx","CurrentUser","FantaTab.react","MessengerState.bs","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){return!this.props.tabGroup.equals(a.tabGroup)||this.props.messengerState!==a.messengerState||!!(!this.props.tabContents&&a.tabContents)||!!(this.props.tabContents&&a.tabContents&&!this.props.tabContents.equals(a.tabContents))};d.render=function(){__p&&__p();var a=this.props,c=a.isLastOfTypeChecker,d=a.MainComponent,e=a.messengerState,f=a.MinimizedComponent,g=a.OverflowComponent,h=a.tabContents;a=a.tabGroup;var i=a.focusedTabID,j=a.getRaisedandUnraisedTabs(),k=j.raisedTabs;j=j.unraisedTabs;var l;c&&(l=k.findLastKey(function(a){return c(a)&&a.id}));a=a.allowedRaisedTabs===0?null:this.$1(j,g);var m=k.filter(function(a){return!a.isMinimized}).count();return b("React").jsxs("div",{className:"_59v1",children:[a,k.map(function(a){var c=h&&h.get(a.id),g=c&&c.threadPreviewID||a.id;return b("React").jsx(b("FantaTab.react"),{forGameChat:!1,isFocused:a.id===i,isLastTab:a===k.last(),isLastTabOfType:a.id===l,messengerState:e,MainComponent:d,MinimizedComponent:f,nonMinimizedRaisedTabCount:m,tab:a,tabContent:c,messages:b("MessengerState.bs").getCurrentlyLoadedMessages(b("CurrentUser").getID(),g),hasFetchedAll:b("MessengerState.bs").hasLoadedAllMessages(b("CurrentUser").getID(),g)},a.id)}).toArray()]})};d.$1=function(a,c){return!a.isEmpty()?b("React").jsx("div",{className:"_1kws",children:b("React").jsx(c,{items:a,tabContents:this.props.tabContents})}):null};return c}(b("React").Component);a.propTypes={MainComponent:(c=b("prop-types")).func.isRequired,messengerState:c.array,MinimizedComponent:c.func.isRequired,OverflowComponent:c.func.isRequired,tabContents:c.object,tabGroup:c.object.isRequired};e.exports=a}),null);
__d("FantaPendingActions.react",["Bootloader","BootloadOnRender.react","FantaTabActions","JSResource","LazyComponent.react","MercuryThreadActions","MessengerMessageRequestsTypedLogger","MessageRequestUtils","MessagingTag","React","MercuryIDs","CurrentUser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadActions").get();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$3=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()},d.$4=function(a){var c=d.props.thread;c=!!c&&b("MessageRequestUtils").isFiltered(c);var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);a==="hide"&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?"other":"pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},d.$1=function(){__p&&__p();var a=d.props,c=a.thread,e=a.threadID;a=!!c&&b("MessageRequestUtils").isFiltered(c);var f=b("CurrentUser").getID();f=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,f);if(a)b("Bootloader").loadModules(["WebMessengerDeleteThreadDialog"],function(a){a.show(e,d.$3,d.$4,function(){return b("FantaTabActions").closeTab(e)})},"FantaPendingActions.react");else{var g=b("MercuryIDs").isGroupChat(e);b("Bootloader").loadModules(["WebMessengerDeclineMRDialog"],function(a){a.show(c.folder,e,function(){return b("FantaTabActions").closeTab(e)},g)},"FantaPendingActions.react")}new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(f).setEntryPoint(null).log()},d.$2=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);g.changeFolder(d.props.threadID,b("MessagingTag").INBOX);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint(null).log()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);return b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("ChatPendingActions.react").__setRef("FantaPendingActions.react"),placeholder:b("React").jsx("div",{style:{height:27}}),component:b("React").jsx(b("LazyComponent.react"),{isFiltered:a,onDeleteClick:this.$1,onReplyClick:this.$2})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("FantaTabComposer.react",["ChatTabComposerContainer.react","MessengerState.bs","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=function(a){c.$1=a},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this.props.participants;this.props.isFocused&&a.length>0&&!this.props.isEmptyLocalThread&&this.focusInput()};d.componentDidUpdate=function(a){this.props.isFocused&&this.props.isFocused!==a.isFocused&&!this.props.isEmptyLocalThread&&this.focusInput()};d.shouldComponentUpdate=function(a){var b=this.props;return!b.composer.equals(a.composer)||b.disableInput!==a.disableInput||!b.fileUploader&&!!a.fileUploader||b.fileUploader&&!b.fileUploader.equals(a.fileUploader)||b.isEmptyLocalThread!==a.isEmptyLocalThread||b.isFocused!==a.isFocused||b.isNewEmptyLocalThread!==a.isNewEmptyLocalThread||b.threadID!==a.threadID||b.viewer!==a.viewer||b.forGameChat!==a.forGameChat||b.participants.length!==a.participants.length};d.render=function(){var a=this,c=this.props,d=c.participants,e=c.threadID,f=c.viewer,g=c.isFocused;return d.length===0?b("React").jsx("div",{}):b("React").jsx(b("MessengerState.bs").jsComponent,{fbid:f,children:function(c){return b("React").jsx(b("ChatTabComposerContainer.react"),{blockedIDs:a.props.blockedIDs,composer:a.props.composer,disableInput:a.props.disableInput,fileUploader:a.props.fileUploader,isFocused:g,onEscape:a.props.onEscape,onSelectSticker:a.props.onSelectSticker,onSendHotLike:a.props.onSendHotLike,onSendPhoto:a.props.onSendPhoto,onTab:a.props.onTab,onSendMessage:a.props.onSendMessage,isNewEmptyLocalThread:a.props.isNewEmptyLocalThread,ref:a.$2,thread:b("MessengerState.bs").threads(c)[e],threadID:e,viewer:f,forGameChat:a.props.forGameChat})}})};d.focusInput=function(){this.$1&&this.$1.focusInput()};d.hasEmptyInput=function(){var a=this.$1;return!a?!1:a.hasEmptyInput()};return c}(b("React").Component);e.exports=a}),null);
__d("FantaTabSheetPlaceholder.react",["cx","React","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").jsx("div",{className:"_w_z",children:b("React").jsx(b("XUISpinner.react"),{})})};e.exports=a}),null);
__d("FantaTabSheet.react",["cx","BootloadedComponent.react","FantaTabSheetPlaceholder.react","JSResource","LazyComponent.react","MercuryIDs","MercurySheetPolicy","MessengerParticipants.bs","React","ReasonBootloadOnRender.react","ReasonResource","emptyFunction","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("lazyLoadComponent")(b("JSResource")("ChatGroupsSyncTabSheet.react").__setRef("FantaTabSheet.react")),i=b("lazyLoadComponent")(b("JSResource")("ChatGroupNameComposerTabSheet.react").__setRef("FantaTabSheet.react")),j=b("lazyLoadComponent")(b("JSResource")("ChatIntegrityLandingScreenSheet.react").__setRef("FantaTabSheet.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.threadID!==a.threadID||!b.tabContent.equals(a.tabContent)};d.maybeRenderMontage=function(){var a=this.props,c=a.threadID;a=a.tabContent;return a.isMontageOpen?b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatMontageSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c,onResize:b("emptyFunction")},"Montage"):null};d.render=function(){__p&&__p();var a=this.props,c=a.threadID,d=a.tabContent,e=a.composerComponent,f=a.pageUser;a=a.isGroupChat;var g=d.loggingID,k=d.openSheet,l=d.privacyController,m=d.thread,n=d.typeahead,o,p;switch(k){case b("MercurySheetPolicy").sheets.ChatThreadIsMutedTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetChatThreadIsMuted.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatNameConversationTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetNameConversation.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),thread:m,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatUserBlockedTabSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){var q=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));q&&l&&(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserBlockedTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),gender:q.gender,privacyActionController:l,shortName:q.short_name},k))}break;case b("MercurySheetPolicy").sheets.ChatOfflineTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetOffline.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),privacyController:l,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatReadOnlyTabSheet:case b("MercurySheetPolicy").sheets.ChatReadOnlyPermanentTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetReadOnly.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.FantaAddFriendsSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),loggingID:g,thread:m,threadID:c,typeahead:n,composerComponent:e,tabContent:d},k);break;case b("MercurySheetPolicy").sheets.FantaAddMoreFriendsSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetAddMoreFriends.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx(b("FantaTabSheetPlaceholder.react"),{}),loggingID:g,thread:m,threadID:c,typeahead:n},k);break;case b("MercurySheetPolicy").sheets.ChatThreadIsMessageBlockedSheet:p=b("MercuryIDs").getUserIDFromThreadID(c);if(p){q=b("MercuryIDs").getParticipantIDFromUserID(p);l=b("MessengerParticipants.bs").getNow(q);l&&(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaTabSheetMessageBlocked.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),isGroupChat:a,pageUser:f,participants:d.participants,shortName:l.short_name,threadID:c},k))}break;case b("MercurySheetPolicy").sheets.ChatUserFocusSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),thread:m,threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatUserFocusBypassSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUserFocusBypassSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatUploadWarningTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatUploadWarningTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatNoRecipientsTabSheet:b("MercuryIDs").isCanonical(c)||(o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatNoRecipientsTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k));break;case b("MercurySheetPolicy").sheets.ChatNewMessagesTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaNewMessagesTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatEmployeeAwaySheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatEmployeeAwaySheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{})},k);break;case b("MercurySheetPolicy").sheets.ChatEventReminderTabSheet:o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("FantaEventReminderTabSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),threadID:c},k);break;case b("MercurySheetPolicy").sheets.ChatJoinCallSheet:if(m){g=m.rtc_call_data;n=m.thread_fbid;o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatJoinCallSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),rtcCallData:g,threadFBID:n},k)}break;case b("MercurySheetPolicy").sheets.ChatRoomAssociatedObjectSheet:if(m){p=m.associated_object;o=b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ChatRoomAssociatedObjectSheet.react").__setRef("FantaTabSheet.react"),bootloadPlaceholder:b("React").jsx("div",{}),associatedObject:p},k)}break;case b("MercurySheetPolicy").sheets.ChatMentorshipProgramSheet:m&&(o=b("React").jsx(b("ReasonBootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{thread:m}),loader:b("ReasonResource")(b("JSResource")("MentorshipProgramSheet.bs").__setRef("FantaTabSheet.react")),placeholder:b("React").jsx("div",{})}));break;case b("MercurySheetPolicy").sheets.ChatGroupsSyncTabSheet:if(m&&m.work_associated_group){o=(q=b("React")).jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(h,{group:m.work_associated_group,imageURL:m.image_src,name:m.name})},k)}break;case b("MercurySheetPolicy").sheets.ChatGroupNameComposerTabSheet:o=b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(i,{threadID:c,composerComponent:e})},k);break;case b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet:if(f){o=(q=b("React")).jsx(q.Suspense,{fallback:q.jsx("div",{}),children:q.jsx(j,{pageUser:f,threadID:c})},k)}break}a=this.maybeRenderMontage();if(o)return b("React").jsx("div",{className:"_1sk5",children:b("React").jsx("div",{className:"_1sk6",children:o})});else if(a)return a;return null};return c}(b("React").Component);a.propTypes={threadID:b("prop-types").string.isRequired,tabContent:b("prop-types").object.isRequired};e.exports=a}),null);
__d("FantaTabMain.react",["cx","fbt","invariant","Bootloader","ChatConfig","CoworkerThreadContextBanner.react","CurrentUser","DragDropTarget","FantaChatHeaderContainer.react","FantaConversationScroller.react","FantaDispatcher","FantaDragAndDrop.react","FantaMessageActions","FantaPendingActions.react","FantaTabActions","FantaTabComposer.react","FantaTabSheet.react","FBIDCheck","JSResource","Keys","MercuryIDs","MercurySheetPolicy","MessageRequestUtils","MessagingTagConstants","MessengerBotMenuDataFetcher","MessengerColors","MessengerCustomColorUtils.bs","MessengerParticipants.bs","MessengerParticipantUtils.bs","MessengerPresenceProvider.bs","MessengerState.bs","MNCommercePageSetting","Parent","React","ReactDOM","ShortProfiles","SimpleXUIDialog","TrackingNodes","WorkBotLandingPageHelper","WorkChatAvailabilityStatusLoader","WorkFileUploadsGating","XUISpinner.react","clearTimeout","convertMIGColorToFIGColor","getPageIDFromThreadID","immutable","joinClasses","lazyLoadComponent","performanceAbsoluteNow","promiseDone","prop-types","setTimeout","throttle"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("MessengerPresenceProvider.bs").jsComponent,l=b("WorkBotLandingPageHelper").shouldShowBotLandingPageArray,m=(a=b("lazyLoadComponent"))((c=b("JSResource"))("MarketplaceMessengerContextBanner.react").__setRef("FantaTabMain.react")),n=a(c("ChatJoinableInterstitialPreview.react").__setRef("FantaTabMain.react")),o=a(c("P2PChatThreadBannerContainer.react").__setRef("FantaTabMain.react")),p=a(c("MessengerGameBotPlayButton.react").__setRef("FantaTabMain.react")),q=a(c("FantaPageComposerNullState.react").__setRef("FantaTabMain.react")),r=function(a){a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);return a&&b("CurrentUser").isWorkUser()&&b("WorkChatAvailabilityStatusLoader").isLoaded()?b("WorkChatAvailabilityStatusLoader").getStoreEnforce().getIsDoNotDisturb(a):!1};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$9=null,d.state={closing:!1,disableInput:!1,isDoNotDisturb:r(d.props)},d.$23=function(a){__p&&__p();var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);if(!c||!a){if(d.$8){b("clearTimeout")(d.$8);d.$8=null;return}b("FantaTabActions").hoveredTab(d.props.tab.id)}},d.$24=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id);a=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!a)&&(d.$8&&b("clearTimeout")(d.$8),d.$8=b("setTimeout")(function(){d.$8=null,b("FantaTabActions").unhoveredTab(d.props.tab.id)},500))},d.$22=function(a){var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);(!c||!e)&&(!a.relatedTarget||!a.target?d.$6=b("setTimeout")(function(){d.$6=null,d.$25(d.props.tab.id)},100):d.$25(d.props.tab.id))},d.$21=function(a){if(d.$6){b("clearTimeout")(d.$6);d.$6=null;return}var c=!!b("Parent").byClass(a.target,"fantaTabMain-"+d.props.tab.id),e=!!b("Parent").byClass(a.relatedTarget,"fantaTabMain-"+d.props.tab.id);a=a.target;a&&a.classList&&(a.classList.contains("_3olu")||a.classList.contains("_61td")||a.classList.contains("_7jbw")||a.classList.contains("_4zs3"))||(!c||!e)&&(b("FantaDispatcher").isDispatching()||b("FantaTabActions").focusTab(d.props.tab.id))},d.$27=function(a){b("FantaMessageActions").linkPreview(d.props.tab.id,a)},d.$26=function(a){var c=d.props.tabContent;c=c||{};c=c.composer;var e=d.props.tab.id;c&&b("FantaMessageActions").prepareFilesForSend(e,a,c)},d.$17=function(a){a.keyCode===b("Keys").ESC&&(d.$1(!0),a.preventDefault(),a.stopPropagation())},d.$18=function(a){a.keyCode===b("Keys").TAB&&d.$19(a)},d.$19=function(a){var b=d.props.nonMinimizedRaisedTabCount;b>1&&(a.preventDefault(),d.$2(a.ctrlKey,a.shiftKey))},d.$1=function(a){var c=d.props,e=c.tab;c=c.tabContent;!c||c&&c.composer.text.length===0&&!d.$28()?(d.$29(),a?b("FantaTabActions").closeAndTabNext(e.id):b("FantaTabActions").closeTab(e.id)):d.$30();d.$31()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=b("throttle")(this.$1,100),this.$2=b("throttle")(this.$2,100)};d.componentDidMount=function(){var a=this,c=(j||(j=b("performanceAbsoluteNow")))();b("Bootloader").loadModules(["QuickPerformanceLogger","MessengerWebQuickLogModule"],function(b,d){b.markerPoint(d.FIRSTCHATTABOPEN_WWW,"mount_fanta_main",JSON.stringify({messageSize:a.props.messages?a.props.messages.length:0,hasThread:!!a.props.thread}),0,c)},"FantaTabMain.react");this.$10();this.$11();this.$12(this.props.tab.id);this.$13();this.$14();this.$15()};d.componentDidUpdate=function(a){this.$11();if(b("CurrentUser").isWorkUser()&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&a.thread!==this.props.thread){var c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a=b("MercuryIDs").getUserIDFromThreadID(a.tab.id);var d=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();a&&d.unsubscribeUser(a,this);c&&(d.subscribeUser(c,this),d.fetchUsers([c]))}};d.componentWillUnmount=function(){this.$3&&this.$3.disable();this.$9&&this.$9.remove();var a=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);a&&b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("WorkChatAvailabilityStatusLoader").getStoreEnforce().unsubscribeUser(a,this)};d.shouldComponentUpdate=function(a,b){var c=this.props,d=this.state;return c.hasFetchedAll!==a.hasFetchedAll||c.isFocused!==a.isFocused||c.isHovered!==a.isHovered||c.isLastGroupTab!==a.isLastGroupTab||!c.tab.equals(a.tab)||!c.tabContent&&!!a.tabContent||c.tabContent&&!c.tabContent.equals(a.tabContent)||c.thread!==a.thread||c.fbid!==a.fbid||c.blockedIDs!==a.blockedIDs||c.readReceipts!==a.readReceipts||c.ignoredIds!==a.ignoredIds||d.closing!==b.closing||d.disableInput!==b.disableInput||d.isDoNotDisturb!==b.isDoNotDisturb||c.messages&&a.messages&&(c.messages.length!==a.messages.length||!c.messages.every(function(b,c){return b===a.messages[c]}))};d.$11=function(){return};d.$16=function(){var a=this.props.tabContent&&this.props.tabContent.nullStateCTA;if(!a)return!1;if(this.props.thread&&this.props.thread.message_count===0)return!0;return b("CurrentUser").isWorkUser()?l(this.props.messages):!1};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.blockedIDs,e=c.forGameChat,f=c.hasFetchedAll,g=c.isFocused,j=c.isHovered,l=c.isLastGroupTab,r=c.messages,s=c.onLoadMoreMessages,t=c.onSelectSticker,u=c.onSendHotLike,v=c.onSendMessage,w=c.onSendPhoto,x=c.readReceipts,y=c.showContextBanner,z=c.tab,A=c.tabContent,B=c.thread,C=z.id,D=b("CurrentUser").getID();c=A&&A.composer.fileUploader;z=B&&b("convertMIGColorToFIGColor")(B.header_color);var E=A&&A.nullStateCTA,F=this.$16(),G=B&&B.participants||[],H=A&&A.threadPreviewRecipients||b("immutable").List();G=G.length>0?G:H.toArray();H=(H=this.props)!=null?(H=H.thread)!=null?H.other_user_fbid:H:H;H=H?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(H)):null;var I=b("getPageIDFromThreadID")(this.props.tab.id),J=b("MessengerState.bs").isEmptyLocalThread(D,C),K=b("MessengerState.bs").isNewEmptyLocalThread(D,C);F=B&&b("MessageRequestUtils").shouldShowComposerPendingActions(B)?b("React").jsx(b("FantaPendingActions.react"),{thread:B,threadID:C}):F&&E?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{className:"_2xh0",children:b("React").jsx("div",{className:"_2xh4 _59w_",children:b("React").jsx(b("XUISpinner.react"),{size:"small"})})}),children:b("React").jsx(q,{threadID:C,nullStateCTA:E,pageName:H&&H.short_name})}):A?b("React").jsx("div",{className:"fbNubFlyoutFooter"+(this.state.disableInput?" fbNubFlyoutComposerDisabled":""),"data-testid":void 0,children:b("React").jsx(b("FantaTabComposer.react"),{blockedIDs:d,composer:A.composer,disableInput:this.state.disableInput,fileUploader:c,forGameChat:e,isEmptyLocalThread:J,isFocused:g,isNewEmptyLocalThread:K,onEscape:this.$17,onKeyDown:this.$17,onKeyPress:this.$18,onSelectSticker:t,onSendHotLike:u,onSendMessage:v,onSendPhoto:w,onTab:this.$19,participants:G,ref:"composer",threadID:C,viewer:D})}):null;var L;E=b("MercuryIDs").getUserIDFromThreadID(C);E&&(L=b("ShortProfiles").getNow(E));var M=L&&L.is_messenger_only;!A&&i(0,6156);H=this.$20();c=!1;if(C){c=A.isNewMessageTab?((B==null?void 0:(K=B.participants)==null?void 0:K.length)||0)>2:b("MercuryIDs").isGroupChat(C)}var N;t=b("React").jsx(b("FantaTabSheet.react"),{tabContent:A,threadID:C,composerComponent:this.refs.composer,pageUser:H,isGroupChat:c});H&&A.openSheet===b("MercurySheetPolicy").sheets.ChatIntegrityLandingScreenSheet&&(N=b("React").jsxs("div",{className:"fbNubFlyoutFooter",children:[t,F]}));v=(u=B)!=null?u.marketplace_thread_data:u;G=(w=v)!=null?w.for_sale_item:w;c=(K=v)!=null?K.buyer_fbid:K;u=(H=v)!=null?H.seller_fbid:H;var O;if(G&&c&&u){O=(w=b("React")).jsx(w.Suspense,{fallback:w.jsx("div",{}),children:w.jsx(m,{buyerID:c,forSaleItem:G,renderLocation:"chat",sellerID:u,threadFBID:(K=this.props)!=null?(K=K.thread)!=null?K.thread_fbid:K:K})})}H=(v=B)!=null?v.group_thread_subtype:v;var P;H===13&&(P=b("React").jsx(b("CoworkerThreadContextBanner.react"),{}));w=B&&b("ChatConfig").getBool("chat_tab_has_gradients")?b("MessengerColors").makeLinearGradient(B.gradient_colors,B.solid_color,b("MessengerCustomColorUtils.bs").defaultColor()):void 0;c=A&&A.isMultiCompany;G=!!A&&!!A.openSheet;var Q=A&&A.joinableInterstitialData?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(n,{data:A.joinableInterstitialData,isActive:g,onClose:this.$1})}):b("React").jsxs("div",{className:(G?"_6vu4":"")+" _6vu5 _6z9d fbNubFlyoutInner _6vu1",children:[b("React").jsx(b("FantaChatHeaderContainer.react"),{blockedIDs:d,composer:A.composer,customColor:z,highlightNewMessage:A&&A.highlightNewMessage,isDoNotDisturb:this.state.isDoNotDisturb,isFocused:g,isLastGroupTab:l,isMultiCompany:c,isNewMessageTab:A&&A.isNewMessageTab,membershipParticipants:A.membershipParticipants,onClose:this.$1,pageIndicatorDescription:A.pageIndicatorDescription,participants:A.participants,thread:B,threadHref:A&&A.threadHref,threadID:C,uri:A.uri,viewer:D,focusOnClick:this.$21}),b("React").jsxs("div",{className:"_1ia _2sz2",ref:function(b){a.$4=b},style:w,children:[N?b("React").jsx("div",{}):t,b("React").jsx(b("FantaConversationScroller.react"),{forGameChat:e,hasFetchedAll:f,isFocused:g,isEmptyLocalThread:J,messages:r,onFocus:function(){return a.refs.composer&&a.refs.composer.focusInput()},onLoadMoreMessages:s,readReceipts:x,showContextBanner:y,thread:B,threadID:C,viewer:D,jumpToMessage:A.jumpToMessage}),b("React").jsx("div",{className:"_2hc2",children:b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:E?b("React").jsx(o,{isVisible:!0,otherUserID:E,threadID:C}):b("React").jsx(o,{isVisible:!0,threadID:C})})}),b("React").jsx("div",{className:"_4g6x",children:b("React").jsxs("div",{className:"_4g6y",children:[b("React").jsx("div",{className:"_4g6z _4g71",children:h._("Drag Link\/Files Here")}),b("React").jsx("div",{className:"_4g6z _4g6- _4g6_",children:h._("Drop Files Here")}),b("React").jsx("div",{className:"_4g6z _4g6- _4g70",children:h._("Drop Link Here")})]})}),N?N:I?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(p,{originalElement:F,pageID:I,playLinkClassName:"_2xh6 _2h_r",showGameImage:!0,threadFBID:(u=this.props)!=null?(u=u.thread)!=null?u.thread_fbid:u:u,threadID:C})}):F,b("React").jsx(b("FantaDragAndDrop.react"),{composer:A.composer,threadID:C}),O,P]})]});return b("React").jsx(k,{subscribeToIDs:[D],children:function(c){return b("React").jsx("div",{className:b("joinClasses")((a.state.closing?"_2suj":"")+" _3_9e _s0f _50mz _50m_"+(B&&!M&&b("MessengerParticipantUtils.bs").findIntersection(D,c,B).length>0&&!a.state.isDoNotDisturb?" _4-0b":"")+(a.state.isDoNotDisturb?" _1oh2":"")+" fbNub _50-v"+(g?" focusedTab":"")+(j?" hoveredTab":"")+" opened _27_3","fantaTabMain-"+C),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.CHAT_FLYOUT),onBlur:a.$22,onFocus:a.$21,onKeyDown:a.$17,onKeyPress:a.$18,onMouseEnter:a.$23,onMouseLeave:a.$24,ref:function(b){return a.$5=b},children:b("React").jsx("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent",role:"complementary",children:b("React").jsx("div",{className:"fbNubFlyoutOuter",children:Q})})})}})};d.$14=function(){var a=this,c=b("MercuryIDs").getUserIDFromThreadID(this.props.tab.id);c&&b("CurrentUser").isWorkUser()&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){var d=b.store;a.$9=d.addListener(function(){a.setState({isDoNotDisturb:d.getIsDoNotDisturb(c)})})})};d.$25=function(a){b("FantaDispatcher").isDispatching()||b("FantaTabActions").blurTab(this.props.tab.id),this.$8&&(b("clearTimeout")(this.$8),this.$8=null),b("setTimeout")(function(){b("FantaTabActions").unhoveredTab(a)})};d.$15=function(){var a=this,c=b("getPageIDFromThreadID")(this.props.tab.id);c&&b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED)};d.$10=function(){__p&&__p();if(b("WorkFileUploadsGating").canUploadFiles&&!this.$3){var a=b("ReactDOM").findDOMNode(this.$4);if(a){a=new(b("DragDropTarget"))(a);this.$3=a;a.setOnFilesDropCallback(this.$26);a.setOnURLDropCallback(this.$27);a.enable()}}};d.$2=function(a,c){a||(c?b("FantaTabActions").focusPreviousTab():b("FantaTabActions").focusNextTab())};d.$29=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMain.react")};d.$28=function(){return this.$32()||this.$33()};d.$32=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$33=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$20=function(){var a=this.props,c=a.tab;a=a.tabContent;a=a==null?void 0:a.participants;a&&(a=a.toList().toArray());var d=b("getPageIDFromThreadID")(c.id);return!d||!a||!((c=a)==null?void 0:c.length)?null:a.find(function(a){return a.fbid===d})};d.$30=function(a){var c=this,d=this.props.tab,e=d.id;b("FantaTabActions").blurTab(e);d=h._("Are you sure you want to close this chat window?");var f=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(d,f,function(d){d?(c.$29(),a?b("FantaTabActions").closeAndTabNext(e):b("FantaTabActions").closeTab(e)):b("FantaTabActions").focusTab(e)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};d.$13=function(){this.$7=Math.floor(Date.now()/1e3)};d.$31=function(){var a=this.props,c=a.thread,d=a.tab,e=c?c.other_user_fbid:null,f=Math.floor(Date.now()/1e3),g=this.$7;c&&e&&!b("FBIDCheck").isUser_deprecated(e)&&b("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum","PagesEventObserver","PagesEventType"],function(a,b,h,i,j){a.log(e,b.CLICK,h.MESSAGE_FANTA_TAB_CLOSE,"",["pages_surface_team"],{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint}),i.notify(j.MESSAGES_FANTA_TAB_CLOSE,e,{open_tab_timestamp:g,close_tab_timestamp:f,last_message_timestamp:c.last_message_timestamp,message_count:c.message_count,snippet_sender:c.snippet_sender,participants:c.participants,entrypoint:d.entryPoint})},"FantaTabMain.react")};d.$12=function(a){__p&&__p();var c=this;if(!b("MercuryIDs").isValidThreadID(a))return;b("Bootloader").loadModules(["GroupChatMessageBlockAlert","GroupChatMessageIgnoreAlert","MercuryIgnoredBlockedParticipants.bs","MercuryThreadActions"],function(d,e,f,g){__p&&__p();var h=g.get();b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),a,function(d){var g=c.props,i=g.fbid,j=g.ignoredIds;b("MessengerState.bs").compute(i,function(c){c=c.blocked_ids;c=f.isPresentInGroupThread(i,c,d);var g=b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(i,j,d)&&d.folder==="inbox";!c&&g&&e.show(b("MessengerParticipantUtils.bs").participantsInGroupThread(i,j,d),b("MercuryIDs").getThreadFBIDFromThreadID(a),function(){b("FantaTabActions").focusTab(a)},function(){b("FantaTabActions").closeTab(a),b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(c,d,e){h.changeFolder(a,b("MessagingTagConstants").other),new c().setEvent(d.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a)).setPlatform(e.CHAT_TABS).log()},"FantaTabMain.react")})})})},"FantaTabMain.react")};return c}(b("React").Component);d.propTypes={hasFetchedAll:(f=b("prop-types")).bool.isRequired,isFocused:f.bool.isRequired,isHovered:f.bool.isRequired,isLastGroupTab:f.bool.isRequired,onLoadMoreMessages:f.func.isRequired,onSelectSticker:f.func.isRequired,onSendHotLike:f.func.isRequired,onSendMessage:f.func.isRequired,onSendPhoto:f.func.isRequired,nonMinimizedRaisedTabCount:f.number,showContextBanner:f.bool,tab:f.object.isRequired,tabContent:f.object,thread:f.object,forGameChat:f.bool.isRequired};e.exports=d}),null);
__d("FantaTabMainLoader.react",["Bootloader","CurrentUser","FantaAppStore","FantaGetMessageActions","FantaMessageActions","FantaTabMain.react","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerState.bs","React","TimeSlice","emptyFunction","prop-types","requestIdleCallback","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return!!a.preview_attachments[0].preview_url}var h=function(a){__p&&__p();b("FantaAppStore").addReducers(a);a=b("FantaAppStore").getState();a=(a=a)!=null?(a=a.mercury)!=null?a.tabContents:a:a;if(a){var c=a.reduce(function(a,b){b=b.thread;b&&a.push(b);return a},[]);b("setImmediate")(function(){return b("FantaGetMessageActions").threadsUpdated(c)})}h=b("emptyFunction")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.tab;b("MessengerState.bs").fetchMoreMessages(b("CurrentUser").getID(),a.id,0,d.props.messages.length+10,b("emptyFunction"))},d.$2=function(a,c){var e=d.props.tab;b("FantaMessageActions").sendSticker(e.id,a,c)},d.$3=function(a,c,e,f){var g=d.props.tab;b("FantaMessageActions").sendHotLike(g.id,a,c,e,f)},d.$4=function(a,c,e){var f=d.props.tabContent.thread,g=d.props.tab;f&&b("MessageRequestUtils").isMessageRequest(f)&&b("MercuryThreadActions").get().changeFolder(f.thread_id,b("MessagingTag").INBOX);b("FantaMessageActions").sendMessage(g.id,a,c,e)},d.$5=function(a,c){var e=d.props.tab;g(a)?b("FantaMessageActions").sendGif(e.id,a,c):b("FantaMessageActions").sendPhoto(e.id,a,c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return b.isFocused!==a.isFocused||b.isHovered!==a.isHovered||b.isLastTabOfType!==a.isLastTabOfType||b.messengerState!==a.messengerState||!b.tab.equals(a.tab)||!b.tabContent.equals(a.tabContent)};d.componentDidMount=function(){var a=function(){b("Bootloader").loadModules(["FantaReducersTabSheets"],h,"FantaTabMainLoader.react")};b("TimeSlice").guard(function(){b("requestIdleCallback")(a)},"additional request not needed for initial display",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};d.render=function(){var a=this.props,c=a.isFocused,d=a.isHovered,e=a.isLastTabOfType,f=a.messengerState,g=a.nonMinimizedRaisedTabCount,h=a.tab,i=a.tabContent,j=a.forGameChat,k=a.messages;a=a.hasFetchedAll;var l=i.showContextBanner,m=i.thread,n=i.threadPreviewID;n=n?h.id+"-"+n:h.id;return!i?b("React").jsx("div",{},"noContent-"+n):b("React").jsx(b("FantaTabMain.react"),{blockedIDs:b("MessengerState.bs").blockedIds(f),fbid:b("MessengerState.bs").fbid(f),forGameChat:j,hasFetchedAll:a,ignoredIds:b("MessengerState.bs").ignoredIds(f),isFocused:c,isHovered:d,isLastGroupTab:e,messages:k,onLoadMoreMessages:this.$1,onSelectSticker:this.$2,onSendHotLike:this.$3,onSendMessage:this.$4,onSendPhoto:this.$5,nonMinimizedRaisedTabCount:g,readReceipts:b("MessengerState.bs").readReceiptsPerThread(f),showContextBanner:l,tab:h,tabContent:i,thread:m},n)};return c}(b("React").Component);a.propTypes={isFocused:(c=b("prop-types")).bool.isRequired,isHovered:c.bool.isRequired,isLastTabOfType:c.bool.isRequired,messengerState:c.array,nonMinimizedRaisedTabCount:c.number,tab:c.object.isRequired,tabContent:c.object};e.exports=a}),null);
__d("FantaTabMinimized.react",["cx","fbt","Bootloader","CurrentUser","FantaAvailableStatus","FantaM4HeaderMinimized.bs","FantaTabActions","MercuryIDs","React","ShortProfiles","SimpleXUIDialog","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("FantaM4HeaderMinimized.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a=d.props;var c=a.tab;a=a.tabContent;!a||a&&a.composer.text.length===0&&!d.$4()?(d.$5(),b("FantaTabActions").closeTab(c.id)):d.$6()},d.$3=function(a){var c=a.target;c&&c.classList&&!c.classList.contains("button")&&(a.stopPropagation(),b("FantaTabActions").unminimizeTab(d.props.tab.id),b("FantaTabActions").focusTab(d.props.tab.id))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var b=this.props;return!b.tab.equals(a.tab)||!b.tabContent&&!!a.tabContent||!!b.tabContent&&!b.tabContent.equals(a.tabContent)};d.$1=function(){var a=this.props.tabContent,c=a&&a.thread,d=b("CurrentUser").getID(),e=a?b("MercuryIDs").getUserIDFromThreadID(a.id):null;e=e?b("ShortProfiles").getNow(e):null;e=e&&e.is_messenger_only;return b("React").jsx("div",{className:"clearfix titlebar",children:b("React").jsx(i,{highlightNewMessage:a&&a.highlightNewMessage,isNewMessageTab:a&&a.isNewMessageTab,onClose:this.$2,onHeaderToggle:this.$3,isMessengerOnlyUser:e,pageIndicatorDescription:a&&a.pageIndicatorDescription,participants:a&&a.participants,thread:c,viewer:d})})};d.render=function(){var a=this.props,c=a.tab;a=a.tabContent;c=c.id;a=a&&!!a.thread&&b("FantaAvailableStatus").isAvailable(a.thread,c);return b("React").jsx("div",{className:"_4cd8 _50mz _50m_ fbNub _50-v"+(a?" _4-0b":"")+" _27_3",ref:"root",children:this.$1()})};d.$5=function(){var a=this.props.tab.id;b("Bootloader").loadModules(["MessengerShareFilePreviewFunnelLogger"],function(b){return b.endFunnel(a)},"FantaTabMinimized.react")};d.$4=function(){return this.$7()||this.$8()};d.$7=function(){var a,b=this.props.tabContent;a=((a=b)!=null?(a=a.composer)!=null?(a=a.fileUploader)!=null?a.uploadedFiles:a:a:a)||{size:0};b=((b=b)!=null?(b=b.composer)!=null?(b=b.fileUploader)!=null?b.uploadingFiles:b:b:b)||{size:0};return a.size>0||b.size>0};d.$8=function(){var a=this.props.tabContent;a=(a=a)!=null?(a=a.composer)!=null?a.sharePreview:a:a;return!!(a&&a.params&&a.type)};d.$6=function(){var a=this.props.tab,c=h._("Are you sure you want to close this chat window?");b("FantaTabActions").blurTab(a.id);var d=h._("You haven't sent your message.");b("SimpleXUIDialog").showConfirm(c,d,function(c){c?b("FantaTabActions").closeTab(a.id):b("FantaTabActions").focusTab(a.id)},{autofocusConfirm:!0,useReactFocusBehavior:!0})};return c}(b("React").Component);a.propTypes={tab:b("prop-types").object.isRequired,tabContent:b("prop-types").object};e.exports=a}),null);
__d("FantaMercuryTabsWithMain.react",["Bootloader","CurrentUser","FantaAppStore","FantaCookieUtil","FantaMercuryTabOverflowBootloader.react","FantaTabActions","FantaTabGroup.react","FantaTabMainLoader.react","FantaTabMinimized.react","FluxContainer","LazyComponent.react","LoadOnRender.react","MercuryIDs","MessengerState.bs","PresenceState","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerState.bs").jsComponent,h=function(a){b("Bootloader").loadModules(["MessengerReasonDialogContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"FantaMercuryTabsWithMain.react")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("FantaAppStore")]};c.calculateState=function(){return{tabGroup:b("FantaAppStore").getState().tabGroup,tabContents:b("FantaAppStore").getState().mercury.tabContents}};var d=c.prototype;d.componentDidMount=function(){this.props.loadDataOnMount&&b("FantaTabActions").loadFromData(b("FantaCookieUtil").convertCookieData(b("PresenceState").get()))};d.render=function(){var a=this;return b("React").jsx(g,{fbid:b("CurrentUser").getID(),children:function(c){var d;return[(d=b("React")).jsx(b("FantaTabGroup.react"),{messengerState:c,MainComponent:b("FantaTabMainLoader.react"),MinimizedComponent:b("FantaTabMinimized.react"),OverflowComponent:b("FantaMercuryTabOverflowBootloader.react"),tabGroup:a.state.tabGroup,tabContents:a.state.tabContents,isLastOfTypeChecker:a.$1},"tabgroup"),d.jsx(b("LoadOnRender.react"),{component:d.jsx(b("LazyComponent.react"),{}),loader:h,placeholder:d.jsx("span",{})},"dialog")]}})};d.$1=function(a){return b("MercuryIDs").isGroupChat(a.id)};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("FantaMercuryThreadEventsBootloaded",["Bootloader","CurrentUser","MercuryThreadInformer","MercuryViewer","MessengerState.bs","WorkplaceChatHelper","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadInformer").get(),h=60*60*1e3;function i(a,c,d){var e=b("gkx")("793912")&&d.timestamp<Date.now()-h;d.author!==b("MercuryViewer").getID()&&d.is_unread&&!e&&b("MessengerState.bs").getThreadMeta(b("CurrentUser").getID(),c,function(e){b("Bootloader").loadModules(["ChatTabPolicy"],function(b){b.messageIsAllowed(e,d,function(){a(c,d)})},"FantaMercuryThreadEventsBootloaded")})}a={registerForNewMessage:function(a){g.subscribe("new-message",function(c,d){c=d.threadID;d=d.message;b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()||i(a,c,d)})},registerForNewLogMessage:function(a){g.subscribe("new-log-message",function(c,d){c=d.threadID;d=d.message;b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()||i(a,c,d)})},registerForMessagesReceived:function(a){g.subscribe("messages-received",function(c,d){if(!b("WorkplaceChatHelper").suppressChatIfActiveOnDesktop())for(var e in d){c=d[e];for(var f=0;f<c.length;f++){var g=c[f];i(a,e,g)}}})}};e.exports=a}),null);
__d("FantaTabViewportManager",["Arbiter","DockTabsViewportCalculator","DockTabsViewportFantaTabUtils","FantaTabActions","ifRequired","immutable","isWebMessengerURI","qex","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("qex")._("830597");function a(a){__p&&__p();var c=b("DockTabsViewportCalculator").getInstance(a);if(!c)return;c.registerFantaTabCallbacks({fantaTabModelStateGetter:function(){var a=b("immutable").Map({});b("ifRequired")("FantaAppStore",function(b){a=b.getState().tabGroup.tabs});return a},onAvailableWidthChanged:function(a){var c=g?1:b("DockTabsViewportFantaTabUtils").getTabCountToFitWidth(a),d=function(){b("FantaTabActions").setAllowedRaisedTabs(c)};b("ifRequired")("FantaAppStore",function(a){a=a.getState().tabGroup.allowedRaisedTabs;c!==a&&b("setImmediate")(d)},function(){b("setImmediate")(d)})}});b("Arbiter").subscribe("FantaReducersDockCalculator/shouldRecalculate",function(){c.forceRecalculateChatTabs()});c.forceRecalculateFBDockWidth();b("Arbiter").subscribe("page_transition",function(a,c){b("isWebMessengerURI")(c.uri)&&b("setImmediate")(function(){return b("FantaTabActions").minimizeAllTabs()})})}e.exports={init:a}}),null);
__d("FantaTabsAppBase",["Bootloader","ChatAppActions","ChatAppStore","ChatPerfInstrumentation","CSS","JSLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.init=function(a,c,d){__p&&__p();if(this.isInitialized()){b("JSLogger").create("chat_app").error("repeated_init");return}this.$1=a;this.tabsElem=c;var e=b("ChatAppStore").addListener(function(){var a=b("ChatAppStore").getPreviousState(),c=b("ChatAppStore").getState();a.initialDisplayDone===!1&&c.initialDisplayDone===!0&&(b("ChatPerfInstrumentation").logDisplayDone(),e.remove())});b("ChatPerfInstrumentation").init();this.$2(d);this.initializeFantaData(d.interstitial_data);this.initializeFantaUI();this.$3();b("ChatAppActions").tti();b("ChatPerfInstrumentation").logTTI()};c.isInitialized=function(){return!!b("ChatAppStore").getState().isInitialized};c.isHidden=function(){var a=b("ChatAppStore").getState();return!!(!a.isInitialized||a.isHidden)};c.hide=function(){if(this.isHidden())return;b("CSS").hide(this.$1);b("ChatAppActions").hide()};c.unhide=function(){var a=b("ChatAppStore").getState();a.isInitialized?a.isHidden&&(b("CSS").show(this.$1),d(["Dock"],function(a){a.resizeAllFlyouts()}),b("ChatAppActions").unhide()):a.isLoaded||(d(["UIPagelet"],function(a){a.loadFromEndpoint("ChatTabsPagelet","ChatTabsPagelet"),a.loadFromEndpoint("BuddylistPagelet","BuddylistPagelet")}),b("ChatAppActions").load())};c.initializeFantaData=function(a){};c.initializeFantaUI=function(){};c.$2=function(a){d(["MercuryDeliveryState","MessengerParticipants.bs","MercuryServerPayloadPreprocessor","MessengerState.bs","MercurySyncEnvironment","P2PSendMoneyDialogStore"],function(c,d,e,f,g,h){c.get(),d,g.setUp(),b("ChatPerfInstrumentation").logInitStores(),a.graphql_payload?b("Bootloader").loadModules(["ChatInitialDataTransformer.bs"],function(b){var c=a.graphql_payload;b=b.transform(c);b.message_blocked_ids=c.message_blocked_ids;b.message_ignored_ids=c.message_ignored_ids;b.payload_source=c.payload_source;e.get().handleUpdate(b)},"FantaTabsAppBase"):e.get().handleUpdate(a.initial_data)})};c.$3=function(){d(["HotLikeSound","ChatOptions"],function(a,c){a.setCheckSoundEnabledFunc(function(){return c.getSetting("sound")}),b("ChatPerfInstrumentation").logInitSound()})};return a}();e.exports=a}),null);
__d("FantaTabsReactApp",["Bootloader","ChatPerfInstrumentation","FantaMercuryTabsWithMain.react","FantaTabsAppBase","React","ReactDOM","UserActivity","gkx","qex","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=500,h;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var e=c.prototype;e.initializeFantaData=function(a){__p&&__p();d(["FantaAppStore","FantaCookieUtil","FantaGetMessageActions","FantaTabActions","MercuryThreadInformer","PresenceState"],function(c,d,e,f,i,j){__p&&__p();f.loadFromData(d.convertCookieData(j.get(),null,a)),j.registerStateLoader(function(b){f.loadFromData(d.convertCookieData(b,c.getState().tabGroup,a))}),j.registerStateStorer(function(a){if(!b("UserActivity").isOnTab()&&!b("UserActivity").isActive(g)&&!b("gkx")("678595"))return a;var e=c.getState().tabGroup;if(!h||h&&!h.equals(e)){h=e;return d.createCookieData(e,a)}else return a}),i.get().subscribe("threads-updated",function(a,c){Object.keys(c).forEach(function(a){b("setImmediate")(function(){e.refreshThread(a)})})}),b("ChatPerfInstrumentation").logInitData()})};e.initializeFantaUI=function(){__p&&__p();var a=this;b("qex")._("1277463")?b("Bootloader").loadModules(["ZenonMessageHandler"],function(a){a.init()},"FantaTabsReactApp"):b("Bootloader").loadModules(["FBRTCMessageHandler"],function(a){a.init()},"FantaTabsReactApp");d(["FantaAppStore","FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","MercuryBrowserAlerts"],function(c,d,e,f,g,h){__p&&__p();h.init();b("ReactDOM").render(a.getViewComponent(),a.tabsElem);f=function(a,c){b("setImmediate")(function(){e.receivedNewMessage(a,c)})};d.registerForNewLogMessage(f);d.registerForNewMessage(f);g.init(a.tabsElem);b("ChatPerfInstrumentation").logInitUI();h=c.getState().tabGroup.tabs;h.toArray().length===0&&b("ChatPerfInstrumentation").logDisplayDone()})};e.getViewComponent=function(){return b("React").jsx(b("FantaMercuryTabsWithMain.react"),{loadDataOnMount:!1})};return c}(b("FantaTabsAppBase"));e.exports=new a()}),null);
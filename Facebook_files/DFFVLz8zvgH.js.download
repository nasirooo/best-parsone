if (self.CavalryLogger) { CavalryLogger.start_js(["kaEbo"]); }

__d("SpeedtestResultsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:SpeedtestResultsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAvgLatency=function(a){this.$1.avg_latency=a;return this};c.setAvgMbps=function(a){this.$1.avg_mbps=a;return this};c.setCdnHostname=function(a){this.$1.cdn_hostname=a;return this};c.setNumConcurrentRequests=function(a){this.$1.num_concurrent_requests=a;return this};c.setNumRequests=function(a){this.$1.num_requests=a;return this};c.setRequestSize=function(a){this.$1.request_size=a;return this};c.setTestDuration=function(a){this.$1.test_duration=a;return this};c.setTestType=function(a){this.$1.test_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={avg_latency:!0,avg_mbps:!0,cdn_hostname:!0,num_concurrent_requests:!0,num_requests:!0,request_size:!0,test_duration:!0,test_type:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("PublicLinkedList",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.headNode=null,this.tailNode=null,this.length=0}var b=a.prototype;b.first=function(){return this.headNode};b.shift=function(){if(!this.headNode)return null;var a=this.headNode;this.headNode=a.nextNode;this.headNode?this.headNode.prevNode=null:this.tailNode=null;this.length--;return a};b.unshift=function(a){a.nextNode=this.headNode;this.headNode&&(this.headNode.prevNode=a);this.headNode=a;this.tailNode||(this.tailNode=a);this.length++;return a};b.insertAfter=function(a,b){if(!a)return this.unshift(b);b.prevNode=a;b.nextNode=a.nextNode;a.nextNode?a.nextNode.prevNode=b:this.tailNode=b;a.nextNode=b;this.length++;return b};b.last=function(){return this.tailNode};b.pop=function(){if(!this.tailNode)return null;var a=this.tailNode;this.tailNode=a.prevNode;this.tailNode?this.tailNode.nextNode=null:this.headNode=null;this.length--;return a};b.push=function(a){a.prevNode=this.tailNode;this.tailNode&&(this.tailNode.nextNode=a);this.tailNode=a;this.headNode||(this.headNode=a);this.length++;return a};b.insertBefore=function(a,b){if(!a)return this.push(b);b.prevNode=a.prevNode;b.nextNode=a;a.prevNode?a.prevNode.nextNode=b:this.headNode=b;a.prevNode=b;this.length++;return b};b.remove=function(a){a.prevNode?a.prevNode.nextNode=a.nextNode:this.headNode=a.nextNode,a.nextNode?a.nextNode.prevNode=a.prevNode:this.tailNode=a.prevNode,a.prevNode=a.nextNode=null,this.length--};b.reverse=function(){var a=this.tailNode=this.headNode,b,c;while(a)c=a.nextNode,a.prevNode=c,a.nextNode=b,b=a,a=c;this.headNode=b};b.forEach=function(a,b){for(var c=this.headNode;c;c=c.nextNode)a.call(b,c,this)};b.some=function(a,b){for(var c=this.headNode;c;c=c.nextNode)if(a.call(b,c,this))return!0;return!1};b.every=function(a,b){for(var c=this.headNode;c;c=c.nextNode)if(!a.call(b,c,this))return!1;return!0};b.filter=function(a,b){var c=new Object.getPrototypeOf(this).constructor();for(var d=this.headNode;d;d=d.nextNode)a.call(b,d,this)&&c.push(d);return c};b.toArray=function(){var a=[];for(var b=this.headNode;b;b=b.nextNode)a.push(b);return a};a.fromArray=function(a){var b=new this();for(var c=0;c<a.length;c++)b.push(a[c]);return b};return a}();b=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.first=function(){return this.headNode?this.headNode.data:null};c.shift=function(){var b=a.prototype.shift.call(this);return b&&b.data};c.unshift=function(b){var c=new g();c.data=b;return a.prototype.unshift.call(this,c)};c.insertAfter=function(b,c){var d=new g();d.data=c;return a.prototype.insertAfter.call(this,b,d)};c.last=function(){return this.tailNode?this.tailNode.data:null};c.pop=function(){var b=a.prototype.pop.call(this);return b&&b.data};c.push=function(b){var c=new g();c.data=b;return a.prototype.push.call(this,c)};c.insertBefore=function(b,c){var d=new g();d.data=c;return a.prototype.insertBefore.call(this,b,d)};c.remove=function(b){a.prototype.remove.call(this,b),b.data=null};c.forEach=function(b,c){return a.prototype.forEach.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.some=function(b,c){return a.prototype.some.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.every=function(b,c){return a.prototype.every.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.filter=function(b,c){return a.prototype.filter.call(this,function(a,d){return b.call(c,a.data,a,d)})};c.map=function(a,b){var c=new Object.getPrototypeOf(this).constructor();for(var d=this.headNode;d;d=d.nextNode)c.push(a.call(b,d.data,d,this));return c};c.toArray=function(){return a.prototype.toArray.call(this).map(function(a){return a.data})};return b}(a);a.WithData=b;var g=function(){function a(){this.prevNode=this.nextNode=null}var b=a.prototype;b.next=function(){return this.nextNode};b.prev=function(){return this.prevNode};return a}();a.Node=g;e.exports=a}),null);
__d("QueueDataStructure",["PublicLinkedList"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.$1=new(b("PublicLinkedList").WithData)(),this.$2=0}var c=a.prototype;c.enqueue=function(a){this.$1.push(a),this.$2++};c.enqueueList=function(a){var b=this;a.forEach(function(a){b.enqueue(a)})};c.dequeue=function(){if(this.isEmpty())return null;var a=this.$1.shift();this.$2--;return a};c.peek=function(){return this.isEmpty()?null:this.$1.headNode.data};c.getLength=function(){return this.$2};c.isEmpty=function(){return this.$2===0};return a}();e.exports=a}),null);
__d("StreamingSDKUtils",["FBLogger"],(function(a,b,c,d,e,f){"use strict";a={dcheck:function(a){a||b("FBLogger")("www_livestreaming").info("Check failed")},check:function(a){a||b("FBLogger")("www_livestreaming").mustfix("Check failed")}};e.exports=a}),null);
__d("ComponentWithContext",["regeneratorRuntime","StreamingSDKUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=!1,this.$2=!1,this.$3=!1,this.$6=!1}var c=a.prototype;c.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onUninitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};c.doInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$3);this.$3=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onInitialize());case 4:case"end":return a.stop()}},null,this)};c.doUninitialize=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$3){a.next=4;break}this.$3=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onUninitialize());case 4:case"end":return a.stop()}},null,this)};c.doStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$2);this.$2=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onStarted());case 4:case"end":return a.stop()}},null,this)};c.doStopped=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$2){a.next=4;break}this.$2=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onStopped());case 4:case"end":return a.stop()}},null,this)};c.doPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(!this.$1);this.$1=!0;a.next=4;return b("regeneratorRuntime").awrap(this.onPaused());case 4:case"end":return a.stop()}},null,this)};c.doResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("StreamingSDKUtils").check(this.$1);this.$1=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onResumed());case 4:case"end":return a.stop()}},null,this)};c.doStartedOrResumed=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:if(!this.$1){a.next=6;break}this.$1=!1;a.next=4;return b("regeneratorRuntime").awrap(this.onResumed());case 4:a.next=8;break;case 6:a.next=8;return b("regeneratorRuntime").awrap(this.doStarted());case 8:case"end":return a.stop()}},null,this)};c.isPaused=function(){return this.$1};c.isInitialized=function(){return this.$3};c.isStarted=function(){return this.$2};c.attachServiceBus=function(a){__p&&__p();var b=this;this.$5=a;this.getRequiredServices().forEach(function(b){if(!a.hasService(b))throw new Error("Cannot find required service "+b)});this.$6=!1;this.getDeferrableServices().forEach(function(c){if(!a.hasService(c)){b.$6=!0;return}})};c.detachServiceBus=function(){this.$5=null};c.getServiceBus=function(){return this.$5};c.getRequiredServices=function(){return[]};c.getOptionalServices=function(){return[]};c.getDeferrableServices=function(){return[]};c.attach=function(a){this.$4=a};c.detach=function(){this.$4=null};c.getContext=function(){return this.$4};return a}();e.exports=a}),null);
__d("Service",["ComponentWithContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.isMultiBind=function(){return!1};c.getServiceId=function(){throw new Error("getServiceId must be implemented")};c.getServiceOrNull=function(a){var b=this.getServiceBus();return b==null?null:b.getServiceOrNull(a)};c.getServiceOrThrow=function(a){var b=this.getServiceOrNull(a);if(b==null)throw new Error('Service "'+a+'" not found');return b};return b}(b("ComponentWithContext"));e.exports=a}),null);
__d("ServiceImpl",["Service"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.getInterface=function(){throw new Error("Not implemented")};return b}(b("Service"));e.exports=a}),null);
__d("BroadcastIdProvider",["ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$BroadcastIdProvider1=b;return c}var c=b.prototype;c.getBroadcastId=function(){return this.$BroadcastIdProvider1};c.getServiceId=function(){return"broadcast_id_provider"};c.getInterface=function(){return this};return b}(b("ServiceImpl"));e.exports=a}),null);
__d("StreamingSdkLogLevels",[],(function(a,b,c,d,e,f){"use strict";e.exports={FATAL:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,VERBOSE:5}}),null);
__d("DebugLogEngine",["regeneratorRuntime","FBLogger","ServiceImpl","StreamingSdkLogLevels"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getServiceId=function(){return"debug_log_engine"};d.getInterface=function(){return this};d.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$DebugLogEngine1=this.getServiceOrThrow("broadcast_id_provider").getInterface().getBroadcastId(),this.$DebugLogEngine2=this.getServiceOrNull("log_writer"),this.$DebugLogEngine3=this.getServiceOrNull("session_clock");case 3:case"end":return a.stop()}},null,this)};d.log=function(a,c){__p&&__p();switch(a){case b("StreamingSdkLogLevels").INFO:case b("StreamingSdkLogLevels").DEBUG:case b("StreamingSdkLogLevels").VERBOSE:b("FBLogger")("www_livestreaming").info("[DebugEngine] "+c);break;case b("StreamingSdkLogLevels").ERROR:case b("StreamingSdkLogLevels").WARNING:b("FBLogger")("www_livestreaming").warn("[DebugEngine] "+c);break;case b("StreamingSdkLogLevels").FATAL:b("FBLogger")("www_livestreaming").mustfix("[DebugEngine] "+c);break}var d=this.$DebugLogEngine2;if(d==null)return;var e="",f=new Error();f=f.stack.split("\n");f.length>=2&&(e=f[2].replace(/(\(.*\))/,"").replace("at ","").trim());f=this.$DebugLogEngine3!=null?this.$DebugLogEngine3.getInterface().getWallRuntime():null;a={broadcast_id:this.$DebugLogEngine1,level:a,source_file:e,source_line:0,message:c,session_clock:f};d.getInterface().logEvent("streaming_sdk_engine_log","",a)};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("SessionClock",["regeneratorRuntime","ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$SessionClock1=0;b.$SessionClock3=!1;b.$SessionClock4=!1;b.$SessionClock5=0;b.$SessionClock6=0;b.$SessionClock2=Date.now();return b}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"session_clock"};d.$SessionClock7=function(){this.$SessionClock1=Date.now(),this.$SessionClock3=!1,this.$SessionClock4=!0};d.$SessionClock8=function(){if(this.$SessionClock3)return;this.$SessionClock3=!0;this.$SessionClock5=Date.now()};d.$SessionClock9=function(){if(!this.$SessionClock3)return;this.$SessionClock3=!1;this.$SessionClock6+=Date.now()-this.$SessionClock5};d.isPaused=function(){return this.$SessionClock3};d.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionClock7();case 1:case"end":return a.stop()}},null,this)};d.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionClock8();case 1:case"end":return a.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionClock9();case 1:case"end":return a.stop()}},null,this)};d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionClock8();case 1:case"end":return a.stop()}},null,this)};d.getRuntime=function(){if(!this.$SessionClock4)return 0;if(!this.$SessionClock3)return Date.now()-this.$SessionClock6-this.$SessionClock1;else return this.$SessionClock5-this.$SessionClock6-this.$SessionClock1};d.getWallRuntime=function(){return Date.now()-this.$SessionClock2};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("SimpleServiceProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.provide=function(a){a.addService(this.$1)};return a}();e.exports=a}),null);
__d("ServiceBus",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$2=[],this.$3=new Map(),this.addServices(a),this.$1=b}var b=a.prototype;b.addBackgroundService=function(a){this.$2.indexOf(a)!==-1&&this.$2.push(a)};b.addServices=function(a){var b=this;a.forEach(function(a){a.provide(b)})};b.addService=function(a){this.addServiceOrThrowInternal(a.getServiceId(),a)};b.addServiceOrThrowInternal=function(a,b){if(this.$3.get(a)!=null)throw new Error("Service already bound for ID "+a);this.$3.set(a,b)};b.hasService=function(a){return this.$3.get(a)!=null||this.$1!=null&&this.$1.hasService(a)};b.getServiceOrNull=function(a){return this.getServiceInternal(a)};b.getServiceInternal=function(a){var b=this.$3.get(a);if(b)return b;else if(this.$1!=null)return this.$1.getServiceInternal(a);else return null};b.getSortedServices=function(){var a=[];this.$3.forEach(function(b){a.push(b)});this.$2.forEach(function(b){a.push(b)});return a};return a}();e.exports=a}),null);
__d("ExecutionContext",["QueueDataStructure","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new(b("QueueDataStructure"))()}var c=a.prototype;c.add=function(a){var c=this;this.$1.enqueue(a);var d=this.$1.peek();a==d&&b("setTimeout")(function(){c.$2(a)},0);return this};c.$2=function(a){var b=this;a(function(){b.$1.dequeue();var a=b.$1.peek();a!=null&&b.$2(a)})};c.flush=function(){while(!this.$1.isEmpty())this.$1.dequeue()};return a}();e.exports=a}),null);
__d("StreamingError",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d,e){d===void 0&&(d={});this.code=a;this.description=b;this.what=c;this.extra=d;this.trace=(a=e)!=null?a:new Error().stack}var b=a.prototype;b.toString=function(){return"StreamingError: "+this.description+", what: "+this.what+", code: "+this.code};b.toJsonString=function(){return JSON.stringify({code:this.code.toString(),description:this.description,what:this.what,extra:JSON.stringify(this.extra),trace:this.trace})};return a}();e.exports=a}),null);
__d("StreamingErrorCodes",[],(function(a,b,c,d,e,f){"use strict";e.exports={GenericError:0,CapsNegotiationError:1,StateTransitionError:2,DataWriteError:3,MessageBusError:4,NodeTeardownError:5,ServiceTeardownError:6,FlowStateError:7,InterruptedTooLongError:8,VideoSourceError:100,AudioSourceError:101,VideoEncoderError:102,AudioEncoderError:103,NetworkError:104,AudioMixerError:105,DvrError:106,MuxerError:107,MaxFatalCodeError:1e4,BigAVGapError:10001}}),null);
__d("StreamingPipelineController",["regeneratorRuntime","StreamingSDKUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$4=[],this.$1=a,this.$2=c,this.$3=b,this.assumePipeline(a)}var c=a.prototype;c.fireError=function(a){this.$2.onPipelineError(a),this.stop()};c.getServiceBus=function(){return this.$3};c.initialize=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:this.$5(function(b){if(b.isInitialized())return;b.attach(a);b.attachServiceBus(a.$3);b.doInitialize()},!1);c.next=3;return b("regeneratorRuntime").awrap(this.$6(function(c){var d;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:d=c.getNode(),d.attach(a),d.attachServiceBus(a.$3),d.doInitialize();case 4:case"end":return b.stop()}},null,this)},!0));case 3:case"end":return c.stop()}},null,this)};c.uninitialize=function(){__p&&__p();return b("regeneratorRuntime").async(function(a){__p&&__p();while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.$6(function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=a.getNode();d.next=3;return b("regeneratorRuntime").awrap(c.doUninitialize());case 3:case"end":return d.stop()}},null,this)},!0));case 2:this.$5(function(a){a.doUninitialize()},!1);case 3:case"end":return a.stop()}},null,this)};c.start=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(this.resume());case 2:case"end":return a.stop()}},null,this)};c.pause=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c.getNode().doPaused());case 2:a.$7(c,function(a){a.resetCapsNegotations(),a.onInactive()});case 3:case"end":return d.stop()}},null,this)},!1));case 2:this.$5(function(a){a.doPaused()},!1);case 3:case"end":return c.stop()}},null,this)};c.resume=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:this.$5(function(a){a.isStarted()?a.doResumed():a.doStarted()},!1);this.$8();c.next=4;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:a.$7(c,function(a){a.onActive()});d.next=3;return b("regeneratorRuntime").awrap(c.getNode().doStartedOrResumed());case 3:case"end":return d.stop()}},null,this)},!0));case 4:case"end":return c.stop()}},null,this)};c.stop=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$6(function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(c.getNode().doStopped());case 2:a.$7(c,function(a){a.resetCapsNegotations(),a.onInactive()});case 3:case"end":return d.stop()}},null,this)},!1));case 2:this.$5(function(a){a.doStopped()},!1);case 3:case"end":return c.stop()}},null,this)};c.$8=function(){var a=this;this.$6(function(c){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a.$7(c,function(a){a.negotiateCaps()});case 1:case"end":return b.stop()}},null,this)},!1)};c.$5=function(a,b){if(b)for(var b=this.$4.length-1;b>=0;b--)a(this.$4[b]);else this.$4.forEach(function(b){a(b)})};c.$6=function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:d=this.$1.getNodes();if(!c){g.next=11;break}e=d.length-1;case 3:if(!(e>=0)){g.next=9;break}g.next=6;return b("regeneratorRuntime").awrap(a(d[e]));case 6:e--;g.next=3;break;case 9:g.next=18;break;case 11:f=0;case 12:if(!(f<d.length)){g.next=18;break}g.next=15;return b("regeneratorRuntime").awrap(a(d[f]));case 15:f++;g.next=12;break;case 18:case"end":return g.stop()}},null,this)};c.$7=function(a,b){a.getLinks().forEach(function(a){b(a)})};c.assumePipeline=function(a){this.$1=a,b("StreamingSDKUtils").check(a.isFinalized()),this.$4=this.$3.getSortedServices()};return a}();e.exports=a}),null);
__d("StreamingSession",["Promise","regeneratorRuntime","ExecutionContext","FBLogger","StreamingError","StreamingErrorCodes","StreamingPipelineController","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return"Invalid state transition: "+a+" -> "+b};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(babelHelpers.wrapNativeSuper(Error));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){return b.call(this,g(a,c))||this}return a}(a);c=function(){__p&&__p();function a(a,c,d){this.$1="UNINITIALIZED",this.$3=!1,this.$4=!1,this.$2=c,this.$5=new(b("StreamingPipelineController"))(a,d,this),this.$6=new(b("ExecutionContext"))()}var c=a.prototype;c.initialize=function(){var a=this;b("promiseDone")(this.$7("INITIALIZED"),function(b){a.$4=!0,a.$2.onInitialized&&a.$2.onInitialized()},function(b){a.$8(b,"INITIALIZED")})};c.start=function(){var a=this;b("promiseDone")(this.$7("STARTED","START"),function(c){c.from=="INITIALIZED"?(a.$3=!0,a.$2.onStarted()):c.from=="PAUSED"?a.$2.onResumed&&a.$2.onResumed():b("FBLogger")("www_livestreaming").mustfix("uhoh")},function(b){a.$8(b,"STARTED")})};c.pause=function(){var a=this;b("promiseDone")(this.$7("PAUSED"),function(b){a.$2.onPaused&&a.$2.onPaused()},function(b){a.$8(b,"PAUSED")})};c.resume=function(){var a=this;b("promiseDone")(this.$7("STARTED","RESUME"),function(b){a.$2.onResumed&&a.$2.onResumed()},function(b){a.$8(b,"STARTED")})};c.stop=function(){var a=this;b("promiseDone")(this.$7("STOPPED"),function(b){a.$9()},function(b){a.$8(b,"STOPPED")});this.release()};c.release=function(){var a=this;b("promiseDone")(this.$7("RELEASED"),function(b){a.$10()},function(b){a.$8(b,"RELEASED")})};c.$11=function(a,b){switch(a){case"INITIALIZED":return this.$1==="UNINITIALIZED";case"STARTED":return this.$1==="INITIALIZED"&&b==="START"||this.$1==="PAUSED"&&(b==="RESUME"||b==="START");case"PAUSED":return this.$1==="STARTED";case"STOPPED":return this.$1!=="UNINITIALIZED"&&this.$1!=="RELEASED";case"RELEASED":return this.$1!=="RELEASED";case"TRANSIENT_WORK":return this.$1!=="RELEASED"&&this.$1!=="STOPPED";default:return!1}};c.$7=function(a,c){__p&&__p();var d=this;c===void 0&&(c="NONE");return new(b("Promise"))(function(e,f){__p&&__p();d.$6.add(function(g){__p&&__p();var i;return b("regeneratorRuntime").async(function(j){__p&&__p();while(1)switch(j.prev=j.next){case 0:b("FBLogger")("www_livestreaming").info("transitionToState("+a+")");d.$11(a,c)||f(new h(d.$1,a));j.t0=a;j.next=j.t0==="INITIALIZED"?5:j.t0==="STARTED"?9:j.t0==="PAUSED"?22:j.t0==="STOPPED"?27:j.t0==="RELEASED"?32:j.t0==="TRANSIENT_WORK"?36:37;break;case 5:j.next=7;return b("regeneratorRuntime").awrap(d.$5.initialize());case 7:d.$12("init_ok");return j.abrupt("break",38);case 9:if(!(d.$1=="INITIALIZED")){j.next=16;break}d.$12("start_attempt");j.next=13;return b("regeneratorRuntime").awrap(d.$5.start());case 13:d.$12("start_ok");j.next=21;break;case 16:if(!(d.$1=="PAUSED")){j.next=21;break}d.$12("resume_attempt");j.next=20;return b("regeneratorRuntime").awrap(d.$5.resume());case 20:d.$12("resume_ok");case 21:return j.abrupt("break",38);case 22:d.$12("pause_attempt");j.next=25;return b("regeneratorRuntime").awrap(d.$5.pause());case 25:d.$12("pause_ok");return j.abrupt("break",38);case 27:d.$12("stop_attempt");j.next=30;return b("regeneratorRuntime").awrap(d.$5.stop());case 30:d.$12("stop_ok");return j.abrupt("break",38);case 32:d.$12("uninit_attempt");j.next=35;return b("regeneratorRuntime").awrap(d.$5.uninitialize());case 35:return j.abrupt("break",38);case 36:return j.abrupt("break",38);case 37:return j.abrupt("break",38);case 38:i=d.$1,d.$1=a,e({from:i,to:a,success:!0}),g();case 42:case"end":return j.stop()}},null,this)})})};c.$8=function(a,c){if(a instanceof h){var d=a;b("FBLogger")("www_livestreaming").warn(d.message)}else this.$13(new(b("StreamingError"))(b("StreamingErrorCodes").StateTransitionError,"Error while transitioning from "+this.$1+" to "+c,a.message,{},a.stack))};c.$13=function(a){__p&&__p();var b=this;if(this.$5){var c=this.$5.getServiceBus().getServiceOrNull("session_logger");c&&c.getInterface().logStreamingError(a)}this.$2.onError(a);this.$7("STOPPED").then(function(){b.$9()})["catch"]();this.$7("RELEASED").then(function(){b.$10()})["catch"]()};c.$9=function(){this.$3&&(this.$3=!1,this.$2.onStopped())};c.$10=function(){this.$4&&(this.$4=!1,this.$2.onReleased&&this.$2.onReleased())};c.onPipelineError=function(a){this.$13(a)};c.$12=function(a){var b=this.$5.getServiceBus().getServiceOrNull("session_logger");if(b==null)return;b.getInterface().logStreamingEvent(a,"")};return a}();e.exports=c}),null);
__d("StreamingSessionBuilder",["ServiceBus","StreamingSession","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){this.$1=a,this.$2=c,this.$3=new(b("ServiceBus"))(d),a.setServiceBus(this.$3)}var c=a.prototype;c.build=function(){var a=b("nullthrows")(this.$1).build();this.$1=null;return new(b("StreamingSession"))(a,this.$2,this.$3)};c.addMediaSource=function(a){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];(c=b("nullthrows")(this.$1)).addMediaSource.apply(c,[a].concat(e))};return a}();e.exports=a}),null);
__d("BaseLiveStreamingClient",["BroadcastIdProvider","DebugLogEngine","FBLogger","SessionClock","SimpleServiceProvider","StreamingSessionBuilder","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d,e){this.$1=a,this.$2=c,this.$4=new(b("StreamingSessionBuilder"))(c,e,this.$5(a,d))}var c=a.prototype;c.getSessionBuilder=function(){return this.$4};c.setSession=function(a){this.$3=a};c.getConfig=function(){return this.$1};c.start=function(){if(!this.$3){b("FBLogger")("www_livestreaming").warn("No session");return}this.$3.start()};c.stop=function(){b("nullthrows")(this.$3).stop()};c.pause=function(){b("nullthrows")(this.$3).pause()};c.resume=function(){b("nullthrows")(this.$3).resume()};c.$5=function(a,c){c.push(new(b("SimpleServiceProvider"))(new(b("BroadcastIdProvider"))(this.$1.broadcastID)));c.push(new(b("SimpleServiceProvider"))(new(b("SessionClock"))()));a.enableDebugLogEngine===!0&&c.push(new(b("SimpleServiceProvider"))(new(b("DebugLogEngine"))()));return c};return a}();e.exports=a}),null);
__d("DashIngestStreamingRequest",["FBLogger","Random","XHRRequest","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b.$DashIngestStreamingRequest3=0;b.setMethod("PUT");b.setDataSerializer(function(a){return a});a.prototype.setErrorHandler.call(babelHelpers.assertThisInitialized(b),b.$DashIngestStreamingRequest5.bind(babelHelpers.assertThisInitialized(b)));b.$DashIngestStreamingRequest2=c;b.$DashIngestStreamingRequest4=c.retryDelayMs;return b}var d=c.prototype;d.setErrorHandler=function(a){this.$DashIngestStreamingRequest1=a;return this};d.$DashIngestStreamingRequest5=function(a){__p&&__p();var c=this;if(this.$DashIngestStreamingRequest3>=this.$DashIngestStreamingRequest2.maxAttempts){b("FBLogger")("www_livestreaming").debug("Reached max retry count, giving up");this.$DashIngestStreamingRequest1&&this.$DashIngestStreamingRequest1(a);return}a=b("Random").random()*2-1;a=a*.5;a=this.$DashIngestStreamingRequest4*(1+a);b("FBLogger")("www_livestreaming").debug("Request failed, retrying in "+a+"ms");b("setTimeout")(function(){c.send()},a);this.$DashIngestStreamingRequest4*=this.$DashIngestStreamingRequest2.backOffFactor;this.$DashIngestStreamingRequest3++};return c}(b("XHRRequest"));e.exports=a}),null);
__d("LiveStreamingWebmSegment",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$1=a;this.$2=b;this.$3=(a=c)!=null?a:{}}var b=a.prototype;b.getData=function(){return this.$1};b.setSegmentNumber=function(a){this.$2=a};b.getSegmentNumber=function(){return this.$2};b.isInitSegment=function(){return this.$2===0};b.getMetadata=function(){return this.$3};b.getMetadataTrackByType=function(a){if(this.$3==null||this.$3.tracks==null)return null;var b=null;this.$3.tracks.forEach(function(c){if(c.type===a){b=c;return}});return b};b.getFilename=function(){return"dash_segment_"+(this.isInitSegment()?"init":this.getSegmentNumber())+".webm"};return a}();e.exports=a}),null);
__d("StreamingNodeBase",["ComponentWithContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$StreamingNodeBase1=b;return c}var c=b.prototype;c.getId=function(){return this.$StreamingNodeBase1};return b}(b("ComponentWithContext"));e.exports=a}),null);
__d("StreamingPad",["nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b){this.$1=a,this.$3=b}var c=a.prototype;c.getName=function(){return this.$1};c.getNode=function(){return this.$3};c.onLinked=function(a){this.$2=a};c.getLink=function(){return b("nullthrows")(this.$2)};c.isLinked=function(){return this.$2!=null};c.requestCapsNegotiation=function(){this.$2&&this.$2.requestCapsNegotiation()};return a}();e.exports=a}),null);
__d("StreamingSinkPad",["Promise","FBLogger","StreamingPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$StreamingSinkPad1="NORMAL",b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.reportFlowState=function(a,c){if(this.$StreamingSinkPad1==a)return new(b("Promise"))(function(a,b){return a(!1)});b("FBLogger")("www_livestreaming").info("Flow state changed to "+a+" from "+this.$StreamingSinkPad1+" on "+this.getName());this.$StreamingSinkPad1=a;return this.getLink().onFlowState(a,c)};return c}(b("StreamingPad"));e.exports=a}),null);
__d("StreamingSrcPad",["StreamingPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$StreamingSrcPad1="NORMAL",b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.write=function(a){this.getLink().write(a)};c.setFlowState=function(a){this.$StreamingSrcPad1=a};return b}(b("StreamingPad"));e.exports=a}),null);
__d("StreamingNode",["Promise","FBLogger","StreamingNodeBase","StreamingSinkPad","StreamingSrcPad"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.onData=function(a,b){};d.onFlowState=function(a,c){b("FBLogger")("www_livestreaming").mustfix("onFlowState() must be implemented by subclass");return new(b("Promise"))(function(a,b){return a(!1)})};d.getOrCreateSrcPad=function(){this.$StreamingNode1||(this.$StreamingNode1=new(b("StreamingSrcPad"))("src",this));return this.$StreamingNode1};d.getOrCreateSinkPad=function(){this.$StreamingNode2||(this.$StreamingNode2=new(b("StreamingSinkPad"))("sink",this));return this.$StreamingNode2};return c}(b("StreamingNodeBase"));e.exports=a}),null);
__d("StreamingSimpleNode",["regeneratorRuntime","StreamingNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$StreamingSimpleNode1=[];return b}var d=c.prototype;d.onData=function(a,b){};d.addLink=function(a){this.$StreamingSimpleNode1.push(a)};d.getLinks=function(){return this.$StreamingSimpleNode1};d.onInitialized=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:case"end":return a.stop()}},null,this)};return c}(b("StreamingNode"));e.exports=a}),null);
__d("FBWWWDashTransportNode",["regeneratorRuntime","Promise","DashIngestStreamingRequest","ExecutionContext","FBLogger","LiveStreamingWebmSegment","StreamingError","StreamingErrorCodes","StreamingSdkLogLevels","StreamingSimpleNode","clearInterval","performance","setInterval"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){c=a.call(this,c)||this;c.$FBWWWDashTransportNode6=0;c.$FBWWWDashTransportNode7=0;c.$FBWWWDashTransportNode8=0;c.$FBWWWDashTransportNode1=d;c.$FBWWWDashTransportNode2=new(b("ExecutionContext"))();return c}var d=c.prototype;d.onInitialize=function(){var a;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a=this.getServiceBus(),a&&(this.$FBWWWDashTransportNode3=a.getServiceOrNull("transport_session_logger"),this.$FBWWWDashTransportNode4=a.getServiceOrNull("debug_log_engine"));case 2:case"end":return b.stop()}},null,this)};d.onStopped=function(){__p&&__p();var a=this,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:c=this.$FBWWWDashTransportNode4;c&&c.getInterface().log(b("StreamingSdkLogLevels").DEBUG,"QueueSizeOnStopped: "+this.$FBWWWDashTransportNode8+"ms, "+this.$FBWWWDashTransportNode7+"B");return d.abrupt("return",new(b("Promise"))(function(c){a.$FBWWWDashTransportNode2.add(function(d){return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:b("clearInterval")(a.$FBWWWDashTransportNode5),d(),c();case 3:case"end":return e.stop()}},null,this)})}));case 3:case"end":return d.stop()}},null,this)};d.onData=function(a,c){if(c instanceof b("LiveStreamingWebmSegment")){a=c;a.isInitSegment()?(this.$FBWWWDashTransportNode9(),this.$FBWWWDashTransportNode10(a)):this.$FBWWWDashTransportNode11(a)}else{a=c.constructor.name;this.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"onData received unsupported datatype","Expected: LiveStreamingWebmSegment, Actual: "+a,{})}};d.$FBWWWDashTransportNode9=function(){this.$FBWWWDashTransportNode5=b("setInterval")(this.$FBWWWDashTransportNode13.bind(this),this.$FBWWWDashTransportNode1.statsReportingIntervalMs)};d.$FBWWWDashTransportNode14=function(a){return this.$FBWWWDashTransportNode1.dashIngestUri+"&filename="+a};d.$FBWWWDashTransportNode15=function(a){__p&&__p();var c=this,d=a.getMetadataTrackByType("video");a=a.getMetadataTrackByType("audio");if(d==null||a==null){this.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"Missing required data for manifest","audioTrack or videoTrack is null",{audioTrack:a,videoTrack:d});return}var e=d.codec+","+a.codec,f=d.width,g=d.height,h=a.sampling_frequency,i=a.channels,j=1e6;if(g==null||f==null||h==null||i==null){this.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"Missing required data for manifest","height, width, audioSamplingRate, or audioChannels is null",{height:g,width:f,audioSamplingRate:h,audioChannels:i});return}var k='\n<?xml version="1.0"?>\n<MPD xmlns="urn:mpeg:dash:schema:mpd:2011" minBufferTime="PT1.500S" type="static" mediaPresentationDuration="PT0H1M0.034S" maxSegmentDuration="PT0H0M1.000S" profiles="urn:mpeg:dash:profile:full:2011">\n <ProgramInformation moreInformationURL="http://gpac.sourceforge.net">\n  <Title>dash_manifest.mpd</Title>\n </ProgramInformation>\n\n <Period duration="PT0H1M0.034S">\n  <AdaptationSet segmentAlignment="true" maxWidth="1280" maxHeight="720" maxFrameRate="30" par="1280:720" lang="eng">\n   <SegmentTemplate timescale="1000" media="dash_segment_$Number$.webm" startNumber="1" duration="5000" initialization="dash_segment_init.webm"/>\n   <Representation id="1" mimeType="video/webm" codecs="'+e+'" width="'+f+'" height="'+g+'" frameRate="30" sar="1:1" audioSamplingRate="'+h+'" startWithSAP="0" bandwidth="'+j+'">\n    <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="'+i+'"/>\n   </Representation>\n  </AdaptationSet>\n </Period>\n</MPD>\n',l=this.$FBWWWDashTransportNode14("dash_manifest.mpd");this.$FBWWWDashTransportNode2.add(function(a){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:new(b("DashIngestStreamingRequest"))(l,c.$FBWWWDashTransportNode1).setData(k).setResponseHandler(function(b){a()}).setErrorHandler(function(d){var k=d.message||d.errorMsg;c.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"Error while sending manifest",k,{width:f,height:g,codecs:e,audioSamplingRate:h,audioChannels:i,bandwidth:j,error:d},d.stack);a()}).send();case 1:case"end":return d.stop()}},null,this)})};d.$FBWWWDashTransportNode10=function(a){__p&&__p();var c=this;this.$FBWWWDashTransportNode15(a);this.$FBWWWDashTransportNode16(a.getData(),a.getFilename());this.$FBWWWDashTransportNode17(a);this.$FBWWWDashTransportNode2.add(function(d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=c.$FBWWWDashTransportNode14(a.getFilename()),new(b("DashIngestStreamingRequest"))(e,c.$FBWWWDashTransportNode1).setData(a.getData()).setResponseHandler(function(b){c.$FBWWWDashTransportNode18(a,!0),d()}).setErrorHandler(function(e){c.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"Error while sending segment",e.message||e.errorMsg,{segment:a.getSegmentNumber(),error:e},e.stack),d()}).send();case 2:case"end":return f.stop()}},null,this)})};d.$FBWWWDashTransportNode11=function(a){__p&&__p();var c=this;this.$FBWWWDashTransportNode16(a.getData(),a.getFilename());this.$FBWWWDashTransportNode17(a);this.$FBWWWDashTransportNode2.add(function(d){var e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:e=c.$FBWWWDashTransportNode14(a.getFilename()),new(b("DashIngestStreamingRequest"))(e,c.$FBWWWDashTransportNode1).setData(a.getData()).setResponseHandler(function(b){c.$FBWWWDashTransportNode18(a,!0),c.$FBWWWDashTransportNode6=0,d()}).setErrorHandler(function(e){c.$FBWWWDashTransportNode18(a,!1),++c.$FBWWWDashTransportNode6>c.$FBWWWDashTransportNode1.errorsAllowedBeforeFailing?(c.$FBWWWDashTransportNode2.flush(),c.$FBWWWDashTransportNode12(b("StreamingErrorCodes").NetworkError,"Error while sending segment",e.message||e.errorMsg,{segment:a.getSegmentNumber(),error:e},e.stack)):b("FBLogger")("www_livestreaming").warn("Skipping segment"),d()}).send();case 2:case"end":return f.stop()}},null,this)})};d.$FBWWWDashTransportNode13=function(){var a=this.$FBWWWDashTransportNode3;if(!a)return;var b={networkQueueSizeInBits:this.$FBWWWDashTransportNode7*8,networkQueueSizeInMs:this.$FBWWWDashTransportNode8};a.getInterface().logNetworkMeasurements(b)};d.$FBWWWDashTransportNode19=function(a,b,c,d,e,f){var g=this.$FBWWWDashTransportNode3;if(!g)return;a={pingRtt:a,segmentRtt:b,segmentSize:c,segmentDuration:d,observedBitrate:e,observedFramerate:f};g.getInterface().logNetworkMeasurements(a)};d.$FBWWWDashTransportNode17=function(a){this.$FBWWWDashTransportNode7+=a.getData().byteLength;this.$FBWWWDashTransportNode8+=(a=a.getMetadata().duration)!=null?a:0};d.$FBWWWDashTransportNode18=function(a,c){__p&&__p();var d;this.$FBWWWDashTransportNode7-=a.getData().byteLength;this.$FBWWWDashTransportNode8-=(d=a.getMetadata().duration)!=null?d:0;if(a.isInitSegment())return;d=this.$FBWWWDashTransportNode14(a.getFilename()).replace(":443","");d=(g||(g=b("performance"))).getEntriesByName(d);var e=null,f=null;d.length>1&&(e=d[0].duration,f=d[1].duration);d=a.getMetadata();d=d.duration;var h=null;d!=null&&d>0&&(h=a.getData().byteLength*8/(d/1e3));this.$FBWWWDashTransportNode19(e,f,a.getData().byteLength,d,c?h:0,a.getMetadata().framerate)};d.$FBWWWDashTransportNode12=function(a,c,d,e,f){e===void 0&&(e={});var g=this.getContext();g!=null&&g.fireError(new(b("StreamingError"))(a,c,d,e,f))};d.$FBWWWDashTransportNode16=function(a,c){__p&&__p();var d,e,f;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:if(!(this.$FBWWWDashTransportNode1.downloadRequestBlobs!==!0)){b.next=2;break}return b.abrupt("return");case 2:d=new Blob([a],{type:"video/webm"}),e=URL.createObjectURL(d),f=document.createElement("a"),document.body&&(document.body.appendChild(f),f.style.cssText="display: none",f.href=e,f.download=c,f.click(),window.URL.revokeObjectURL(e));case 6:case"end":return b.stop()}},null,this)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
__d("FBWWWStreamingMediaRecorderAdapter",["regeneratorRuntime","Promise","ExecutionContext","StreamingError","StreamingErrorCodes","StreamingSimpleNode"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.$FBWWWStreamingMediaRecorderAdapater1=new(b("ExecutionContext"))();return c}var d=c.prototype;d.onStopped=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(c){a.$FBWWWStreamingMediaRecorderAdapater1.add(function(a){return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a(),c();case 2:case"end":return b.stop()}},null,this)})}));case 1:case"end":return c.stop()}},null,this)};d.onData=function(a,c){__p&&__p();if(c instanceof Blob){a=c;this.$FBWWWStreamingMediaRecorderAdapater2(a)}else{a=this.getContext();if(a!=null){c=c.constructor.name;a.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").GenericError,"onData received unsupported datatype","Expected: Blob, Actual: "+c,{}))}}};d.$FBWWWStreamingMediaRecorderAdapater2=function(a){__p&&__p();var c=this;this.$FBWWWStreamingMediaRecorderAdapater1.add(function(d){__p&&__p();var e;return b("regeneratorRuntime").async(function(b){__p&&__p();while(1)switch(b.prev=b.next){case 0:e=new FileReader(),e.onload=function(b){if(b.target.error!=null){c.$FBWWWStreamingMediaRecorderAdapater3(b.target.error,a);return}b=b.target.result;b=new DataView(b);c.$FBWWWStreamingMediaRecorderAdapater4(b)},e.readAsArrayBuffer(a),d();case 4:case"end":return b.stop()}},null,this)})};d.$FBWWWStreamingMediaRecorderAdapater3=function(a,c){var d=this.getContext();if(d==null)return;d.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"FileReader encountered an error while reading Blob",a.message,{blob:{size:c.size,type:c.type}},a.stack))};d.$FBWWWStreamingMediaRecorderAdapater4=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/8SOvLuObRf9/
 */
__d("WWWSDKWebmParser",["DataViewReader","FBLogger","LiveStreamingWebmSegment"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=440786851,h=408125543,i=357149030,j=374648427,k=2807729,l=231,m=17545,n=131,o=134,p=215,q=224,r=225,s=370966679608,t=370966679609,u=71877608363347,v=176,w=186,x=181,y=159,z=25188,A=524531317,B=163,C=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function D(a,b){__p&&__p();if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var E=function(){__p&&__p();function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getDataView=function(){return this.$1};b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new F(this.$1)};b.getUint=function(){__p&&__p();if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),F=function(){__p&&__p();function a(a){this.$1=a,this.$2=new(b("DataViewReader"))(this.$1)}var c=a.prototype;c.hasMoreData=function(){return this.$2.hasMoreData()};c.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new E(b,d)};c.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};c.$4=function(){__p&&__p();var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes. Got "+b);c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<C.length;b++)if(D(a,C[b]))return!0;return!1};return a}();function G(a){__p&&__p();a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==m&&(c=d.getFloat())}d=b/1e9;a=0;c!=null&&(a=c*d);return{timecodeScale:d,duration:a}}function H(a){__p&&__p();if(a==null)return[];var b=[];a=a.createParser();while(a.hasMoreData()){var c=a.parseElement();c=c.createParser();var d=null,e=null,f=null,g={};while(c.hasMoreData()){var h=c.parseElement();switch(h.id){case n:d=h.getUint();break;case o:e=h.getUint();break;case p:f=h.getUint();break;case q:g=I(h);break;case r:g=J(h);break}}g.track_number=f;d==1&&(g.type="video",e===t&&(g.codec="vp9"),e===s&&(g.codec="vp8"));d==2&&(g.type="audio",e===u&&(g.codec="opus"));b.push(g)}return b}function I(a){a=a.createParser();var b={};while(a.hasMoreData()){var c=a.parseElement();c.id===v&&(b.width=c.getUint());c.id===w&&(b.height=c.getUint())}return b}function J(a){a=a.createParser();var b={};while(a.hasMoreData()){var c=a.parseElement();c.id===x&&(b.sampling_frequency=c.getFloat());c.id===y&&(b.channels=c.getUint());c.id===z&&(b.bit_depth=c.getUint())}return b}function K(a){__p&&__p();a=a.createParser();if(!a.hasMoreData()){b("FBLogger")("www_livestreaming").warn("Unable to parse timecode because no data");return}a=a.parseElement();if(a.id!==l){b("FBLogger")("www_livestreaming").warn("Unable to parse timecode because not a timecode element");return}return a.getUint()}function L(a,c){__p&&__p();var d=null;c.forEach(function(a){a.type==="video"&&(d=a.track_number)});if(d==null)return null;c=a.createParser();if(!c.hasMoreData()){b("FBLogger")("www_livestreaming").warn("Unable to parse frame info because no data");return null}a=0;try{while(c.hasMoreData()){var e=c.parseElement();if(e.id===B){e=e.getDataView();e=e.getUint8(0);(e&d)===d&&a++}}}catch(a){b("FBLogger")("www_livestreaming").catching(a)}return a}function M(a,c){__p&&__p();var d=[],e=4+8,f=null,g=null,h=null;try{var i=[],j=new F(a);while(j.hasMoreData()){var k=j.parseElement();i.push(k);while(i.length>0){k=i[0];i=i.slice(1);if(k.id===A){var l=K(k);if(f!==null){var m=null;g!=null&&l!=null&&(m=l-g);var n=null;h!=null&&(n=L(h,c));n=new(b("LiveStreamingWebmSegment"))(new Uint8Array(a.buffer,f,k.getDataView().byteOffset-e-f),0,{timecode:g,duration:m,framerate:m!=null&&m!=0&&n!=null?n/(m/1e3):0});d.push(n)}g=l;h=k;f=k.getDataView().byteOffset-e}m=k.createParser();while(m.hasMoreData()){n=m.parseElement();n.id==A&&i.push(n)}}}}catch(a){}l=f===null?null:new Uint8Array(a.buffer,f);return{clusters:d,remainingData:l}}function a(a){__p&&__p();a=new F(a);var c=a.parseElement();if(c.id!=g){b("FBLogger")("www_livestreaming").warn("EBML element does not exist.");return null}c=a.parseElement();if(c.id!=h){b("FBLogger")("www_livestreaming").warn("Segment element does not exist.");return null}a=c.createParser();var d=null,e=null;while(a.hasMoreData()){var f=a.parseElement();f.id===i&&(d=f);f.id===j&&(e=f)}if(!d){b("FBLogger")("www_livestreaming").warn("Info element does not exist.");return null}if(!e){b("FBLogger")("www_livestreaming").warn("Tracks element does not exist.");return null}f=G(d);a=H(e);d=c.getOffset();e=e.getDataView().byteLength+e.getDataView().byteOffset;var k=new Uint8Array(c.getDataView().buffer,0,e);c=M(new DataView(c.getDataView().buffer,e,c.getDataView().buffer.byteLength-e),a);return{metadata:{segmentOffset:d,timecodeScale:f.timecodeScale,duration:f.duration,tracks:a},initSegment:k,clusters:c.clusters,remainingData:c.remainingData}}e.exports={parse:a}}),null);
__d("FBWWWStreamingMediaRecorderParserNode",["regeneratorRuntime","LiveStreamingWebmSegment","StreamingError","StreamingErrorCodes","StreamingSdkLogLevels","StreamingSimpleNode","WWWSDKWebmParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$FBWWWStreamingMediaRecorderParserNode1=0;return b}var d=c.prototype;d.onInitialize=function(){var a;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a=this.getServiceBus(),a&&(this.$FBWWWStreamingMediaRecorderParserNode4=a.getServiceOrNull("debug_log_engine"));case 2:case"end":return b.stop()}},null,this)};d.onStopped=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$FBWWWStreamingMediaRecorderParserNode3!=null&&this.$FBWWWStreamingMediaRecorderParserNode5(new(b("LiveStreamingWebmSegment"))(this.$FBWWWStreamingMediaRecorderParserNode3,++this.$FBWWWStreamingMediaRecorderParserNode1));case 1:case"end":return a.stop()}},null,this)};d.onData=function(a,c){if(c instanceof DataView){a=c;this.$FBWWWStreamingMediaRecorderParserNode6(a)}else{a=c.constructor.name;this.$FBWWWStreamingMediaRecorderParserNode7(b("StreamingErrorCodes").GenericError,"onData received unsupported datatype","Expected: Blob, Actual: "+a,{})}};d.$FBWWWStreamingMediaRecorderParserNode7=function(a,c,d,e,f){e===void 0&&(e={});var g=this.getContext();g!=null&&g.fireError(new(b("StreamingError"))(a,c,d,e,f))};d.$FBWWWStreamingMediaRecorderParserNode8=function(a){var b=0;a.forEach(function(a){b+=a.byteLength});var c=new Uint8Array(b),d=0;a.forEach(function(a){c.set(a,d),d+=a.byteLength});return c};d.$FBWWWStreamingMediaRecorderParserNode6=function(a){__p&&__p();var c=this;if(this.$FBWWWStreamingMediaRecorderParserNode4&&this.$FBWWWStreamingMediaRecorderParserNode2==null){var d=this.$FBWWWStreamingMediaRecorderParserNode4,e=new Uint8Array(a.buffer);e=e.slice(0,Math.min(200,a.byteLength)).join(",");d.getInterface().log(b("StreamingSdkLogLevels").DEBUG,"InitSegment: "+e)}if(a.byteLength===1&&a.getInt8(0)==26){this.$FBWWWStreamingMediaRecorderParserNode3=new Uint8Array(a.buffer);return}d=a;e=[];this.$FBWWWStreamingMediaRecorderParserNode2!=null&&e.push(this.$FBWWWStreamingMediaRecorderParserNode2);this.$FBWWWStreamingMediaRecorderParserNode3!=null&&e.push(this.$FBWWWStreamingMediaRecorderParserNode3);if(e.length>0){e.push(new Uint8Array(a.buffer));e=this.$FBWWWStreamingMediaRecorderParserNode8(e);d=new DataView(e.buffer)}try{e=b("WWWSDKWebmParser").parse(d);if(e==null){this.$FBWWWStreamingMediaRecorderParserNode7(b("StreamingErrorCodes").GenericError,"parsing invalid data","parser returned no data",{});return}if(this.$FBWWWStreamingMediaRecorderParserNode2==null){if(e.initSegment==null){this.$FBWWWStreamingMediaRecorderParserNode7(b("StreamingErrorCodes").GenericError,"parsing invalid data","parser returned media segment without init segment",{lastSegment:this.$FBWWWStreamingMediaRecorderParserNode1,initSegmentBytes:this.$FBWWWStreamingMediaRecorderParserNode2==null?-1:this.$FBWWWStreamingMediaRecorderParserNode2.byteLength,remainingDataBytes:this.$FBWWWStreamingMediaRecorderParserNode3==null?-1:this.$FBWWWStreamingMediaRecorderParserNode3.byteLength,dataViewBytes:a.byteLength});return}this.$FBWWWStreamingMediaRecorderParserNode5(new(b("LiveStreamingWebmSegment"))(e.initSegment,0,e.metadata));this.$FBWWWStreamingMediaRecorderParserNode2=e.initSegment}e.clusters.forEach(function(a){a.setSegmentNumber(++c.$FBWWWStreamingMediaRecorderParserNode1),c.$FBWWWStreamingMediaRecorderParserNode5(a)});this.$FBWWWStreamingMediaRecorderParserNode3=e.remainingData}catch(c){this.$FBWWWStreamingMediaRecorderParserNode7(b("StreamingErrorCodes").GenericError,"Webm parser encountered an error",c.message,{lastSegment:this.$FBWWWStreamingMediaRecorderParserNode1,initSegmentBytes:this.$FBWWWStreamingMediaRecorderParserNode2==null?-1:this.$FBWWWStreamingMediaRecorderParserNode2.byteLength,remainingDataBytes:this.$FBWWWStreamingMediaRecorderParserNode3==null?-1:this.$FBWWWStreamingMediaRecorderParserNode3.byteLength,dataViewBytes:a.byteLength},c.stack)}};d.$FBWWWStreamingMediaRecorderParserNode5=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingSimpleNode"));e.exports=a}),null);
__d("StreamingPipelineLink",["Promise","FBLogger","StreamingError","StreamingErrorCodes","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d){this.$5=!1,this.$6=!1,this.$3=a,this.$1=b,this.$2=c,this.$4=d}var c=a.prototype;c.write=function(a){if(!this.$6){b("FBLogger")("www_livestreaming").info("Writing to inactive link "+this.$4+", ignored.");return}try{this.$3.onData(a)}catch(c){a=this.$1.getNode().getContext();a!=null&&a.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").DataWriteError,"Failed to write data on link "+this.$4,c.message,{},c.stack))}};c.requestCapsNegotiation=function(){if(!this.$1||!this.$2){b("FBLogger")("www_livestreaming").warn("Negotiate on detached link "+this.$4+", ignored.");return}this.$5=!1;this.negotiateCaps()};c.onFlowState=function(a,c){var d=this;return new(b("Promise"))(function(e,f){b("promiseDone")(d.$3.onFlowState(a),function(f){if(c&&!f){b("FBLogger")("www_livestreaming").warn("Flow state "+a+" issued on "+d.$4+" was not handled!");return e(!1)}return e(f)},function(a){return f()})})};c.negotiateCaps=function(){if(!this.$1||!this.$2){b("FBLogger")("www_livestreaming").warn("Negotiate on detached link "+this.$4+", ignored.");return}if(this.$5){b("FBLogger")("www_livestreaming").warn("Already negotiated on link "+this.$4+", skipping.");return}this.$5=!0};c.resetCapsNegotations=function(){this.$5=!1};c.src=function(){return this.$1};c.sink=function(){return this.$2};c.onActive=function(){this.$6=!0};c.onInactive=function(){this.$6=!1};return a}();e.exports=a}),null);
__d("StreamingPipelineLinkAdapter",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c,d){this.$1=a,this.$2=b,this.$3=c,this.$4=d}var b=a.prototype;b.onData=function(a){this.$1.onData(this.$4,a)};b.shouldNegotiateCaps=function(){return!0};b.onCapsNegotiationStarted=function(){};b.onRequestCaps=function(){};b.onSinkCapsAvailable=function(){return!0};b.onFlowState=function(a){this.$3.setFlowState(a);return this.$2.onFlowState(this.$3,a)};b.setCaps=function(){};return a}();e.exports=a}),null);
__d("StreamingPipelineNode",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=[],this.$1=a}var b=a.prototype;b.getId=function(){return this.$1.getId()};b.getNode=function(){return this.$1};b.addLink=function(a){this.$2.push(a)};b.getLinks=function(){return this.$2};return a}();e.exports=a}),null);
__d("StreamingPipeline",["FBLogger","StreamingPipelineLink","StreamingPipelineLinkAdapter","StreamingPipelineNode","StreamingSDKUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=!1,this.$3=new Map(),this.$1=a,this.$4=1,window.pipeline=this}var c=a.prototype;c.addNode=function(a){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=new(Function.prototype.bind.apply(a,[null].concat([this.$4++],d)))();this.$3.set(f.getId(),new(b("StreamingPipelineNode"))(f));return f};c.getNodes=function(){return Array.from(this.$3.values())};c.connect=function(a,c){var d=b("nullthrows")(this.$3.get(a.getId())),e=b("nullthrows")(this.$3.get(c.getId())),f=a.getOrCreateSrcPad(),g=c.getOrCreateSinkPad();b("StreamingSDKUtils").check(!f.isLinked());b("StreamingSDKUtils").check(!g.isLinked());var h=a.getId()+":"+f.getName()+"->"+c.getId()+":"+g.getName();c=new(b("StreamingPipelineLinkAdapter"))(c,a,f,g);a=new(b("StreamingPipelineLink"))(c,d,e,h);f.onLinked(a);g.onLinked(a);d.addLink(a)};c.finalize=function(){if(this.$2)throw new Error("StreamingPipeline is already finalized");this.$2=!0;this.describePipeline()};c.isFinalized=function(){return this.$2};c.describePipeline=function(){this.$3.forEach(function(a,c){a.getLinks().forEach(function(a){b("FBLogger")("www_livestreaming").info("SrcNodeId: "+c+" -> SinkNodeId: "+a.sink().getId())})})};return a}();e.exports=a}),null);
__d("StreamingPipelineBuilder",["FBLogger","StreamingPipeline"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=new(b("StreamingPipeline"))(a)}var c=a.prototype;c.getPipeline=function(){return this.$1};c.build=function(){this.$1.finalize();return this.$1};c.addMediaSource=function(a){var b;for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=(b=this.$1).addNode.apply(b,[a].concat(d));this.onMediaSourceAdded(f)};c.onMediaSourceAdded=function(a){b("FBLogger")("www_livestreaming").mustfix("Subclass must implement onMediaSourceAdded")};c.setServiceBus=function(a){this.$2=a};return a}();e.exports=a}),null);
__d("FBWWWLiveStreamingPipelineBuilder",["FBWWWDashTransportNode","FBWWWStreamingMediaRecorderAdapter","FBWWWStreamingMediaRecorderParserNode","StreamingPipelineBuilder"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b)||this;b.$FBWWWLiveStreamingPipelineBuilder1=c;return b}var d=c.prototype;d.onMediaSourceAdded=function(a){var c=this.getPipeline().addNode(b("FBWWWStreamingMediaRecorderAdapter")),d=this.getPipeline().addNode(b("FBWWWStreamingMediaRecorderParserNode")),e=this.getPipeline().addNode(b("FBWWWDashTransportNode"),this.$FBWWWLiveStreamingPipelineBuilder1.transportConfig);this.getPipeline().connect(a,c);this.getPipeline().connect(c,d);this.getPipeline().connect(d,e)};return c}(b("StreamingPipelineBuilder"));e.exports=a}),null);
__d("SpeedtestHelpers",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){a=a.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(a!=null&&a.length>2&&typeof a[2]==="string"&&a[2].length>0)return a[2];else return""}function b(a,b){b=Math.pow(10,b);return Math.round(a*b)/b}function c(){return window.performance!=null&&window.performance.clearResourceTimings!=null&&window.performance.getEntries!=null}d="The test was unable to complete any network requests. Try selecting a smaller filesize.";e.exports={getHostName:a,precisionRound:b,noRequestsFinishedMessage:d,doesSupportResourceTimings:c}}),null);
__d("UploadSpeedtest",["SpeedtestHelpers","SpeedtestResultsTypedLogger"],(function(a,b,c,d,e,f){__p&&__p();var g=b("SpeedtestHelpers").doesSupportResourceTimings,h=b("SpeedtestHelpers").getHostName,i=b("SpeedtestHelpers").precisionRound;a=function(){"use strict";__p&&__p();function a(a){this.uploadSamples=[],this.options=a,this.uploadControllers=new Set(),this.results={estimatedRateMbps:0,actualTestDuration:0,megabitsTransferred:0,totalRequestsMade:0,url:a.url,averageLatency:0}}var c=a.prototype;c.start=function(){__p&&__p();var a=this;g()&&window.performance.clearResourceTimings();this.uploadControllers=new Set();var b=new window.Uint8Array(this.options.bytesToUpload);for(var c=0;c<this.options.bytesToUpload;c++)b[c]=Math.round(Math.random()*255);this.uploadBlob=new Blob([b],{type:"text/plain"});this.uploadSamples=[];this.results.totalRequestsMade=0;c=this.options.maxConcurrentRequests;for(var b=0;b<c;b++)this.spawnNewUploadTest();this.testTimeout=setTimeout(function(){return a.stop()},this.options.testDuration)};c.spawnNewUploadTest=function(){__p&&__p();var a=this,b=new XMLHttpRequest();this.uploadControllers.add(b);b.open("POST",this.options.url,!0);b.send(this.uploadBlob);b.onload=function(c){c=JSON.parse(b.responseText);a.uploadSamples.push({timeElapsed:c.durationMS,bytesUploaded:c.bytes});a.results.totalRequestsMade++;a.uploadControllers["delete"](b);if(a.results.totalRequestsMade>=a.options.maxTotalRequests){a.stop();return}a.spawnNewUploadTest()}};c.logUploadResults=function(){var a=h(this.options.url);new(b("SpeedtestResultsTypedLogger"))().setTestType("upload").setTestDuration(this.options.testDuration).setNumRequests(this.results.totalRequestsMade).setNumConcurrentRequests(this.options.maxConcurrentRequests).setRequestSize(this.options.bytesToUpload).setCdnHostname(a).setAvgLatency(this.results.averageLatency).setAvgMbps(this.results.estimatedRateMbps).logImmediately()};c.stop=function(){__p&&__p();var a=this;clearTimeout(this.testTimeout);for(var b=this.uploadControllers,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.abort()}var f=0;e=this.uploadSamples.length>0?this.uploadSamples.reduce(function(a,b){f+=b.bytesUploaded/125e3;return a+b.bytesUploaded/125e3/(b.timeElapsed/1e3)},0)/this.uploadSamples.length:0;if(g()){d=window.performance.getEntries().filter(function(b){return b instanceof window.PerformanceResourceTiming&&b.responseStart&&b.requestStart&&b.initiatorType==="xmlhttprequest"&&b.name.includes(a.options.url)}).map(function(a){return a.responseStart-a.requestStart});this.results.averageLatency=Math.round(d.reduce(function(a,b){return a+b},0)/d.length)}this.results.megabitsTransferred=i(f,2);this.results.estimatedRateMbps=e;this.results.actualTestDuration=this.options.testDuration/1e3;this.results.url=this.options.url;this.logUploadResults();this.options.callback!=null&&this.options.callback(this.results)};return a}();e.exports=a}),null);
__d("LiveVideoUploadSpeedtest",["UploadSpeedtest"],(function(a,b,c,d,e,f){"use strict";function a(a,c){var d=a.transportConfig.speedTestConfig;new(b("UploadSpeedtest"))({maxConcurrentRequests:d.maxConcurrentRequests,maxTotalRequests:d.maxTotalRequests,testDuration:d.maxTestDurationMs,bytesToUpload:d.speedTestPayloadSizeBytes,url:d.speedTestUrl,callback:function(a){a=a.estimatedRateMbps*1e6*d.percentOfEstimatedBitrateToUse;var b=a<d.speedTestMinimumBandwidthThreshold?"FAILED":"SUCCESS";c({estimatedUploadBitrate:a,status:b})}}).start()}e.exports={runVideoUploadSpeedTest:a}}),null);
__d("AdaptiveBitrateResolutionAlgorithmDefault",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=30,h=.125,i=100*1e3;function j(a,b){__p&&__p();var c=[],d=!1;if(a!==0&&b!==0){var e=Math.max(a,b),f=Math.min(a,b);d=e*9==f*16}e=[1280,1024,896,640,512,384,256,128];if(d)for(var f=1;f<e.length;++f){d=e[f];var j=d*9/16;d=k(d,j,g,h);c.push({first:d,second:e[f-1]});if(d<i)break}else{j=Math.max(a,b)/8;d=Math.min(a,b)/8;for(var f=e.length-1;f>0;--f){a=j*f;b=d*f;e=k(a,b,g,h);c.push({first:e,second:j*(f+1)});if(e<i)break}}return c}function k(a,b,c,d){return a*b*c*d}a=function(){__p&&__p();function a(a,b,c){c===void 0&&(c=!0),this.$2=[],this.$3=0,this.$4=0,this.$1=c,this.updateInputParams(a,b)}var b=a.prototype;b.getResolution=function(a,b){var c=b.outputVideoWidth,d=b.outputVideoHeight;b=b.requestedVideoFrameRate;if(this.$2.length===0)return{first:c,second:d};a=a;b>0&&(a=a*30/b);a<i&&(a=i);return this.getSize(this.getScalingIndex(a),c,d,this.$3,this.$4)};b.updateInputParams=function(a,b){this.$2=j(a,b),this.$3=a,this.$4=b};b.getSize=function(a,b,c,d,e){if(!this.$1)return{first:b,second:c};a=this.$2[a].second;d=Math.min(d,e)/Math.max(d,e);c>b?(e=a,c=e*d):(c=a,e=c*d);return{first:c,second:e}};b.getScalingIndex=function(a){var b=this.$2.length>0?this.$2.length-1:0;for(var c=0;c<this.$2.length;c++)if(a>this.$2[c].first){b=c;break}return b};return a}();e.exports=a}),null);
__d("ABRMediaStreamConstrainer",["regeneratorRuntime","Promise","AdaptiveBitrateResolutionAlgorithmDefault","StreamingSdkLogLevels"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,b,c){this.$1=a.clone(),this.$2=b,this.$3=c}var c=a.prototype;c.run=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(c,d){__p&&__p();var e,f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){__p&&__p();while(1)switch(n.prev=n.next){case 0:e=a.$4();if(!(e==null)){n.next=4;break}d();return n.abrupt("return");case 4:f=e.getSettings().width;g=e.getSettings().height;h=f/g;i=new(b("AdaptiveBitrateResolutionAlgorithmDefault"))(f,g);j=i.getResolution(a.$2,{outputVideoWidth:f,outputVideoHeight:g,requestedVideoFrameRate:30});k=j.first;l=j.second;if(!(g<=l)){n.next=14;break}a.$3&&a.$3.getInterface().log(b("StreamingSdkLogLevels").DEBUG,"MediaStream is within target constraints at "+f+"x"+g+(" (target: "+k+"x"+l+")"));return n.abrupt("return",c(a.$1));case 14:m=!1;case 15:if(!(m==!1&&l<g)){n.next=22;break}n.next=18;return b("regeneratorRuntime").awrap(a.$5(k,l)["catch"](function(a){return d(a)}));case 18:m=n.sent;m==!1&&(l+=8,k=l*h);n.next=15;break;case 22:if(!(m==!1)){n.next=24;break}return n.abrupt("return",d());case 24:a.$3&&a.$3.getInterface().log(b("StreamingSdkLogLevels").DEBUG,"MediaStream constrained from "+f+"x"+g+" to "+k+"x"+l),c(a.$1);case 26:case"end":return n.stop()}},null,this)}));case 1:case"end":return c.stop()}},null,this)};c.$5=function(a,c){__p&&__p();var d=this;return new(b("Promise"))(function(b,e){__p&&__p();var f=d.$4();if(f==null){e();return!1}var g=a/c;f.applyConstraints({frameRate:{ideal:30},height:{ideal:c},width:{ideal:a}}).then(function(){var a=f.getSettings();a=a.width/a.height;Math.abs(a-g)<.01?b(!0):b(!1)})["catch"](function(){b(!1)})})};c.$4=function(){var a=this.$1.getVideoTracks();return a.length===0?null:a[0]};return a}();e.exports=a}),null);
__d("StreamingMediaSource",["StreamingNode"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("StreamingNode"));e.exports=a}),null);
__d("WWWStreamingMediaSource",["regeneratorRuntime","Promise","ABRMediaStreamConstrainer","MediaRecorder","StreamingMediaSource","StreamingError","StreamingErrorCodes","StreamingSdkLogLevels","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d){b=a.call(this,b)||this;b.$WWWStreamingMediaSource5={};b.$WWWStreamingMediaSource1=d;b.$WWWStreamingMediaSource6=c;return b}var d=c.prototype;d.onInitialize=function(){var a;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:a=this.getServiceBus(),a&&(this.$WWWStreamingMediaSource2=a.getServiceOrNull("media_recorder_session_logger"),this.$WWWStreamingMediaSource3=a.getServiceOrNull("debug_log_engine"));case 2:case"end":return b.stop()}},null,this)};d.onStarted=function(){__p&&__p();var a,c,d;return b("regeneratorRuntime").async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:a=this.$WWWStreamingMediaSource3;a&&this.$WWWStreamingMediaSource6.getTracks().forEach(function(c){a.getInterface().log(b("StreamingSdkLogLevels").DEBUG,c.kind+" track: "+JSON.stringify(babelHelpers["extends"]({},c.getSettings(),{enabled:c.enabled,readyState:c.readyState,muted:c.muted})))});c=this.$WWWStreamingMediaSource1;this.$WWWStreamingMediaSource5={mimeType:c.mediaRecorderConfig.codec,audioBitsPerSecond:c.mediaRecorderConfig.maxAudioBitrate,videoBitsPerSecond:c.mediaRecorderConfig.initialVideoBitrate};e.next=6;return b("regeneratorRuntime").awrap(this.$WWWStreamingMediaSource8());case 6:d=new(b("MediaRecorder"))(this.$WWWStreamingMediaSource6,this.$WWWStreamingMediaSource5),this.$WWWStreamingMediaSource4=d,d.ondataavailable=this.$WWWStreamingMediaSource9.bind(this),d.onerror=this.$WWWStreamingMediaSource10.bind(this),d.start(c.mediaRecorderConfig.chunkSizeInMs),this.$WWWStreamingMediaSource7=Date.now(),this.$WWWStreamingMediaSource11();case 13:case"end":return e.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("nullthrows")(this.$WWWStreamingMediaSource4).resume();case 1:case"end":return a.stop()}},null,this)};d.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:b("nullthrows")(this.$WWWStreamingMediaSource4).pause();case 1:case"end":return a.stop()}},null,this)};d.onStopped=function(){var a=this;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(b,c){a.$WWWStreamingMediaSource12().then(function(){a.$WWWStreamingMediaSource13(),b()})["catch"](function(){a.$WWWStreamingMediaSource13(),c()})}));case 1:case"end":return c.stop()}},null,this)};d.$WWWStreamingMediaSource12=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(b){var c=a.$WWWStreamingMediaSource4;if(c==null){b();return}c.onstop=function(){b()};c.stop()}));case 1:case"end":return c.stop()}},null,this)};d.$WWWStreamingMediaSource13=function(){this.$WWWStreamingMediaSource6.getTracks().forEach(function(a){a.stop()})};d.$WWWStreamingMediaSource8=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",new(b("Promise"))(function(c){var d=a.$WWWStreamingMediaSource3,e=a.$WWWStreamingMediaSource1;if(e.mediaRecorderConfig.enableModifyMediaStreamConstraints){e=new(b("ABRMediaStreamConstrainer"))(a.$WWWStreamingMediaSource6,e.mediaRecorderConfig.initialVideoBitrate,d);e.run().then(function(b){b&&(a.$WWWStreamingMediaSource6=b),c()})["catch"](function(a){d&&d.getInterface().log(b("StreamingSdkLogLevels").WARNING,"ABRConstrainer error: "+a.message),c()})}}));case 1:case"end":return c.stop()}},null,this)};d.$WWWStreamingMediaSource14=function(){var a=this.$WWWStreamingMediaSource6.getVideoTracks();return a.length===0?null:a[0]};d.$WWWStreamingMediaSource11=function(){__p&&__p();var a,b=this.$WWWStreamingMediaSource2;if(!b)return;var c=this.$WWWStreamingMediaSource14();if(c==null)return;c=c.getSettings();b.getInterface().logVideoConfigBitrate(this.$WWWStreamingMediaSource1.mediaRecorderConfig.initialVideoBitrate);b.getInterface().logVideoResolution((a=c.width)!=null?a:0,(a=c.height)!=null?a:0);b.getInterface().logVideoConfigFps((a=c.frameRate)!=null?a:0)};d.$WWWStreamingMediaSource10=function(a){var c=this.getContext();if(c==null)return;c.fireError(new(b("StreamingError"))(b("StreamingErrorCodes").NetworkError,"MediaRecorder encountered an error",a.message,{mediaRecorderOptions:this.$WWWStreamingMediaSource5},a.stack))};d.$WWWStreamingMediaSource9=function(a){__p&&__p();if(a.data){this.$WWWStreamingMediaSource15(a.data);var b=this.$WWWStreamingMediaSource2,c=this.$WWWStreamingMediaSource7;if(!b||c==null)return;var d=Date.now();a=a.data.size*8/((d-c)/1e3);b.getInterface().logVideoOutputBitrate(a);this.$WWWStreamingMediaSource7=d}};d.$WWWStreamingMediaSource15=function(a){var b=this.getOrCreateSrcPad();b&&b.isLinked()&&b.write(a)};return c}(b("StreamingMediaSource"));e.exports=a}),null);
__d("FBWWWLiveStreamingClientImpl",["BaseLiveStreamingClient","FBWWWLiveStreamingPipelineBuilder","LiveVideoUploadSpeedtest","WWWStreamingMediaSource"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("LiveVideoUploadSpeedtest").runVideoUploadSpeedTest;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g){e=new(b("FBWWWLiveStreamingPipelineBuilder"))("pipeline",c);e=a.call(this,c,e,g,d)||this;e.getSessionBuilder().addMediaSource(b("WWWStreamingMediaSource"),f,c);g=e.getSessionBuilder().build();g.initialize();e.setSession(g);return e}var d=c.prototype;d.start=function(){var b=this,c=this.getConfig();g(c,function(d){var e=d.estimatedUploadBitrate;d=d.status;d==="SUCCESS"?c.mediaRecorderConfig.initialVideoBitrate=Math.max(c.mediaRecorderConfig.minVideoBitrate,Math.min(c.mediaRecorderConfig.maxVideoBitrate,e-c.mediaRecorderConfig.maxAudioBitrate)):d==="FAILED";a.prototype.start.call(b)})};return c}(b("BaseLiveStreamingClient"));e.exports=a}),null);
__d("FBWWWLiveStreamingClientBuilder",["invariant","FBWWWLiveStreamingClientImpl","SimpleServiceProvider","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$4=[],this.$1=a}var c=a.prototype;c.build=function(){this.$2!=null||g(0,21124);return new(b("FBWWWLiveStreamingClientImpl"))(this.$1,this.$2,{},b("nullthrows")(this.$3),this.$4)};c.setSessionCallbacks=function(a){this.$2=a;return this};c.setTransportCallbacks=function(a){return this};c.setMediaStream=function(a){this.$3=a;return this};c.addServiceProvider=function(a){this.$4.push(a);return this};c.addService=function(a){this.addServiceProvider(new(b("SimpleServiceProvider"))(a));return this};return a}();e.exports=a}),null);
__d("LiveStreamingConfigBuilder",["invariant","qex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$2=!0,this.$3=2,this.$5=!1,this.$6=3,this.$7=3,this.$8=500,this.$9=1e3,this.$10=1,this.$11=1e4,this.$12=10,this.$13=.125,this.$14=1e5,this.$15=1e5,this.$16="https://edge-star-sjc.xx.fbcdn.net/upload-speed-test",this.$18=1e5,this.$19=4e6,this.$20=1e5,this.$21=64e3,this.$22=1e3,this.$23=!0,this.$1=a,window.MediaRecorder.isTypeSupported("video/webm; codecs=vp9,opus")?this.$17="video/webm; codecs=vp9,opus":window.MediaRecorder.isTypeSupported("video/webm; codecs=vp8,opus")&&(this.$17="video/webm; codecs=vp8,opus")}var c=a.prototype;c.setDashIngestUrl=function(a){this.$4=a;return this};c.setSpeedTestUrl=function(a){this.$16=a;return this};c.populateFromQE=function(){__p&&__p();var a;this.$2=(a=b("qex")._("1283051"))!=null?a:this.$2;this.$22=(a=b("qex")._("1250650"))!=null?a:this.$22;this.$23=(a=b("qex")._("1286824"))!=null?a:this.$23;this.$20=(a=b("qex")._("1271603"))!=null?a:this.$20;this.$21=(a=b("qex")._("1271604"))!=null?a:this.$21;this.$19=(a=b("qex")._("1250649"))!=null?a:this.$19;this.$18=(a=b("qex")._("1271602"))!=null?a:this.$18;this.$6=(a=b("qex")._("1260583"))!=null?a:this.$6;this.$7=(a=b("qex")._("1250648"))!=null?a:this.$7;this.$8=(a=b("qex")._("1250647"))!=null?a:this.$8;this.$10=(a=b("qex")._("1275835"))!=null?a:this.$10;this.$11=(a=b("qex")._("1275834"))!=null?a:this.$11;this.$12=(a=b("qex")._("1250646"))!=null?a:this.$12;this.$12=(a=b("qex")._("1275836"))!=null?a:this.$12;this.$13=(a=b("qex")._("1250646"))!=null?a:this.$13;this.$14=(a=b("qex")._("1290582"))!=null?a:this.$14;this.$15=(a=b("qex")._("1275833"))!=null?a:this.$15;return this};c.build=function(){this.$17!=null&&this.$17!==""||g(0,21178);this.$4!=null&&this.$4!==""||g(0,21179);return{broadcastID:this.$1,enableDebugLogEngine:this.$2,mediaRecorderConfig:{chunkSizeInMs:this.$22,codec:this.$17,enableModifyMediaStreamConstraints:this.$23,initialVideoBitrate:this.$20,maxAudioBitrate:this.$21,maxVideoBitrate:this.$19,minVideoBitrate:this.$18},transportConfig:{backOffFactor:this.$3,dashIngestUri:this.$4,downloadRequestBlobs:!1,errorsAllowedBeforeFailing:this.$6,maxAttempts:this.$7,retryDelayMs:this.$8,speedTestConfig:{maxConcurrentRequests:this.$10,maxTestDurationMs:this.$11,maxTotalRequests:this.$12,percentOfEstimatedBitrateToUse:this.$13,speedTestMinimumBandwidthThreshold:this.$14,speedTestPayloadSizeBytes:this.$15,speedTestUrl:this.$16},statsReportingIntervalMs:this.$9}}};return a}();e.exports=a}),null);
__d("StreamingStatsUtil",["StreamingSDKUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=0,this.$2=0,this.$3=0,this.$4=0,this.$5=!1}var c=a.prototype;c.getAverage=function(){b("StreamingSDKUtils").dcheck(this.$5);return this.$4===0?0:this.$1/this.$4};c.getMax=function(){b("StreamingSDKUtils").dcheck(this.$5);return this.$3};c.getMin=function(){b("StreamingSDKUtils").dcheck(this.$5);return this.$2};c.addSample=function(a){b("StreamingSDKUtils").dcheck(!this.$5),this.$4==0?this.$2=this.$3=a:(this.$2=Math.min(this.$2,a),this.$3=Math.max(this.$3,a)),this.$4+=1,this.$1+=a};c.doneAddingSample=function(){this.$5=!0};return a}();e.exports=a}),null);
__d("BaseEventLogWriter",["regeneratorRuntime","FBLogger","ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return a+","+b};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$BaseEventLogWriter1={},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.logAggregatableEvent=function(c,a,d){this.$BaseEventLogWriter1[g(c,a)]==null?this.$BaseEventLogWriter1[g(c,a)]=d:this.$BaseEventLogWriter2(this.$BaseEventLogWriter1[g(c,a)],d)?(b("FBLogger")("www_livestreaming").warn("extras conflict with existing aggregated logs"),this.getInterface().logEvent(c,a,d)):this.$BaseEventLogWriter1[g(c,a)]=babelHelpers["extends"]({},this.$BaseEventLogWriter1[g(c,a)],d)};d.onUninitialize=function(){__p&&__p();var a=this;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:Object.keys(this.$BaseEventLogWriter1).forEach(function(c){var d="",b="",f=c.split(",");d=f[0];b=f[1];a.getInterface().logEvent(d,b,a.$BaseEventLogWriter1[c])});case 1:case"end":return b.stop()}},null,this)};d.$BaseEventLogWriter2=function(a,b){var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d];if(a[e]!=null&&a[e]!=b[e])return!0}return!1};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("StreamingSdkEngineLogFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_engine_log");e.exports=a}),null);
__d("StreamingSdkEventFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_event");e.exports=a}),null);
__d("StreamingSdkMetadataFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_metadata");e.exports=a}),null);
__d("StreamingSdkSessionSummaryFalcoEvent",["FalcoLoggerInternal"],(function(a,b,c,d,e,f){"use strict";a=b("FalcoLoggerInternal").create("streaming_sdk_session_summary");e.exports=a}),null);
__d("FalcoEventLogWriter",["BaseEventLogWriter","FBLogger","StreamingSdkEngineLogFalcoEvent","StreamingSdkEventFalcoEvent","StreamingSdkMetadataFalcoEvent","StreamingSdkSessionSummaryFalcoEvent","UserAgentData"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a,b){return a[b]||0},h=function(a,b){return a[b]||""};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"log_writer"};d.logEvent=function(a,c,d){__p&&__p();switch(a){case"streaming_sdk_event":this.$FalcoEventLogWriter1(d);break;case"streaming_sdk_metadata":this.$FalcoEventLogWriter2(d);break;case"streaming_sdk_session_summary":this.$FalcoEventLogWriter3(d);break;case"streaming_sdk_engine_log":this.$FalcoEventLogWriter4(d);break;default:b("FBLogger")("www_livestreaming").warn("received unknown event: "+a)}};d.$FalcoEventLogWriter1=function(a){b("StreamingSdkEventFalcoEvent").log(function(){return{broadcast_id:g(a,"broadcast_id"),session_id:g(a,"session_id"),streaming_event:h(a,"streaming_event"),extra:h(a,"extra"),session_clock:g(a,"session_clock")}})};d.$FalcoEventLogWriter2=function(a){b("StreamingSdkMetadataFalcoEvent").log(function(){return{broadcast_id:g(a,"broadcast_id"),product_extra:h(a,"product_extra"),num_audio_tracks:g(a,"num_audio_tracks"),num_video_tracks:g(a,"num_video_tracks"),www_browser:b("UserAgentData").browserName,www_browser_version:b("UserAgentData").browserFullVersion}})};d.$FalcoEventLogWriter3=function(a){b("StreamingSdkSessionSummaryFalcoEvent").log(function(){return{broadcast_id:g(a,"broadcast_id"),session_id:g(a,"session_id"),nqs_min:g(a,"nqs_min"),nqs_max:g(a,"nqs_max"),nqs_avg:g(a,"nqs_avg"),nqs_ms_min:g(a,"nqs_ms_min"),nqs_ms_max:g(a,"nqs_ms_max"),nqs_ms_avg:g(a,"nqs_ms_avg"),tcp_rtt_min:g(a,"tcp_rtt_min"),tcp_rtt_max:g(a,"tcp_rtt_max"),tcp_rtt_avg:g(a,"tcp_rtt_avg"),rtt_ms_min:g(a,"rtt_ms_min"),rtt_ms_max:g(a,"rtt_ms_max"),rtt_ms_avg:g(a,"rtt_ms_avg"),dash_sdms_min:g(a,"dash_sdms_min"),dash_sdms_max:g(a,"dash_sdms_max"),dash_sdms_avg:g(a,"dash_sdms_avg"),dash_sbytes_min:g(a,"dash_sbytes_min"),dash_sbytes_max:g(a,"dash_sbytes_max"),dash_sbytes_avg:g(a,"dash_sbytes_avg"),ovb_min:g(a,"ovb_min"),ovb_max:g(a,"ovb_max"),ovb_avg:g(a,"ovb_avg"),veob_min:g(a,"veob_min"),veob_max:g(a,"veob_max"),veob_avg:g(a,"veob_avg"),ovf_min:g(a,"ovf_min"),ovf_max:g(a,"ovf_max"),ovf_avg:g(a,"ovf_avg"),vef_avg:g(a,"vef_avg"),vef_min:g(a,"vef_min"),vef_max:g(a,"vef_max"),veh_avg:g(a,"veh_avg"),veh_min:g(a,"veh_min"),veh_max:g(a,"veh_max"),vew_avg:g(a,"vew_avg"),vew_min:g(a,"vew_min"),vew_max:g(a,"vew_max"),veib_avg:g(a,"veib_avg"),veib_min:g(a,"veib_min"),veib_max:g(a,"veib_max"),fatal_error:h(a,"fatal_error"),session_duration:g(a,"session_duration")}})};d.$FalcoEventLogWriter4=function(a){b("StreamingSdkEngineLogFalcoEvent").log(function(){return{broadcast_id:g(a,"broadcast_id"),level:g(a,"level"),source_file:h(a,"source_file"),source_line:g(a,"source_line"),message:h(a,"message"),session_clock:g(a,"session_clock")}})};return c}(b("BaseEventLogWriter"));e.exports=a}),null);
__d("LiveStreamingMediaRecorderSessionLogger",["regeneratorRuntime","FBLogger","ServiceImpl","StreamingStatsUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.$LiveStreamingMediaRecorderSessionLogger4=0;d.$LiveStreamingMediaRecorderSessionLogger5=0;d.$LiveStreamingMediaRecorderSessionLogger6=0;d.$LiveStreamingMediaRecorderSessionLogger7=0;d.$LiveStreamingMediaRecorderSessionLogger1=c;d.$LiveStreamingMediaRecorderSessionLogger3=new(b("StreamingStatsUtil"))();return d}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"media_recorder_session_logger"};d.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$LiveStreamingMediaRecorderSessionLogger2=this.getServiceOrNull("log_writer");case 1:case"end":return a.stop()}},null,this)};d.onStopped=function(){__p&&__p();var a,c;return b("regeneratorRuntime").async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:this.$LiveStreamingMediaRecorderSessionLogger3.doneAddingSample();a={vef_avg:this.$LiveStreamingMediaRecorderSessionLogger4,vef_min:this.$LiveStreamingMediaRecorderSessionLogger4,vef_max:this.$LiveStreamingMediaRecorderSessionLogger4,veh_avg:this.$LiveStreamingMediaRecorderSessionLogger7,veh_min:this.$LiveStreamingMediaRecorderSessionLogger7,veh_max:this.$LiveStreamingMediaRecorderSessionLogger7,vew_avg:this.$LiveStreamingMediaRecorderSessionLogger6,vew_min:this.$LiveStreamingMediaRecorderSessionLogger6,vew_max:this.$LiveStreamingMediaRecorderSessionLogger6,veib_avg:this.$LiveStreamingMediaRecorderSessionLogger5,veib_min:this.$LiveStreamingMediaRecorderSessionLogger5,veib_max:this.$LiveStreamingMediaRecorderSessionLogger5,veob_avg:this.$LiveStreamingMediaRecorderSessionLogger3.getAverage(),veob_min:this.$LiveStreamingMediaRecorderSessionLogger3.getMin(),veob_max:this.$LiveStreamingMediaRecorderSessionLogger3.getMax()};c=this.$LiveStreamingMediaRecorderSessionLogger2;if(!(c==null)){d.next=6;break}b("FBLogger")("www_livestreaming").warn("No logWriter");return d.abrupt("return");case 6:c.getInterface().logAggregatableEvent(this.$LiveStreamingMediaRecorderSessionLogger1,"",a);case 7:case"end":return d.stop()}},null,this)};d.logVideoOutputBitrate=function(a){this.$LiveStreamingMediaRecorderSessionLogger3.addSample(a)};d.logVideoResolution=function(a,b){this.$LiveStreamingMediaRecorderSessionLogger6=a,this.$LiveStreamingMediaRecorderSessionLogger7=b};d.logVideoConfigBitrate=function(a){this.$LiveStreamingMediaRecorderSessionLogger5=a};d.logVideoConfigFps=function(a){this.$LiveStreamingMediaRecorderSessionLogger4=a};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("StreamingSessionLogger",["regeneratorRuntime","FBLogger","Random","ServiceImpl"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="fatal_error",h="product_extra",i="num_video_tracks",j="video_tracks_info",k="num_audio_tracks",l="audio_tracks_info",m="streaming_event",n="extra",o="session_id",p="initialized",q="started",r="stopped",s="paused",t="resumed",u="uninitialized",v="error",w="cancelled",x=function(a){if(a==="PRODUCT_EXTRA")return h;if(a==="NUM_VIDEO_TRACKS")return i;if(a==="VIDEO_TRACKS_INFO")return j;if(a==="NUM_AUDIO_TRACKS")return k;return a==="AUDIO_TRACKS_INFO"?l:a};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){__p&&__p();var i;i=a.call(this)||this;i.$SessionLogger2="";i.$SessionLogger9={};i.$SessionLogger12=!1;i.$SessionLogger13=!1;i.$SessionLogger14=!1;i.$SessionLogger1=b("Random").uint32();i.$SessionLogger3=c;i.$SessionLogger4=d;i.$SessionLogger5=e;i.$SessionLogger6=f;i.$SessionLogger7=g;i.$SessionLogger8=h;i.$SessionLogger9[x("PRODUCT_EXTRA")]=h;return i}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"session_logger"};d.isMultiBind=function(){return!1};d.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionLogger13=!0,this.$SessionLogger11=this.getServiceOrNull("session_clock"),this.$SessionLogger10=this.getServiceOrNull("log_writer"),this.$SessionLogger10&&this.$SessionLogger10.getInterface().logEvent(this.$SessionLogger3,"",this.$SessionLogger9),this.logStreamingEvent(p,"");case 5:case"end":return a.stop()}},null,this)};d.onStarted=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$SessionLogger14=!0,this.logStreamingEvent(q,""),this.$SessionLogger15=Date.now();case 3:case"end":return a.stop()}},null,this)};d.onStopped=function(){var a,c;return b("regeneratorRuntime").async(function(b){while(1)switch(b.prev=b.next){case 0:this.logStreamingEvent(r,""),this.$SessionLogger12||this.logSessionSummary(g,""),a=this.$SessionLogger15,a!=null&&(c=Date.now()-a,this.logSessionSummary("session_duration",c.toString()));case 4:case"end":return b.stop()}},null,this)};d.onPaused=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.logStreamingEvent(s,"");case 1:case"end":return a.stop()}},null,this)};d.onResumed=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.logStreamingEvent(t,"");case 1:case"end":return a.stop()}},null,this)};d.onUninitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:!this.$SessionLogger14&&!this.$SessionLogger12&&this.logStreamingEvent(w,""),this.logStreamingEvent(u,"");case 2:case"end":return a.stop()}},null,this)};d.logMetadata=function(a,c){if(this.$SessionLogger13){b("FBLogger")("www_livestreaming").warn("No metadata is allowed after initialization, ignored for key: "+a+", value "+c.toString());return}this.$SessionLogger9[a]=c};d.logStreamingEvent=function(a,c){var d,e=this.$SessionLogger10;if(e==null){b("FBLogger")("www_livestreaming").warn("No logWriter");return}var f=this.$SessionLogger11!=null?this.$SessionLogger11.getInterface().getWallRuntime():null;a=(d={},d[m]=a,d[n]=c,d[o]=this.$SessionLogger1,d[this.$SessionLogger7]=this.$SessionLogger2,d.session_clock=f,d);e.getInterface().logEvent(this.$SessionLogger5,"",a)};d.logSessionSummary=function(a,c){var d,e=this.$SessionLogger10;if(e==null){b("FBLogger")("www_livestreaming").warn("No logWriter");return}a=(d={},d[a]=c,d[o]=this.$SessionLogger1,d[this.$SessionLogger7]=this.$SessionLogger2,d);e.getInterface().logAggregatableEvent(this.$SessionLogger6,"",a)};d.logStreamingError=function(a){a=a.toJsonString();this.logStreamingEvent(v,a);this.$SessionLogger12||(this.logSessionSummary(g,a),this.$SessionLogger12=!0)};d.getSessionId=function(){return this.$SessionLogger1};d.setBaseId=function(a){this.$SessionLogger2=a};d.getBaseId=function(){return this.$SessionLogger2};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("LiveStreamingSessionLogger",["regeneratorRuntime","StreamingSessionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="streaming_sdk_metadata",h="streaming_sdk_session_config",i="streaming_sdk_event",j="broadcast_id",k="video_id",l=function(a){if(a==="BROADCAST_ID")return j;return a==="VIDEO_ID"?k:a};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){return a.call(this,g,h,i,b,j,c)||this}var d=c.prototype;d.onInitialize=function(){__p&&__p();var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:c=this.getServiceOrThrow("broadcast_id_provider").getInterface().getBroadcastId();this.setBaseId(c);this.logMetadata(l("BROADCAST_ID"),this.getBaseId().toString());d.next=5;return b("regeneratorRuntime").awrap(a.prototype.onInitialize.call(this));case 5:case"end":return d.stop()}},null,this)};return c}(b("StreamingSessionLogger"));e.exports=a}),null);
__d("LiveStreamingTransportSessionLogger",["regeneratorRuntime","FBLogger","ServiceImpl","StreamingStatsUtil"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.$LiveStreamingTransportSessionLogger1=c;d.$LiveStreamingTransportSessionLogger3=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger4=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger5=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger6=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger7=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger8=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger9=new(b("StreamingStatsUtil"))();d.$LiveStreamingTransportSessionLogger10=new(b("StreamingStatsUtil"))();return d}var d=c.prototype;d.getInterface=function(){return this};d.getServiceId=function(){return"transport_session_logger"};d.isMultiBind=function(){return!0};d.onInitialize=function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:this.$LiveStreamingTransportSessionLogger2=this.getServiceOrNull("log_writer");case 1:case"end":return a.stop()}},null,this)};d.onStopped=function(){__p&&__p();var a,c,d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.$LiveStreamingTransportSessionLogger3.doneAddingSample();this.$LiveStreamingTransportSessionLogger4.doneAddingSample();this.$LiveStreamingTransportSessionLogger5.doneAddingSample();this.$LiveStreamingTransportSessionLogger6.doneAddingSample();this.$LiveStreamingTransportSessionLogger7.doneAddingSample();this.$LiveStreamingTransportSessionLogger8.doneAddingSample();this.$LiveStreamingTransportSessionLogger9.doneAddingSample();this.$LiveStreamingTransportSessionLogger10.doneAddingSample();a=this.getServiceOrThrow("broadcast_id_provider").getInterface().getBroadcastId();c=this.getServiceOrThrow("session_logger");d={nqs_min:this.$LiveStreamingTransportSessionLogger3.getMin(),nqs_max:this.$LiveStreamingTransportSessionLogger3.getMax(),nqs_avg:this.$LiveStreamingTransportSessionLogger3.getAverage(),nqs_ms_min:this.$LiveStreamingTransportSessionLogger4.getMin(),nqs_ms_max:this.$LiveStreamingTransportSessionLogger4.getMax(),nqs_ms_avg:this.$LiveStreamingTransportSessionLogger4.getAverage(),tcp_rtt_min:this.$LiveStreamingTransportSessionLogger5.getMin(),tcp_rtt_max:this.$LiveStreamingTransportSessionLogger5.getMax(),tcp_rtt_avg:this.$LiveStreamingTransportSessionLogger5.getAverage(),rtt_ms_min:this.$LiveStreamingTransportSessionLogger6.getMin(),rtt_ms_max:this.$LiveStreamingTransportSessionLogger6.getMax(),rtt_ms_avg:this.$LiveStreamingTransportSessionLogger6.getAverage(),dash_sdms_min:this.$LiveStreamingTransportSessionLogger8.getMin(),dash_sdms_max:this.$LiveStreamingTransportSessionLogger8.getMax(),dash_sdms_avg:this.$LiveStreamingTransportSessionLogger8.getAverage(),dash_sbytes_min:this.$LiveStreamingTransportSessionLogger7.getMin(),dash_sbytes_max:this.$LiveStreamingTransportSessionLogger7.getMax(),dash_sbytes_avg:this.$LiveStreamingTransportSessionLogger7.getAverage(),ovb_min:this.$LiveStreamingTransportSessionLogger9.getMin(),ovb_max:this.$LiveStreamingTransportSessionLogger9.getMax(),ovb_avg:this.$LiveStreamingTransportSessionLogger9.getAverage(),ovf_min:this.$LiveStreamingTransportSessionLogger10.getMin(),ovf_max:this.$LiveStreamingTransportSessionLogger10.getMax(),ovf_avg:this.$LiveStreamingTransportSessionLogger10.getAverage(),session_id:c.getInterface().getSessionId(),broadcast_id:a};e=this.$LiveStreamingTransportSessionLogger2;if(!(e==null)){f.next=15;break}b("FBLogger")("www_livestreaming").warn("No logWriter");return f.abrupt("return");case 15:e.getInterface().logAggregatableEvent(this.$LiveStreamingTransportSessionLogger1,"",d);case 16:case"end":return f.stop()}},null,this)};d.logNetworkMeasurements=function(a){a.networkQueueSizeInBits!=null&&this.$LiveStreamingTransportSessionLogger3.addSample(a.networkQueueSizeInBits),a.networkQueueSizeInMs!=null&&this.$LiveStreamingTransportSessionLogger4.addSample(a.networkQueueSizeInMs),a.pingRtt!=null&&this.$LiveStreamingTransportSessionLogger5.addSample(a.pingRtt),a.segmentRtt!=null&&this.$LiveStreamingTransportSessionLogger6.addSample(a.segmentRtt),a.segmentSize!=null&&this.$LiveStreamingTransportSessionLogger7.addSample(a.segmentSize),a.segmentDuration!=null&&this.$LiveStreamingTransportSessionLogger8.addSample(a.segmentDuration),a.observedBitrate!=null&&this.$LiveStreamingTransportSessionLogger9.addSample(a.observedBitrate),a.observedFramerate!=null&&this.$LiveStreamingTransportSessionLogger10.addSample(a.observedFramerate)};return c}(b("ServiceImpl"));e.exports=a}),null);
__d("LiveStreamingSessionLogServiceProvider",["LiveStreamingMediaRecorderSessionLogger","LiveStreamingSessionLogger","LiveStreamingTransportSessionLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="streaming_sdk_session_summary";a=function(){function a(a){this.$1=a}var c=a.prototype;c.provide=function(a){a.addService(new(b("LiveStreamingSessionLogger"))(g,this.$1||"")),a.addService(new(b("LiveStreamingTransportSessionLogger"))(g)),a.addService(new(b("LiveStreamingMediaRecorderSessionLogger"))(g))};return a}();e.exports=a}),null);
__d("LiveProducerTypedLoggerLite",["Banzai","generateLiteTypedLogger"],(function(a,b,c,d,e,f){"use strict";e.exports=b("generateLiteTypedLogger")("logger:LiveProducerLoggerConfig")}),null);
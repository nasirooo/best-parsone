if (self.CavalryLogger) { CavalryLogger.start_js(["CELtj"]); }

__d("BlueBarFocusListener",["CSS","Deferred","Event","TimeSlice","promiseDone"],(function(a,b,c,d,e,f){__p&&__p();var g="f_key",h="f_click",i=null,j=function(){i=null};function k(a){b("CSS").removeClass(a,g),b("CSS").removeClass(a,h)}var l=b("TimeSlice").guard(function(a){i&&i.reject(),i=new(b("Deferred"))(),b("promiseDone")(i.getPromise().then(function(c){k(a),b("CSS").addClass(a,c)}),j,j)},"BlueBarFocusListener focusIn",{propagationType:b("TimeSlice").PropagationType.ORPHAN});function m(){i&&i.resolve(g)}function n(a){i&&i.reject(),b("CSS").removeClass(a,g),b("CSS").addClass(a,h)}function o(a){return function(b){a(b.getTarget())}}a={listen:function(a){if(!a)return;b("Event").listen(a,"focusout",o(k));b("Event").listen(a,"focusin",o(l));b("Event").listen(a,"click",o(n));b("Event").listen(a,"keyup",m)}};e.exports=a}),null);
__d("LoggedInAccountSwitcherTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:LoggedInAccountSwitcherLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBadgeHasCount=function(a){this.$1.badge_has_count=a;return this};c.setBadgeShown=function(a){this.$1.badge_shown=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.setUsersCount=function(a){this.$1.users_count=a;return this};c.setVC=function(a){this.$1.vc=a;return this};return a}();c={badge_has_count:!0,badge_shown:!0,event:!0,surface:!0,users_count:!0,vc:!0};e.exports=a}),null);
__d("XLoggedInAccountSwitcherBlueBarBadgeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logged_in_account_switcher/badge/",{})}),null);
__d("XLoggedInAccountSwitcherBlueBarContentController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logged_in_account_switcher/content/",{})}),null);
__d("XLoginAccountSelectorRemoveAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/login/device-based/async/remove/",{cuid:{type:"String"},flow:{type:"Enum",enumType:1}})}),null);
__d("LoggedInAccountSwitcher",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","Event","LoggedInAccountSwitcherTypedLogger","ServiceWorkerLoginAndLogout","XLoggedInAccountSwitcherBlueBarBadgeController","XLoggedInAccountSwitcherBlueBarContentController","XLoginAccountSelectorRemoveAsyncController","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="logged_in_account_switcher:remove_account",j,k,l,m,n,o;({});var p={shown:!1,has_count:!1};a={initBlueBarSwitcher:function(a,c,d,e,f){k=a,m=c,n=d,o=e,this._initDialog(a,d),this._mousemoveListener=b("Event").listen(k,"mousemove",this._onBlueBarMouseMove.bind(this)),f||b("setImmediate")(this._loadBadge)},_loadBadge:function(){var a=b("XLoggedInAccountSwitcherBlueBarBadgeController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setRelativeTo(k).send()},_onBlueBarMouseMove:function(){this._mousemoveListener.remove(),this._loadDialogContentIfNeeded()},_loadDialogContentIfNeeded:function(){if(!l){l=!0;var a=b("XLoggedInAccountSwitcherBlueBarContentController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setRelativeTo(k).send()}},onBlueBarSwitcherLoad:function(){b("setImmediate")(function(){n.setInnerContent(m.children[0]),b("DOM").empty(m)})},initTile:function(a){a=b("DOMQuery").find(a,"._62l4");a&&this.initElementContainingForm(a,"switch_account")},initRemoveAccountElement:function(a,c,d,e){var f=this,g=b("Arbiter").subscribe(i,function(a,e){e.cuid===d&&(b("DOM").remove(c),g.unsubscribe())});b("Event").listen(a,"click",function(a){a.stopPropagation();j||(j=!0,f._removeUserFromAccountSwitcher(d,e));return!1})},initElementContainingForm:function(a,c){var d=this;b("Event").listen(a,"click",function(e){e.stopPropagation();e.preventDefault();if(!j){e=b("DOMQuery").find(a,"form");e&&(d._logEvent(c,"bluebar"),j=!0,b("Event").fire(e,"submit"),e.submit(),b("ServiceWorkerLoginAndLogout").logout())}})},_initDialog:function(a,c){var d=this;c.subscribe("hide",function(){b("CSS").removeClass(k,"_1dqw"),d._logEvent("close_bluebar_dialog","bluebar"),d._clearBadge()});c.subscribe("show",function(){b("CSS").addClass(k,"_1dqw"),d._clearBadge(),d._hideNux()});b("Event").listen(a,"click",function(){d._logEvent("open_bluebar_dialog","bluebar"),d._loadDialogContentIfNeeded(),c.show()})},_hideNux:function(){o!=null&&o.hide()},_clearBadge:function(){var a=b("DOMQuery").scry(k,"._1dqx")[0];a!=null&&b("DOM").empty(a);p={shown:!1,has_count:!1}},_logEvent:function(a,c){var d=new(b("LoggedInAccountSwitcherTypedLogger"))();c==="bluebar"&&d.setBadgeShown(p.shown);d.setEvent(a).setSurface(c).log()},_removeUserFromAccountSwitcher:function(a,c){this._logEvent("remove_account",c);c=b("XLoginAccountSelectorRemoveAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({cuid:a,flow:"logged_in_account_switcher"}).setMethod("POST").setHandler(function(){j=!1}).send();b("Arbiter").inform(i,{cuid:a})}};e.exports=a}),null);
__d("NotificationEndpointState",["BusinessUserConf","KeyedCallbackManager","RangedCallbackManager","flatMapArray","objectValues","stableStringify"],(function(a,b,c,d,e,f){__p&&__p();var g={AdsUnifiedNavNotificationsPayloadPagelet:"AdsUnifiedNavNotificationsPayloadPagelet",BusinessManagerNotificationsPayloadPagelet:"BusinessManagerNotificationsPayloadPagelet",WebNotificationsPayloadPagelet:"WebNotificationsPayloadPagelet","/notifications/client/ads_unified_nav/":"AdsUnifiedNavNotificationsPayloadPagelet","/notifications/client/business_manager/":"BusinessManagerNotificationsPayloadPagelet","/ajax/notifications/client/get.php":b("BusinessUserConf").businessUserID?"BusinessManagerNotificationsPayloadPagelet":"WebNotificationsPayloadPagelet"};a=function(){"use strict";__p&&__p();a.getInstance=function(b){var c=b.classification!=null?b.classification:"_",d=b.readness!=null?b.readness:"_";c="(c)"+c+"(s)"+d;d=a.$1[b.endpointControllerName];d==null&&(a.$1[b.endpointControllerName]=d={});d[c]==null&&(d[c]=new a(b));return d[c]};a.getAllInstances=function(c){c!=null?c=[c]:c=Object.keys(a.$1);return b("flatMapArray")(c,function(c){c=a.$1[c];if(c==null)return[];else return b("objectValues")(c)})};function a(a){__p&&__p();var c=a.businessUserID,d=a.classification,e=a.endpointControllerName;a=a.readness;this.notifications=new(b("KeyedCallbackManager"))();this.businessUserID=c!=null?c:b("BusinessUserConf").businessUserID;this.classification=d;this.endpointControllerName=e;this.readness=a;c=function(a){a=this.notifications.getResource(a);return a.creation_time};this.order=new(b("RangedCallbackManager"))(c.bind(this),function(a,b){return b-a});this.graphQLPageInfo=null}var c=a.prototype;c.getConfig=function(){return{businessUserID:this.businessUserID,classification:this.classification,endpointControllerName:this.endpointControllerName,readness:this.readness}};c.getHash=function(){return b("stableStringify")(this.getConfig())};c.getRequestParams=function(a){a=Math.max(0,a-this.order.getAllResources().length);return{businessUserID:this.businessUserID,classification:this.classification!=null?this.classification.toLowerCase():void 0,cursor:this.graphQLPageInfo&&this.graphQLPageInfo.end_cursor,filter:this.readness==null?void 0:this.readness==="SEEN_AND_READ"?"read":"unread",readness:this.readness,length:a}};c.getStreamingTransportPageletName=function(){return g[this.endpointControllerName]||this.endpointControllerName};return a}();a.$1={};e.exports=a}),null);
__d("performanceNowNoFallback",["performance"],(function(a,b,c,d,e,f){var g;e.exports=(g||(g=b("performance"))).now?function(){return(g||(g=b("performance"))).now()}:null}),null);
__d("NotificationEagerLoader",["invariant","Promise","Arbiter","AsyncRequest","BigPipe","JewelLogger","NotificationComponentsBootloader","NotificationDataFetchConfig","NotificationEndpointState","NotificationListConfig","once","performanceAbsoluteNow","performanceNowNoFallback"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("JewelLogger").logDataEagerLoad,j=b("JewelLogger").logJsBootload,k=b("NotificationDataFetchConfig").dataEagerFetchTrigger,l=b("NotificationListConfig").jsBootloadTrigger,m=b("NotificationListConfig").numNotificationsPerPage;m=k!=="none"?m:0;var n={hasData:m>0,targetNumToLoad:m,endpointState:a(),payloadPromise:null};function a(){var a={endpointControllerName:"WebNotificationsPayloadPagelet"};return b("NotificationEndpointState").getInstance(a)}function c(a){if(!b("performanceNowNoFallback"))return b("NotificationComponentsBootloader").load().then(function(){});else{j({jewelName:"notifications",eventName:"js_bootload_trigger",trigger:l,timestamp:b("performanceNowNoFallback")()-a,eagerLoadDelayInMs:0});j({jewelName:"notifications",eventName:"js_bootload_start",timestamp:b("performanceNowNoFallback")()});return b("NotificationComponentsBootloader").load().then(function(){j({jewelName:"notifications",eventName:"js_bootload_end",timestamp:b("performanceNowNoFallback")()})})}}function d(a){__p&&__p();b("performanceNowNoFallback")&&(i({jewelName:"notifications",eventName:"data_eager_load_trigger",trigger:k,timestamp:b("performanceNowNoFallback")()-a,eagerLoadDelayInMs:0}),i({jewelName:"notifications",eventName:"data_eager_load_start",timestamp:b("performanceNowNoFallback")()}));a=n.targetNumToLoad;var c=n.endpointState;a=c.getRequestParams(a);var d;switch(c.endpointControllerName){case"WebNotificationsPayloadPagelet":d="/ajax/notifications/client/get.php";break;case"AdsUnifiedNavNotificationsPayloadPagelet":d="/notifications/client/ads_unified_nav/";break;case"BusinessManagerNotificationsPayloadPagelet":d="/notifications/client/business_manager/";break}d!=null||g(0,5504,c.endpointControllerName);c=new(b("AsyncRequest"))(d).setAllowCrossPageTransition(!0).setData(a);a=c.exec().then(function(a){b("performanceNowNoFallback")&&i({jewelName:"notifications",eventName:"data_eager_load_end",timestamp:b("performanceNowNoFallback")()});return a.getPayload()});n.hasData||g(0,5505);return a}function f(a){__p&&__p();return new(b("Promise"))(function(c,d){__p&&__p();b("Arbiter").subscribeOnce(b("BigPipe").Events.init,b("once")(function(e,f){__p&&__p();e=f.arbiter;if(!e){d("No arbiter from BigPipe init event");return}e.subscribeOnce(b("BigPipe").Events.displayed,b("once")(function(e,f){e=f.ts;f=(h||(h=b("performanceAbsoluteNow")))()-e;a(f).then(function(a){return c(a)})["catch"](function(a){return d(a)})}))}))})}l==="bigpipe_display_done"&&f(c);k==="bigpipe_display_done"&&(n.payloadPromise=f(d));e.exports={eagerlyLoadedData:n}}),null);
__d("NotificationSeenState",["NotificationConstants","NotificationUpdates","createObjectFrom","ifRequired","objectValues"],(function(a,b,c,d,e,f){__p&&__p();var g=1,h=2,i=0,j=g,k=3,l=b("NotificationConstants").PayloadSourceType.INITIAL_LOAD,m={SEEN_AND_READ:k,SEEN_BUT_UNREAD:j,UNSEEN_AND_UNREAD:i},n={};b("ifRequired")("NotificationStore",function(a){a=a.getAllForAllEndpoints();a=b("objectValues")(a);var c=p(a);Object.keys(c).forEach(function(a){var b=c[a];n[a]=b})});function o(a){__p&&__p();var c=[],d=[];Object.keys(a).forEach(function(b){__p&&__p();var e=a[b],f=n[b];n[b]=e;if(f===void 0){c.push(b);d.push(b);return}f=f^e;f&g&&c.push(b);f&h&&d.push(b)});c.length&&b("NotificationUpdates").didUpdateSeenState(c);d.length&&b("NotificationUpdates").didUpdateReadState(d)}b("NotificationUpdates").subscribe("update-notifications",function(a,c){__p&&__p();a=c.nodes;if(!a||!a.length)return;c=c.payloadsource;var d=b("NotificationConstants").PayloadSourceType,e=c==d.ENDPOINT;c=a.filter(function(a){a=a.alert_id;return!e||n[a]===void 0});d=p(c);o(d)});function p(a){var b={};a.forEach(function(a){a.seen_state&&(b[a.alert_id]=m[a.seen_state])});return b}b("NotificationUpdates").subscribe("update-seen",function(a,c){__p&&__p();if(!c.seenState)return;var d=[],e={};Object.keys(c.seenState).forEach(function(a){if(!c.seenState||!c.seenState[a]){d.push(a);return}var b=n[a];b!==void 0&&(e[a]=b|g)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,i),e);o(a)});b("NotificationUpdates").subscribe("update-read",function(a,c){__p&&__p();if(!c.readState)return;var d=[],e={};Object.keys(c.readState).forEach(function(a){if(!c.readState)return;var b=c.readState[a];if(b){d.push(a);return}b=n[a];b!==void 0?e[a]=b&~h:c.payloadsource==l&&(e[a]=j)});a=babelHelpers["extends"]({},b("createObjectFrom")(d,k),e);o(a)});function q(a){a=n[a];return a}var r={isRead:function(a){return q(a)===k},isSeen:function(a){return q(a)!==i},getUnseenCount:function(a,b){return r.getUnseenIDs(a,b).length},getUnseenIDs:function(a,b){var c=Object.keys(n).filter(function(a){return n[a]===i});a&&(c=c.filter(function(c){return b&&b[c]===a}));return c},getUnreadCount:function(){return r.getUnreadIDs().length},getUnreadIDs:function(){return Object.keys(n).filter(function(a){return n[a]!==k})},validateFilter:function(a,b){switch(b){case"seen_only":return r.isSeen(a);case"unseen_only":return!r.isSeen(a);case"read_only":return r.isRead(a);case"unread_only":return!r.isRead(a);case"seen_unread_only":return r.isSeen(a)&&!r.isRead(a);default:return!0}}};e.exports=r}),6);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUpdates","NotificationUserActions"],(function(a,b,c,d,e,f){a=function(a,c,d){"use strict";b("Event").listen(a,"click",function(){b("NotificationUserActions").markAllNotificationsAsRead(d)}),b("NotificationUpdates").subscribe("read-state-updated",function(){c&&b("DOM").setContent(c,b("NotificationSeenState").getUnreadCount())})};e.exports=a}),null);
__d("createNotificationSubscriptions",["invariant","Bootloader","JSLogger","NotificationConstants","NotificationUpdates","SubscriptionsHandler","filterNulls"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j=0;function k(){h==null&&(h=b("JSLogger").create("notification_updates"));return h}function l(){for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];b("Bootloader").loadModules(["NotificationSeenState","NotificationStore"],function(){b("NotificationUpdates").handleUpdate.apply(b("NotificationUpdates"),c)},"createNotificationSubscriptions")}function a(a){__p&&__p();var c=a.subscribeToNotificationHides,d=a.subscribeToNotificationReadnessUpdates,e=a.subscribeToNotificationSeenStateUpdates,f=a.subscribeToRealtimeChannelNotifications;return{setup:function(){__p&&__p();j++;if(i==null){var a;i=new(b("SubscriptionsHandler"))();var h=[c(function(a){l(b("NotificationConstants").PayloadSourceType.LIVE_SEND,{hiddenState:a})}),d(function(a){l(b("NotificationConstants").PayloadSourceType.LIVE_SEND,{readState:a})}),e(function(a){l(b("NotificationConstants").PayloadSourceType.LIVE_SEND,{seenState:a})}),f(function(a,c){k().debug("notifications_received",a),a!==null&&l(b("NotificationConstants").PayloadSourceType.LIVE_SEND,{nodes:a,servertime:Date.now()/1e3,endpoint:c})})];(a=i).addSubscriptions.apply(a,b("filterNulls")(h))}var m=!1;return{remove:function(){if(m===!0)return;i!=null||g(0,5521);m=!0;j--;j===0&&(i.release(),i=null)}}}}}e.exports=a}),null);
__d("NotificationSubscriptions",["Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationTokens","createNotificationSubscriptions","createObjectFrom"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){(!a.eligible_buckets||!a.eligible_buckets.includes("PRIORITY_INBOX"))&&(a.eligible_buckets=["PRIORITY_INBOX"].concat(a.eligible_buckets||[]));if(!a.sort_keys){var b=a.creation_time||Date.now()/1e3;a.sort_keys=[""+b,b+"000000"]}return a}e.exports=b("createNotificationSubscriptions")({subscribeToNotificationHides:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notification_hidden"),function(c,d){c=b("NotificationTokens").tokenizeIDs([d.obj.notif_id+""]);d=d.obj.state===1;a(b("createObjectFrom")(c,d))})},subscribeToNotificationReadnessUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_read"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToNotificationSeenStateUpdates:function(a){return b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notifications_seen"),function(c,d){c=b("NotificationTokens").tokenizeIDs(d.obj.alert_ids);d=d.obj.new_state;a(b("createObjectFrom")(c,d))})},subscribeToRealtimeChannelNotifications:function(a){return b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_NOTIFICATION",callback:function(b){a(b?[g(b)]:null)}})}})}),null);
__d("GlobalNotificationSubscriptionsSubscription",["NotificationSubscriptions"],(function(a,b,c,d,e,f){"use strict";e.exports=b("NotificationSubscriptions").setup()}),null);
__d("FacebookWebNotificationsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2916229815068669"};b.getQueryID=function(){return"351037068876206"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("NotificationSync",["invariant","Arbiter","ChannelConstants","CurrentUser","FacebookWebNotificationsQueryWebGraphQLQuery","NotificationConstants","NotificationUpdates","WebGraphQL","WebPixelRatio","ifRequired","objectValues","promiseDone","qex"],(function(a,b,c,d,e,f,g){__p&&__p();var h=0;function i(){var a={endpointControllerName:"WebNotificationsPayloadPagelet"},c;b("ifRequired")("NotificationStore",function(d){c=b("objectValues")(d.getAll(a))});if(c==null)return null;var d=c.map(function(a){return a.creation_time}).filter(Boolean);return d.length===0?null:Math.max.apply(Math,d)}function j(){__p&&__p();var a=i();if(a==null)return;b("promiseDone")(b("WebGraphQL").exec(new(b("FacebookWebNotificationsQueryWebGraphQLQuery"))({environment:b("qex")._("1243439")?"MAIN_SURFACE":"WEB_DESKTOP",is_work_user:b("CurrentUser").isWorkUser(),newer_than:a,scale:b("WebPixelRatio").get(),should_fetch_buckets:!1,should_fetch_sort_keys:!1,should_include_server_time:!1})),function(a){__p&&__p();if(a){a=(a=a)!=null?(a=a.viewer)!=null?(a=a.notifications)!=null?a.edges:a:a:a;a=a&&a.map(function(a){a=a.node;return a}).filter(Boolean);if(a==null)return;a={nodes:a};b("NotificationUpdates").handleUpdate(b("NotificationConstants").PayloadSourceType.SYNC,a)}})}var k=null,l=0;a={setup:function(a){__p&&__p();l++;(h===null||a>h)&&(h=a);k==null&&(k=b("Arbiter").subscribe(b("ChannelConstants").ON_INVALID_HISTORY,j));var c=!1;return{remove:function(){if(c===!0)return;k!=null||g(0,51);c=!0;l--;l===0&&(k.unsubscribe(),k=null)}}}};e.exports=a}),null);
__d("GlobalNotificationSyncSubscription",["InitialServerTime","NotificationSync"],(function(a,b,c,d,e,f){"use strict";e.exports=b("NotificationSync").setup(b("InitialServerTime").serverTime)}),null);
__d("XBrowserPushXOutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/xout/",{})}),null);
__d("XServiceWorkerSessionChangeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/service_workers/session/persist/",{})}),null);
__d("BrowserPushSessionChange.react",["fbt","ix","AsyncRequest","BanzaiLogger","Image.react","ImageBlock.react","LayerFadeOnHide","React","ReloadPage","XBrowserPushDisabledController","XBrowserPushXOutController","XServiceWorkerSessionChangeController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cxMargin","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={dialogShown:!0,spin:!1},d.$1=function(a){if(a)return;d.setState({dialogShown:!1});d.$2("session_keep");a=b("XServiceWorkerSessionChangeController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setData({app_id:d.props.push.appID}).setAllowCrossPageTransition(!0).setHandler(function(a){d.props.onHide()}).send()},d.$3=function(){d.setState({spin:!0});d.$2("session_uninstall");d.$2("xout");var a=b("XBrowserPushXOutController").getURIBuilder().getURI(),c=function(){d.props.push.unregisterPushAndSW(b("XBrowserPushDisabledController"),b("AsyncRequest")).done(function(a){b("ReloadPage").now()})};new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(c).setAllowCrossPageTransition(!0).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){a={event:a,appid:this.props.push.appID,surface:"session_change"};b("BanzaiLogger").log("BrowserPushLoggerConfig",a)};d.componentDidMount=function(){this.$2("session_change_prompt")};d.render=function(){if(!this.state.dialogShown)return null;var a=h("92724");return b("React").jsxs(b("XUIDialog.react"),{shown:!0,behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},onToggle:this.$1,width:445,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:g._("Desktop Notifications Are On")}),b("React").jsx(b("XUIDialogBody.react"),{children:this.state.spin?b("React").jsx(b("XUISpinner.react"),{size:"large"}):b("React").jsxs(b("ImageBlock.react"),{spacing:"medium",children:[b("React").jsx(b("Image.react"),{src:a,alt:g._("Desktop Notifications Are On")}),b("React").jsxs("div",{children:[b("React").jsx("div",{className:"_3-8h",children:b("React").jsx(b("XUIText.react"),{size:"header3",children:g._("When you get a new notification, you'll see it in the corner of your screen.")})}),b("React").jsx("div",{className:"_3-8h",children:b("React").jsx(b("XUIText.react"),{size:"meta1",children:g._("To be sure you get notifications, you'll now stay logged into Facebook on this computer. If you're using a public computer or don't want to stay logged in, click Undo to turn off desktop notifications.")})})]})]})}),b("React").jsxs(b("XUIDialogFooter.react"),{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Undo"),onClick:this.$3}),b("React").jsx(b("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})]})]},"dialog")};return c}(b("React").Component);a.propTypes={onHide:b("prop-types").func.isRequired,push:b("prop-types").object.isRequired};e.exports=a}),null);
__d("MockChromeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=!this.props.image&&b("CurrentUser").isWorkUser(),d=this.props.image?this.props.image:this.props.defaultImage;return b("React").jsxs("section",{className:b("joinClasses")(this.props.className,"_257o"),children:[b("React").jsx("span",{className:"_61kd"}),b("React").jsx(b("Image.react"),{className:(c?"":"_ega")+(c?" _2rk4":""),draggable:!1,src:d}),b("React").jsxs("div",{className:"_egb",children:[b("React").jsx("h3",{children:b("BrowserPushStrings").title}),b("React").jsx("p",{children:a}),b("React").jsx("cite",{children:window.location.hostname})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),defaultImage:b("CurrentUser").isWorkUser()?i("351290"):i("76304")};e.exports=a}),null);
__d("MockEdgeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=h._("Microsoft Edge");return b("React").jsxs("section",{className:b("joinClasses")(this.props.className,"_2eed"),children:[b("React").jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_2eee")+(b("CurrentUser").isWorkUser()?" _3_qv":""),draggable:!1,src:this.props.image}),b("React").jsxs("div",{className:"_2eef",children:[b("React").jsx("h3",{className:"_2eeg",children:b("BrowserPushStrings").title}),b("React").jsx("p",{className:"_2eeh",children:a}),b("React").jsxs("div",{className:"_2eei",children:[c," \xb7 ",window.location.hostname]})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137")};e.exports=a}),null);
__d("MockFirefoxBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","CurrentUser","DOMContainer.react","Image.react","React","isNode","joinClasses"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("isNode")(this.props.message)?b("React").jsx(b("DOMContainer.react"),{children:this.props.message}):this.props.message,c=this.props.isWindows;return b("React").jsx("section",{className:b("joinClasses")(this.props.className,"_g5o"),children:c?this.$1(a):this.$2(a)})};d.$2=function(a){var c;return(c=b("React")).jsxs("div",{className:"_g5p",children:[c.jsx("div",{className:"_g5q",children:c.jsx(b("Image.react"),{draggable:!1,src:i("355144")})}),c.jsxs("div",{className:"_g5r",children:[c.jsx("h3",{children:b("BrowserPushStrings").title}),c.jsx("cite",{children:window.location.hostname}),c.jsx("p",{children:a})]}),c.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image})]})};d.$1=function(a){var c;return(c=b("React")).jsxs("div",{className:"_g5w",children:[c.jsx("h3",{children:b("BrowserPushStrings").title}),c.jsxs("div",{className:"_g5x",children:[c.jsx("span",{className:"_g5z"}),c.jsx("span",{className:"_g7w"})]}),c.jsxs("div",{className:"_g5r",children:[c.jsx(b("Image.react"),{className:(b("CurrentUser").isWorkUser()?"":"_g5u")+(b("CurrentUser").isWorkUser()?" _gcl":""),draggable:!1,src:this.props.image}),b("React").jsxs("div",{className:"_g7x",children:[b("React").jsx("p",{children:a}),b("React").jsx("cite",{children:window.location.hostname})]})]})]})};return c}(b("React").Component);a.defaultProps={message:h._("You have new notifications."),image:b("CurrentUser").isWorkUser()?i("351290"):i("363137"),isWindows:!1};e.exports=a}),null);
__d("MockBrowserNotification.react",["MockChromeBrowserNotification.react","MockEdgeBrowserNotification.react","MockFirefoxBrowserNotification.react","React","UserAgent"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){var c=b("UserAgent").isPlatform("Windows");if(b("UserAgent").isBrowser("Firefox"))return b("React").jsx(b("MockFirefoxBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}));else if(b("UserAgent").isBrowser("Edge"))return b("React").jsx(b("MockEdgeBrowserNotification.react"),babelHelpers["extends"]({},a));return b("React").jsx(b("MockChromeBrowserNotification.react"),babelHelpers["extends"]({},a,{isWindows:c}))}}),null);
__d("NotificationPermissionDummyRequest.react",["fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=[g._("Get Instant Updates From Your Friends")],c=[g._("Turn on browser notifications to stay up-to-date on Facebook.")],d=this.props.promptTitleIndex<a.length?this.props.promptTitleIndex:0,e=this.props.promptBodyIndex<c.length?this.props.promptBodyIndex:0;return b("React").jsxs(b("XUIDialog.react"),{isStrictlyControlled:!0,onHide:this.props.isBinary?function(){}:this.props.onIgnore,shown:!0,width:445,children:[b("React").jsx(b("XUIDialogTitle.react"),{showCloseButton:!this.props.isBinary,children:b("React").jsx("span",{children:a[d]})}),b("React").jsxs(b("XUIDialogBody.react"),{children:[b("React").jsx("br",{}),b("React").jsx("div",{children:c[e]}),b("React").jsx("br",{})]}),b("React").jsxs(b("XUIDialogFooter.react"),{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Not Now"),onClick:this.props.onNotNow,size:"large"}),b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:g._("Ok"),onClick:this.props.onAccept,use:"confirm",size:"large"})]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("NotificationPermissionNotice.react",["cx","fbt","Event","Keys","React","XUIAmbientNUX.react","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=[];a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){var a=this;i.push(b("Event").listen(window,"mousedown",this.props.onHide));i.push(b("Event").listen(window,"keydown",function(c){c.keyCode===b("Keys").ESC&&a.props.onHide()}))};d.componentWillUnmount=function(){while(i.length>0){var a=i.pop();a.remove()}};d.renderLayers=function(){var a=this,c=this.props.shortText?h._("Click the lock to give {browser_name} permission to send you desktop notifications.",[h._param("browser_name",this.props.browserName)]):h._("If you change your mind, click the lock to give {browser_name} permission to send you desktop notifications.",[h._param("browser_name",this.props.browserName)]);return b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.noticeAnchor},shown:!0,position:"below",onCloseButtonClick:this.props.onHide,children:c},"nux")};d.render=function(){return b("React").jsxs("span",{children:[b("React").jsx("span",{ref:"noticeAnchor",className:"_1_i1"}),this.renderLayers()]})};return c}(b("React").Component);a.propTypes={onHide:b("prop-types").func.isRequired,shortText:b("prop-types").bool,browserName:b("prop-types").string.isRequired};e.exports=a}),null);
__d("NotificationPermissionRequest.react",["cx","React","Spotlight.react","prop-types"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("Spotlight.react"),{shown:!0,onHide:this.props.onHide,children:b("React").jsx("div",{className:"_n3"})},"spotlight")};return c}(b("React").Component);a.propTypes={onHide:b("prop-types").func};e.exports=a}),null);
__d("NotificationPermissionRequestWithPreview.react",["cx","fbt","ix","BrowserPushStrings","Image.react","ImageBlock.react","MockBrowserNotification.react","React","Spotlight.react","XUIAmbientNUX.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=function(a){var c,d;return(c=b("React")).jsxs(b("Spotlight.react"),{onHide:a.onHide,shown:a.shown,wash:"xui",children:[c.jsx("span",{ref:function(a){return d=a},className:"_m4w"}),c.jsx("div",{className:"_n3",children:c.jsxs(b("XUIAmbientNUX.react"),{contextRef:function(){return d},shown:a.shown,onCloseButtonClick:a.onHide,position:"below",children:[c.jsx("strong",{children:h._("Almost Done!")}),c.jsx("br",{}),h._("Now, click \"Allow\" to finish activating notifications.")]},"nux")})]})};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={acceptPromptShown:!1,dialogShown:!0,spinnerShown:!1},c.$2=function(a){c.setState({dialogShown:a})},c.$3=function(){c.setState({acceptPromptShown:!c.props.hideSecondStep&&!c.props.showSpinnerWhileRequesting,dialogShown:c.props.showSpinnerWhileRequesting,spinnerShown:!c.props.hideSecondStep&&c.props.showSpinnerWhileRequesting}),c.props.onAccept&&c.props.onAccept(c.$4)},c.$4=function(){c.$1&&c.setState({acceptPromptShown:!1,dialogShown:!1})},c.$5=function(){c.setState({acceptPromptShown:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this.props,c=a.notificationImage;a=a.notificationMessage;c=b("React").jsx(b("MockBrowserNotification.react"),{className:"_m4x",image:c,message:a});a=this.state.spinnerShown?b("React").jsx(b("XUIDialogBody.react"),{className:"_mjv",children:b("React").jsxs(b("ImageBlock.react"),{spacing:"large",children:[b("React").jsx(b("Image.react"),{draggable:!1,src:i("287648"),width:40,height:40,className:"_mjw"}),b("React").jsxs("div",{children:[b("React").jsx("strong",{children:h._("Almost Done!")}),b("React").jsx("p",{className:"_mjx",children:h._("Now, click \"Allow\" to finish activating notifications.")})]})]})}):b("React").jsxs(b("XUIDialogBody.react"),{className:"_mjy",children:[b("React").jsxs(b("ImageBlock.react"),{spacing:"large",children:[b("React").jsx(b("Image.react"),{draggable:!1,src:i("287648"),className:"_mjw"}),b("React").jsx("div",{children:this.props.isWebNotifications?b("BrowserPushStrings").explanation_web_notifications:b("BrowserPushStrings").explanation})]}),c]});c=this.state.spinnerShown?null:b("React").jsxs(b("XUIDialogFooter.react"),{children:[b("React").jsx(b("XUIDialogButton.react"),{action:"cancel",label:h._("Not Now"),onClick:this.props.onClose}),b("React").jsx(b("XUIDialogButton.react"),{action:"button",label:h._("Turn On"),onClick:this.$3,use:"special"})]});return b("React").jsxs("div",{className:"_m4y",children:[b("React").jsxs(b("XUIDialog.react"),{layerHideOnBlur:!1,onToggle:this.$2,shown:this.state.dialogShown,titleID:"notification-permission-title",width:445,children:[b("React").jsx(b("XUIDialogTitle.react"),{showCloseButton:!1,children:b("React").jsx("span",{id:"notification-permission-title",children:b("BrowserPushStrings").turn_on})}),a,c]}),b("React").jsx(j,{shown:this.state.acceptPromptShown,onHide:this.$5})]})};return c}(b("React").Component);e.exports=a}),null);
__d("FBAMetaMegaMenuLogger",["invariant","Bootloader"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){j("MegaMenu_HelpButton_Toggle",{action:a?"open":"close"})}function c(a,b){b?j("HelpTray_Article_Click",{article_id:a,search_term:b}):j("HelpTray_Article_Click",{article_id:a})}function d(a){j("HelpTray_SearchBar_Change",{search_term:a})}function f(a){j("MegaMenu_NotificationBell_Toggle",{action:a?"open":"close"})}function h(a,b){a!==null&&a.match(/(\d+)\:(\d+)/)||g(0,518);a=a.split(":");var c=a[0];a=a[1];j("MegaMenu_Notification_Click",{recepient_id:c,notification_id:a,notifType:b})}function i(a){j("MegaMenu_NotificationBell_Show",{unseen_notification_count:a.toString()})}function j(a,c){b("Bootloader").loadModules(["FBAMetaLoggerWWW"],function(b){b=b.META_LOGGER;b.logEvent(a,c)},"FBAMetaMegaMenuLogger")}e.exports={logHelpTrayToggle:a,logHelpTrayArticleClick:c,logHelpTrayPerformSearch:d,logMegaMenuNotificationBellToggle:f,logMegaMenuNotificationClick:h,logMegaMenuNotificationBellShown:i}}),null);
__d("ModalMask",["DOM"],(function(a,b,c,d,e,f){var g=null,h=0;a={show:function(){h++,g||(g=b("DOM").create("div",{id:"modalMaskOverlay"}),b("DOM").appendContent(document.body,g))},hide:function(){h&&(h--,!h&&g&&(b("DOM").remove(g),g=null))},getNode:function(){return g}};e.exports=a}),null);
__d("BootloadOnInteraction",["Event","JSResource","emptyFunction"],(function(a,b,c,d,e,f){a={mount:function(a,c,d,e){d===void 0&&(d=b("emptyFunction"));e===void 0&&(e=b("emptyFunction"));var f=[b("Event").listen(a,"mouseover",g),b("Event").listen(a,"focus",g)];function g(){f.forEach(function(a){return a.remove()}),e(),b("JSResource").loadAll(c,d)}}};e.exports=a}),null);
__d("MercuryJewelBootloadModules",["BootloadOnInteraction","JSResource","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=[(a=b("JSResource"))("MercuryJewel").__setRef("MercuryJewelBootloadModules"),a("MercuryThreadInformer").__setRef("MercuryJewelBootloadModules"),a("MessengerState.bs").__setRef("MercuryJewelBootloadModules"),a("Toggler").__setRef("MercuryJewelBootloadModules"),a("MessengerGraphQLThreadlistFetcher.bs").__setRef("MercuryJewelBootloadModules"),a("MercuryServerRequests").__setRef("MercuryJewelBootloadModules"),a("MercuryJewelUnreadCount.bs").__setRef("MercuryJewelBootloadModules")];function i(a,b){g=g||new a(b,b.bootload_args)}function j(a,b){i(a,b),b.inform("opened")}c={mount:function(a,c){c===void 0&&(c=b("emptyFunction"));var d=a.getButton();b("BootloadOnInteraction").mount(d,h,function(b){j(b,a)},function(){c()})},load:function(a){b("JSResource").loadAll(h,function(b){j(b,a)})},loadModules:function(a){b("JSResource").loadAll(h,function(b){i(b,a)})}};e.exports=c}),null);
__d("CrossWindowEventEmitter",["CacheStorage","EventEmitter","FBJSON"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this)||this;d.$CrossWindowEventEmitter2=c;d.$CrossWindowEventEmitter1=new(b("CacheStorage"))("localstorage",c+":");d.$CrossWindowEventEmitter1.addValueChangeCallback(function(c,e,f){e=c.split(":")[1];try{c=b("FBJSON").parse(f)}catch(a){c=void 0}if(c&&c.__v){(f=a.prototype.emit).call.apply(f,[babelHelpers.assertThisInitialized(d),e].concat(c.__v))}});return d}var d=c.prototype;d.emit=function(b){var c;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];this.emitRemote.apply(this,[b].concat(e));(c=a.prototype.emit).call.apply(c,[this,b].concat(e))};d.emitRemote=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.$CrossWindowEventEmitter1.set(a,c)};return c}(b("EventEmitter"));e.exports=a}),null);
__d("XBrowserPushDummyPromptActionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/dummyprompt/action/",{})}),null);
__d("XBrowserWebNotificationsEnableController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/web_notifications/enable/",{})}),null);
__d("BrowserPushDirectPromptInstaller",["Promise","Arbiter","AsyncRequest","BanzaiLogger","Bootloader","BrowserPushSessionChange.react","CrossWindowEventEmitter","DOM","NotificationPermissionDummyRequest.react","NotificationPermissionNotice.react","NotificationPermissionRequest.react","NotificationPermissionRequestWithPreview.react","PushRegistration","QE2Logger","React","ReactDOM","XBrowserPushDisabledController","XBrowserPushDummyPromptActionController","XBrowserPushXOutController","XBrowserWebNotificationsEnableController","XPushRegisterServiceWorkerController","incognito","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=window.Notification,h=new(b("CrossWindowEventEmitter"))("BrowserPushInstall"),i={},j,k=!1;function l(a,c,d){d===void 0&&(d="prompt");a=babelHelpers["extends"]({event:a,appid:c,surface:d},i);b("BanzaiLogger").log("BrowserPushLoggerConfig",a)}function m(){i.xout_count===0&&j&&b("QE2Logger").logExposureForUser(j)}function n(a){var c=b("XBrowserPushXOutController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();l("xout",a)}function o(a){var c=b("XBrowserWebNotificationsEnableController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").send();b("Arbiter").inform("WebNotifications/enabled");h.emitRemote("complete");b("Bootloader").loadModules(["WebNotificationsPresenter"],function(b){b.init(a.toString())},"BrowserPushDirectPromptInstaller")}function p(a){k||(k=!0,b("ReactDOM").unmountComponentAtNode(a))}function q(a,c){var d=b("DOM").insertBefore(a,b("DOM").create("span"));d=d.pop();b("ReactDOM").render(b("React").jsx(b("BrowserPushSessionChange.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(a)},push:c}),d)}function r(a,c,d,e,f){var g=b("PushRegistration").get(a,c);l("turn_on",c);return g.registerPushWithFinishedCallBack(b("XPushRegisterServiceWorkerController"),b("AsyncRequest"),function(){q(d,g)},function(){b("Arbiter").inform("BrowserPushInstall/installed")},f).then(function(){p(d),l("install",c)})["catch"](function(a){p(d),b("PushRegistration").pushPermissionIsDenied()?(b("ReactDOM").render(b("React").jsx(b("NotificationPermissionNotice.react"),{onHide:function(){b("ReactDOM").unmountComponentAtNode(d)},browserName:e}),d),l("deny",c)):l("install_ignore",c),n(c)})}a={setLogExtraData:function(a){i=a},setQEUniverseName:function(a){j=a},requestThenInstallWebNotifications:function(a,b,c,d,e,f){m(),this._showRequestPermissions({appID:a,baseElement:b,browserName:c,hasEnoughFriendsToRequestPush:d,sampleNotificationAvatarURI:f,sampleNotificationMessage:e,showSpinnerWhileRequesting:!0,isWebNotifications:!0,onAcceptCallback:this._getOnWebNotificationsDialogAccept({appID:a,callback:function(c){c==="granted"?(l("install",a),h.emitRemote("complete"),p(b),o(a)):(l("deny",a),n(a))}})})},requestThenInstallPush:function(a,c,d,e,f,g,h,i,j,k,l,n,o){__p&&__p();var p=this,s=b("PushRegistration").get(a,c);e=s.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!g,function(){q(d,s)},i);b("Promise").all([e,b("incognito")()]).then(function(e){var g=e[0];e=e[1];if(g||e)return;m();b("PushRegistration").pushPermissionIsPending()?p._showRequestPermissions({appID:c,baseElement:d,hasEnoughFriendsToRequestPush:j,isWebNotifications:!1,onAcceptCallback:p._getOnPushNotificationsAccept({appID:c,baseElement:d,browserName:h,path:a,workerIsForPushOnly:i}),sampleNotificationAvatarURI:l,sampleNotificationMessage:k,showSpinnerWhileRequesting:n,wasXOuted:f,hideSecondStep:o}):!f&&b("PushRegistration").pushPermissionIsOn()&&r(a,c,d,h,i)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&m()})},installPush:function(a,c,d,e,f,g,h,i,j,k,n,o){__p&&__p();var s=this;k===void 0&&(k="default");n===void 0&&(n=0);o===void 0&&(o=0);var t=typeof k==="string"&&k!=="default",u=b("PushRegistration").get(a,c);e=u.isPushRegistered(e,b("XPushRegisterServiceWorkerController"),b("XBrowserPushDisabledController"),b("AsyncRequest"),!!g,function(){q(d,u)},i);b("Promise").all([e,b("incognito")()]).then(function(e){__p&&__p();var g=e[0];e=e[1];if(g||e)return;m();if(b("PushRegistration").pushPermissionIsPending()){if(!j||f)return;b("QE2Logger").logExposureForUser("chrome_push_custom_prompt_experiments");t?(b("ReactDOM").render(b("React").jsx(b("NotificationPermissionDummyRequest.react"),{promptTitleIndex:n,promptBodyIndex:o,onNotNow:function(){s._recordUserDummyPromptAction("dummy_prompt_not_now",c),p(d)},onAccept:function(){s._recordUserDummyPromptAction("dummy_prompt_accept",c),s._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:h,workerIsForPushOnly:i})},onIgnore:function(){s._recordUserDummyPromptAction("dummy_prompt_dismissed",c),p(d)},isBinary:k==="binary"}),d),l("dummy_prompt_request",c,"dummy_prompt")):s._renderDefaultPushRequest({path:a,appID:c,baseElement:d,browserName:h,workerIsForPushOnly:i})}else f||r(a,c,d,h,i)})["catch"](function(){b("PushRegistration").pushPermissionIsDenied()&&m()})},_recordUserDummyPromptAction:function(a,c){l(a,c,"dummy_prompt");c=b("XBrowserPushDummyPromptActionController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({user_action:a}).setMethod("POST").send()},_renderDefaultPushRequest:function(a){var c=a.path,d=a.appID,e=a.baseElement,f=a.browserName;a=a.workerIsForPushOnly;b("ReactDOM").render(b("React").jsx(b("NotificationPermissionRequest.react"),{onHide:function(){p(e)}}),e);r(c,d,e,f,a)},_showRequestPermissions:function(a){var c=a.appID,d=a.baseElement,e=a.hasEnoughFriendsToRequestPush,f=a.isWebNotifications,g=a.onAcceptCallback,i=a.sampleNotificationAvatarURI,j=a.sampleNotificationMessage,k=a.showSpinnerWhileRequesting,m=a.wasXOuted;a=a.hideSecondStep;h.once("complete",function(a){p(d),l("twostep_suppressed",c)});if(!e||m)return;l("twostep_request",c);b("ReactDOM").render(b("React").jsx(b("NotificationPermissionRequestWithPreview.react"),{isWebNotifications:f,notificationImage:i||void 0,notificationMessage:j||void 0,onAccept:g,onClose:function(){l("twostep_notnow",c),h.emitRemote("complete"),n(c),p(d)},showSpinnerWhileRequesting:k,hideSecondStep:a}),d)},_getOnPushNotificationsAccept:function(a){var c=a.appID,d=a.baseElement,e=a.browserName,f=a.callback,g=a.path,i=a.workerIsForPushOnly;return function(){l("twostep_accept",c),h.emitRemote("complete"),b("promiseDone")(r(g,c,d,e,i).then(f,f))}},_getOnWebNotificationsDialogAccept:function(a){var b=this,c=a.appID,d=a.callback;return function(){l("twostep_accept",c),b._requestWebNotificationsFromBrowser(c,d)}},_requestWebNotificationsFromBrowser:function(a,b){l("turn_on",a),g.requestPermission(b)}};e.exports=a}),null);
__d("XBrowserPushMuteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/mute/",{appid:{type:"Int",required:!0},push_endpoint:{type:"String",required:!0},surface:{type:"Enum",required:!0,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("BrowserPushMuteOptionsLink",["fbt","regeneratorRuntime","AsyncRequest","PushRegistration","React","ReactDOM","XBrowserPushMuteController","promiseDone"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a,c,d){c=b("PushRegistration").get(c,d);b("promiseDone")(c.getPushSubscription(),function(c){if(c){c=b("XBrowserPushMuteController").getURIBuilder().setEnum("surface","jewel").setString("push_endpoint",c.endpoint).setInt("appid",d).getURI();new(b("AsyncRequest"))().setURI(c).setRelativeTo(a).send()}})}a={showMuteOptions:function(a,c,d){__p&&__p();var e,f;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:e=b("PushRegistration").get(c,d);i.prev=1;i.next=4;return b("regeneratorRuntime").awrap(e.getPushSubscription());case 4:f=i.sent;i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),f=null;case 10:if(!(!b("PushRegistration").pushPermissionIsOn()||!f)){i.next=12;break}return i.abrupt("return");case 12:b("ReactDOM").render(b("React").jsx("a",{href:"#",onClick:function(){h(a,c,d)},children:g._("Mute")}),a);case 13:case"end":return i.stop()}},null,this,[[1,7]])}};e.exports=a}),null);
__d("NotificationJewelFunnelLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={FUNNEL_LOGGING_NAME:"WWW_NOTIFICATION_FUNNEL",FUNNEL_LOGGING_EVENT:{FETCH_NOTIFICATIONS:"fetch_notifications",OPEN_JEWEL:"open_jewel",CLOSE_JEWEL:"close_jewel",MOUSE_OVER_ON_JEWEL:"mouse_over_on_jewel",SCROLL_TO_FETCH:"scroll_to_fetch",FETCH_NEXT_SET:"fetch_next_set",CLEAR_BADGE_COUNT:"clear_badge_count"}}}),null);
__d("ViewasChromeBar",["csx","cx","Arbiter","AsyncRequest","CSS","DOM","Event","Focus","ModalMask","PageTransitionsRegistrar","Parent"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i="ViewasChromeBar/initialized",j=null,k=!1;function l(a){b("Arbiter").subscribe(i,a)}function m(a){b("CSS").addClass(a,"_7g7");a=b("DOM").find(a,"._7g0");b("Focus").set(b("DOM").find(a,".textInput"))}a={initChromeBar:function(a){if(k)return;j=a;k=!0;b("Arbiter").inform(i,null,"state")},update:function(a,c){l(function(){b("DOM").setContent(j,a),c&&new(b("AsyncRequest"))("/ajax/privacy/glasgow/viewas_bar_flyout_open").send()})},registerSpecificModeOnClick:function(a){b("Event").listen(a,"click",function(){var c=b("Parent").bySelector(a,"._7f-");c instanceof HTMLElement&&m(c)})},registerFlyoutModalMask:function(){b("ModalMask").show(),b("PageTransitionsRegistrar").registerHandler(b("ModalMask").hide,10)}};e.exports=a}),null);
__d("XUIBadge",["cx","invariant","CSS","DOM","formatNumber"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(a){return parseInt(a,10)===a}a=function(){"use strict";__p&&__p();function a(a){this.target=a.target,this.count=a.count,this.maxcount=a.maxcount}var c=a.prototype;c.getCount=function(){return this.count};c.setCount=function(a){i(a)||h(0,186),a>=0||h(0,3502),this.count=a,b("CSS").conditionClass(this.target,"hidden_elem",this.count===0),b("DOM").setContent(this.target,b("formatNumber").withMaxLimit(a,this.maxcount)),a>this.maxcount?b("CSS").addClass(this.target,"_5ugi"):b("CSS").removeClass(this.target,"_5ugi")};c.setLegacyContent=function(a){typeof a==="string"?(b("CSS").conditionClass(this.target,"hidden_elem",a==0),b("DOM").setContent(this.target,a),b("CSS").removeClass(this.target,"_5ugi")):this.setCount(a)};c.increment=function(){this.setCount(this.getCount()+1)};return a}();e.exports=a}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["VM0xU"]); }

__d("MessengerDotComPromotionActionURL",[],(function(a,b,c,d,e,f){e.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("SRDevModeParams",[],(function(a,b,c,d,e,f){e.exports={items:["__spin_r","__spin_b","__spin_t","__spin_dev_mhenv"],escapeParam:"reset_spin"}}),null);
__d("MessengerBusinessPersistentMenuUpdateSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessengerBusinessPersistentMenuUpdateSubscribeData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"messenger_business_persistent_menu_update_subscribe",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerBusinessPersistentMenuResult",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"menu_items",storageKey:null,args:null,concreteType:"MessengerNonNestedCTAShareData",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"action_link",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"action_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_disabled",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"is_mutable_by_server",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"logging_token",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"page_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"title",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"fallback_url",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"messenger_extensions",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"webview_height_ratio",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerBusinessPersistentMenuUpdateSubscription",type:"Subscription",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"MessengerBusinessPersistentMenuUpdateSubscription",argumentDefinitions:a,selections:b},params:{operationKind:"subscription",name:"MessengerBusinessPersistentMenuUpdateSubscription",id:"2907290672616359",text:null,metadata:{subscriptionName:"messenger_business_persistent_menu_update_subscribe"}}}}();e.exports=a}),null);
__d("MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"pageID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c={kind:"InlineFragment",type:"Page",selections:[{kind:"LinkedField",alias:null,name:"gk_check",storageKey:'gk_check(gk_name:"custom_user_settings")',args:[{kind:"Literal",name:"gk_name",value:"custom_user_settings"}],concreteType:"EntGKCheck",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"passes_gk",args:null,storageKey:null}]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c]}]},params:{operationKind:"query",name:"MessengerBusinessPersistentMenuUpdateSubscriptionHandlerCustomUserSettingGKQuery",id:"2587770514615695",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MessengerMuteUtils.bs",["fbt","formatDate","DateStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();if(a>0)if(a<86401)return;else{var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("Off until {time} tomorrow",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("Off until {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("Off until {time} {weekday name}",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}else if(a===-1)return g._("Off indefinitely");else return}function c(a,b){if(a)if(b)return g._("Unmute notifications");else return g._("Mute notifications");else if(b)return g._("Unmute conversation");else return g._("Mute conversation")}f.mutedUntilLabel=a;f.muteActionLabel=c}),null);
__d("EmojiDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationDispatcher"))({strict:!1})}),null);
__d("EmojiActions",["EmojiDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("keyMirror")({CHANGE_CURRENT_CATEGORY:null,CHANGE_EMOJI_COLOR:null,EMOJI_COLOR_READY:null,GET_EMOJI_COLOR:null,TRAY_DATA_READY:null,UPDATE_TRAY_DATA:null});var g={Types:a,loadedTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.TRAY_DATA_READY})},updateTrayData:function(){b("EmojiDispatcher").dispatch({type:g.Types.UPDATE_TRAY_DATA})},changeEmojiColor:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_EMOJI_COLOR,color:a})},changeCurrentCategory:function(a){b("EmojiDispatcher").dispatch({type:g.Types.CHANGE_CURRENT_CATEGORY,currentCategory:a})},getEmojiColor:function(){b("EmojiDispatcher").dispatch({type:g.Types.GET_EMOJI_COLOR})},emojiColorReady:function(a){b("EmojiDispatcher").dispatch({type:g.Types.EMOJI_COLOR_READY,color:a})}};e.exports=g}),null);
__d("EmojiServerRequests",["Promise","AsyncRequest","XMessagingGetEmojiRecentUsageController"],(function(a,b,c,d,e,f){"use strict";a={fetchTrayData:function(a){return g(b("XMessagingGetEmojiRecentUsageController").getURIBuilder().getURI(),a,!0)}};function g(a,c,d){return new(b("Promise"))(function(c,e){return new(b("AsyncRequest"))(a).setHandler(function(a){return c(a.getPayload())}).setAllowCrossPageTransition(d).send()}).then(c)}e.exports=a}),null);
__d("EmojiState",["fbt","AsyncRequest","EmojiActions","EmojiServerRequests","MessengerSupportedEmojiUtils","XMessagingGetEmojiColorPrefController","XMessagingSetEmojiColorPrefController","promiseDone","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j;a={onTrayDataReady:function(a){j||(j=b("EmojiServerRequests").fetchTrayData(function(a){i=a})),b("promiseDone")(j,function(){a(),b("EmojiActions").loadedTrayData()})},getEmojiColor:function(){var a=b("XMessagingGetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(a).setMethod("POST").setAllowCrossPageTransition(!0).setHandler(function(a){b("EmojiActions").emojiColorReady(a.payload)}).send()},changeEmojiColor:function(a){var c=b("XMessagingSetEmojiColorPrefController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setMethod("POST").setData({color:a}).send()},addMRUCategory:function(){if(i){var a=i.map(function(a){return b("MessengerSupportedEmojiUtils").getSupportedEmojiCodesArray(a)}).filter(function(a){return!!a});h={name:g._("Recently Sent"),emojis:a,icon:[128340]};b("setImmediate")(b("EmojiActions").updateTrayData);i=null}},_addRecentlyUsedEmoji:function(a){__p&&__p();var c=h&&h.emojis;if(!c)return;var d=function(b){var d=a[b];for(var b=0;b<c.length;++b)if(c[b].length==d.length&&c[b].every(function(a,b){return a===d[b]})){c.splice(b,1);break}c.unshift(d)};for(var e=0;e<a.length;++e)d(e);b("EmojiActions").updateTrayData()},getMRUCategory:function(){h||this.addMRUCategory();return h},updateRecentlyUsed:function(a){if(!h){this.addMRUCategory();return}this._addRecentlyUsedEmoji(a)}};e.exports=a}),null);
__d("EmojiStateStore",["EmojiActions","EmojiDispatcher","EmojiState","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("EmojiDispatcher"))||this;b("EmojiState").getEmojiColor();c.$EmojiStateStore2=!1;return c}var d=c.prototype;d.getState=function(){var a=b("EmojiState").getMRUCategory();return{currentCategory:this.$EmojiStateStore4,emojiColor:this.$EmojiStateStore3,mruCategory:[a],threadID:this.$EmojiStateStore1,trayDataReady:this.$EmojiStateStore2}};d.__onDispatch=function(a){__p&&__p();var c=b("EmojiActions").Types;switch(a.type){case c.GET_EMOJI_COLOR:b("EmojiState").getEmojiColor();break;case c.EMOJI_COLOR_READY:this.$EmojiStateStore3=a.color;break;case c.CHANGE_EMOJI_COLOR:b("EmojiState").changeEmojiColor(a.color);this.$EmojiStateStore3=a.color;break;case c.CHANGE_CURRENT_CATEGORY:this.$EmojiStateStore4=a.currentCategory;break;case c.UPDATE_TRAY_DATA:break;case c.TRAY_DATA_READY:this.$EmojiStateStore2=!0;break}this.__emitChange()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCoWatchEventTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MNCoWatchEventLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCallID=function(a){this.$1.call_id=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsCowatchActive=function(a){this.$1.is_cowatch_active=a;return this};c.setIsFullscreenMode=function(a){this.$1.is_fullscreen_mode=a;return this};c.setIsJoinPayloadReceivedWhileBackgrounded=function(a){this.$1.is_join_payload_received_while_backgrounded=a;return this};c.setIsRtcActive=function(a){this.$1.is_rtc_active=a;return this};c.setJoinPayloadReceivedCallType=function(a){this.$1.join_payload_received_call_type=a;return this};c.setJoinPayloadReceivedCallUI=function(a){this.$1.join_payload_received_call_ui=a;return this};c.setJoinPayloadReceivedSource=function(a){this.$1.join_payload_received_source=a;return this};c.setLayoutMode=function(a){this.$1.layout_mode=a;return this};c.setLivingRoomID=function(a){this.$1.living_room_id=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setOrientation=function(a){this.$1.orientation=a;return this};c.setPigeonReservedKeywordLogType=function(a){this.$1.pigeon_reserved_keyword_log_type=a;return this};c.setPigeonReservedKeywordModule=function(a){this.$1.pigeon_reserved_keyword_module=a;return this};c.setRadioType=function(a){this.$1.radio_type=a;return this};c.setReactionType=function(a){this.$1.reaction_type=a;return this};c.setRtcCowatchEligibleParticipantCount=function(a){this.$1.rtc_cowatch_eligible_participant_count=a;return this};c.setRtcParticipantCount=function(a){this.$1.rtc_participant_count=a;return this};c.setRtcTabFailureReason=function(a){this.$1.rtc_tab_failure_reason=a;return this};c.setSamplingFrequency=function(a){this.$1.sampling_frequency=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setVideoTab=function(a){this.$1.video_tab=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={call_id:!0,entry_point:!0,error_code:!0,event:!0,is_cowatch_active:!0,is_fullscreen_mode:!0,is_join_payload_received_while_backgrounded:!0,is_rtc_active:!0,join_payload_received_call_type:!0,join_payload_received_call_ui:!0,join_payload_received_source:!0,layout_mode:!0,living_room_id:!0,name:!0,orientation:!0,pigeon_reserved_keyword_log_type:!0,pigeon_reserved_keyword_module:!0,radio_type:!0,reaction_type:!0,rtc_cowatch_eligible_participant_count:!0,rtc_participant_count:!0,rtc_tab_failure_reason:!0,sampling_frequency:!0,session_id:!0,thread_id:!0,time:!0,video_id:!0,video_tab:!0,weight:!0};e.exports=a}),null);
__d("MeasurePeopleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={time:!0,weight:!0};e.exports=a}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIndex=function(a){this.$1.index=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPayload=function(a){this.$1.payload=a;return this};c.setQrContentType=function(a){this.$1.qr_content_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTitle=function(a){this.$1.title=a;return this};c.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setType=function(a){this.$1.type=a;return this};c.setURL=function(a){this.$1.url=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,time:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setGroupID=function(a){this.$1.group_id=a;return this};c.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={app_id:!0,app_version:!0,event:!0,group_id:!0,hscroll_position:!0,message_id:!0,thread_ids:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkChatSuggestionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatSuggestionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setSuggestionType=function(a){this.$1.suggestion_type=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={app_id:!0,message_id:!0,suggestion_type:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkDoNotDisturbSettingsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOption=function(a){this.$1.option=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,option:!0,source:!0,time:!0,weight:!0};e.exports=a}),null);
__d("ChatBehavior",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","ChatNotificationConstants","mixin"],(function(a,b,c,d,e,f){__p&&__p();var g=b("AvailableList").getWebChatNotification&&b("AvailableList").getWebChatNotification(),h=!1;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.ON_CHANGED="changed",b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.notifiesUserMessages=function(){return g!==b("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION};d.ignoresRemoteTabRaise=function(){return h};return c}(b("mixin")(b("ArbiterMixin")));var i=new a();function j(){i.inform(i.ON_CHANGED)}b("AvailableList").subscribe&&b("AvailableList").subscribe(b("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var a=g,c=b("AvailableList").getWebChatNotification();g=c;a!=c&&j()});b("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(a,b){h=!!b,j()});b("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(a,b){!!b,j()});e.exports=i}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";var g={padding:"30px",textAlign:"center"};a=function(){return b("React").jsx("div",{style:g,children:b("React").jsx(b("XUISpinner.react"),{size:"large"})})};e.exports=a}),null);
__d("ChatPageComposerNullState.react",["cx","fbt","Link.react","MNCommerceCallToActionHandlerMap","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){switch(this.props.cta.action_type){case 1:return this.$1();case 4:default:return this.$2()}};d.$1=function(){return b("MNCommerceCallToActionHandlerMap").getHandler(this.props.cta.action_link).setThreadID(this.props.threadID).setOnClickHook(this.props.onClick).renderForNativeLink(this.props.cta,"_2xh6 _2xh7"+(this.props.disabled?" _5vsu":""))};d.$2=function(){return b("React").jsx(b("Link.react"),{className:"_2xh6 _2xh7"+(this.props.disabled?" _5vsu":""),onClick:this.props.onClick,children:h._("{name}",[h._param("name",this.props.cta.title)])})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("CustomizeThreadThemeUtil",["CurrentUser","MessengerThreadThemesWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={};function a(a){h(a)}function c(a){h(a)}function h(a){__p&&__p();var c=b("CurrentUser").isWorkUser()?"WORKPLACE_VERSION0":"M4_VERSION0_WITH_GKS";g[c]?a(g[c]):b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadThemesWebGraphQLQuery"))({version:c})),function(b){__p&&__p();if(b&&b.messenger_thread_themes&&Array.isArray(b.messenger_thread_themes)){var d=[];b.messenger_thread_themes.forEach(function(a){if(!a.id)return;if(!a.fallback_color)return;if(!a.accessibility_label)return;a={id:a.id,fallback_color:a.fallback_color,accessibility_label:a.accessibility_label,gradient_colors:a.gradient_colors,icon_uri:(a=a==null?void 0:(a=a.icon_asset)==null?void 0:(a=a.image)==null?void 0:a.uri)!=null?a:void 0};d.push(a)});g[c]=d;a(d)}})}e.exports={fetchThemesForChat:a,fetchThemesForMessenger:c}}),null);
__d("MessengerApprovalQueueUtils",["MercuryIDs","MessengerAdminGroupUtils","MessengerParticipants.re","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getApprovalQueueParticipants:function(a,c){__p&&__p();var d=this;if(!a)return;if(b("MessengerAdminGroupUtils").isAdminRequired(a)){var e=a.group_approval_queue&&a.group_approval_queue.map(function(a){return[b("MercuryIDs").getParticipantIDFromUserID(a.requester.id),a]}),f=e&&new Map(e);f&&b("MessengerParticipants.re").getMulti(Array.from(f.keys()),function(a){a=Object.values(a);a=a;c(b("immutable").Map(a.map(function(a){return[a.id,d._constructApprovalRequestInfo(a,f)]})))})}else a.approval_queue_ids&&b("MessengerParticipants.re").getMulti(a.approval_queue_ids,function(a){c(b("immutable").Map(a))})},_constructApprovalRequestInfo:function(a,b){b=b.get(a.id);return{fbid:a.fbid,id:a.id,image_src:a.image_src,is_messenger_user:!!a.is_messenger_user,name:a.name,inviter_id:b&&b.inviter.id,requester_id:b&&b.requester.id,request_source:b&&Number(b.request_source),request_timestamp:b&&b.request_timestamp}}};e.exports=a}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.re","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.re","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.re").make,j=h("86832"),k=h("86833"),l=h("600634");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$5=function(){d.$6(),d.props.promotionID!=null?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),d.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):d.props.primaryActionType==="dialog_url"?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(d.props.primaryActionURI)))},"MessengerNotificationBanner.react"):window.open(d.props.primaryActionURI)):d.props.primaryActionURI!=null?b("goURI")(d.props.primaryActionURI,!0):d.props.primaryActionCallback&&d.props.primaryActionCallback()},d.$2=function(){d.$6(),d.props.promotionID!=null&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID==null&&this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||this.props.promotionID==null||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:b("React").jsxs("div",{className:"_2cij",children:[b("React").jsx(b("Image.react"),{className:"_2cik",onClick:this.$2,src:j}),b("React").jsx(b("Image.react"),{className:"_2cil",src:this.$3()}),this.props.promotionContent," ",this.$4()]})};d.$1=function(){return this.state.bannerClosed};d.$3=function(){return(this.props.primaryActionURI||"").indexOf("/privacy/response")>-1?l:k};d.$4=function(){return b("React").jsx(i,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$5,type:"primary"})};d.$6=function(){this.setState({bannerClosed:!0},function(){b("MessengerSignals.re").resize()})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerRefreshPrompt",["fbt","CurrentUser","MessengerPromotionDataActions","Visibility","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3*60*60,i=1e3*60*60*24*3;a=function(){var a=Date.now();b("setIntervalAcrossTransitions")(function(){var c=b("CurrentUser").isWorkUser()?g._("A new version of Workplace Chat is available."):g._("A new version of Messenger is available.");Date.now()-a>i&&b("Visibility").once(b("Visibility").VISIBLE,function(){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:c,primaryActionTitle:g._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href}),a=Date.now()})},h)};e.exports=a}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler","WorkplaceChatUpsellBanner.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getPromotionData()})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){var a=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return b("React").jsx(b("WorkplaceChatUpsellBanner.react"),{});return a?b("React").jsx(b("MessengerNotificationBanner.react"),{promotionID:a.promotionID,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionType:a.primaryActionType,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,instanceLogData:a.instanceLogData}):null};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerEagerThreadLoader",["MercuryThreadInformer","MessengerConfig","MessengerState.re","Run"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=10,h=b("MessengerConfig").MessageLoadCount,i=!1,j=null;function k(a,c){if(b("MessengerState.re").hasLoadedNMessages(a,c,2))return;b("MessengerState.re").getThreadMessagesRange(a,c,0,h,function(){})}a={subscribe:function(a){__p&&__p();var c=b("MercuryThreadInformer").get();j=c.subscribe("threadlist-updated",function(c,d){if(!i)b("Run").onAfterLoad(function(){d.slice(0,g).concat(b("MessengerState.re").getPinnedThreadlist(a)).map(function(b){k(a,b)})}),i=!0;else if(d.length>0){c=b("MessengerState.re").getThreadMetaNow(a,d[0]);c&&c.unread_count>0&&k(a,d[0])}})},unsubscribe:function(){var a=b("MercuryThreadInformer").get();a.unsubscribe(j);j=null}};e.exports=a}),null);
__d("MessengerComposerActions",["MessengerDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null});a={Types:g,addToken:function(a){b("MessengerDispatcher").dispatch({type:g.ADD_TOKEN,entry:a})},moveDraftToNextThread:function(a){b("MessengerDispatcher").dispatch({type:g.MOVE_DRAFT,threadID:a})},removeToken:function(a){b("MessengerDispatcher").dispatch({type:g.REMOVE_TOKEN,entry:a})},focusComposer:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_COMPOSER})},focusTypeahead:function(){b("MessengerDispatcher").dispatch({type:g.FOCUS_TYPEAHEAD})},exitComposeState:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE})},exitComposeStateAbandonSearch:function(){b("MessengerDispatcher").dispatch({type:g.EXIT_COMPOSE_STATE,abandon_search:!0})}};e.exports=a}),null);
__d("MessengerNonMount",["ChannelConnection","ChannelManager","CurrentUser","MercuryDeliveryState","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreadIDMap","MercuryWorkContextInformation","MessengerActions","MessengerAttributionTagsStore","MessengerBrowserAlerts","MessengerComposerActions","MessengerComposerStore","MessengerDialogs.bs","MessengerEagerThreadLoader","MessengerInitialDataTransformer.bs","MessengerMDotMeReferralStore","MessengerParticipants.bs","MessengerRTCMessageHandler","MessengerSearchActions","MessengerSearchConfirmationDialogReact.bs","MessengerSearchStore","MessengerSettingsStore","MessengerState.bs","MessengerThreadSearchStore","MessengerURIConstants","MessengerURISerializer","MessengerURIStore","MessengerView","MNPlatformTagsDataManager","React","URI","gkx","goURI","PageHooks"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerSearchConfirmationDialogReact.bs").jsComponent;b("PageHooks");b("ChannelManager").startChannelManager();d={initStoresAndListeners:a,dispatchInitialData:c,seedInitialData:k,triggerInitialURI:l};function a(a){i(a),j(a)}function i(a){b("MercuryDeliveryState").getForFBID(a),b("MessengerParticipants.bs"),b("MessengerState.bs"),b("CurrentUser").isWorkUser()&&b("MercuryWorkContextInformation").getForFBID(a),b("MessengerAttributionTagsStore"),b("MessengerComposerStore"),b("MessengerMDotMeReferralStore"),b("MessengerSearchStore").getForFBID(a),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore").getForFBID(a)}function j(a){b("MercurySyncEnvironment").setUp(),b("MessengerBrowserAlerts").init(a),b("MessengerRTCMessageHandler").init(),b("ChannelConnection"),b("gkx")("811069")&&b("MessengerEagerThreadLoader").subscribe(a)}function k(a,c){a=b("MercuryServerPayloadPreprocessor").getForFBID(a);if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);d=d[0];d.message_blocked_ids=c.mercuryPayload.message_blocked_ids;d.message_ignored_ids=c.mercuryPayload.message_ignored_ids;a.handleUpdate(d)}else a.handleUpdate(c.mercuryPayload)}function l(a,c){__p&&__p();a=c.lastReadThreadKey;if(c.graphqlPayload){var d=b("MessengerInitialDataTransformer.bs").transform(c.graphqlPayload);a=d[1]}d=new(g||(g=b("URI")))(window.location.href);var e=b("MessengerURISerializer").deserialize(d);if(e.query){var f=e.masterView===b("MessengerView").MASTER.SEARCH||e.masterView===b("MessengerView").MASTER.SEARCH_MESSAGES,i=e.query;e.query=null;e.masterView=b("MessengerView").MASTER.RECENT;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(h,{term:i,onSearch:function(){f?b("MessengerSearchActions").changeQueryAll(i):b("MessengerSearchActions").changeQuery(i)}})})}b("goURI")(b("MessengerURISerializer").serialize(e),!1,!0);if(d.getPath().match(b("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(d.getPath().match(b("MessengerURIConstants").GALLERY_PATH+"/?$")&&b("gkx")("1185153"))return;if(e.masterView===b("MessengerView").MASTER.PAYMENT)return;b("MessengerActions").changeMDotMeReferral(c.mDotMeReferral,c.mDotMeReferralThreadKey);var j=b("MercuryThreadIDMap").get();e=e.threadKey?j.getClientIDFromServerIDNow(e.threadKey):j.getClientIDFromServerIDNow(a);e?(b("MessengerComposerActions").exitComposeState(),b("MessengerActions").selectThread(e)):d.getPath()==="/"&&b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE);b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(c.messagingSource,c.mDotMeReferralThreadKey&&c.mDotMeReferralThreadKey.toString())}function c(a,b){k(a,b),l(a,b)}e.exports=d}),null);
__d("MessengerComposerButtonLabels",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={QuickCamButtonLabel:g._("Take a picture using quick cam"),VoiceClipButtonLabel:g._("Send a voice clip"),EmojiButtonLabel:g._("Choose an emoji"),StickerButtonLabel:g._("Choose a sticker"),GroupPollingButtonLabel:g._("Create a poll"),ContentSearchButtonLabel:g._("Choose a gif")};e.exports=a}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").jsx(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};return c}(b("React").PureComponent);a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("MessengerURLUploader",["requireCond","cr:988286","Event","MessengerActions","SubscriptionsHandler","URLMatcher","debounce","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.handleInputValueChange=function(a){a=e.$1();a=b("URLMatcher").match(a)||(b("cr:988286")!=null?b("cr:988286").matchTaskNumber(a)||b("cr:988286").matchDiffNumber(a):null);a&&(e.$3!==a&&(e.$3=a,b("MessengerActions").loadingPreview(e.$5,a)))};this.$1=a;this.$4=new(b("SubscriptionsHandler"))();this.$5=d;this.$2=b("debounce")(this.handleInputValueChange,200);this.initInput(c)}var c=a.prototype;c.getMatchedURL=function(){return this.$3};c.initInput=function(a){this.$4.addSubscriptions(b("Event").listen(a,"keyup",this.$2),b("Event").listen(a,"paste",this.$2))};c.setThreadID=function(a){this.$5=a};c.clearShareData=function(){this.$3=null};return a}();e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","requireCond","cr:1008504","AutocompleteSearchSource","AutocompleteStrategy","Bootloader","CompositeDraftDecorator","ContentState","CurrentUser","DebouncedMentionsTextEditor.react","DocumentCompositeMentionsSource","DocumentMentionsSource","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MercuryTimestamp","MessengerActions","MessengerBotMenuButton.react","MessengerComposerInputStore","MessengerConstants","MessengerDomIDs.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","MessengerUserInputAppDispatcher","MessengerUserInputUtils","React","ReactDOM","Run","TypingDetectorController","cr:1272653","cr:1217281","cr:1217282","WorkGalahadChatPrefillMessageEventEmitter","WorkGalahadSettings","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","joinClasses","nullthrows","prop-types","qex","replaceMentionedTextInEditorState","cr:1217283","setImmediate","shouldNotRenderSegoe","throttle","withMessengerSource"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDomIDs.bs").ids,j=1,k=/^image\//,l="handled",m=8,n="not-handled",o=b("LogHistory").getInstance("MessengerComposerInput"),p={};p[b("MessengerConstants").NEW_THREAD_KEY]={version:0,editorState:b("EditorState").createEmpty()};function q(a,c){var d=c.editorState,e=c.version;if(!a||a&&e<p[a].version)return;p[a]=c;a!==b("MessengerConstants").NEW_THREAD_KEY&&b("MessengerEditorStateManager").set(a,d)}function r(a){p[a]||(p[a]={version:0,editorState:b("EditorState").createEmpty()});return p[a]}function s(a,b){if(!a)return null;var c=r(a);c.editorState=b;p[a]=c;return c}function t(a,b){if(a){var c=r(a);c.version+=1;c.editorState=b;q(a,c)}}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$10=!1;d.$21=function(a){if(d.$10&&a!==d.state.editorState){d.setState({editorState:a});a=s(d.props.threadID,a);a&&d.$5(d.props.threadID,a);d.props.onResize&&d.props.onResize()}};d.$22=function(a,c){if(b("isSoftNewlineEvent")(a)){a=b("handleSoftNewlineForMessengerEmoticon");a=a(c);d.setState({editorState:a});s(d.props.threadID,a);return l}d.setState({},d.triggerSend);return l};d.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(d.state.editorState.getCurrentContent())};d.focus=function(){d.refs.input&&d.refs.input.focus()};d.$32=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput(a,b);var c=d.$37(a,b);a=d.$38(a,b);return c||a?l:n};d.$13=function(a){a=d.props.handleOnlyImageUploads?a.filter(function(a){return a&&k.test(a.type)}):a;var c=d.$25();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return l}return n};d.$33=function(a,c,e){b("cr:1217283")!=null&&b("cr:1217283")(d.props.threadID,a);return!1};d.$18=function(){var a=d.props.threadID;if(!a)return;q(a,r(a))};d.$19=function(){d.setState(d.$14(!0))};d.triggerSend=function(){d.$23()&&d.$26();if(d.getValue().trim().length>0||d.$39())if(d.props.thread){var a=d.getMentions(d.props.thread.thread_fbid);d.$29(a)}else d.$29();d.$27()};d.$34=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$35=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===j?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$13=d.$13.bind(babelHelpers.assertThisInitialized(d));d.$11=c;d.state=d.$14();d.$6=b("debounce")(function(a){d.$11||(d.$11=a),u(d.props,d.$11)&&d.$15(),d.$11=a},300);d.$7=b("throttle")(function(){if(d.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).height;d.$1!==a&&(d.props.onResize&&d.props.onResize());d.$1=a}},100);return d}var d=c.prototype;d.$14=function(a){var c;this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?c=r(b("MessengerConstants").NEW_THREAD_KEY).editorState:c=b("MessengerEditorStateManager").get(this.props.threadID);c=this.$16(c,a);a=b("createMessengerMentionDraftEntity");return{editorState:c,mentionCreationForContentStateFn:a}};d.componentDidMount=function(){__p&&__p();var a=this;this.$10=!0;var c=b("gkx")("964442");c&&b("MessengerUserInputAppDispatcher").explicitlyRegisterStore(b("MessengerComposerInputStore"));this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$17();b("cr:1217282")==null&&(this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID));b("Run").onUnload(this.$18);this.$3=b("Event").listen(window,"blur",this.$18);this.$4=b("Event").listen(window,"focus",this.$19);this.$5=b("debounce")(function(a,b){q(a,b)},1e3);b("CurrentUser").isWorkUser()&&(this.$12=b("WorkGalahadChatPrefillMessageEventEmitter").addListener("prefillMessage",function(b){a.insertPrefill(b)}))};d.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7);if(c.editorState!==this.state.editorState){this.props.onChange&&this.props.onChange(this.getValue());c=b("gkx")("964442");c&&this.$20(this.getValue())}this.props.threadID!==a.threadID?this.$17():this.$6(a)};d.componentWillUnmount=function(){var a=this.props.threadID;a&&q(a,r(a));this.$10=!1;this.$8&&this.$8.destroy();this.$9&&b("clearImmediate")(this.$9);this.$3&&this.$3.remove();this.$4&&this.$4.remove();this.$12&&this.$12.remove()};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$21(a)};d.insertPrefill=function(a){if(this.state.editorState.getCurrentContent().hasText())return;a=b("EditorState").createWithContent(b("ContentState").createFromText(a));a!==this.state.editorState&&this.$21(a)};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$21(b("EditorState").forceSelection(c,a.getSelectionAfter()))};d.$23=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$17=function(){if(!this.$10)return;this.setState(this.$14(!1));this.$24();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$15()};d.$15=function(){if(this.props.mentionsEnabled){var a=this.props,c=a.participants,d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$24=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(this.props.thread,b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,this.props.source,null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};d.$25=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;o.debug("Invalid threadID ",c)}return c};d.$20=function(a){__p&&__p();if(!this.$10)return;a=b("MessengerComposerInputStore").getState();var c=a.requestNumResults,d=a.requestType;if(a.isUserInputRequested&&c&&d){a=new(b("AutocompleteSearchSource"))(this.getValue(),c,d);c=new(b("DocumentMentionsSource"))(b("AutocompleteStrategy"),a);d=new(b("DocumentCompositeMentionsSource"))([c]);this.setState({isUserInputAutocomplete:!0,mentionCreationForContentStateFn:b("MessengerUserInputUtils"),mentionsSource:d})}else if(this.state.isUserInputAutocomplete){a=this.props;c=a.participants;d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$26=function(){var a=this.props.fileUploader,c=this.$25();a&&(o.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),o.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};d.$27=function(){var a=this.props.onMessageSend;a!=null&&b("cr:1217281")!=null&&(this.$28()&&b("nullthrows")(this.props.workChatContentApps).forEach(function(c,d){var e=(d=c.payload)==null?void 0:d.shareData;if(e==null)return;b("setImmediate")(function(){return a("",{shareable_attachment:e})})}),b("cr:1217281").removeAllWorkContentApps(this.props.threadID))};d.$28=function(){var a=this.props.workChatContentApps;return a!=null&&a.size>0};d.$29=function(a){__p&&__p();var c=this;if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(d){b("MessengerActions").removeSharePreview(c.props.threadID);if(d&&c.props.mentionsEnabled&&(a&&a.length||c.state.addedMentionsCount||c.state.mentionsTriggeredCount||c.state.mentionsTriggerSource)){var e=c.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=c.props;var i=e.thread,j=e.participants,k=d;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")}})){var d=this.$16(b("EditorState").createEmpty());this.$2&&this.$2.clearShareData();this.setState({editorState:d,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});t(this.props.threadID,d);this.$8&&this.$8.resetState()}};d.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};d.getInput=function(){return this.refs.input};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.participants,e=c.thread;c=c.viewer;var f=null;d&&e&&c?f=h._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$30(e,c)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(e.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$31(d,e,c))]):f=h._("Composing a new message");d=null;this.props.threadID&&this.props.pageID&&(d=b("React").jsx("div",{ref:"botsMenuContainer",className:"_3km1",children:b("React").jsx(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})}));e="";this.props.disableInput?e=h._("Composer is disabled for this thread.").toString():!((c=this.props.thread)==null?void 0:c.is_canonical)||((c=this.props.thread)==null?void 0:c.other_user_fbid)!==b("CurrentUser").getID()&&b("gkx")("1101638")?e=h._("Type a message, \u0040name...").toString():e=h._("Type a message...").toString();c=b("gkx")("678612");var g=b("cr:1008504")!==null&&b("CurrentUser").isWorkUser()?b("cr:1008504"):b("DebouncedMentionsTextEditor.react");return b("React").jsxs("div",{className:b("joinClasses")("_kmc"+(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")?" _7kpg":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyx":"")+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",this.props.className),onClick:this.focus,role:"presentation",children:[this.props.showMenu?d:null,b("React").jsxs("div",{className:b("joinClasses")((b("CurrentUser").isWorkUser()&&!b("gkx")("1072568")?"_3-8x":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7q9o":"")+(this.props.showMenu?" _3km3":"")+(c?"":" _3oh-"),this.props.inputContainerClassName),children:[b("React").jsx(g,{autoHighlight:!0,ariaControls:i.CONVERSATION,ariaDescribedBy:i.COMPOSER_INPUT_DESCRIPTION,ariaLabel:e,editorState:this.state.editorState,handleBeforeInput:this.$32,handleContentReturn:this.$22,handlePastedFiles:this.$13,handlePastedText:this.$33,handleReturn:this.$22,maxResults:m,readOnly:this.props.disableInput,mentionCreationForContentStateFn:this.state.mentionCreationForContentStateFn,mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$21,placeholder:e,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",threadID:this.$25(),onAddMention:this.$34,onShowMentions:this.$35}),this.props.threadID!=null&&b("cr:1217282")!=null?b("React").jsx(b("cr:1217282"),{threadID:this.props.threadID,workLinks:this.props.workChatContentApps,files:this.props.fileUploader!=null?this.props.fileUploader.get("uploadedFiles"):null}):null,b("cr:1272653")!==null&&b("qex")._("1269717")?b("React").jsx(b("cr:1272653"),{contextRef:function(){return a.refs.input}}):null,b("React").jsx("div",{className:"_5ca7",id:i.COMPOSER_INPUT_DESCRIPTION,children:f})]})]})};d.$30=function(a,c){return b("React").jsx(b("MercuryThreadTitleSafe.react"),{thread:a,viewer:c})};d.$31=function(a,c,d){return b("React").jsx(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};d.$16=function(a,c){var d=this.$36(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};d.$36=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$37=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.$38=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$21(a)};d.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};d.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};d.$39=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$21(a);this.$34()};return c}(b("React").PureComponent);a.propTypes={disableAutofocus:(c=b("prop-types")).bool,fileUploader:c.object,workChatContentApps:c.instanceOf(b("immutable").OrderedMap),handleOnlyImageUploads:c.bool.isRequired,isComposing:c.bool,mentionsEnabled:c.bool,pageID:c.string,participants:c.instanceOf(b("immutable").Map),sharePreview:c.object,showMenu:c.bool,disableInput:c.bool,smallerEqual640:c.bool,thread:c.object,threadID:c.string,viewer:c.string,onBeforeInput:c.func,onChange:c.func,onFileUpload:c.func,onResize:c.func,onMessageSend:c.func};function u(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=b("withMessengerSource")(a,!0)}),null);
__d("MessengerComposerPendingActions.react",["Bootloader","CurrentUser","JSResource","MercuryIDs","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposerPendingActions.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&this.$2.remove()};d.render=function(){__p&&__p();var a=this,c=this.props.thread,d=!!c&&b("MessageRequestUtils").isFiltered(c);c=b("CurrentUser").getID();var e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c),f=b("MercuryThreadActions").getForFBID(this.props.viewer);return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{style:{height:51}}),children:b("React").jsx(g,{folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){f.changeFolder(a.props.threadID,b("MessagingTag").INBOX),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType(d?"other":"pending").setThreadKey(e).setEntryPoint(null).log()},onDeclineClick:function(){var c=b("MercuryIDs").isGroupChat(a.props.threadID);a.$1=b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(d){var f=d.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(f,{onBlock:a.props.onIgnoreBlock,onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick,isGroupChat:c})});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},"MessengerComposerPendingActions.react")},onDeleteClick:function(){a.$2=b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(d,{onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick})})},"MessengerComposerPendingActions.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(e).setEntryPoint("inbox_banner").log()}})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","prop-types","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},h={left:0,position:"absolute",top:0,transition:"0s"},i={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.dirty=!1,d.lastWidth=null,d.lastHeight=null,d.lastBreakpointsToggles=null,d.setupWeirdScrollTracking=function(){d.refs.expandChild.style.width="10000px",d.refs.expandChild.style.height="10000px",d.refs.expand.scrollLeft=1e5,d.refs.expand.scrollTop=1e5,d.refs.shrink.scrollLeft=1e5,d.refs.shrink.scrollTop=1e5},d.$2=function(){__p&&__p();var a=d.refs.outer.offsetWidth,c=d.refs.outer.offsetHeight;if((a!=d.lastWidth||c!=d.lastHeight)&&!d.dirty){if(Math.abs(a-(d.lastWidth||0))<10&&Math.abs(c-(d.lastHeight||0))<16)return;d.dirty=!0;d.lastWidth=a;d.lastHeight=c;a=d.props.breakpointsToggles(a,c);b("shallowEqual")(d.lastBreakpointsToggles,a)?d.dirty=!1:d.forceUpdate(function(){b("requestAnimationFrame")(function(){d.dirty=!1})});d.lastBreakpointsToggles=a}d.setupWeirdScrollTracking()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};d.componentWillUnmount=function(){this.$1.cancel()};d.render=function(){var a;return(a=b("React")).jsxs("div",{ref:"outer",children:[this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),a.jsx("div",{style:g,onScroll:this.onScroll,ref:"expand",children:a.jsx("div",{style:h,ref:"expandChild"})}),a.jsx("div",{style:g,onScroll:this.onScroll,ref:"shrink",children:a.jsx("div",{style:i})})]})};return c}(b("React").Component);a.propTypes={children:b("prop-types").func.isRequired,breakpointsToggles:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MercuryMessageBodyReact.bs",["ReasonReact.bs","MercuryMessageBody.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("MercuryMessageBody.react"),{body:a},c)}f.make=a}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","requireCond","AsyncRequest","AutoFocusableLink.react","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","FBLogger","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.re","MessengerComposerButtonLabels","MessengerComposerInput.react","MessengerComposerPendingActions.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.re","MessengerState.bs","MessengerURIStore","MessengerView","MNCommerceCTAProcessor","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","WorkBotLandingPageHelper","WorkChatExtensionAvailabilityFetcher","cr:1124632","WorkFileUploadsGating","WorkGalahadChatSendButton.react","WorkGalahadSettings","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","lazyLoadComponent","promiseDone","prop-types"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerBlockDialogReact.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.re").make,q=b("ReplyingToMessageReact.bs").jsComponent,r=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,s=b("lazyLoadComponent")(b("JSResource")("WorkChatPostButtonReact").__setRef("MessengerComposer.react")),t=b("lazyLoadComponent")(b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react")),u=b("lazyLoadComponent")(b("JSResource")("MessengerUnconnectedThreadInfoTextReact").__setRef("MessengerComposer.react")),v=640,w=b("WorkGalahadSettings").isGalahadEnabled?320:360,x=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.refsGifUploader=null;d.handleFileUpload=function(a){d.refsUploader&&d.refsUploader.uploadFiles(a),d.exitCurrentMode()};d.focusInput=function(){d.refsInput&&d.refsInput.focus()};d.$50=function(a){d.refsGifUploader=a};d.$53=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=d.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()};d.$10=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);d.$54()["delete"](d.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()};d.$9=function(){__p&&__p();var a;a=(a=d.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)d.$55();else{a=(a=d.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c&&c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(k,{onBlock:function(){d.$56(e)},contact:c})})}};d.$11=function(a){var c=d.props.thread,e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint("inbox_banner").log()};d.$51=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?d.props.onStickerSelect(a.resultID.toString()):d.refsGifUploader&&d.refsGifUploader.uploadURL&&d.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})};d.$52=function(a){d.focusInput(),d.refsInput&&d.refsInput.insertEmoji(a)};d.$19=function(a){d.setState({currentValue:a})};d.$15=function(a,b,c){d.refsEmojiButton&&d.refsEmojiButton.hideFlyout();return d.props.onMessageSend&&d.props.onMessageSend(a,b,c)};d.$48=function(a){d.refsInput&&d.refsInput.triggerSend()};d.$49=function(a){return d.props.onStickerSelect(a)};d.$13=function(){if(d.state.nullStateCTA!==null)switch(d.state.nullStateCTA.action_type){case 1:break;case 4:default:d.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(d.$5())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1);b("MNCommerceCTAProcessor").logCTAClick(d.state.nullStateCTA);break}};d.$1=function(){d.setState({showNullState:!0,disableNullState:!1})};d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));d.state=d.$2();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID||a.thread&&!this.props.thread?(this.setState(this.$2()),a.thread&&this.$3(a.thread,b("getPageIDFromThreadID")(a.threadID))):a.thread&&this.$4(a.thread,b("getPageIDFromThreadID")(a.threadID))&&this.setState({showNullState:!1})};d.componentDidMount=function(){var a=this;this.props.thread&&this.$3(this.props.thread,this.$5());var c=b("gkx")("678608");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$6(),this.$7())};d.render=function(){__p&&__p();var a=this;if(!this.props.canReply)return this.$8();else if(this.props.thread&&this.props.threadID&&this.props.viewer&&b("MessageRequestUtils").shouldShowComposerPendingActions(this.props.thread)&&!this.state.pendingActionsBypassed)return b("React").jsx(b("MessengerComposerPendingActions.react"),{thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,onAccept:function(){return a.setState({pendingActionsBypassed:!0})},onIgnoreBlock:this.$9,onDeleteDialogDeleteClick:this.$10,onDeleteDialogToggleClick:this.$11});var c=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$5(),c);if(this.state.showNullState&&this.state.nullStateCTA!==null){return(c=b("React")).jsxs("div",{className:"_2xh0",children:[this.$12(),c.jsx("div",{className:"_2xh4 _59w_",children:c.jsx(b("BootloadOnRender.react"),{component:c.jsx(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$13,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:c.jsx(b("XUISpinner.react"),{size:"small"})})})]})}var d=this.$14();c=b("React").jsxs(b("React").Fragment,{children:[b("cr:1124632")!=null&&this.props.threadID!=null?b("React").jsx(b("cr:1124632"),{threadID:this.props.threadID,onResize:this.props.onResize,onClick:this.$15}):null,b("React").jsx(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=v,a]},children:function(c){var e=c[0];c=c[1];return b("React").jsxs("div",{"aria-label":i._("New message"),className:"_4rv3"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyq":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyv":""),role:"region",children:[a.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(a.props.thread)?a.$16():null,a.props.replyingToMessage&&a.$17(),a.$18(a.props.threadID),b("React").jsxs("div",{className:"_5irm"+(e?" _1_73":""),children:[b("React").jsx(b("MessengerComposerInput.react"),{disableAutofocus:!!a.props.disableAutofocus,fileUploader:a.props.fileUploader,handleOnlyImageUploads:!1,isComposing:d,mentionsEnabled:a.props.mentionsEnabled,ref:function(b){return a.refsInput=b},onBeforeInput:function(){return a.refsEmojiButton&&a.refsEmojiButton.hideFlyout()},onResize:a.props.onResize,onMessageSend:a.$15,participants:a.props.participants,sharePreview:a.props.sharePreview,smallerEqual640:e,thread:a.props.thread,threadID:d?b("MessengerConstants").NEW_THREAD_KEY:a.props.threadID,pageID:a.$5(),viewer:a.props.viewer,onFileUpload:a.handleFileUpload,onChange:a.$19,showMenu:a.state.showMenu,disableInput:a.state.disableInput}),a.$20(c)]})]})}})]});var e=this.$5(),f=d?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return e&&!b("CurrentUser").isWorkUser()?b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:c,pageID:e,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:f}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:c}):c};d.$18=function(a){if(!a||!this.$21())return null;var c=this.props,d=c.fileUploader;c=c.thread;c=c&&c.footer_color?c.footer_color:"#0084ff";return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx(b("XUISpinner.react"),{className:"_2qf"}),children:b("React").jsx(t,{files:d!=null&&d.get("uploadedFiles")!=null?d.get("uploadedFiles"):b("immutable").Map(),small:!1,threadID:a,threadCustomColor:c,onClick:this.$22,onResize:this.props.onResize})})};d.$16=function(){var a;a=(a=this.props.thread)==null?void 0:a.other_user_fbid;if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(u,{name:a&&a.short_name,onBlock:this.$9,onDelete:this.$10,onToggle:this.$11,thread:this.props.thread||void 0})})};d.$17=function(){var a=this.props.replyingToMessage;return!a?null:b("React").jsx(q,{name:this.$23(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};d.$23=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$22=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};d.$20=function(a){var c=this;return this.state.disableInput===!0?null:b("React").jsxs("div",{ref:function(a){c.refsButtonsContainer=a},className:"_4rv4"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyw":""),children:[this.$24(a),this.$25()]})};d.$24=function(a){if(this.props.hideActions)return null;return a&&a<w?b("React").jsxs("div",{children:[b("React").jsxs("ul",{className:"_39bj",children:[this.$26(),b("CurrentUser").isWorkUser()&&b("WorkFileUploadsGating").canUploadFiles?this.$27():this.$28(),this.$29(),this.$30(),this.$31()]}),b("React").jsxs("ul",{className:"_39bj",children:[this.$32(),this.$33(),this.$34(),this.$35(),this.$36()]})]}):b("React").jsxs("ul",{className:"_39bj",children:[this.$26(),b("CurrentUser").isWorkUser()?this.$27():null,this.$28(),b("CurrentUser").isWorkUser()?this.$37():null,this.$29(),this.$30(),this.$31(),this.$32(),this.$33(),this.$34(),this.$35(),this.$36()]})};d.$38=function(a){b("FBLogger")("messenger_upload_file").warn("Uploading file is too large"),b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(o,{error:a.error})})};d.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};d.$33=function(){return b("React").jsx("li",{children:this.$39()})};d.$39=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$40()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:a,role:"button"})})};d.$36=function(){return b("gkx")("678582")&&this.props.threadID?b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button","aria-label":b("MessengerComposerButtonLabels").QuickCamButtonLabel})}):null};d.$32=function(){return!x||this.$14()?null:b("React").jsx("li",{children:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button","aria-label":b("MessengerComposerButtonLabels").VoiceClipButtonLabel})})})};d.$34=function(){if(b("gkx")("994335"))return null;if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID||this.$14()?null:b("React").jsx("li",{children:b("React").jsx(b("ReasonBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button","aria-label":b("MessengerComposerButtonLabels").GroupPollingButtonLabel})})})};d.$35=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$40()?b("React").jsx("li",{children:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})}):null};d.$26=function(){return this.props.threadFBID&&!this.$40()&&this.state.hasWorkChatExtension?b("React").jsx("li",{children:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})}):null};d.$41=function(a){var c=this,d=b("CurrentUser").isWorkUser()?!b("WorkFileUploadsGating").canUploadFiles:!1;return b("React").jsx("li",{className:"_39bk",children:b("React").jsx(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$42()),ref:function(a){return c.refsUploader=a},imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:d,inputClassname:"_260t",linkClassName:"_30yy _7hi7 _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38,threadID:this.props.threadID})})};d.$43=function(){return this.$14()&&!this.$44()?!1:!0};d.$44=function(){return this.props.recipients&&this.props.recipients.count()===1};d.$28=function(){return!this.$43()?null:this.$41("files")};d.$27=function(){return!b("WorkFileUploadsGating").canUploadFiles||!this.$43()?null:this.$41("attachment")};d.$37=function(){var a,c=this.props.openPostComposerInSameWindow?"_self":"_blank";a=(a=this.props)!=null?(a=a.thread)!=null?(a=a.associated_object)!=null?a.action_link:a:a:a;if(!a){var d;a=(d=this.props)!=null?(d=d.thread)!=null?(d=d.work_associated_group)!=null?d.url:d:d:d}return a?b("gkx")("808098")?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(s,{composerLink:a,target:c})}):null:null};d.$45=function(){return this.state.currentValue.length>0||this.$21()||this.$46()};d.$21=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$46=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.$47=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};d.$25=function(){var a=!(this.props.threadID||this.$42());return!a&&this.$45()&&!this.$47()?b("WorkGalahadSettings").isGalahadEnabled?b("React").jsx(b("WorkGalahadChatSendButton.react"),{customColor:this.props.thread?this.props.thread.solid_color:null,onClick:this.$48,className:(this.props.threadID?"_30yy":"")+" _38lh"}):b("React").jsx(p,{className:(this.props.threadID?"_30yy":"")+" _38lh",customColor:this.props.thread&&this.props.thread.solid_color||void 0,onClick:this.$48}):b("React").jsx(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(this.props.threadID?" _30yy":""),disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||void 0,sendSticker:this.$49,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24,thread:this.props.thread})};d.$29=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").jsx("li",{children:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$42()),getInput:function(){return a.refsInput},flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").StickerButtonLabel})})})};d.$12=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case 1:return null;case 4:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").jsx("div",{className:"_3zc8",children:i._("When you tap {cta title}, {name} will see your public info.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)])});else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())){var d=this.$5();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").jsx("div",{className:"_3zc8",children:i._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)])})}break;default:return null}return null};d.$30=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").jsxs("li",{children:[b("React").jsx("div",{style:{display:"none"},children:b("React").jsx(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$50,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$38})}),b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return a.refsInput},getQuery:function(){return a.refsInput?a.refsInput.getValue():""},location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$51}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").ContentSearchButtonLabel})})]})};d.$31=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").jsx("li",{children:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return a.refsInput},onSelect:this.$52,onMount:function(b){return a.refsEmojiButton=b},sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").jsx(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").EmojiButtonLabel})})})};d.$8=function(){__p&&__p();var a=this;if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var c=this.props.thread,d=this.props.participants,e=!1,f=!1;if(c.cannot_reply_reason==="blocked"){e=!0;c.is_canonical===!0||j(0,4973);d!=null||j(0,4974);var g=c.other_user_fbid;g!=null||j(0,4975);d=d.get(b("MercuryIDs").getParticipantIDFromUserID(g));d!=null||j(0,4976);b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a.props.viewer,d,c)&&(f=!0)})}if(e){g=this.$40()?"page":"person";if(f)return b("React").jsx("div",{className:"_4rv3",children:b("React").jsx("div",{className:"_2wy4",children:i._("You've blocked messages from this {name}. {unblock_now_button}",[i._param("name",g),i._param("unblock_now_button",b("React").jsx(l,{label:i._("Unblock Now"),onClick:this.$53,type:"secondary"}))])})});else return b("React").jsx("div",{className:"_4rv3",children:b("React").jsx("div",{className:"_2wy4",children:i._("This person isn't available right now.")})})}return b("React").jsx("div",{className:"_4rv3",children:b("React").jsx("div",{className:"_2wy4",children:b("MercuryReadOnlyReason").getReason(c.has_email_participant)})})};d.$55=function(){var a=this,c,d=(c=this.props)!=null?(c=c.thread)!=null?c.thread_id:c:c;d&&b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(n,{onLeave:function(){var c=b("MessengerURIStore").getState().activeThreadID===d;a.$54().leaveGroup(d);c&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$56=function(a){var c=this,d=this.props.threadID,e=d===b("MessengerURIStore").getState().activeThreadID;this.$54().blockIgnoreOnMessengerDotCom(e,d,function(){c.$57(a)})};d.$57=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(m,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};d.$14=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};d.$42=function(){return!!(this.$14()&&this.props.recipients&&this.props.recipients.size)};d.$40=function(){return!!this.$5()};d.$5=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$6=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({showMenu:b})},function(){a.setState({showMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};d.$7=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};d.$4=function(a,c){var d=a.message_count;c=!!c;if(b("CurrentUser").isWorkUser()&&c&&d===1&&this.props.viewer){c=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a.thread_id,0,1);return!r(b("immutable").List(c))}return d>0};d.$58=function(a,b){b=r(b);var c=!!a;c&&b&&this.$59(a)};d.$59=function(a){var c=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setMethod("POST").setData({page_id:a}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()};d.$3=function(a,c){var d=this,e=a.message_count,f=!!c;if(b("CurrentUser").isWorkUser()&&f&&e===1&&this.props.viewer){b("MessengerState.bs").getThreadMessagesRange(this.props.viewer,a.thread_id,0,1,function(a){return d.$58(c,b("immutable").List(a||[]))});return}a=e===0;f&&a?this.$59(c):this.setState({showNullState:!1,disableNullState:!1})};d.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};d.$54=function(){var a;a=(a=this.props.viewer)!=null?a:b("CurrentUser").getID();return b("MercuryThreadActions").getForFBID(a)};d.testUtils_renderRawP2PSendMoneyButton=function(){return this.$39()};d.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};return c}(b("React").PureComponent);a.propTypes={canReply:b("prop-types").bool,disableAutofocus:b("prop-types").bool,fileUploader:b("prop-types").object,hideActions:b("prop-types").bool,mentionsEnabled:b("prop-types").bool,onCustomLikeSelect:b("prop-types").func,onMessageSend:b("prop-types").func,onPhotoUploadComplete:b("prop-types").func,onPhotoUploadCancel:b("prop-types").func,onPhotoUploadFail:b("prop-types").func,onPhotoUploadSubmit:b("prop-types").func,onResize:b("prop-types").func,onStickerSelect:b("prop-types").func.isRequired,onVoiceClipCreate:b("prop-types").func,p2pPaymentConfig:b("prop-types").object,participants:b("prop-types").instanceOf(b("immutable").Map),recipients:b("prop-types").instanceOf(b("immutable").List),sharePreview:b("prop-types").object,threadID:b("prop-types").string,threadFBID:b("prop-types").string,thread:b("prop-types").object,view:b("prop-types").string,viewer:b("prop-types").string,replyingToMessage:b("prop-types").object,onCancelReplyingToMessage:b("prop-types").func,openPostComposerInSameWindow:b("prop-types").bool};e.exports=a}),null);
__d("MessengerQuickCamButtonBootLoader.react",["AutoFocusableLink.react","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props;return!a.htmlQC?null:b("React").jsx(b("MercuryBootloadOnInteraction.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},a)),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerQuickCamButtonBootLoader.react"),placeholder:a.placeholder||b("React").jsx(b("AutoFocusableLink.react"),{label:"flyout button",className:a.className})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerComposerContainerImpl.react",["fbt","requireCond","AsyncRequest","AsyncUploadRequest","Bootloader","CurrentUser","EmojiDispatcher","EmojiLikeUtils","EmojiState","KeyEventController","MercuryAttachment","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MessageRequestUtils","MessengerActions","MessengerComposer.react","MessengerComposerActions","MessengerComposerM4React.re","MessengerDialogs.bs","MessengerEmojiUsageUtils","MessengerPageComposerM4React.re","MessengerSimpleDialogReact.bs","MessengerState.bs","MessengerSurfaceType.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","RepliedToMessageStatusForGraphQL","SubscriptionsHandler","cr:1192333","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable","prop-types","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerComposerM4React.re").make,i=b("MessengerPageComposerM4React.re").make,j=b("MessengerSimpleDialogReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a,c,e){__p&&__p();d.props.hostProps&&d.props.hostProps.messageSentCallback();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!d.props.canReply){e&&e(null);return!1}var f=null,g=!1;d.$13(a,c)||(g=d.$14(function(e){__p&&__p();var g=d.$2.constructUserGeneratedMessageObject(a,d.props.source,e);g=babelHelpers["extends"]({},g);e=b("MercuryIDs").getUserIDFromThreadID(e);if(b("MNPlatformTagsDataManager").hasThreadTags(e)){e=b("MNPlatformTagsDataManager").getThreadTags();g.tags=e||[]}c&&(c.shareable_attachment&&(g.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(g.profile_ranges=g.profile_xmd=c.profile_ranges));f=g;return g}));e&&e(g?f:null);f=null;return g},d.$8=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b)},d.$7=function(a,b){d.$3.confirmAttachmentPlaceholder(b.upload_id,b)},d.$9=function(a,c){__p&&__p();d.$3.cancelAttachmentPlaceholder(c.upload_id,c);var e=g._("Upload failed");if(c.errorDialogParams){var f=c.errorDialogParams;e=f.title||e;if(f.body){b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(j,{title:e,serverHTML:f.body})});return}}var h=g._("Please try again. Make sure you are uploading a valid file.");b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(j,{title:e,body:h})})},d.$10=function(a,b){d.$14(function(a){return d.$2.constructAttachmentMessageObject(d.props.source,a)},function(a){d.$3.addAttachmentPlaceholder(a,b.upload_id,b),d.handleMessageSentToPendingThread()})},d.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();d.$1.sendAttachment(d.props.threadID,k(c),d.props.source);var e={};e[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).setData({voice_clip:!0}).setFiles(e);d.$4.addSubscriptions(c.subscribe("success",function(a,b){return d.$15(b)}));c.send()},d.$11=function(a){return d.$14(function(b){return d.$2.constructStickerMessageObject(a,d.props.source,b)})},d.$12=function(a,c,e){var f=d.props.threadID,g=d.$2.constructUserGeneratedMessageObject(a.emoji,d.props.source,f);g.has_attachment=!1;return d.$14(function(a){b("EmojiLikeUtils").setEmojiSize(g,c);return b("EmojiLikeUtils").setEmojiSource(g,e)})},d.handleMessageSentToPendingThread=function(){d.props.thread&&b("MessageRequestUtils").isMessageRequest(d.props.thread)&&b("MercuryThreadActions").getForFBID(d.props.viewer).movePendingToInbox(d.props.threadID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer);this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer);this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer);this.$5=b("MercuryThreadInformer").getForFBID(this.props.viewer);this.$4=new(b("SubscriptionsHandler"))();b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]);this.props.onMount&&this.props.onMount(this);this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){a.props.replyingToMessage&&(a.props.onCancelReplyingToMessage&&a.props.onCancelReplyingToMessage())},function(a,c){return!!(a.key==="Escape"&&b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c))}))};d.componentWillUnmount=function(){this.$4.release()};d.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};d.render=function(){__p&&__p();var a=this,c=this.props.hostProps?this.props.hostProps.hideActions:!1,d=this.props.surface===b("MessengerSurfaceType.bs").workQuickchat;c={canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer};if(b("cr:1192333")&&!d)return b("React").jsx(b("cr:1192333").make,babelHelpers["extends"]({},c,{threadId:this.props.threadID,showBotMenu:!1,workChatContentApps:this.props.workChatContentApps}));else if(!b("CurrentUser").isWorkUser()||b("gkx")("1072568")&&!d)if(b("getPageIDFromThreadID")(this.props.threadID))return b("React").jsx(i,babelHelpers["extends"]({},c,{threadId:this.props.threadID,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:b("P2PPaymentConfig").config,threadFbid:this.props.threadFBID}));else return b("React").jsx(h,babelHelpers["extends"]({},c,{threadId:this.props.threadID,showBotMenu:!1,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:b("P2PPaymentConfig").config,threadFbid:this.props.threadFBID}));else return b("React").jsx(b("MessengerComposer.react"),babelHelpers["extends"]({},c,{threadID:this.props.threadID,threadFBID:this.props.threadFBID,openPostComposerInSameWindow:this.props.openPostComposerInSameWindow,p2pPaymentConfig:b("P2PPaymentConfig").config,onVoiceClipCreate:this.handleAudioUpload}))};d.$13=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};d.$15=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};d.handleFileUpload=function(a){var b=this;a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return b.handleAudioUpload(a)});this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};d.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};d.$14=function(a,c){__p&&__p();var d=this.props.threadID,e=this.props.recipients,f,g=!d&&e&&e.size>1;g&&(d=b("MercuryLocalIDs").generateThreadID(),f=this.props.newGroupName);if(!d)return!1;a=a(d);if(g){g=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();b("MessengerState.bs").createNewLocalThread(this.props.viewer,d,g.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=g}else this.props.participants!=null&&this.props.participants.size!=0&&(a.participants_to_hash=this.props.participants.map(function(a){return a.id}).toArray());if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MessengerState.bs").getMessagesFromIDs(b("CurrentUser").getID(),[this.props.replyingToMessage.message_id]);e=e.length>0?e[0]:null;a.replied_to_message={status:e?b("RepliedToMessageStatusForGraphQL").VALID:b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE,message:e};this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$5.subscribeOnce("messages-updated",function(a,c){__p&&__p();a=b("MercuryThreadIDMap").get();if(a.canLinkExternally(d)){if(b("gkx")("836564")&&f&&f!==""){c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:a.getServerIDFromClientIDNow(d),thread_name:f}).send();b("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(a,b){new a().setEvent(b.NAMED_GROUP_CHAT_CREATION_FROM_SLASH_CHAT).log()},"MessengerComposerContainerImpl.react")}b("MessengerActions").selectThread(d)}}):b("MessengerActions").selectThread(d));this.focusInput();return!0};d.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};return c}(b("React").PureComponent);a.propTypes={canReply:(c=b("prop-types")).bool,disableAutofocus:c.bool,fileUploader:c.object,onMount:c.func,onResize:c.func,participants:c.instanceOf(b("immutable").Map),recipients:c.instanceOf(b("immutable").List),sharePreview:c.object,workChatContentApps:c.instanceOf(b("immutable").OrderedMap),hostProps:c.object,threadID:c.string,threadFBID:c.string,thread:c.object,view:c.string,viewer:c.string,replyingToMessage:c.object,onCancelReplyingToMessage:c.func,newGroupName:c.string,openPostComposerInSameWindow:c.bool};function k(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:"photo",preview_uploading:!0}]}}e.exports=a}),null);
__d("withMessengerSurface",["MessengerSurfaceContext.re","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext;function a(a,c){var d;c===!0?c=b("React").forwardRef(function(c,d){var e=g(b("MessengerSurfaceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{ref:d,surface:e}))}):c=function(c){var d=g(b("MessengerSurfaceContext.re").context);return b("React").jsx(a,babelHelpers["extends"]({},c,{surface:d}))};c.displayName=((d=(d=a.displayName)!=null?d:a.name)!=null?d:"Component")+"WithMessengerSurface";return c}e.exports=a}),null);
__d("MessengerComposerContainer.react",["MessengerComposerContainerImpl.react","withMessengerSource","withMessengerSurface"],(function(a,b,c,d,e,f){"use strict";a=b("withMessengerSurface")(b("withMessengerSource")(b("MessengerComposerContainerImpl.react")));e.exports=a}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,"log:unsubscribe",{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageStore","gkx","immutable","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","MessengerParticipants.bs","prop-types","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadActions").get(),h=b("MessengerServerErrorDialogReact.bs").jsComponent,i=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,j=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent,k=200,l=b("gkx")("833128");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},d.$2=void 0,d.$3=!1,d.$4=void 0,d.$5=void 0,d.$6=void 0,d.$7=!1,d.$14=function(){d.refs.conversation&&d.refs.conversation.scrollToBottom&&typeof d.refs.conversation.scrollToBottom==="function"&&d.refs.conversation.scrollToBottom()},d.$16=function(){var a=d.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$19=function(){var a=d.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$17=function(a){var c=d.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,d.props.viewer);d.$21(a)},d.$20=function(a){var c=d.props.thread;if(c==null)return;var e=c.thread_id;g.changeFolder(e,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,d){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(e)).setPlatform(d.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");d.$21(a)},d.$18=function(a){d.$21(a)},d.$13=function(){if(d.state.isLoading||d.state.isLoaded)return;d.setState({isLoading:!0});d.$1.fetchMoreMessages()||d.setState({isLoading:!1,isLoaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$2&&this.$2.release(),window.clearTimeout(this.$6)};d.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};d.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};d.render=function(){var a=this,c=this.state.messages;c=c.some(function(a){return a.log_message_type==="log:error-msg"});b("MessengerConfig").ErrorDialog&&c&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(h,{onMount:function(){return a.$7=!0}})});return b("React").jsx(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryTimestamp:this.props.deliveryTimestamp,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,hideContextBanner:this.props.hideContextBanner,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,bottomOffset:this.props.bottomOffset})};d.handleResize=function(){this.refs.conversation.handleResize()};d.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};d.$9=function(){__p&&__p();var a=this,c=this.props.thread;if(c==null)return!1;var d=c.thread_id;if(!this.$15())return!1;var e=!1;b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(a.props.viewer,d,c)&&(e=!0)});if(!e)return!1;d=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(d);return d?!1:!0};d.$11=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$15())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(this.props.fbid,this.props.ignoredIds,a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:!0};d.$15=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};d.$10=function(a){var c=this,d=this.props.thread,e=[];b("MessengerState.bs").compute(this.props.viewer,function(a){a=a.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(c.props.viewer,a,d);a.length>=1&&a.forEach(function(a){b("MessengerParticipants.bs").get(a,function(a){e.push(a.name)})})});b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(i,{onSee:c.$16,onLeave:c.$17,onCancel:c.$18,prevThreadID:a,blockedNames:e})})};d.$12=function(a){var c=this;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(j,{onSee:c.$19,onIgnore:c.$20,onCancel:c.$18,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(c.props.threadID)})})};d.$21=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};d.$22=function(){return l&&this.props.thread!=null&&this.props.thread.unread_count!=null&&this.props.thread.unread_count>0&&this.props.thread.unread_count<k?b("MessengerConfig").MessageLoadCount+this.props.thread.unread_count:b("MessengerConfig").MessageLoadCount};d.$8=function(a){__p&&__p();var c=this;if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,this.$22());window.clearTimeout(this.$6);this.$6=window.setTimeout(function(){c.props.thread&&c.props.thread.message_count<1&&c.setState({isLoaded:!0,isLoading:!1})},6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){c.setState({messages:c.$23(b("immutable").List(a.messages)),isLoading:!1})}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b){if(a!==b.thread_id)return;c.$3=!0;c.$4=b;c.setState(function(a){return{messages:c.$23(a.messages)}});window.clearInterval(c.$5);c.$5=window.setInterval(c.$14,50)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){window.clearInterval(c.$5),c.$3=!1,c.setState(function(a){return{messages:c.$23(a.messages)}})}))};d.$23=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};return c}(b("React").PureComponent);a.propTypes={contact:(c=b("prop-types")).instanceOf(b("ImmutableObject")),deliveryTimestamp:c.number.isRequired,readReceipts:c.any,fbid:c.string.isRequired,hideContextBanner:c.bool,ignoredIds:c.any,onMarkRead:c.func.isRequired,onVoiceClipCreate:c.func,onReplyToMessage:c.func,thread:c.object,threadID:c.string.isRequired,viewer:c.string.isRequired,bottomOffset:c.number};e.exports=a}),null);
__d("MessengerDetailViewHeaderContainer.react",["requireCond","ImmutableObject","MercuryIDs","MercuryThreadIDMap","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerState.bs","MessengerView","React","cr:1269789","immutable","prop-types","shallowEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerDetailViewHeaderReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){__p&&__p();var c=a.getUniqueID(),e=a.getType(),f=a.getAuxiliaryData()||{};if(e==="thread"){var g=b("MercuryThreadIDMap").getForFBID(d.props.viewer);g.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else if(c===d.props.viewer&&d.props.recipients.size===0||e==="page"||e==="internal_bot_page"&&!f.canViewerAddToGroupChat){g=b("MercuryIDs").getThreadIDFromUserID(c);b("MessengerComposerActions").moveDraftToNextThread(g);b("MessengerComposerActions").exitComposeState();b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))}else b("MessengerComposerActions").addToken(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutPropertiesLoose(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutPropertiesLoose(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};d.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("cr:1269789")!=null?b("React").jsx(b("cr:1269789"),{onAddRecipient:this.$1,onRemoveRecipient:this.$2,recipients:this.props.recipients}):b("React").jsx(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,onClear:null,thread:this.props.thread,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser,shouldShowCreateGroupButton:this.props.shouldShowCreateGroupButton,onCreateGroupButtonClicked:this.props.onCreateGroupButtonClicked}):b("React").jsx(g,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,shouldUseRelay:!1,montageData:b("MessengerState.bs").montage(this.props.messengerState)})};d.$2=function(a){b("MessengerComposerActions").removeToken(a)};return c}(b("React").Component);a.propTypes={contactData:(c=b("prop-types")).object,infoPanelCollapsed:c.bool.isRequired,onInfoPanelToggle:c.func.isRequired,onResize:c.func.isRequired,participants:c.instanceOf(b("immutable").Map).isRequired,recipients:c.instanceOf(b("immutable").List).isRequired,thread:c.instanceOf(b("ImmutableObject")),view:c.string,viewer:c.string.isRequired,isWorkUser:c.bool.isRequired,messengerState:c.array.isRequired,shouldShowCreateGroupButton:c.bool,onCreateGroupButtonClicked:c.func};e.exports=a}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("MessengerContactListRowActions",["AsyncRequest","FantaFRXUtil","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerContactActions.bs","MessengerContactAdapters","URI","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerContactActions.bs").actions;a=function(a){__p&&__p();var c=a.action,d=a.contact,e=a.viewer,f=a.thread,i=a.participants;a=a.handleContactSelect;d=b("MessengerContactAdapters").fromMercuryParticipant(d);if(b("MercuryIDs").getUserIDFromParticipantID(d.uid)!==e)switch(c){case h.MESSAGE:a(d);break;case h.PROFILE:i=i.get(d.uid);i&&i.href?window.open(i.href):a(d);break;case h.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(f)){i=new(g||(g=b("URI")))("/chat/remove_participants/");i.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(d.uid),tid:f.thread_fbid});a=new(b("AsyncRequest"))(i);a.send()}break;case h.REPORT_GROUP_CHAT_USER:b("FantaFRXUtil").FRXClicked(f.thread_id,!0,d.uid);break}i=b("MercuryIDs").getUserIDFromParticipantID(d.uid);a=f.thread_fbid;if(i==null||a==null)return;switch(c){case h.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(a,[i],!1);break;case h.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(a,[i],!0);break}};e.exports={handleContactActions:a}}),null);
__d("CustomColorHighlightingReact.bs",["ReasonReact.bs","bs_js_null_undefined","CustomColorHighlighting.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c){return b("ReasonReact.bs").wrapJsForReason(b("CustomColorHighlighting.react"),{customColor:b("bs_js_null_undefined").fromOption(a)},c)}f.make=a}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props,d=c.isCollapsed,e=c.onToggle,f=c.associatedObject;c=c.customColor;a=(a=f.verse_group_link)!=null?a:f.action_link+"?ref=MessengerInfoPanelAssociatedObjectSection";return b("React").jsx(i,{customColor:c,isCollapsible:!0,isCollapsed:d,onToggle:e,title:h._("Part of"),children:b("React").jsxs(b("Link.react"),{href:a,target:"_blank",style:{textDecoration:"none"},className:"_35-k",children:[this.$1(),this.$2()]})})};d.$1=function(){var a=this.props.associatedObject;a=a.profile_picture;return b("React").jsx("div",{children:b("React").jsx(b("Image.react"),{className:"_35-n",src:a})})};d.$2=function(){var a=this.props.associatedObject,c=a.name,d=b("TimeSpentRoomTypeEnum")[a.room_type];a=a.verse_group_link;var e=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").jsxs("div",{className:"_35-o",children:[b("React").jsx("div",{className:"_35-p",children:c}),b("React").jsxs("div",{className:"_35-q",children:[!a&&h._({"GROUP":"Go to {productName} Group","EVENT":"Go to {productName} Event"},[h._param("productName",e),h._enum(d,b("TimeSpentRoomTypeEnum$FbtEnum"))]),a&&h._("Go to Facebook Chat Group")]})]})};return c}(b("React").PureComponent);a.propTypes={isCollapsed:(c=b("prop-types")).bool.isRequired,onToggle:c.func.isRequired,customColor:c.string,associatedObject:c.instanceOf(Object).isRequired};e.exports=a}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerCheckmarkIconSVGM4React.re","MessengerContactImageReact.bs","MessengerCrossIconSVGM4React.re","MessengerDotComAndInboxM4Check.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerTextWithEmoticons.react","React","ShimButton.react","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerCheckmarkIconSVGM4React.re").make,k=b("MessengerContactImageReact.bs").jsComponent,l=b("MessengerCrossIconSVGM4React.re").make,m=32,n=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w _7tla":"_3szo";function o(a,c,d){__p&&__p();if(!c||d===null)return null;var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c));e=e&&e.name;if(!e)return null;if(d===0)return b("CurrentUser").isWorkUser()&&a===c?h._("Requested to join"):h._("Added by {inviter}.",[h._param("inviter",e)]);else if(d===1)return h._("Invited by {inviter}.",[h._param("inviter",e)]);return null}function p(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser,g=a.requestSource;a=a.userFBID;c=b("React").jsx(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});a=o(a,e,g);e=a?b("React").jsxs("span",{className:"_4e87",children:[b("React").jsx("div",{children:c}),b("React").jsx("div",{className:"_4egt",children:a})]}):b("React").jsx("span",{className:"_3tkx",children:c});return b("React").jsxs("div",{className:"_3szq _4fq",children:[b("React").jsx(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:m,src:d}),e]})}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.$1();else return this.$2()};d.$1=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return b("React").jsxs("div",{className:n,children:[b("React").jsx(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").jsxs("div",{className:"_4fs _7tlb",children:[b("React").jsx(b("ShimButton.react"),{"aria-label":h._("Ignore"),className:"_7tlc _3-91",href:"#",onClick:this.$3.bind(this),children:b("React").jsx(l,{size:20})}),b("React").jsx(b("ShimButton.react"),{"aria-label":c,className:"_7tlc",href:"#",onClick:this.$4.bind(this),children:b("React").jsx(j,{size:20})})]})]})};d.$2=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("Approve"):h._("Accept");return b("React").jsxs("div",{className:n,children:[b("React").jsx(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").jsxs("div",{className:"_3ihq _4fs",children:[b("React").jsx(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$4.bind(this),children:c}),b("React").jsx("span",{className:"_1m8c"}),b("React").jsx(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$3.bind(this),children:h._("Ignore")})]})]})};d.$4=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID,e=a.userFBID;a=a.onUpdated;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[e],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.acceptToJoinableGroup(d,e);a&&a(e)};d.$3=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID,e=a.userFBID;a=a.onUpdated;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[e],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.rejectToJoinableGroup(d,e);a&&a(e)};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","MessengerApprovalQueueUtils","immutable","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalRequester.react","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelSectionReact.bs","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.state={approvalQueue:b("immutable").Map()};return c}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.thread)};d.render=function(){return b("React").jsxs("div",{children:[this.$2(),this.$3()]})};d.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread)};d.$1=function(a){var c=this;if(!a)return;b("MessengerApprovalQueueUtils").getApprovalQueueParticipants(a,function(a){return c.setState({approvalQueue:a})})};d.$2=function(){return!b("MessengerAdminGroupUtils").showGroupOptionsSection(this.props.thread)?null:b("React").jsx(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:h._("Group Options"),children:b("React").jsx("div",{className:"_3iho",children:this.$4()})})};d.$4=function(){var a=this.props,c=a.viewer,d=a.thread;a=b("MessengerAdminGroupUtils").isApprovalOpenThread(d);if(!b("MessengerAdminGroupUtils").showJoinableApprovalToggle(d,c))return null;c=b("MessengerAdminGroupUtils").isAdminRequired(d);var e=c?h._("Require Admin Approval"):h._("New member approval");c=c?b("React").jsx("div",{className:"_3ihp"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _87b_":""),children:h._("Require an admin to approve all requests to join the group chat")}):b("React").jsx("div",{className:"_3ihp",children:h._("Approve who can join the group")});return b("React").jsxs("div",{className:"_3szo _2ya9",children:[b("React").jsxs("div",{className:"_3szq",children:[e,c]}),b("React").jsx(b("FBToggleSwitch.react"),{animate:!0,"aria-label":e,checked:!a,onToggle:function(a){return i.setApprovalMode(a?1:0,d)}})]})};d.$3=function(){var a=this.props,c=a.viewer,d=a.thread,e=d.thread_fbid;if(!e||!b("MessengerAdminGroupUtils").showApprovalQueue(d,c))return null;a=b("MessengerAdminGroupUtils").getPendingRequestNumber(d);c=b("MessengerAdminGroupUtils").isAdminRequired(d)?h._("Member Requests ({memberRequestCount})",[h._param("memberRequestCount",a)]):h._("Pending Requests ({pendingRequestCount})",[h._param("pendingRequestCount",a)]);return b("React").jsx(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:c,children:b("React").jsx("div",{className:"_3iho _3oh-",children:this.state.approvalQueue.map(function(a){var c=a.fbid;return c&&b("React").jsx(b("MessengerApprovalRequester.react"),{imageSRC:a.image_src,inviterFBID:a.inviter_id,requestSource:a.request_source,isAdminRequired:b("MessengerAdminGroupUtils").isAdminRequired(d),isMessengerUser:a.is_messenger_user,name:a.name,threadFBID:e,userFBID:c,onUpdated:null},a.id)}).toArray()})})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerTextWithEmojiInput.react",["cx","CompositeDraftDecorator","DraftEditor.react","EditorState","MessengerEmojiSpan.react","React","XUICloseButton.react","createContentStateForTextWithMessengerEmoji","getEntityMatcher","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","handlePastedTextForMessengerEmoji","joinClasses","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a){if(a!==d.state.editorState){var b=!a.getCurrentContent().hasText();d.setState({editorState:a,isEmpty:b});d.props.onChange&&d.props.onChange(a)}},d.$3=function(a,c){if(d.props.maxLength!=null&&d.props.maxLength<=d.getValue().length&&c.getSelection().isCollapsed())return"handled";a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return"not-handled";d.setState({editorState:a});return"handled"},d.$4=function(a,c,e){c=d.props.maxLength;if(c!=null){c=b("handlePastedTextForMessengerEmoji")(d.getValue().length,c,a,e);d.setState({editorState:c});return"handled"}return"not-handled"},d.$5=function(a,b){if(d.props.onReturn){d.props.onReturn(a,b);return"handled"}return"not-handled"},d.$8=function(){var a=d.$1("");d.setState({editorState:a});d.props.onChange&&d.props.onChange(a)},d.state={editorState:d.$1(d.props.initialValue),isEmpty:d.props.initialValue==null||d.props.initialValue.length===0},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(a){return b("EditorState").createWithContent(b("createContentStateForTextWithMessengerEmoji")(a||""),this.$2())};d.componentDidMount=function(){this.props.disableAutoFocus!==!0&&b("setImmediate")(this.focusInput.bind(this))};d.render=function(){var a;a=(a=this.props.placeholder)==null?void 0:a.toString();return b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_30e7"),children:[b("React").jsx("div",{className:"_5j5f _3oh-",children:b("React").jsx(b("DraftEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$3,handlePastedText:this.$4,handleReturn:this.$5,onChange:this.$6,placeholder:a,ref:"input",spellCheck:!1,stripPastedStyles:!0,textAlignment:"left"})}),this.props.showLengthIndicator===!0&&this.props.maxLength!=null?this.$7():null,b("React").jsx(b("XUICloseButton.react"),{size:"small",onClick:this.$8,className:(this.state.isEmpty?"hidden_elem":"")+" _5j5l"})]})};d.$7=function(){return this.getValue().length!==0?b("React").jsxs("div",{className:"_32y6",children:[this.getValue().length,"/",this.props.maxLength]}):b("React").jsx("div",{className:"_32y6"})};d.$2=function(){return new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"}),component:b("MessengerEmojiSpan.react")}])};d.getValue=function(){var a=this.state.editorState.getCurrentContent();return b("getVisibleValueForContentStateWithMessengerEmoji")(a)};d.focusInput=function(){this.refs.input.focus(),this.$6(b("EditorState").moveFocusToEnd(this.state.editorState))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","requireCond","FileInput","FileInputUploader","Link.react","MercuryConfig","MessengerDotComAndInboxM4Check.bs","cr:943115","React","ReactDOM","SubscriptionsHandler","createReactClass_DEPRECATED","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("createReactClass_DEPRECATED")({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:(a=b("prop-types")).func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a,c=h._("Click to change the image");return(a=b("React")).jsxs("form",{action:this.props.uri,method:"post",ref:"form",children:[a.jsx("input",{type:"hidden",name:"attach_id",ref:"attachID"}),a.jsx("input",{type:"hidden",name:"images_only",value:"true"}),a.jsxs("div",{className:"_m _4q60"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _2lyy")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _80cm":""),children:[b("MessengerDotComAndInboxM4Check.bs").yes?b("cr:943115")&&b("cr:943115").make({fill:"#000000",size:24}):null,b("React").jsx(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton",children:b("React").jsx("span",{"aria-hidden":"true",children:h._("Edit")})}),b("React").jsx("input",{"aria-label":h._("Change group photo"),type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:c})]})]})},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MessengerAdminGroupUtils","MessengerContactActions.bs","MessengerDialogs.bs","MessengerMakeAsOwnerDialogReact.bs","MessengerMenu.react","MessengerParticipants.bs","MessengerPopoverMenu.react","MessengerRemoveAsOwnerDialogReact.bs","MessengerRemoveFromGroupDialogReact.bs","MessengerState.bs","MessengerURIStore","React","ReactComponentWithPureRenderMixin","ShimButton.react","StoreAndPropBasedStateMixin","createReactClass_DEPRECATED","gkx","joinClasses","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactActions.bs").actions,j=b("MessengerMakeAsOwnerDialogReact.bs").jsComponent,k=b("MessengerRemoveAsOwnerDialogReact.bs").jsComponent,l=b("MessengerRemoveFromGroupDialogReact.bs").jsComponent,m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator;c=b("createReactClass_DEPRECATED")({displayName:"MessengerInfoPanelContactActions",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerURIStore"))],propTypes:{admins:(a=b("prop-types")).object,extrasEnabled:a.bool.isRequired,contact:a.instanceOf(b("ImmutableObject")).isRequired,isAdminRequired:a.bool.isRequired,isOpen:a.bool,onAction:a.func.isRequired,onToggle:a.func.isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=b("MessengerURIStore").getState().activeThreadID;a=c?b("MessengerState.bs").getThreadMetaNow(a.viewer,c):null;return{thread:a}}},render:function(){__p&&__p();var a=this,c=this._isViewerAdmin(),d=b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.contact.uid),e=this._isUserViewer(),f=b("MessengerAdminGroupUtils").canRemoveAdmin(c,d,this._getUserAdminType(),this.state.thread)?b("React").jsx(m,{label:h._("Remove As Admin"),onclick:this._handleRemoveAsOwnerClick}):null,g=null;c=b("MessengerAdminGroupUtils").canMakeOthersAdmins(c,d,this.state.thread);d=b("MessengerAdminGroupUtils").canMakeSelfAdmin(e,this.state.thread);(c||d)&&(g=b("React").jsx(m,{label:h._("Make Admin"),onclick:this._hanleMakeOwnerClick}));if(e)if(g||f)c=b("React").jsxs(b("MessengerMenu.react"),{children:[g,f]});else return null;else c=b("React").jsxs(b("MessengerMenu.react"),{children:[b("React").jsx(m,{label:h._("Message"),onclick:this._makeActionHandler(i.MESSAGE)}),this.props.contact.href?b("React").jsx(m,{label:h._("View Profile"),onclick:this._makeActionHandler(i.PROFILE)}):null,b("React").jsx(m,{label:h._("Report User"),onclick:this._makeActionHandler(i.REPORT_GROUP_CHAT_USER)}),g,f,this._renderExtras()]});return b("React").jsx(b("MessengerPopoverMenu.react"),{menu:c,onHide:function(){return a.props.onToggle(!1)},onShow:function(){return a.props.onToggle(!0)},children:b("React").jsx(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick})})},_renderExtras:function(){if(!this.props.extrasEnabled)return null;var a=[b("React").jsx(n,{},"separator")],c=this._isViewerAdmin();b("MessengerAdminGroupUtils").canRemoveFromGroup(c,this._getUserAdminType(),this.state.thread)&&a.push(b("React").jsx(m,{label:h._("Remove from Group"),onclick:this._handleRemoveClick},"remove-from-group"));return a.length>=2?a:null},_handleClick:function(a){a.stopPropagation(),a.preventDefault()},_makeActionHandler:function(a){var b=this;return function(c){b._handleClick(c),b.props.onAction(a,c)}},_handleRemoveClick:function(a){var c=this;this._handleClick(a);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(l,{onToggle:c._handleDialogToggle,onRemove:c._handleDialogRemoveClick,isWorkSyncedChat:b("MessengerAdminGroupUtils").isWorkSyncedGroupChat(c.state.thread),isUserBot:c._isUserBot()})})},_handleRemoveAsOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(k,{isAdminRequired:c.props.isAdminRequired,isLastAdminInThread:c.props.admins&&Object.keys(c.props.admins).length===1,isUserViewer:c._isUserViewer(),name:d&&d.name,onToggle:c._handleDialogToggle,onRemove:c._handleOwnerRemoveClick})})},_handleDialogRemoveClick:function(a){this.props.onAction(i.REMOVE,a)},_handleOwnerRemoveClick:function(a){this.props.onAction(i.REMOVE_OWNER,a)},_hanleMakeOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(j,{onToggle:c._handleDialogToggle,onMakeOwner:c._handleOwnerAddClick,name:d&&d.name,isAdminRequired:c.props.isAdminRequired,isUserViewer:c._isUserViewer()})})},_handleOwnerAddClick:function(a){this.props.onAction(i.ADD_OWNER,a)},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()},_isUserViewer:function(){return b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isUserBot:function(){return this.props.contact.workForeignEntityInfo===null},_isViewerAdmin:function(){return b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.viewer)},_getUserAdminType:function(){var a=b("MercuryIDs").isValid(this.props.contact.uid)&&b("MercuryIDs").getUserIDFromParticipantID(this.props.contact.uid);return this.props.admins&&a?this.props.admins[a]:null}});e.exports=c}),null);
__d("MessengerCompositeMuteSettingsDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("messengerCompositeMuteSettingsDialogReactComponent").__setRef("MessengerCompositeMuteSettingsDialogBootloader.react"),placeholder:b("React").jsx("div",{})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("AARRGGBBColor.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return"#"+a.slice(2,8)}f.toHex=a}),null);
__d("CustomizeChatSolidItemReact.bs",["cx","React","AARRGGBBColor.bs"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=a.theme;return b("React").jsx("div",{"aria-label":a.accessibility_label,className:"_6kle",style:{backgroundColor:b("AARRGGBBColor.bs").toHex(a.fallback_color)}})}c=a;f.make=c}),null);
__d("CustomizeChatColorItemReact.bs",["cx","React","Image.react","AARRGGBBColor.bs","MessengerThreadTheme.bs","CustomizeChatSolidItemReact.bs","CustomizeChatGradientItemReact.bs"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){a=a.theme;var c=a.icon_uri;if(c!==void 0)return b("React").jsx(b("Image.react"),{className:"_6kle",alt:a.accessibility_label,src:c,style:{backgroundColor:b("AARRGGBBColor.bs").toHex(a.fallback_color)}});else{c=b("MessengerThreadTheme.bs").isGradient(a);if(c)return b("React").jsx(b("CustomizeChatGradientItemReact.bs").make,{theme:a});else return b("React").jsx(b("CustomizeChatSolidItemReact.bs").make,{theme:a})}}c=a;f.make=c}),null);
__d("MessengerInfoPanelEmoji.react",["ix","cx","fbt","Bootloader","CurrentUser","EmojiLikeConstants","Image.react","ImmutableObject","Keys","MercuryShareAttachmentRenderLocations","MessengerCustomColorUtils.bs","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerHotLikeIconSVGM4React.bs","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","asset","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerHotLikeIconSVGM4React.bs").make,k=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo",l=b("MessengerDotComAndInboxM4Check.bs").yes?"_6ybx":"";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.preventDefault(),d.$5()},d.$3=function(a){a.keyCode===b("Keys").RETURN&&(a.preventDefault(),d.$5())},d.$6=function(){d.$1&&d.$1.focus()},d.$4=function(a){d.$1=a},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){if(!this.props.thread.customization_enabled)return null;var a=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?b("MessengerSupportedEmojiUtils").getNewEmojiData(this.props.thread.custom_like_icon.emoji,b("EmojiLikeConstants").size.SMALL):null;a=a&&a.url?b("React").jsx(b("Image.react"),{src:a.url,className:"_12cp"}):b("CurrentUser").isWorkUser()?b("React").jsx(b("Image.react"),{src:g("470537")}):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").jsx(j,{color:this.props.thread.gradient_colors&&this.props.thread.gradient_colors.length?this.props.thread.gradient_colors[this.props.thread.gradient_colors.length-1]:this.props.thread.solid_color?this.props.thread.solid_color:b("MessengerCustomColorUtils.bs").defaultColor()}):b("React").jsx(b("MessengerHotLikeOutlineSVG.react"),{color:this.props.thread.solid_color?this.props.thread.solid_color:"",height:"24px",width:"24px",location:b("MercuryShareAttachmentRenderLocations").MESSENGER});return b("React").jsxs("div",{className:k,onClick:this.$2,onKeyDown:this.$3,ref:this.$4,role:"button",tabIndex:"0",children:[b("React").jsx("div",{className:"_3szp",children:b("React").jsx("div",{className:l,children:a})}),b("React").jsx("div",{className:"_3szq",children:i._("Change Emoji")})]})};d.$5=function(){var a=this;b("Bootloader").loadModules(["MessengerChangeEmojiDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(d,{currentEmoji:a.props.thread.custom_like_icon?a.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,b("EmojiLikeConstants").FB_THUMBS_UP_EMOJI),onClose:a.$6,onSave:a.props.onChange})})},"MessengerInfoPanelEmoji.react")};return c}(b("React").PureComponent);a.propTypes={thread:b("prop-types").instanceOf(b("ImmutableObject")).isRequired,viewer:b("prop-types").string.isRequired,onChange:b("prop-types").func.isRequired};e.exports=a}),null);
__d("FBClipboardLinkReact.bs",["bs_caml_option","ReasonReactCompat.bs","FBClipboardLink.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h,i,j,k,l){__p&&__p();return function(m){__p&&__p();m={value:d};a!==void 0&&(m.className=b("bs_caml_option").valFromOption(a));c!==void 0&&(m.label=b("bs_caml_option").valFromOption(c));e!==void 0&&(m.tooltip=b("bs_caml_option").valFromOption(e));f!==void 0&&(m.tooltipSuccess=b("bs_caml_option").valFromOption(f));g!==void 0&&(m.tooltipSuccessDuration=b("bs_caml_option").valFromOption(g));h!==void 0&&(m.onComplete=b("bs_caml_option").valFromOption(h));i!==void 0&&(m.position=b("bs_caml_option").valFromOption(i));j!==void 0&&(m.alignment=b("bs_caml_option").valFromOption(j));k!==void 0&&(m.stopPropagation=b("bs_caml_option").valFromOption(k));l!==void 0&&(m.preventDefaultOnClick=b("bs_caml_option").valFromOption(l));return m}}function a(a,c,d,e,f,h,i,j,k,l,m,n){return b("ReasonReactCompat.bs").wrapReactForReasonReact(b("FBClipboardLink.react"),g(a,c,d,e,f,h,i,j,k,l,m)(0),n)}f.componentProps=g;f.make=a}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Image.react","Layout.react","LayoutColumn.react","LayoutFillColumn.react","Link.react","MercuryMessageStore","MercuryThreadTimestampReact.re","MercuryTimestamp","MessengerInfoPanelSectionReact.bs","MessengerSpinner.react","MessengerThreadSharedLinksWebGraphQLQuery","React","URI","WebGraphQL","clearTimeout","gkx","isLinkshimURI","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j=b("MercuryThreadTimestampReact.re").make,k=b("MessengerInfoPanelSectionReact.bs").jsComponent,l=5,m=36;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=!1,c.state={canShowMore:!1,isFetchingMore:!1,fetchCount:l,messageThread:null},c.$8=function(){c.$4(c.state.fetchCount+l)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$3=!0,this.$4(this.state.fetchCount),this.$5(this.props.threadID)};d.componentWillUnmount=function(){this.$2&&(b("clearTimeout")(this.$2),delete this.$2),this.$1&&this.$1.destroy(),this.$3=!1};d.componentDidUpdate=function(a,b){var c=this;a.threadFBID!==this.props.threadFBID&&this.setState({messageThread:null,fetchCount:l},function(){c.$4(c.state.fetchCount)})};d.render=function(){var a=this,c;if(!b("gkx")("678615"))return null;c=(c=this.state.messageThread)!=null?(c=c.shared_links)!=null?c.length:c:c;return!this.props.threadFBID||!this.state.messageThread||!this.state.messageThread.shared_links||c==null||c==0?null:b("React").jsx(k,{isCollapsible:!0,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("Shared Links"),children:b("React").jsxs("div",{className:"_2wjt",children:[this.state.messageThread.shared_links.map(function(b,c){return a.$6(b,c)}),this.$7()]})})};d.$4=function(a){__p&&__p();var c=this;if(!this.$3)return;var d=this.props.threadFBID;if(!d)return;this.setState({isFetchingMore:!0});b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedLinksWebGraphQLQuery"))({threadFBID:d,count:a})),function(b){var d;if(!c.$3)return!1;var e=(d=b.message_thread)!=null?(d=d.shared_links)!=null?d.length:d:d;c.setState(function(c){return{messageThread:b.message_thread,canShowMore:e?e>=a:!1,isFetchingMore:!1,fetchCount:a}})})};d.$5=function(a){__p&&__p();var c=this;this.$1=new(b("MercuryMessageStore"))(a);this.$1.subscribe(function(a){if(a.messages.length<1)return;var d=a.eventType==b("MercuryMessageStore").MESSAGES_RECEIVED,e=a.eventType==b("MercuryMessageStore").MESSAGES_CHANGED;if(!d&&!e)return;d=a.messages[a.messages.length-1];d.attachments&&d.attachments.length>0&&(c.$2=b("setTimeout")(function(){delete c.$2,c.$4(c.state.fetchCount)},1e3))})};d.$6=function(a,c){var d=a.media&&a.media.image&&a.media.image.uri?b("React").jsx(b("LayoutColumn.react"),{children:b("React").jsx(b("Image.react"),{className:"_2wjy",src:a.media.image.uri,style:{height:m,width:m}})}):null,e=null;a.sharer&&a.sharer.name?e=b("React").jsx("div",{className:"_2wj_",children:h._("Sent by {sender_name}",[h._param("sender_name",a.sharer.name)])}):a.description&&a.description.text?e=b("React").jsx("div",{className:"_2wj_",children:a.description.text}):e=b("React").jsx("div",{className:"_2wj_",children:this.$9(a.url)});return b("React").jsx("li",{children:b("React").jsx(b("Link.react"),{className:"_2pit _2wju",style:{color:this.props.customColor},target:"_blank",href:a.url,children:b("React").jsxs(b("Layout.react"),{className:"_2wjz clearfix",children:[d,b("React").jsxs(b("LayoutFillColumn.react"),{className:"_653d _159d",children:[b("React").jsx("div",{className:"_2wj-",children:a.title_with_entities.text}),e]}),b("React").jsx(b("LayoutColumn.react"),{children:a.creation_time?this.$10(a.creation_time*1e3):null})]})})},c)};d.$10=function(a){var c;return b("React").jsx(j,{className:"_1ht7 _159e",time:a,title:(c=b("MercuryTimestamp").getAbsoluteTimestamp(a))!=null?c:void 0,text:b("MercuryTimestamp").getRelativeTimestamp(a)})};d.$9=function(a){if(a==null)return"";var c=new(i||(i=b("URI")))(a);if(!b("isLinkshimURI")(c))return a;c=c.getQueryData().u;return!c?a:c};d.$7=function(){if(!this.state.canShowMore)return null;return this.state.isFetchingMore?b("React").jsx("div",{className:"_2n20",children:b("React").jsx(b("MessengerSpinner.react"),{color:"gray"})}):b("React").jsx(b("Link.react"),{className:"_3oh- _fy2 _2wjv",onClick:this.$8,children:h._("Show More...")})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM","prop-types"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={prevHeight:-1,prevIsScrolledToBottom:!1},d.$1=null,d.isScrolledToBottom=function(){if(d.refs.scrollable)return d.refs.scrollable.isScrolledToBottom();else return!0},d.getHeight=function(){if(d.refs.scrollable)return b("ReactDOM").findDOMNode(d.refs.scrollable).offsetHeight;else return 0},d.$2=function(){var a=d.isScrolledToBottom(),b=d.getHeight();(d.state.prevIsScrolledToBottom!==a||d.state.prevHeight!==b)&&d.setState({prevHeight:b,prevIsScrolledToBottom:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2,children:b("React").jsx(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable",children:this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)})})};return c}(b("React").Component);a.propTypes={children:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MessengerThreadInfoPanelContainer.react",["cx","fbt","AsyncRequest","Bootloader","BootloadOnRender.react","CoworkerThreadContextBanner.react","CurrentUser","ErrorBoundary.react","IgnoreMessagesTypedLogger","ImmutableObject","JSResource","LazyComponent.react","LoadOnRender.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInfo","MessageRequestUtils","MessageThreadAssociatedObjectUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfig","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerContactAdapters","MessengerContactListRowActions","MessengerDialogs.bs","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","MessengerInfoPanelGroupThreadDescriptionContainerReact.bs","MessengerInfoPanelNameSectionM4React.re","MessengerInfoPanelNameSectionReact.bs","MessengerInfoPanelPeopleSectionReact.re","MessengerInfoPanelPrivacySupportOptionsContainerReact.bs","MessengerInfoPanelSearchReact.bs","MessengerInfoPanelThreadOptionsContainerReact.bs","MessengerInfoPanelWorkContextContainerReact.bs","MessengerLeaveGroupAction","MessengerMessageRequestsTypedLogger","MessengerObjectAssociationType","MessengerSettingsActions","MessengerSettingsStore","MessengerSharedFilesReact.bs","MessengerSharedLinks.react","MessengerSharedPhotosReact.bs","MessengerThreadInfoPanelScrollableArea.react","React","StoreAndPropBasedStateMixin","WorkChatInfoPanelGroupThreadDescriptionContainerReact.bs","WorkGalahadSettings","WorkModeConfig","XMessagingSetThreadImageController","XMessagingSetThreadNameController","createReactClass_DEPRECATED","getPageIDFromThreadID","gkx","immutable","lazyLoadComponent","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerConfirmBlockThreadDialogReact.bs").make,j=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,k=b("MessengerContactListRowActions").handleContactActions,l=b("MessengerDomIDs.bs").ids,m=b("MessengerInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent,n=b("MessengerInfoPanelNameSectionM4React.re").make,o=b("MessengerInfoPanelNameSectionReact.bs").jsComponent,p=b("MessengerInfoPanelPeopleSectionReact.re").make,q=b("MessengerInfoPanelPrivacySupportOptionsContainerReact.bs").make,r=b("MessengerInfoPanelSearchReact.bs").jsComponent,s=b("MessengerInfoPanelThreadOptionsContainerReact.bs").jsComponent,t=b("MessengerInfoPanelWorkContextContainerReact.bs").jsComponent,u=b("MessengerSharedFilesReact.bs").jsComponent,v=b("MessengerSharedPhotosReact.bs").jsComponent,w=b("WorkChatInfoPanelGroupThreadDescriptionContainerReact.bs").jsComponent,x=b("lazyLoadComponent")(b("JSResource")("MessengerInfoPanelWorkGroupLinksContainerReact").__setRef("MessengerThreadInfoPanelContainer.react")),y=b("lazyLoadComponent")(b("JSResource")("WorkChatInfoPanelThreadOptionsContainerReact").__setRef("MessengerThreadInfoPanelContainer.react"));c=b("createReactClass_DEPRECATED")({displayName:"MessengerThreadInfoPanelContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerSettingsStore"))],propTypes:{className:(a=b("prop-types")).string.isRequired,blockedIds:a.any,contactData:a.object,participants:a.instanceOf(b("immutable").Map).isRequired,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired,hideGroupInfoInThreadInfoPanel:a.bool.isRequired},statics:{calculateState:function(){var a=b("MessengerSettingsStore").getSettings(),c=a.links_section_collapsed,d=a.associated_object_section_collapsed,e=a.people_section_collapsed,f=a.photos_section_collapsed,g=a.files_section_collapsed,h=a.thread_section_collapsed,i=a.thread_stats_section_collapsed,j=a.group_section_collapsed,k=a.group_approval_section_collapsed,l=a.group_link_section_collapsed,m=a.description_section_collapsed,n=a.privacy_section_collapsed;a=a.page_link_section_collapsed;return{links_section_collapsed:c,associated_object_section_collapsed:d,people_section_collapsed:e,photos_section_collapsed:f,files_section_collapsed:g,thread_section_collapsed:h,thread_stats_section_collapsed:i,group_section_collapsed:j,group_approval_section_collapsed:k,group_link_section_collapsed:l,description_section_collapsed:m,privacy_section_collapsed:n,page_link_section_collapsed:a}}},render:function(){var a=this,c=this.props.contactData||{},d=this.props.thread.thread_fbid||this.props.thread.other_user_fbid,e=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(this.props.viewer,this.props.blockedIds,this.props.thread),f=b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(this.props.thread,this.props.viewer,c.contact);return b("React").jsx(b("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className,children:function(g,i,j,k){return b("React").jsxs("div",{className:"_3tkv",id:l.THREAD_INFO_PANEL,children:[b("React").jsx("h3",{className:"accessible_elem",children:h._("Conversation Information")}),b("MessengerDotComAndInboxM4Check.bs").yes?b("React").jsx(n,{contact:c.contact,isUserActive:c.isUserActive||!1,lastActive:c.lastActive,onThreadNameChange:a._handleThreadNameChange,onThreadPhotoChange:a._handleThreadPhotoChange,platform:c.platform,thread:a.props.thread,viewer:a.props.viewer}):b("React").jsx(o,{contact:c.contact,isUserActive:c.isUserActive||!1,isBlocked:e,lastActive:c.lastActive,onArchive:a._handleArchive,onDelete:a._handleDelete,onLeaveGroup:a._handleLeaveGroup,onMarkRead:a._handleMarkRead,onMarkSpam:a._handleMarkSpam,onMarkUnread:a._handleMarkUnread,onMute:a._handleMuteChange,onThreadNameChange:a._handleThreadNameChange,onThreadPhotoChange:a._handleThreadPhotoChange,onPin:a._handlePin,onUnpin:a._handleUnpin,onUnmute:a._handleUnmute,onIgnore:a._handleIgnore,onBlock:a._handleBlock,onUnblock:a._handleUnblock,showBlock:f,participants:a.props.participants,platform:c.platform,showLeaveGroup:a.props.thread.is_subscribed&&!a.props.thread.is_canonical,showReport:a._isPageChat(),thread:a.props.thread,viewer:a.props.viewer}),a._renderAssociatedObject(),a._renderWorkContext(),a._renderMarketplaceBanner(),a._renderCoworkerThreadBanner(),b("CurrentUser").isWorkUser()?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(y,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,search:b("WorkGalahadSettings").isGalahadEnabled?null:b("React").jsx(r,{thread:a.props.thread}),viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle,contactData:c})}):b("MessengerDotComAndInboxM4Check.bs").yes?b("React").jsx(s,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle}):b("React").jsx(s,{isCollapsed:a.state.thread_section_collapsed,participants:a.props.participants,thread:a.props.thread,viewer:a.props.viewer,onToggle:a._handleThreadSectionToggle}),a._renderPageLink(),a._renderGroupDescription(),a._renderGroupLink(),b("MessengerAdminGroupUtils").canSeeGroupOptionsSection(a.props.thread,a.props.viewer)?a._renderGroupOptions():null,a.props.thread.is_canonical?null:a._renderMembers(),b("MessengerDotComAndInboxM4Check.bs").yes?b("React").jsx(q,{contact:c.contact,isBlocked:e,isCollapsed:a.state.privacy_section_collapsed,isPage:a._isPageChat(),participants:a.props.participants,showBlock:f,thread:a.props.thread,viewer:a.props.viewer,onBlock:a._handleBlock,onIgnore:a._handleIgnore,onUnblock:a._handleUnblock,onToggle:a._handlePrivacySectionToggle}):null,b("React").jsx(b("MessengerSharedLinks.react"),{threadID:a.props.thread.thread_id,threadFBID:d,customColor:a.props.thread.solid_color,isCollapsed:a.state.links_section_collapsed,onToggle:a._handleLinksSectionToggle}),b("React").jsx(u,{threadID:a.props.thread.thread_id,threadFBID:d,isCollapsed:a.state.files_section_collapsed,onToggle:a._handleFilesSectionToggle}),b("React").jsx(v,{getIsScrolledToBottom:j,getScrollableHeight:k,isCollapsed:a.state.photos_section_collapsed,onToggle:a._handlePhotosSectionToggle,threadID:a.props.thread.thread_id,threadFBID:d,viewer:a.props.viewer})]})}})},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,"menu_item_in_info_panel")},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,"menu_item_in_info_panel")},_handleDelete:function(){this._getThreadActions()["delete"](this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id),b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other"),b("MessengerActions").selectThread(null),new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function(){var a=this,b=this.props.thread;b=b.thread_id;var c=this.props.contactData&&this.props.contactData.contact.short_name||h._("sender");b&&this._getThreadActions().blockIgnoreOnMessengerDotCom(!0,b,function(){a._handleAfterBlock(c)})},_handleAfterBlock:function(a){var c=this.props,d=c.thread;c=c.viewer;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(i,{participantName:a})});c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.thread_id,b("MercuryIDs").getParticipantIDFromUserID(c));d.folder===b("MessagingTag").PENDING&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.thread_id)).setSurface("thread").setFolderType(b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint("settings").log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handleContactSelect:function(a,c){c=b("MercuryIDs").getThreadIDFromParticipantID(a.uid);c&&b("MessengerActions").selectThread(c)},_handleLeaveGroup:function(){var a=this;if(this.props.viewer){var c=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admins,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(j,{onLeave:a._onLeaveGroupConfirm,isViewerAdmin:c,thread:a.props.thread})})}},_onLeaveGroupConfirm:function(){b("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function(a){var c=b("XMessagingSetThreadNameController").getURIBuilder().getURI(),d=this.props.thread.thread_fbid;if(d===null){var e=b("MercuryThreadIDMap").get();d=e.getServerIDFromClientIDNow(this.props.thread.thread_id)}new(b("AsyncRequest"))().setURI(c).setData({thread_id:d,thread_name:a}).send()},_handleThreadPhotoChange:function(a,c){c=(c=c)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.image_id:c:c:c;if(!c)return;var d=b("XMessagingSetThreadImageController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(d).setData({thread_id:b("MercuryIDs").getThreadFBIDFromThreadID(a),thread_image_id:c}).send()},_handleAssociatedObjectSectionToggle:function(){b("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function(){b("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function(){b("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function(){b("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function(){b("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_handleDescriptionSectionToggle:function(){b("MessengerSettingsActions").changeSettings({description_section_collapsed:!this.state.description_section_collapsed})},_handleGroupLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({group_link_section_collapsed:!this.state.group_link_section_collapsed})},_handlePrivacySectionToggle:function(){b("MessengerSettingsActions").changeSettings({privacy_section_collapsed:!this.state.privacy_section_collapsed})},_handlePageMDotMeLinkSectionToggle:function(){b("MessengerSettingsActions").changeSettings({page_link_section_collapsed:!this.state.page_link_section_collapsed})},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function(){return!!b("getPageIDFromThreadID")(this.props.thread.thread_id)},_renderAssociatedObject:function(){var a=this.props,c=a.thread;a=a.hideGroupInfoInThreadInfoPanel;var d=c.work_associated_group||c.object_association_type===b("MessengerObjectAssociationType").GENERAL_CHAT;if(b("CurrentUser").isWorkUser()&&d&&!a)return b("gkx")("808098")?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(x,{isCollapsed:this.state.associated_object_section_collapsed,thread:c,onToggle:this._handleAssociatedObjectSectionToggle})}):null;d=b("MessageThreadAssociatedObjectUtils").shouldRender(c.associated_object);return!d?null:b("React").jsx(b("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.state.associated_object_section_collapsed,onToggle:this._handleAssociatedObjectSectionToggle,customColor:c.solid_color,associatedObject:c.associated_object})},_renderWorkContext:function(){var a=this.props.contactData||{};a=a.contact;return!b("CurrentUser").isWorkUser()||!a||!a.href||b("WorkModeConfig").hide_email_address||a.user_type!=="user"&&a.user_type!=="fb4c"?null:b("React").jsx(t,{isCollapsed:this.state.thread_stats_section_collapsed,thread:this.props.thread,onToggle:this._handleThreadStatsSectionToggle,href:a.href})},_renderMarketplaceBanner:function(){__p&&__p();var a,c,d,e;e=(e=this.props.thread)!=null?e.marketplace_thread_data:e;d=(d=e)!=null?d.for_sale_item:d;c=(c=e)!=null?c.buyer_fbid:c;a=(a=e)!=null?a.seller_fbid:a;e=(e=e)!=null?e.eligible_profile_selling_invoice_actions:e;if(!d||!c||!a)return null;var f=this.props.thread.thread_fbid||this.props.thread.other_user_fbid;return b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MarketplaceMessengerContextBanner.react").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{buyerID:c,eligibleProfileSellingInvoiceActions:e,forSaleItem:d,renderLocation:"messenger",sellerID:a,threadFBID:f})})},_renderCoworkerThreadBanner:function(){var a;a=(a=this.props.thread)==null?void 0:a.group_thread_subtype;return a!==13?null:b("React").jsx(b("CoworkerThreadContextBanner.react"),{})},_renderPageLink:function(){if(b("CurrentUser").isWorkUser()||!this._isPageChat())return null;var a=function(a){b("Bootloader").loadModules(["MessengerInfoPanelPageThreadMDotMeLinkContainerReact.bs"],function(b){b=b.jsComponent;return a(b)},"MessengerThreadInfoPanelContainer.react")};return b("React").jsx(b("ErrorBoundary.react"),{children:b("React").jsx(b("LoadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{isCollapsed:this.state.page_link_section_collapsed,onToggle:this._handlePageMDotMeLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:a,placeholder:b("React").jsx("div",{})})})},_renderGroupDescription:function(){var a;if(b("CurrentUser").isWorkUser()&&!this.props.thread.is_canonical)return b("React").jsx(w,{isCollapsed:this.state.description_section_collapsed,onToggle:this._handleDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer});if(!b("MessengerConfig").IGDE)return null;a=this.props.thread.marketplace_thread_data&&(((a=this.props.thread.marketplace_thread_data)!=null?a.for_sale_item:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.buyer_fbid:a)||((a=this.props.thread.marketplace_thread_data)!=null?a.seller_fbid:a));a=a||this.props.thread.is_canonical||b("MessageRequestUtils").isMessageRequest(this.props.thread)||this.props.thread.associated_object;return a?null:b("React").jsx(m,{isCollapsed:this.state.description_section_collapsed,onToggle:this._handleDescriptionSectionToggle,thread:this.props.thread,viewer:this.props.viewer})},_renderGroupLink:function(){return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),{isCollapsed:this.state.group_link_section_collapsed,onToggle:this._handleGroupLinkSectionToggle,thread:this.props.thread,viewer:this.props.viewer}),loader:b("JSResource")("messengerInfoPanelGroupLinkContainerReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").jsx("div",{})})},_renderGroupOptions:function(){return b("React").jsx(b("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.state.group_section_collapsed,onOptionsToggle:this._handleGroupOptionsSectionToggle,isApprovalsCollapsed:this.state.group_approval_section_collapsed,onApprovalToggle:this._handleGroupOptionsApprovalSectionToggle,onToggle:this._handleThreadSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})},_renderMembers:function(){return b("React").jsx(p,{canViewerReply:b("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:b("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.state.people_section_collapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this._handleAddPeopleClick,onContactAction:this._handleContactAction2,onContactSelect:this._handleContactSelect2,onToggle:this._handlePeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,admins:this.props.thread.admins,thread:this.props.thread})},_handleAddPeopleClick:function(a){var c=this;a.preventDefault();b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("messengerAddToConversationDialogReactComponent").__setRef("MessengerThreadInfoPanelContainer.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{thread:c.props.thread,viewer:c.props.viewer})})})},_handleContactAction2:function(a,b){k({action:a,contact:b,viewer:this.props.viewer,thread:this.props.thread,participants:this.props.participants,handleContactSelect:this._handleContactSelect})},_handleContactSelect2:function(a,c){this._handleContactSelect(b("MessengerContactAdapters").fromMercuryParticipant(a))}});e.exports=c}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","requireCond","Bootloader","BootloadOnRender.react","CurrentUser","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDeliveryReceipt.bs","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerErrorBoundary.react","MessengerGalahadGating.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","Parent","PresenceStatus","React","SubscriptionsHandler","WorkChatAvailabilityStatusLoader","WorkChatRedesignedMessageListCheck.re","WorkGalahadSettings","compactArray","createReactClass_DEPRECATED","gkx","immutable","prop-types","WorkchatAppBridge","AvailableList","emptyFunction","ifRequired","joinClasses","lazyLoadComponent","cr:1186631","promiseDone","cr:895572","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerDomIDs.bs").ids;b("WorkchatAppBridge").init();b("AvailableList");var k=b("lazyLoadComponent")(b("JSResource")("WorkChatGroupNameComposeViewHeader.react").__setRef("MessengerDetailView.react"));function l(a,c,d,e){if(!b("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!c)return null;return!a?null:b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{threadID:c,participants:d,viewer:e})})}a=b("createReactClass_DEPRECATED")({displayName:"MessengerDetailView",_composer:void 0,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,_userStatusLiveSubscription:null,_currentThreadIDForStatusSubscription:null,propTypes:{activeThread:b("prop-types").object,activeThreadID:b("prop-types").string,blockedIds:b("prop-types").any,deliveryReceipts:b("prop-types").object,messengerState:b("prop-types").array.isRequired,readReceipts:b("prop-types").any,view:b("prop-types").string,viewer:b("prop-types").string.isRequired,isWorkUser:b("prop-types").bool.isRequired,hostProps:b("prop-types").object,DetailViewHeaderComponent:b("prop-types").any.isRequired,hideGroupInfoInThreadInfoPanel:b("prop-types").bool,hideContextBanner:b("prop-types").bool,openPostComposerInSameWindow:b("prop-types").bool,suppressThreadInfoPanel:b("prop-types").bool,suppressSearchResults:b("prop-types").bool,bottomOffset:b("prop-types").number},calculateState:function(a,c){__p&&__p();var d,e=this;c===void 0&&(c=!1);d=a.activeThreadID||((d=a.activeThread)==null?void 0:d.thread_id);var f=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!f.recipients&&i(0,1840);var g=f.recipients;g.size===1?d=b("MercuryIDs").getThreadIDFromUserID(g.first().getUniqueID().toString()):g.size>1&&(d=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(g).map(function(a){return a.getUniqueID().toString()})))}g=this.props.activeThread;d&&!g&&(g=b("MessengerState.bs").getThreadMetaNow(a.viewer,d),!g&&!c&&b("MessengerState.bs").getThreadMeta(a.viewer,d,function(a){g=a}));c=b("immutable").Map();this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);var h=g;if(h&&d){var j=h.participants;if(h.is_subscribed){var k=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);j=j.concat([k])}k=b("MessengerParticipants.bs").getMultiEagerMap(j,function(a){e._participantSubscription=null,e.setState({participants:a})});j=k[0];k=k[1];this._participantSubscription=k;c=j;if(b("EventRemindersGating").shouldShowPlansOnMessengerCom){k=h?h.lightweight_event:null;b("EventReminderActions").clearAllReminders(d);if(k){b("EventReminderActions").updateEventReminder(d,k);j=h.lightweight_events;if(j&&Object.keys(j).length>0)for(var l in j)b("EventReminderActions").updateEventReminder(d,j[l],l)}}}k=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});j=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var m=b("ifRequired")("WorkChatContentAppStore",function(a){return a.getState()},function(){return b("immutable").Map({})});this._checkThreadUpdatedForStatusSubscription(h);return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:d,composerState:f,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(c,h),activeThread:h,participants:c,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:k,sharePreviewState:j,workChatContentAppsState:m,hideGroupInfoInThreadInfoPanel:!!a.hideGroupInfoInThreadInfoPanel,hideContextBanner:!!a.hideContextBanner,openPostComposerInSameWindow:!!a.openPostComposerInSameWindow}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1,isCreatingNewGroupChat:!1,newGroupName:""},this.calculateState(this.props,!0))},componentDidMount:function(){__p&&__p();var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscribeToSubscriptionsHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("PresenceStatus")]);b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("CurrentUser").isWorkUser()&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(b){b=b.store;a._subscribeToSubscriptionsHandler([b]);a._checkThreadUpdatedForStatusSubscription(a.state.activeThread)});b("CurrentUser").isWorkUser()&&b("gkx")("1192386")&&b("Bootloader").loadModules(["WorkChatContentAppStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");this.setState(this.calculateState(this.props,!1))},_subscribeToSubscriptionsHandler:function(a){var b=this,c=function(){b.setState(b.calculateState(b.props,!1))},d=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?d.push(a.addListener(c)):a.subscribe?d.push(a.subscribe("change",c)):a.addListener?d.push(a.addListener("change",c)):i(0,574)});if(d.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,d)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a,!1)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage(),this.setState(function(c){var d=b("MessengerComposerStore").getState();return a.view!==b("MessengerView").DETAIL.COMPOSE||d.recipients.size<2||c.newGroupName===""?{newGroupName:"",isCreatingNewGroupChat:!1}:{}})},_checkThreadUpdatedForStatusSubscription:function(a){__p&&__p();if(!b("CurrentUser").isWorkUser()||!b("WorkChatAvailabilityStatusLoader").isLoaded())return;var c=a==null?void 0:a.thread_id;if(this._currentThreadIDForStatusSubscription===c)return;var d=b("WorkChatAvailabilityStatusLoader").getStoreEnforce(),e=b("MercuryIDs").getUserIDFromThreadID(c);this._userStatusLiveSubscription!=null&&(this._userStatusLiveSubscription.dispose(),this._userStatusLiveSubscription=null);e!=null?(d.fetchUsersIfNeeded([e]),this._userStatusLiveSubscription=d.liveSubscribe(e)):a!=null&&b("gkx")("1222861")&&d.fetchUsersIfNeeded(b("compactArray")(a.participants.map(function(a){return b("MercuryIDs").getUserIDFromParticipantID(a)})));this._currentThreadIDForStatusSubscription=c},_renderMessageView:function(a){var c;this.state.activeThread&&(c=this.props.query==null?l(this.state.activeThread.lightweight_event,a,this.state.participants,this.props.viewer):null);return b("React").jsxs("div",{className:"_4_j4"+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj4":""),onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation",children:[this._renderGroupNameComposerHeader(),this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),b("React").jsx("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),this._renderUploadFiles(a)]})},render:function(){__p&&__p();var a=this;if(this.props.view===b("MessengerView").DETAIL.GALLERY&&b("cr:1186631")!==null)return b("React").jsx(b("cr:1186631"),{});var c=this.state.activeThreadID,d=this.props.DetailViewHeaderComponent;if(this.props.hostProps&&this.props.hostProps.renderMinimal)return this._renderMessageView(c);else{var e=this._getMainLabelDetails();return b("React").jsxs("div",{"aria-labelledby":e.labelIDs,className:b("joinClasses")("_1t2u"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7sli":""),b("cr:895572")),role:"main",children:[b("React").jsxs("div",{className:"hidden_elem",id:j.MAIN_LABEL,children:[e.labelText," "]}),b("React").jsxs(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:b("WorkChatRedesignedMessageListCheck.re").enabled?null:this.state.activeThread&&this.state.activeThread.solid_color,children:[b("React").jsx(d,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser,messengerState:this.props.messengerState,shouldShowCreateGroupButton:b("gkx")("836564")&&this.state.composerState.recipients.size>=2&&c&&!this.state.isCreatingNewGroupChat,onCreateGroupButtonClicked:function(){a.setState({newGroupName:"",isCreatingNewGroupChat:!0})}}),b("React").jsxs("div",{className:"_20bp",children:[this._renderInfoPanel(),this._renderMessageView(c)]})]})]})}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.sharePreviewState.get(a);return b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:b("React").jsx("div",{}),component:b("React").jsx(b("LazyComponent.react"),{threadID:a,sharePreview:c,onResize:this._handleResize})})},_renderSearchView:function(a){return b("WorkGalahadSettings").isGalahadEnabled?null:a&&!this.props.mid&&this.props.query!=null?b("React").jsx(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").jsx("div",{className:"_33p7 _5iwm"}),component:b("React").jsx(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_renderGroupNameComposerHeader:function(){var a=this;return this._shouldShowGroupNameComposer()?b("React").jsx(b("React").Suspense,{fallback:b("React").jsx("div",{}),children:b("React").jsx(k,{autoFocus:!b("gkx")("836564")&&this.state.isCreatingNewGroupChat,onChange:function(b){a.setState({newGroupName:b})},onCloseButtonClick:function(){a.setState({isCreatingNewGroupChat:!1})},showCloseButton:this.state.isCreatingNewGroupChat})}):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a||this._shouldShowGroupNameComposer())return b("React").jsx("div",{className:"_1ut7"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":"")});var c=this.state.contactData?this.state.contactData.contact:null,d=this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,a):0;return this.state.searchResults.messages&&this.props.suppressSearchResults!==!0?b("React").jsx(b("MessengerErrorBoundary.react"),{component:"conversation",children:b("React").jsx(b("MessengerConversation.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,scrolledToMid:this.state.searchResults.scrolledToMid,isSearchResult:!!this.state.searchResults.query,hideContextBanner:this.state.hideContextBanner})}):b("React").jsx(b("MessengerErrorBoundary.react"),{component:"conversation",children:b("React").jsx(b("MessengerConversationContainer.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,ignoredIds:b("MessengerState.bs").ignoredIds(this.props.messengerState),fbid:b("MessengerState.bs").fbid(this.props.messengerState),onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer,hideContextBanner:this.state.hideContextBanner,bottomOffset:this.props.bottomOffset})})},_renderFooterView:function(a){var c=this;return b("React").jsx(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer",children:b("React").jsx(b("MessengerComposerContainer.react"),{canReply:!!(!this._shouldBlockReply()&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),disableAutofocus:b("CurrentUser").isWorkUser()&&this.props.view===b("MessengerView").DETAIL.COMPOSE,fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return c._composer=a},onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreviewState.get(a),workChatContentApps:this.state.workChatContentAppsState.get(a),hostProps:this.props.hostProps,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage,newGroupName:this.state.newGroupName,openPostComposerInSameWindow:this.state.openPostComposerInSameWindow})})},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed,f=a.participants;a=a.hideGroupInfoInThreadInfoPanel;var g=this.props,h=g.view;g=g.suppressThreadInfoPanel;return g||!c||!f||h===b("MessengerView").DETAIL.COMPOSE?null:b("React").jsx("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":void 0,children:b("React").jsx(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information",children:b("React").jsx(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:f,thread:c,viewer:this.props.viewer,hideGroupInfoInThreadInfoPanel:a})})})},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("New Message"),labelIDs:j.MAIN_LABEL}:{labelText:h._("Conversation with"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){__p&&__p();var c=this.props.activeThreadID;if(c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()){var d=b("MessengerState.bs").getThreadMetaNow(this.props.viewer,c);d&&d.unread_count&&d.unread_count>0&&this._handleMarkRead(c)}if(window.getSelection().toString()!=="")return;d=a.target;if(d instanceof Node&&b("Parent").byTag(d,"a")!=null)return;c=this._getComposer();c&&c.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){__p&&__p();this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0,1841);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a})},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_shouldShowGroupNameComposer:function(){return!b("gkx")("836564")||this.props.view!==b("MessengerView").DETAIL.COMPOSE||this.state.composerState.recipients.size<2?!1:!this.state.activeThread||this.state.isCreatingNewGroupChat},_shouldBlockReply:function(){var a;return!!(((a=this.state.contactData)==null?void 0:(a=a.contact)==null?void 0:a.is_messenger_blocked)||b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread))},_getComposer:function(){return this._composer}});a.defaultProps={DetailViewHeaderComponent:b("MessengerDetailViewHeaderContainer.react")};e.exports=a}),null);
__d("AbstractPopoverButtonReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractPopoverButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){var h;return b("ReasonReact.bs").wrapJsForReason(b("AbstractPopoverButton.react"),{config:(h=b("bs_js_null_undefined")).fromOption(a),haschevron:h.fromOption(c),image:h.fromOption(d),label:h.fromOption(e),maxwidth:h.fromOption(f)},g)}f.make=a}),null);
__d("MessengerSpoof",["Arbiter","DOM","JSXDOM","URI","XMessengerDotComSpoofIFrameController","XSpoofMessengerDotComIFrameController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=6e3;function a(a){var c=b("JSXDOM").iframe({src:i().toString(),width:0,height:0});b("DOM").appendContent(document.body,c);b("Arbiter").subscribeOnce("messengerdotcom_spoof",function(){b("DOM").remove(c),a()});setTimeout(function(){b("Arbiter").inform("messengerdotcom_spoof")},h)}function i(){var a=new(g||(g=b("URI")))(document.URL),c=b("XMessengerDotComSpoofIFrameController").getURIBuilder().getURI().getQualifiedURI().toString();c=b("XSpoofMessengerDotComIFrameController").getURIBuilder().setString("redirect_uri",c).getURI();return c.setDomain(a.getDomain().replace("messenger.com","facebook.com")).setPort(a.getPort()).setProtocol("https")}e.exports={init:a}}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.link=null,d.$5=function(a){d.link=a},d.$4=function(a){d.$6(),d.props.onFocus&&d.props.onFocus(a)},d.$2=function(a){d.$1(),d.props.onBlur&&d.props.onBlur(a)},d.$3=function(a){d.$6(),!a.metaKey&&d.props.onClick&&(d.props.onClick(a),a.preventDefault()),d.props.onAllClicks&&d.props.onAllClicks(a),b("setImmediate")(function(){return d.$1()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.render=function(){var a=this.props,c=a.label;a.onBlur;a.onAllClicks;a.onClick;a.onFocus;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","onBlur","onAllClicks","onClick","onFocus"]);return b("React").jsx(b("Link.react"),babelHelpers["extends"]({},a,{label:c,onBlur:this.$2,onClick:this.$3,onFocus:this.$4,ref:this.$5}))};d.$1=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link);a.href&&(a.setAttribute("data-href",a.href),a.removeAttribute("href"))}};d.$6=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link),c=a.getAttribute("data-href");c&&(a.setAttribute("href",c),a.removeAttribute("data-href"))}};return c}(b("React").Component);e.exports=a}),null);
__d("LinkWithHiddenURLBarReact.bs",["ReasonReact.bs","bs_js_null_undefined","LinkWithHiddenURLBar.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u;return b("ReasonReact.bs").wrapJsForReason(b("LinkWithHiddenURLBar.react"),{"aria-label":(u=b("bs_js_null_undefined")).fromOption(a),"data-hover":u.fromOption(d),"data-tooltip-content":u.fromOption(e),"data-tooltip-alignh":u.fromOption(f),"data-tooltip-position":u.fromOption(g),className:u.fromOption(c),href:u.fromOption(h),linkRef:u.fromOption(i),onClick:u.fromOption(j),onAllClicks:u.fromOption(k),onMouseDown:u.fromOption(l),onMouseEnter:u.fromOption(m),role:u.fromOption(n),rel:u.fromOption(o),style:u.fromOption(p),tabIndex:u.fromOption(q),target:u.fromOption(r),title:u.fromOption(s)},t)}f.make=a}),null);
__d("MessengerDeleteAllDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("BootloadOnRender.react"),{component:b("React").jsx(b("LazyComponent.react"),babelHelpers["extends"]({},this.props)),loader:b("JSResource")("messengerDeleteAllDialogReactComponent").__setRef("MessengerDeleteAllDialogBootloader.react"),placeholder:b("React").jsx("div",{})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerMessageRequestsTypedLoggerBootloader",["Promise","Bootloader"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_loggerLoader:null,_loadLogger:function(){this._loggerLoader||(this._loggerLoader=new(b("Promise"))(function(a,c){b("Bootloader").loadModules(["MessengerMessageRequestsTypedLogger"],function(b){b=new b();a(b)},"MessengerMessageRequestsTypedLoggerBootloader")}));return this._loggerLoader},log:function(a,b,c,d,e,f){this._loadLogger().done(function(g){g.setAction(a).setThreadKeyList(b).setSurface(c).setFolderType(d).setEntryPoint(e).setExtraClientData(f).log()})}};e.exports=a}),null);
__d("MessengerRecentContainer.react",["requireCond","MercuryAPIArgsSource","MercuryThreadlistContainer.react","MessengerComposerSteps","MessengerComposerStore","MessengerState.bs","PureStoreBasedStateMixin","React","createReactClass_DEPRECATED","prop-types","cr:1289787"],(function(a,b,c,d,e,f){"use strict";var g=b("cr:1289787").jsComponent;c=b("createReactClass_DEPRECATED")({displayName:"MessengerRecentContainer",mixins:[b("PureStoreBasedStateMixin")(b("MessengerComposerStore"))],propTypes:{activeThreadID:(a=b("prop-types")).string,blockedIds:a.any,filter:a.string.isRequired,folder:a.string.isRequired,maxHeight:a.number,pendingFolderUnseenCount:a.number,readReceipts:a.any,viewer:a.string.isRequired,hideThreadListHeader:a.bool,isDenseRow:a.bool,hideSearchBox:a.bool,searchInputPortalRef:a.any},statics:{calculateState:function(){return{isComposing:b("MessengerComposerStore").getState().step!==b("MessengerComposerSteps").NULL}}},render:function(){var a=this;return b("React").jsx(b("MessengerState.bs").jsComponent,{fbid:this.props.viewer,children:function(c){return b("React").jsx(b("MercuryThreadlistContainer.react"),{ChildClass:g,activeThreadID:a.props.activeThreadID,blockedIds:a.props.blockedIds,filter:a.props.filter,folder:a.props.folder,isComposing:a.state.isComposing,maxHeight:a.props.maxHeight,pendingFolderUnseenCount:a.props.pendingFolderUnseenCount,isNewMessageActive:a.props.isNewMessageActive,readReceipts:a.props.readReceipts,source:b("MercuryAPIArgsSource").WEBMESSENGER,threads:b("MessengerState.bs").threads(c),threadlistOrderMap:b("MessengerState.bs").threadlistOrderMap(c),viewer:a.props.viewer,hideThreadListHeader:a.props.hideThreadListHeader,isDenseRow:a.props.isDenseRow,hideSearchBox:a.props.hideSearchBox,searchInputPortalRef:a.props.searchInputPortalRef})}})}});e.exports=c}),null);
__d("MessengerGlobalSearchContainer.react",["cx","MessengerActions","MessengerDotComAndInboxM4Check.bs","MessengerGraphQLSearchTypeahead.react","MessengerView","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").useState;function a(a){var c=h(""),d=c[0],e=c[1];c=!d||d.length<2;return b("React").jsx(b("MessengerGraphQLSearchTypeahead.react"),{className:"_5iwm _6-_b _5iwn _150g",enableMessageSearch:!0,excludeGroups:!1,excludePages:!1,hasHoverState:!1,hideClearButton:d==="",isMessageSearchMode:!1,isFacebookChat:!1,isFocused:!0,isTokenizer:!1,onBackspace:b("emptyFunction"),onBlur:function(a){},onChange:function(a){e(a.target.value)},onClear:function(a){b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)},onFocus:function(a){},onScrollIntoView:b("emptyFunction"),onSelect:function(a,c){b("MessengerActions").selectThread(a,c)},originalEntryIDs:b("immutable").Set(),placeholder:"Search",queryString:(d=d)!=null?d:"",selectedEntryIDs:b("immutable").Set(),scrollableViewClassName:"",shouldQueryInternalBot:!0,shouldQueryVCEndpoint:!0,typeaheadViewClassName:"_11_d"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _705p":"")+(c?" _8cg4":""),useLayer:!1,viewer:a.viewer})}e.exports=a}),null);
__d("MessengerMessageSearchContainer.react",["cx","fbt","ix","requireCond","Image.react","ImageBlock.react","Keys","Link.react","MessengerActions","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerSearchActions","MessengerSpinner.react","MessengerThreadSearchActions","MessengerView","React","bs_belt_MapString","emptyFunction","gkx","cr:1289787"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("React").useState,k=b("cr:1289787").jsComponent,l=i("86933");(function(){b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)});var m=function(){return b("React").jsxs(b("ImageBlock.react"),{className:"_225c",spacing:"medium",children:[b("React").jsx(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").jsx("div",{className:"_4g0h",children:h._("Searching...")})]})};function a(a){__p&&__p();var c=this,d,e=j(""),f=e[0],g=e[1];e=function(){var d;if((d=a.threadSearchState)==null?void 0:d.loading)return b("React").jsx(m,{});if((d=a.threadSearchState)==null?void 0:d.threadsExhausted){d=(d=(d=a.threadSearchState)==null?void 0:d.threads)!=null?d:[];return d.length>0||b("MessengerDotComAndInboxM4Check.bs").yes?null:b("React").jsx("div",{className:"_19hf",children:b("React").jsx(b("Link.react"),{href:"#",onClick:c._handleClear,children:h._("No conversations found")})})}return b("React").jsx("div",{className:"_19hf",children:b("React").jsx(b("Link.react"),{href:"#",onClick:b("MessengerThreadSearchActions").loadMoreThreads,tabIndex:-1,children:h._("Load More")})})};var i=function(c){a.handleKeyDown&&a.handleKeyDown(c);c=c.keyCode;c===b("Keys").RETURN&&(g(""),b("MessengerSearchActions").changeQuery(f))},n=function(){var c;return b("React").jsx("input",{autoComplete:"off",className:"_58al _7tpc",disabled:(c=(c=a.threadSearchState)==null?void 0:c.loading)!=null?c:!1,onChange:function(a){g(a.target.value)},onKeyDown:function(a){return i(a)},placeholder:(c=a.threadSearchState)==null?void 0:c.query,spellCheck:!1,tabIndex:-1,type:"text",value:f})};return(d=b("React")).jsx(b("MessengerFlexScrollableArea.react"),{onScroll:function(){},shouldStickToBottom:!1,children:d.jsxs("div",{className:"_1nq2 _7vup",children:[d.jsxs("span",{className:"_5iwm _6-_b _5iwn _150g",children:[d.jsx("label",{className:"_58ak",children:n()}),d.jsx(b("Image.react"),{onMouseDown:function(){g("")},className:(f.length?"":"hidden_elem")+" _8aj2",src:l})]}),b("React").jsx(k,babelHelpers["extends"]({},a,{enableMessageSearch:!0,folder:a.folder,handleClear:b("emptyFunction"),isLoaded:!((n=a.threadSearchState)==null?void 0:n.loading)&&!!((d=a.threadSearchState)==null?void 0:d.threads),isLoading:(d=(n=a.threadSearchState)==null?void 0:n.loading)!=null?d:!1,isSearching:!0,maxHeight:a.maxHeight,newMessageRequestThreads:[],onLoadMoreRequest:b("MessengerThreadSearchActions").loadMoreThreads,onQuery:b("MessengerSearchActions").changeQueryAll,onSearchResults:b("emptyFunction"),searchPlaceholder:b("gkx")("997564")?null:"Search Messages",queryString:f,renderLoadMore:e,readReceipts:b("bs_belt_MapString").empty,threads:(d=(n=a.threadSearchState)==null?void 0:n.threads)!=null?d:[],hideSearchBox:!0,hideThreadListHeader:a.hideThreadListHeader,isDenseMode:a.isDenseMode}))]})})}e.exports=a}),null);
__d("MessengerSearchContainer.react",["cx","fbt","ix","requireCond","Bootloader","Image.react","ImageBlock.react","Keys","Link.react","MercuryIDs","MessengerActions","MessengerContactAdapters","MessengerContactList.react","MessengerDotComAndInboxM4Check.bs","MessengerFlexScrollableArea.react","MessengerGlobalSearchContainer.react","MessengerGlobalSearchStore","MessengerMessageSearchContainer.react","MessengerSearchActions","MessengerSearchStore","MessengerSpinner.react","prop-types","qex","MercuryThreadIDMap","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerTypeaheadUtils","MessengerUniversalSearchFunnelLoggerConstants","MessengerURIStore","MessengerView","React","createReactClass_DEPRECATED","StoreAndPropBasedStateMixin","emptyFunction","gkx","immutable","cr:1289787"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryThreadIDMap").get(),k=b("immutable").OrderedMap,l=b("cr:1289787").jsComponent,m=i("86933"),n=function(a){__p&&__p();var b,c;switch(a){case"friend":case"non_friend":b=h._("Search People");c=h._("People");break;case"page":b=h._("Search Businesses");c=h._("Businesses");break;case"thread":b=h._("Search Groups");c=h._("Groups");break;default:break}return[b,c]},o=function(){return b("React").jsxs(b("ImageBlock.react"),{className:"_225c",spacing:"medium",children:[b("React").jsx(b("MessengerSpinner.react"),{className:"_2i59",color:"grey"}),b("React").jsx("div",{className:"_4g0h",children:h._("Searching...")})]})};c=b("createReactClass_DEPRECATED")({displayName:"MessengerSearchContainer",mixins:[b("StoreAndPropBasedStateMixin")(b("MessengerSearchStore"),b("MessengerGlobalSearchStore"),b("MessengerThreadSearchStore"),b("MessengerURIStore"))],propTypes:{activeThreadID:(a=b("prop-types")).string,blockedIds:a.object.isRequired,filter:a.string.isRequired,folder:a.string.isRequired,isComposing:a.bool,isLoaded:a.bool,isLoading:a.bool,isNewMessageActive:a.bool,maxHeight:a.number,viewer:a.string.isRequired,readReceipts:a.any,hideThreadListHeader:a.bool,isDenseMode:a.bool},statics:{calculateState:function(a){__p&&__p();a=b("MessengerURIStore").getState();h._("Search Messenger");var c=b("MessengerGlobalSearchStore").getState();c=c.getSearchMode();if(c!==null&&b("qex")._("1097094"))if(c==="search_all_messages")return{showUniversalSearchPanel:!0,showMessageSearchPage:!0,threadSearchState:b("MessengerThreadSearchStore").getState()};else if(c==="see_all"){c=n(a.seeAllType);a=c[0];c=c[1];return{placeholder:a,showUniversalSearchPanel:!0,showSeeAllPage:!0,seeAllSearchState:b("MessengerSearchStore").getState(),seeAllType:c}}else return{showUniversalSearchPanel:!0,showMessageSearchPage:!1,showSeeAllPage:!1};a=b("MessengerThreadSearchStore").getState();c=h._("Search Messages");return{loading:a.loading,placeholder:c,query:a.query,threads:a.threads||[],threadsExhausted:a.threadsExhausted}}},_subscriptions:null,render:function(){if(this.state.showUniversalSearchPanel)return this._renderUniversalSearchPanel();else{var a=this.state.query===null;if(a)return b("React").jsx(o,{})}return this._renderMessageSearch()},_renderUniversalSearchPanel:function(){__p&&__p();var a=this;if(this.state.showMessageSearchPage){var c;return b("React").jsx(b("MessengerFlexScrollableArea.react"),{onScroll:function(){a.refs.scrollableArea.isScrolledToBottom()},shouldStickToBottom:!1,ref:"scrollableArea",children:b("React").jsx(b("MessengerMessageSearchContainer.react"),{activeThreadID:(c=this.state.threadSearchState)==null?void 0:c.activeThreadID,folder:this.props.folder,maxHeight:this.props.maxHeight,hideThreadListHeader:this.props.hideThreadListHeader,isDenseMode:this.props.isDenseMode,threadSearchState:this.state.threadSearchState,viewer:this.props.viewer})})}else if(this.state.showSeeAllPage)return this.state.seeAllSearchState?this._renderSeeAllView(this.state.seeAllSearchState):b("React").jsx("div",{className:"_19hf",children:h._("There was a problem. Please try again.")});else return b("React").jsx(b("MessengerFlexScrollableArea.react"),{onScroll:function(){a.refs.scrollableArea.isScrolledToBottom()},shouldStickToBottom:!1,ref:"scrollableArea",children:b("React").jsx(b("MessengerGlobalSearchContainer.react"),{viewer:this.props.viewer})})},_renderSeeAllView:function(a){var c,d=this,e=k();a.threads&&a.threads.length>1&&(e=b("MessengerTypeaheadUtils").buildSingleSection(a.threads),this._logSearchImpressions(e,a.query));return b("React").jsx(b("MessengerFlexScrollableArea.react"),{onScroll:function(){d.refs.scrollableArea.isScrolledToBottom()&&!a.threadsExhausted&&!a.loading?b("MessengerSearchActions").loadMoreResults():null},shouldStickToBottom:!1,ref:"scrollableArea",children:b("React").jsxs("div",{className:"_1nq2 _7vup",children:[b("React").jsxs("span",{className:"_5iwm _6-_b _5iwn _150g",children:[b("React").jsx("label",{className:"_58ak",children:this._renderSearchInput(a.query)}),b("React").jsx(b("Image.react"),{onMouseDown:this._handleClear,className:(((c=a.query)==null?void 0:c.length)?"":"hidden_elem")+" _8aj2",src:m})]}),b("React").jsx(b("MessengerContactList.react"),{contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,isLoading:a.loading,listSections:e,onSelect:this._handleSeeAllSelect,queryString:(c=a.query)!=null?c:"",seeAllType:this.state.seeAllType,showLoadMore:!a.threadsExhausted,viewer:this.props.viewer})]})})},_renderMessageSearch:function(){var a=!this.state.loading&&!!this.state.threads;return b("React").jsx(l,babelHelpers["extends"]({},this.props,{handleClear:this._handleClear,isLoaded:a,isLoading:this.state.loading,isSearching:!1,maxHeight:this.props.maxHeight,newMessageRequestThreads:[],onLoadMoreRequest:b("MessengerThreadSearchActions").loadMoreThreads,onQuery:b("MessengerSearchActions").changeQueryAll,onSearchResults:b("emptyFunction"),searchPlaceholder:b("gkx")("997564")?null:this.state.placeholder,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,readReceipts:this.props.readReceipts,threads:this.state.threads,hideThreadListHeader:this.props.hideThreadListHeader,isDenseMode:this.props.isDenseMode}))},_renderLoadMoreLink:function(){if(this.state.threadsExhausted)return this.state.threads.length>0||b("MessengerDotComAndInboxM4Check.bs").yes?null:b("React").jsx("div",{className:"_19hf",children:b("React").jsx(b("Link.react"),{href:"#",onClick:this._handleClear,children:h._("No conversations found")})});return this.state.loading?b("React").jsx(o,{}):b("React").jsx("div",{className:"_19hf",children:b("React").jsx(b("Link.react"),{href:"#",onClick:b("MessengerThreadSearchActions").loadMoreThreads,tabIndex:-1,children:h._("Load More")})})},_renderSearchInput:function(a){var c=this;return b("React").jsx("input",{autoComplete:"off",className:"_58al _7tpc",disabled:this.state.loading,onChange:function(a){c.setState({newQuery:a.target.value})},onKeyDown:function(a){c._handleKeyDown(a)},placeholder:this.state.placeholder,spellCheck:!1,tabIndex:-1,type:"text",value:this.state.newQuery?this.state.newQuery:this.state.newQuery===""?"":a})},_handleClear:function(){b("MessengerActions").changeMasterView(b("MessengerView").MASTER.RECENT)},_handleKeyDown:function(a){a=a.keyCode;if(a===b("Keys").BACKSPACE&&this.state.newQuery&&this.state.newQuery.length===1){this.setState({newQuery:""});return}a===b("Keys").RETURN&&b("MessengerSearchActions").changeQuery(this.state.newQuery)},_handleSeeAllSelect:function(a,c){__p&&__p();c&&c.preventDefault();var d=a.getType();c=a.getUniqueID().split(":").pop();this._logResultSelected(c);switch(d){case"friend":case"non_friend":case"page":b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c),d);break;case"thread":a=function(a){return b("MessengerActions").selectThread(a,d)};j.getClientIDFromServerID(c,a);break}},_logSearchImpressions:function(a,c){b("Bootloader").loadModules(["MessengerSearchLoggerUtil","MessengerUniversalSearchFunnelLogger"],function(d,e){var f=b("immutable").OrderedMap(),g=a.toArray();g[0].forEach(function(a){var c=a.getUniqueID(),e=c.split(":").pop();e={result_fbid:e,result_type:d.getLoggingTypeFromMercuryType(a.getType()),rank_section:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.LOCAL_AND_SERVER,data_source:b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER};f=f.set(c,e)});e.logImpressions(f,c,"",b("MessengerUniversalSearchFunnelLoggerConstants").SOURCES.SERVER)},"MessengerSearchContainer.react")},_logResultSelected:function(a){var c=this;b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(d){d.logResultSelected(c.state.query,a,"",b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_SURFACES.TYPEAHEAD,b("MessengerUniversalSearchFunnelLoggerConstants").RESULT_PAGES.SEE_ALL)},"MessengerSearchContainer.react");b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger"],function(a){return a.endFunnel((a=b("MessengerUniversalSearchFunnelLoggerConstants")).END_REASONS.END_ACTION,a.END_ACTIONS.RESULT_SELECTED,null,a.ENTRY_SURFACES.INBOX,a.RESULT_PAGES.SEE_ALL)},"MessengerSearchContainer.react")}});e.exports=c}),null);
__d("MessengerMount",["cx","BanzaiODS","Bootloader","CSS","CurrentUser","HotLikeSound","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerFPSCounter","MessengerNonMount","MessengerPage","MessengerPromotionDataActions","MessengerReact.bs","MessengerSettingsStore","MessengerURIListener","MessengerWebStgTypedLoggerLite","React","ReactDOM","gkx","OrderedFriendsList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReact.bs").jsComponent;b("OrderedFriendsList");var i=b("MessengerNonMount").initStoresAndListeners,j=b("MessengerNonMount").dispatchInitialData;a={initStoresAndListeners:i,dispatchInitialData:j,mount:function(a,c,d){__p&&__p();b("MessengerEnvironment").setMessengerUI(!0);(d=b("MessengerPage")).emit(d.Events.JS_LOADED);var e=b("CurrentUser").getID(),f=b("CurrentUser").isWorkUser();i(e);b("MessengerURIListener").start();j(e,c);d.emit(d.Events.DATA_INITIALIZED);d=document.documentElement;d&&b("CSS").addClass(d,"_51l0");if(document.body){d=document.body;b("CSS").addClass(d,"_z4_");b("CSS").addClass(d,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(d,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(d,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(b("React").jsx(h,{employeeData:c.employeeData,showWorkchatUpsellBanner:c.showWorkchatUpsellBanner,isFirstRedirect:!b("gkx")("678603"),viewer:e,isWorkUser:f,onMount:function(){return k(c)}}),a);b("MessengerFPSCounter").counter&&b("MessengerFPSCounter").counter(6e4,function(a){b("BanzaiODS").bumpEntityKey(3303,"messenger_dot_com","fps.count."+a)})}};function k(a){__p&&__p();b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED);b("MessengerWebStgTypedLoggerLite").log({event_name:"render_inbox"});var c=a.gameData;c&&c.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(a,d,e){var f=null,g=d.SOLO;c.contextSourceID&&(f=c.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(a,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:c.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount");a.promotionData&&b("MessengerPromotionDataActions").setPromotionData(a.promotionData)}e.exports=a}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.label;return b("React").jsxs("div",{children:[b("React").jsx("h2",{className:"accessible_elem",children:a}),b("React").jsx("ul",{"aria-label":a,role:"grid",children:this.props.children})]})};return c}(b("React").PureComponent);a.propTypes={label:b("prop-types").string.isRequired};e.exports=a}),null);
__d("MessengerThreadlistNewMessageRow.react",["cx","fbt","ix","Image.react","LinkWithHiddenURLBar.react","MercuryIDs","MercuryParticipantListRenderer","MercuryParticipantsImage.react","MessengerActions","MessengerComposerStore","MessengerCrossIconSVGM4React.bs","MessengerDotComAndInboxM4Check.bs","MessengerParticipants.bs","MessengerProfileImageWrapperReact.bs","MessengerView","React","ShimButton.react","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerCrossIconSVGM4React.bs").make,k=b("MessengerProfileImageWrapperReact.bs").jsComponent,l=50,m=i("86935");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={participants:c.$3()},c.$8=function(a){a.preventDefault(),c.props.onClose&&c.props.onClose(a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("MessengerComposerStore").addListener("change",function(){var b=a.$3();a.setState({participants:b})})};d.$3=function(){var a=this;this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2);var c=b("MessengerParticipants.bs").getMultiEager(this.$4(),function(b){a.$2=null,a.setState({participants:b})}),d=c[0];c=c[1];this.$2=c;return d};d.$4=function(){return b("MessengerComposerStore").getState().recipients.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray()};d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&b("MessengerParticipants.bs").removeCallback(this.$2)};d.renderM4=function(){return b("React").jsx("li",{className:"_5l-3 _1ht1 _6zk9"+(this.props.isActive?" _1ht2":""),children:b("React").jsx(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,tabIndex:0,className:"_1ht5 _2il3 _6zka _5l-3",children:b("React").jsxs("div",{className:"_6zkb _7t1l _6zkc",children:[this.$6(),b("React").jsx("div",{className:"_1qt4 _7vuo _5l-m",children:b("React").jsx("div",{className:"_1qt5 _5l-3",children:b("React").jsx("div",{className:"_1ht6 _7st9",children:this.$7()})})}),b("React").jsx("div",{className:"_6zv8",children:b("React").jsx(b("ShimButton.react"),{className:"_23ct _6zv9"+(this.props.isActive?" _6zva":""),onClick:this.$8,children:b("React").jsx(j,{size:18})})})]})})})};d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.renderM4();else return b("React").jsx("li",{className:"_5l-3 _1ht1"+(this.props.isActive?" _1ht2":""),children:b("React").jsxs(b("LinkWithHiddenURLBar.react"),{onAllClicks:this.$5,className:"_1ht5 _2il3 _5l-3",children:[this.$6(),b("React").jsxs("div",{className:"_1qt4 _5l-m",children:[b("React").jsxs("div",{className:"_1qt5 _5l-3",children:[b("React").jsx("div",{className:"_1ht6",children:this.$7()}),b("React").jsx(b("ShimButton.react"),{"aria-label":h._("Close"),className:"_23ct",onClick:this.$8})]}),b("React").jsx("div",{className:"_1qt5 _5l-3",children:"\xa0"})]})]})})};d.$6=function(){var a=this.state.participants;return a.length>0?b("React").jsx("div",{className:"_1qt3 _5l-3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":""),children:b("React").jsx(k,{isMessengerUser:a.length===1&&a[0].is_messenger_user,size:l,showBadge:!1,children:b("React").jsx(b("MercuryParticipantsImage.react"),{participants:a.map(function(a){return a.id}).slice(0,3),size:l})})}):b("React").jsx("div",{className:"_1qt3 _5l-3",children:b("React").jsx(b("Image.react"),{height:l,src:m,width:l})})};d.$7=function(){return this.state.participants.length===0?h._("New message"):h._("New message to {List of message recipients}",[h._param("List of message recipients",new(b("MercuryParticipantListRenderer"))().renderParticipantList(this.state.participants.map(function(a){return{id:a.id,name:a.name,short_name:a.short_name}})))])};d.$5=function(a){a.preventDefault(),b("MessengerActions").changeDetailView(b("MessengerView").DETAIL.COMPOSE)};return c}(b("React").PureComponent);a.propTypes={isActive:b("prop-types").bool,onClose:b("prop-types").func.isRequired};e.exports=a}),null);
__d("MessengerThreadlistWorkDenseMode",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({QUICK_CHAT:null,TEAMWORK:null});c=Object.freeze(a);e.exports=c}),null);
__d("getMessengerThreadlistWorkDenseMode",["CurrentUser","MessengerThreadlistWorkDenseMode","gkx"],(function(a,b,c,d,e,f){"use strict";function a(a){return a===!0?b("MessengerThreadlistWorkDenseMode").QUICK_CHAT:b("CurrentUser").isWorkUser()&&b("gkx")("779201")?b("MessengerThreadlistWorkDenseMode").TEAMWORK:null}e.exports=a}),null);
__d("MessengerThreadlistRow.react",["cssVar","cx","fbt","ix","requireCond","Bootloader","CurrentUser","FBEmojiUtils","Image.react","ImmutableObject","LinkWithHiddenURLBar.react","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryParticipantListRenderer","MercuryThreadActions","MercuryThreadSnippet.react","MercuryThreadTimestampReact.re","MercuryThreadTitleSafe.react","MercuryTimestamp","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerBlockDialogReact.re","MessengerButtonReact.re","MessengerConfig","MessengerConfirmBlockThreadDialogReact.re","MessengerConfirmLeaveGroupDialogReact.re","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerGalahadGating.bs","MessengerMessage.bs","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerPinIconSVGReact.bs","MessengerPresenceStatusUtils","cr:999311","cr:861811","MessengerThreadImageReact.re","MessengerThreadlistRowActionsReact.bs","MessengerThreadlistRowPendingThreadButtonsReact.re","MessengerThreadlistRowSeenHeadReact.bs","MessengerThreadlistWorkDenseMode","MessengerURIStore","MessengerURIUtils.bs","MNAdsMessageRequestUtils","React","ReactDOM","RTWebUserActionLogger","ShimButton.react","TextWithEmoticons.react","Tooltip","UserAgent","WorkGalahadChannelStatusBadge.react","WorkGalahadChatChannelOverflowButton.react","WorkGalahadGroupEmojiConsts","WorkGalahadMessageRow.react","asset","clearTimeout","getMessengerThreadlistWorkDenseMode","getPageIDFromThreadID","gkx","immutable","joinClasses","messengerRTLClasses","prop-types","qex","setTimeout","uniqueID"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("FBEmojiUtils").codepointsToString,l=b("MercuryThreadTimestampReact.re").make,m=b("MessengerBlockDialogReact.re").jsComponent,n=b("MessengerButtonReact.re").make,o=b("MessengerConfirmBlockThreadDialogReact.re").make,p=b("MessengerConfirmLeaveGroupDialogReact.re").jsComponent,q=b("MessengerThreadImageReact.re").jsComponent,r=b("MessengerThreadlistRowActionsReact.bs").jsComponent,s=b("MessengerThreadlistRowPendingThreadButtonsReact.re").make,t=b("MessengerThreadlistRowSeenHeadReact.bs").jsComponent,u=b("WorkGalahadGroupEmojiConsts").DEFAULT_EMOJI_CODEPOINT,v=50,w=24,x=j("86913"),y=j("86914"),z=function(a){var b;switch(a){case"pending":case"other":case"inbox":case"thread":b=a;break;default:b=null}return b};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={actionsOpen:!1,participantNames:"",isMiniInbox:!1},d.$1=b("uniqueID")(),d.$2=0,d.$3=null,d.$5=function(a){return d.setState({isMiniInbox:a.matches})},d.$24=function(){__p&&__p();var a=d.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a)d.$27();else{a=d.props.thread.other_user_fbid;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c==null?void 0:c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(m,{onBlock:function(){d.$28(e)},contact:c})})}},d.$25=function(){var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.thread.thread_id,a);b("MercuryThreadActions").get()["delete"](d.props.thread.thread_id);d.props.isActive&&b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.thread.thread_id)).setSurface(z(d.props.folder)).setFolderType("pending").setThreadKey(a).setEntryPoint("inbox_banner").log()},d.$26=function(a){var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.thread.thread_id,c);a||(b("MessengerDialogs.bs").removeDialog(),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.thread.thread_id)).setSurface(z(d.props.folder)).setFolderType("pending").setThreadKey(c).setEntryPoint("inbox_banner").log())},d.$8=function(a){a.preventDefault(),d.props.onFocus(d.props.thread.thread_id)},d.$9=function(a){d.$2++;if(d.$3)return;d.$3=b("setTimeout")(function(){d.props.onSelect&&d.props.onSelect(),d.$2=0,d.$3=null},1e3)},d.$10=function(a){d.$2--,d.$2===0&&(b("clearTimeout")(d.$3),d.$3=null)},d.$11=function(a){d.props.onSelect()},d.$12=function(a){if(d.props.logClickHandler){a=d.props.thread.is_canonical?b("MercuryIDs").getUserIDFromThreadID(d.props.thread.thread_id)||"0":d.props.thread.thread_fbid;d.props.logClickHandler&&d.props.logClickHandler(a)}},d.$20=function(a){d.setState({actionsOpen:a})},d.$31=function(a){__p&&__p();a.preventDefault();a.stopPropagation();a=window.callWindow&&!window.callWindow.closed&&window.callWindow.focus;if(a)window.callWindow.focus();else{a=d.props.thread;var c=a.rtc_call_data,e=a.thread_fbid;a="GROUP:"+e;var f=c.call_state==="VIDEO_GROUP_CALL";b("RTWebUserActionLogger").logClick({callType:"mw",component:"join_call_button",conferenceName:a,surface:"thread_list",mediaType:b("RTWebUserActionLogger").getMediaType(!f)});b("Bootloader").loadModules(["StartCallWithZenonOrFBRTC","FBRTCLogger"],function(a,b){b=b.Trigger;a.startGroupCall(!f,e,[],f?b.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:b.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,c)},"MessengerThreadlistRow.react")}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.getParticipantNames(),this.$4=window.matchMedia("(max-width: 900px)"),this.setState({isMiniInbox:this.$4.matches}),this.$4.addListener(this.$5)};d.componentWillUnmount=function(){this.$4.removeListener(this.$5)};d.componentDidUpdate=function(a){__p&&__p();this.props.isFocused&&(!a.isFocused?this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():b("ReactDOM").findDOMNode(this.refs.link).focus():!a.isActionsFocused&&this.props.isActionsFocused?b("ReactDOM").findDOMNode(this.refs.actions.refs.button).focus():a.isActionsFocused&&!this.props.isActionsFocused&&b("ReactDOM").findDOMNode(this.refs.link).focus());if(this.$6(this.props.thread)&&!this.$6(a.thread)){a=this.props.thread;var c=a.rtc_call_data;a=a.thread_fbid;a="GROUP:"+a;c=c.call_state==="VIDEO_GROUP_CALL";b("RTWebUserActionLogger").logImpression({callType:"mw",component:"join_call_button",conferenceName:a,surface:"thread_list",mediaType:b("RTWebUserActionLogger").getMediaType(!c)})}this.getParticipantNames()};d.getParticipantNames=function(){__p&&__p();var a=this;if(this.state.participantNames!=="")return;var c=this.props,d=c.thread;c=c.viewer;var e=d.participants||[],f=b("MercuryIDs").getParticipantIDFromUserID(c);e.length>1&&(e=e.filter(function(a){return a!=f}));var g=d.custom_nickname?{}:null;if(g)for(var h in d.custom_nickname)g[h]=d.custom_nickname[h];b("MessengerParticipants.bs").getMulti(e,function(c){var d=e.map(function(a){return c[a]});d=new(b("MercuryParticipantListRenderer"))().setNickname(g).renderParticipantList(d);a.setState({participantNames:d})})};d.render=function(){__p&&__p();var a=this,c,d=this.props,e=d.isActive,f=d.isActionsFocused,g=d.isTabbable,h=d.participants,j=d.thread;d=d.viewer;var l=j.unread_count>0,m=b("MessengerURIUtils.bs").getURIForThreadID(j.thread_id),n=j.name?j.name:this.state.participantNames,o=b("MNAdsMessageRequestUtils").isAdsMessageRequest(j)?b("MNAdsMessageRequestUtils").renderAdsMessageRequestStatus():this.$7(j),p=b("getMessengerThreadlistWorkDenseMode")(this.props.isDenseRow),r=b("MessengerDotComAndInboxM4Check.bs").yes?"_7vuq":"_33g_";c=(c=(c=j.work_associated_group)==null?void 0:(c=c.group_icon)==null?void 0:c.emoji_codepoints)!=null?c:[];var s=null;c.length>0?s=k([].concat(c)):j.work_associated_group!=null&&(s=k([u]));c=b("React").jsxs("li",{"aria-live":l?"polite":null,"aria-relevant":e||l?"additions text":null,onFocus:this.$8,className:"_5l-3 _1ht1"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zk9":"")+(j.folder===b("MessagingTag").PENDING?" _4as3":"")+(this.props.isActive?" _1ht2":"")+(l?" _1ht3":"")+(this.state.actionsOpen?" _13aa":"")+(this.props.isMuted?" _569x":"")+((b("CurrentUser").isWorkUser()||b("MessengerConfig").MPT>0)&&j.is_pinned?" _1oh3":"")+(this.props.isFocused?" _23_m":"")+(l&&b("UserAgent").isBrowser("Chrome")&&b("UserAgent").isPlatform("Mac")?" _5fx8":"")+(p===b("MessengerThreadlistWorkDenseMode").TEAMWORK?" _8xnu":"")+(p===b("MessengerThreadlistWorkDenseMode").QUICK_CHAT?" _79nz":""),onDragEnter:e?null:this.$9,onDragLeave:e?null:this.$10,role:"row",ref:function(b){return b&&a.props.registerThreadRefs&&a.props.registerThreadRefs(b)},tabIndex:-1,children:[b("React").jsx("div",{className:"_5l-3 _1ht5",id:this.$1,"data-testid":void 0,role:"gridcell",tabIndex:-1,children:b("React").jsx(b("LinkWithHiddenURLBar.react"),{"data-testid":void 0,href:m.toString(),onClick:this.$11,onAllClicks:this.$12,className:"_1ht5 _2il3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zka":"")+" _5l-3 _3itx",s:"true",ref:"link",role:"link",tabIndex:g&&!f?0:-1,children:b("React").jsxs("div",{className:"_6zkb"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7t1l":"")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkc":""),children:[this.props.isMuted&&b("React").jsx("div",{className:"accessible_elem",children:i._("muted conversation")}),b("React").jsxs("div",babelHelpers["extends"]({},b("Tooltip").propsFor(n,"right","center"),{"data-tooltip-root-class":r,"aria-hidden":!0,className:"_1qt3"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6-5k":"")+" _5l-3",children:[b("gkx")("1100710")&&s!=null&&s!==""?b("React").jsx(b("TextWithEmoticons.react"),{size:24,text:s}):b("MessengerDotComAndInboxM4Check.bs").yes&&b("cr:861811")?b("cr:999311")?b("React").jsx(b("cr:999311").make,{borderColor:e?"#f2f2f2":this.state.isMiniInbox&&l?"#D2E7FD":null,size:this.$13(p),thread:j,viewer:d}):b("React").jsx(b("cr:861811").make,{borderColor:e?"#f2f2f2":this.state.isMiniInbox&&l?"#D2E7FD":null,size:this.$13(p),thread:j,viewer:d}):b("React").jsx(q,{isPresenceForWork:this.props.isPresenceForWork,isDoNotDisturb:this.props.isDoNotDisturb,participants:h,size:this.$13(p),thread:j,viewer:d}),j.is_business_page_active&&b("qex")._("968099")?b("React").jsx("div",{className:"_849n"}):null]})),b("React").jsxs("div",{className:"_1qt4"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7vuo":"")+" _5l-m",children:[b("MessengerDotComAndInboxM4Check.bs").yes?b("React").jsxs(b("React").Fragment,{children:[b("React").jsx("div",{className:"_1qt5 _5l-3",children:b("React").jsx(b("MercuryThreadTitleSafe.react"),{className:"_1ht6 _7st9",showUnreadCount:!1,thread:j,useShortName:!1,viewer:d})}),b("React").jsxs("div",{className:"_1qt5 _6zkd _5l-3",children:[b("React").jsx(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf _6zke",b("messengerRTLClasses")(j.snippet,!0)),participants:h,shouldRenderYou:!0,thread:j,viewer:d}),b("React").jsx("div",{"aria-hidden":!0,className:"_6zkf",children:"\xb7"}),o]})]}):b("React").jsxs(b("React").Fragment,{children:[b("React").jsxs("div",{className:"_1qt5 _5l-3",children:[b("React").jsx(b("MercuryThreadTitleSafe.react"),{className:"_1ht6",showUnreadCount:!1,thread:j,useShortName:!1,viewer:d}),p!==b("MessengerThreadlistWorkDenseMode").QUICK_CHAT?b("React").jsx("div",{children:o}):null]}),p===b("MessengerThreadlistWorkDenseMode").QUICK_CHAT||b("gkx")("1072947")?null:b("React").jsx("div",{className:"_1qt5 _5l-3",children:b("React").jsx(b("MercuryThreadSnippet.react"),{className:b("joinClasses")("_1htf",b("messengerRTLClasses")(j.snippet,!0)),participants:h,shouldRenderYou:!0,thread:j,viewer:d})})]}),this.$14(),this.$15()]})]})})}),p===b("MessengerThreadlistWorkDenseMode").QUICK_CHAT?this.$16():this.$17(p)]});if(b("MessengerGalahadGating.bs").isGalahadUIEnabled())return b("React").jsx(b("WorkGalahadMessageRow.react"),{isActive:this.props.isActive,hideMeta:p!=null,meta:b("React").jsx(b("WorkGalahadChannelStatusBadge.react"),{canToggle:!0,onClick:function(){l?a.props.onMarkRead():a.props.onMarkUnread()},unread:this.props.thread.unread_count>0}),children:c});else return c};d.$17=function(a){__p&&__p();if(this.props.showActions===!1)return null;var c=this.props,d=c.blockedIds,e=c.isActionsFocused,f=c.isTabbable,g=c.participants,h=c.thread;c=c.viewer;var j=b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(this.props.participants,h);j=j&&j.contact;d=b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(c,d,h);var k=b("MessengerAdminGroupUtils").isJoinableThread(h),l=b("MercuryIDs").isGroupChat(this.props.thread.thread_id),m=h.unread_count>0,n;(b("MessengerDotComAndInboxM4Check.bs").yes||a===b("MessengerThreadlistWorkDenseMode").TEAMWORK)&&m?n=this.state.actionsOpen?null:b("React").jsx("div",{className:"_6zv_"+(a===b("MessengerThreadlistWorkDenseMode").TEAMWORK?" _8xfs":"")}):n=b("React").jsx(t,{className:"_5bli",isHidden:this.state.actionsOpen&&!(b("CurrentUser").isWorkUser()||b("MessengerConfig").MPT>0),lastMessage:this.props.lastMessage,participants:g,readReceipts:this.props.readReceipts,thread:h,viewer:c});return b("React").jsx("div",{role:"gridcell",children:b("React").jsxs(b("ShimButton.react"),{"aria-describedby":this.$1,"aria-haspopup":"true","aria-label":i._("Actions"),className:"_2j6"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkg":"")+" _5l-3"+(a===b("MessengerThreadlistWorkDenseMode").TEAMWORK?" _8c_j":""),tabIndex:f&&e?0:-1,role:"button",children:[a===b("MessengerThreadlistWorkDenseMode").TEAMWORK?null:this.$18(),b("React").jsx("div",{className:"_56ck"}),n,this.$19(),b("MessengerGalahadGating.bs").isGalahadUIEnabled()?b("React").jsx("div",{className:"_8xru",children:b("React").jsx(b("WorkGalahadChatChannelOverflowButton.react"),{className:"_5blh",onToggle:this.$20,tabIndex:-1,thread:this.props.thread})}):b("React").jsx(r,{contact:j,isGroupChat:l,isJoinableThread:k,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isPinned:h.is_pinned,isUnread:m,isBlocked:d,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onPin:this.props.onPin,onToggle:this.$20,onUnmute:this.props.onUnmute,onUnpin:this.props.onUnpin,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:!0,showBlock:b("MercuryIgnoredBlockedParticipants.bs").shouldShowBlock(this.props.thread,this.props.viewer,j),showPin:this.$21(),showReport:this.$22(),tabIndex:-1,thread:h,ref:"actions"}),this.$23()]})})};d.$16=function(){if(this.props.showActions===!1)return null;var a=this.props,c=a.isActionsFocused;a=a.isTabbable;return b("React").jsx("div",{role:"gridcell",children:b("React").jsxs(b("ShimButton.react"),{"aria-describedby":this.$1,"aria-haspopup":"true","aria-label":i._("Actions"),className:"_7pj3 _5l-3",tabIndex:a&&c?0:-1,role:"button",children:[this.$18(),b("React").jsx("div",{className:"_56ck"})]})})};d.$18=function(){if(b("CurrentUser").isWorkUser())return b("React").jsx(b("Image.react"),{src:j("572538"),className:"_6q64"});else if(b("MessengerConfig").MPT>0)return b("MessengerPinIconSVGReact.bs").make("_1oh5","#808080");return null};d.$23=function(){return b("CurrentUser").isWorkUser()?b("React").jsx(b("Image.react"),{src:j("1265675"),className:"_8xfj"}):null};d.$19=function(){var a=this.props.lastMessage;if(this.state.actionsOpen||!a)return null;var c=b("MessengerMessage.bs").isSending(a),d=b("MessengerMessage.bs").hasError(a);if(!c&&!d)return null;d=b("MessengerMessage.bs").getError(a);return b("React").jsx("div",babelHelpers["extends"]({},b("Tooltip").propsFor(d,"right","center"),{children:b("React").jsx(b("Image.react"),{className:"_wtw"+(c?" _3qh2":""),src:c?y:x})}))};d.$7=function(a){var c;return b("React").jsx(l,{className:"_1ht7"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _6zkh":""),time:a.timestamp,title:(c=b("MercuryTimestamp").getAbsoluteTimestamp(a.timestamp))!=null?c:void 0,text:b("MercuryTimestamp").getRelativeTimestamp(a.timestamp)})};d.$14=function(){return!b("MessageRequestUtils").shouldShowThreadlistPendingActions(this.props.thread)?null:b("React").jsx(s,{onBlock:this.$24,onDelete:this.$25,onToggle:this.$26,thread:this.props.thread})};d.$27=function(){var a=this,c=this.props.thread.thread_id;c&&b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(p,{onLeave:function(){var d=b("MessengerURIStore").getState().activeThreadID===c;a.$29().leaveGroup(c);d&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$29=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$28=function(a){var c=this,d=this.props.thread.thread_id,e=d===b("MessengerURIStore").getState().activeThreadID;this.$29().blockIgnoreOnMessengerDotCom(e,d,function(){c.$30(a)})};d.$30=function(a){var c=this.props.thread,d=this.props.thread.thread_id;b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(o,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.$15=function(){if(!this.$6(this.props.thread))return null;var a=!b("qex")._("1277463")&&window.callWindow&&!window.callWindow.closed?i._("Return to Call"):i._("Join Call");return b("React").jsx(n,{className:"_4ry5",label:a,onClick:this.$31,type:"primary"})};d.$6=function(a){return((a=(a=a.rtc_call_data)==null?void 0:a.call_state)!=null?a:"NO_ONGOING_CALL")!=="NO_ONGOING_CALL"};d.$21=function(){var a=b("CurrentUser").isWorkUser()||b("MessengerConfig").MPT>0,c=b("getPageIDFromThreadID")(this.props.thread.thread_id);return a&&c===null};d.$22=function(){return b("getPageIDFromThreadID")(this.props.thread.thread_id)!=null};d.$13=function(a){if(!b("CurrentUser").isWorkUser())return v;switch(a){case b("MessengerThreadlistWorkDenseMode").QUICK_CHAT:case b("MessengerThreadlistWorkDenseMode").TEAMWORK:return w;default:return v}};return c}(b("React").PureComponent);c.propTypes={isActive:(d=b("prop-types")).bool.isRequired,blockedIds:d.any,isActionsFocused:d.bool,isFocused:d.bool,isMuted:d.bool.isRequired,isDoNotDisturb:d.bool,isPresenceForWork:d.bool,isDenseRow:d.bool,lastMessage:d.object,logClickHandler:d.func,onArchive:d.func.isRequired,onDelete:d.func.isRequired,onMarkRead:d.func.isRequired,onMarkSpam:d.func.isRequired,onMarkUnread:d.func.isRequired,onMute:d.func.isRequired,onPin:d.func.isRequired,onSelect:d.func.isRequired,onUnmute:d.func.isRequired,onIgnore:d.func.isRequired,onBlock:d.func.isRequired,onUnblock:d.func.isRequired,onUnpin:d.func.isRequired,participants:d.instanceOf(b("immutable").Map).isRequired,readReceipts:d.instanceOf(b("immutable").OrderedMap).isRequired,registerThreadRefs:d.func,thread:d.instanceOf(b("ImmutableObject")).isRequired,viewer:d.string.isRequired};function a(a,b){return"row_header_id_"+a+(b==null?"":b)}e.exports=c}),null);
__d("MessengerThreadlistRowContainer.react",["fbt","requireCond","CurrentUser","IgnoreMessagesTypedLogger","ImmutableObject","MercuryIDs","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","cr:998178","MercuryThreadlistRowContainer.react","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerConfirmLeaveGroupDialogReact.bs","MessengerDialogs.bs","MessengerEnvironment","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerReadReceipt.bs","MessengerState.bs","cr:998179","MessengerThreadlistRow.react","MNPlatformTagsDataManager","React","ReactComponentWithPureRenderMixin","ReactDOM","createReactClass_DEPRECATED","prop-types","withMessengerSource"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent;c=b("createReactClass_DEPRECATED")({displayName:"MessengerThreadlistRowContainer",mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{blockedIds:(a=b("prop-types")).any,isActive:a.bool.isRequired,isTabbable:a.bool,folder:a.string,onScrollIntoView:a.func,onOverrideSelect:a.func,showActions:a.bool,readReceipts:a.any,thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired,source:a.string.isRequired},componentDidUpdate:function(a){var c=this.props,d=c.onScrollIntoView;c=c.isActive;c&&!a.isActive&&d&&d(b("ReactDOM").findDOMNode(this))},render:function(){var a=this.props.thread.thread_id;a=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a,0,1)[0]||null;var c=b("MessengerReadReceipt.bs").getSeenTimestamps(this.props.readReceipts,this.props.thread.thread_id);if(this.props.thread.thread_type===6&&b("cr:998178")&&b("cr:998179")&&b("MessengerEnvironment").messengerdotcom)return b("React").jsx(b("cr:998178"),babelHelpers["extends"]({},this.props,{ChildClass:b("cr:998179")}));else return b("React").jsx(b("MercuryThreadlistRowContainer.react"),babelHelpers["extends"]({},this.props,{ChildClass:b("MessengerThreadlistRow.react"),isMuted:b("MercuryThreadInfo").isMuted(this.props.thread),lastMessage:a,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onPin:this._handlePin,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onUnpin:this._handleUnpin,onIgnore:this._handleIgnore,onBlock:this._handleBlockFromSettingOrDecline,onUnblock:this._handleUnblock,readReceipts:c,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}))},_handleArchive:function(){var a=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleDelete:function(){var a=this.props.isActive;this._getThreadActions()["delete"](this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function(){var a=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);a&&b("MessengerActions").selectThread(null)},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function(a){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,a)},_handlePin:function(){this._getThreadActions().pin(this.props.thread.thread_id,"menu_item_in_thread_row")},_handleUnpin:function(){this._getThreadActions().unpin(this.props.thread.thread_id,"menu_item_in_thread_row")},_handleSelect:function(){__p&&__p();var a=b("CurrentUser").getID();a=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.thread.thread_id,a);if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return}b("MessengerActions").selectThread(this.props.thread.thread_id);var c=b("MercuryIDs").getUserIDFromThreadID(this.props.thread.thread_id),d;switch(this.props.folder){case"inbox":d="inbox";break;case"pending":d="pending";break;case"other":d="other";break}this.props.thread.folder!==b("MessagingTag").INBOX&&new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_thread_open").setThreadID(c).setSurface(d).setFolderType(this.props.thread.folder).setThreadKey(a).log();b("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread("source:messenger:web_search",c)},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleLeaveGroup:function(){var a=this;if(this.props.viewer){var c=b("MessengerAdminGroupUtils").isAdmin(this.props.thread.admins,this.props.viewer);b("MessengerDialogs.bs").showDialog(function(){return b("React").jsx(h,{onLeave:a._onLeaveGroupConfirm,isViewerAdmin:c,thread:a.props.thread})})}},_handleIgnore:function(){var a=this.props.isActive;this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");a&&b("MessengerActions").selectThread(null);new(b("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlockFromSettingOrDecline:function(){var a=this.props.thread.thread_id;a=b("MercuryIDs").isGroupChat(a);if(a){this._handleIgnore();return}a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(this.props.thread.other_user_fbid));a=a&&a.short_name||g._("sender");this._handleConfirmBlock(a)},_handleConfirmBlock:function(a){var b=this,c=this.props.thread.thread_id;c&&this._getThreadActions().blockIgnoreOnMessengerDotCom(this.props.isActive,c,function(){b._handleAfterBlock(a)})},_handleAfterBlock:function(a){a=this.props.thread;var c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(a.thread_id,b("CurrentUser").getID()),d=!!a&&b("MessageRequestUtils").isFiltered(a);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.thread_id)).setSurface("thread").setFolderType(d?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(c).setEntryPoint(null).log()},_handleUnblock:function(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_onLeaveGroupConfirm:function(){if(!b("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var a=this._getMessageObject().constructLogMessageObject(this.props.source,this.props.thread.thread_id,"log:unsubscribe",{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(a)}},_getThreadActions:function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function(){return b("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function(){return b("MercuryMessageObject").getForFBID(this.props.viewer)}});e.exports=b("withMessengerSource")(c,!0)}),null);
__d("BootloadableMessengerUniversalSearchFunnelLogger.bs",["Bootload.bs","Bootloader","MessengerUniversalSearchFunnelLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){b("Bootloader").loadModules(["MessengerUniversalSearchFunnelLogger.bs"],a,"BootloadableMessengerUniversalSearchFunnelLogger.bs");return 0}a={doLoad:a};var g=b("Bootload.bs").Create(a);function c(a,c,d,e){b("MessengerUniversalSearchFunnelLogger").startFunnel(a,c,d);return 0}function d(a,c,d,e,f,g){b("MessengerUniversalSearchFunnelLogger").endFunnel(a,c,d,e,f);return 0}function e(a,c){b("MessengerUniversalSearchFunnelLogger").logQueryChanged(a);return 0}function h(a,c,d,e,f,g){b("MessengerUniversalSearchFunnelLogger").logResultSelected(a,c,d,e,f);return 0}c={startFunnel:c,endFunnel:d,logQueryChanged:e,logResultSelected:h};f.FunnelLoggerForBootload=a;f.Loadable=g;f.FunnelLogger=c}),null);